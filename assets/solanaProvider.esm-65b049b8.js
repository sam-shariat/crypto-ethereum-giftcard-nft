import{f as ka,i as Ia,ac as wo,r as vo,c as Oe,aa as Ra,g as cr,b as Ta,ad as La,ae as Ca,af as Pa,ag as Ua,ah as Oa,ai as Na,aj as Fa,L as qa,h as nn,C as Zn,Z as Gt,ak as Ls,W as Yi,J as Ji,al as Rn,am as hi}from"./base.esm-5626fa93.js";import{B as Qi,p as ts,d as Ha}from"./baseProvider.esm-6d180188.js";import{i as es}from"./interopRequireDefault-a67edd7c.js";import{r as bo}from"./index-14760aac.js";import{n as Da}from"./nacl-fast-620d5134.js";var zt={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(s){const t=ka,e=Ia,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=l,s.SlowBuffer=F,s.INSPECT_MAX_BYTES=50;const a=2147483647;s.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const b=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(b,f),b.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(b){if(b>a)throw new RangeError('The value "'+b+'" is invalid for option "size"');const f=new Uint8Array(b);return Object.setPrototypeOf(f,l.prototype),f}function l(b,f,d){if(typeof b=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(b)}return v(b,f,d)}l.poolSize=8192;function v(b,f,d){if(typeof b=="string")return T(b,f);if(ArrayBuffer.isView(b))return L(b);if(b==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(ve(b,ArrayBuffer)||b&&ve(b.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ve(b,SharedArrayBuffer)||b&&ve(b.buffer,SharedArrayBuffer)))return R(b,f,d);if(typeof b=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const M=b.valueOf&&b.valueOf();if(M!=null&&M!==b)return l.from(M,f,d);const A=U(b);if(A)return A;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof b[Symbol.toPrimitive]=="function")return l.from(b[Symbol.toPrimitive]("string"),f,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b)}l.from=function(b,f,d){return v(b,f,d)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function S(b){if(typeof b!="number")throw new TypeError('"size" argument must be of type number');if(b<0)throw new RangeError('The value "'+b+'" is invalid for option "size"')}function B(b,f,d){return S(b),b<=0?u(b):f!==void 0?typeof d=="string"?u(b).fill(f,d):u(b).fill(f):u(b)}l.alloc=function(b,f,d){return B(b,f,d)};function E(b){return S(b),u(b<0?0:q(b)|0)}l.allocUnsafe=function(b){return E(b)},l.allocUnsafeSlow=function(b){return E(b)};function T(b,f){if((typeof f!="string"||f==="")&&(f="utf8"),!l.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const d=N(b,f)|0;let M=u(d);const A=M.write(b,f);return A!==d&&(M=M.slice(0,A)),M}function I(b){const f=b.length<0?0:q(b.length)|0,d=u(f);for(let M=0;M<f;M+=1)d[M]=b[M]&255;return d}function L(b){if(ve(b,Uint8Array)){const f=new Uint8Array(b);return R(f.buffer,f.byteOffset,f.byteLength)}return I(b)}function R(b,f,d){if(f<0||b.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<f+(d||0))throw new RangeError('"length" is outside of buffer bounds');let M;return f===void 0&&d===void 0?M=new Uint8Array(b):d===void 0?M=new Uint8Array(b,f):M=new Uint8Array(b,f,d),Object.setPrototypeOf(M,l.prototype),M}function U(b){if(l.isBuffer(b)){const f=q(b.length)|0,d=u(f);return d.length===0||b.copy(d,0,0,f),d}if(b.length!==void 0)return typeof b.length!="number"||gt(b.length)?u(0):I(b);if(b.type==="Buffer"&&Array.isArray(b.data))return I(b.data)}function q(b){if(b>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return b|0}function F(b){return+b!=b&&(b=0),l.alloc(+b)}l.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==l.prototype},l.compare=function(f,d){if(ve(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),ve(d,Uint8Array)&&(d=l.from(d,d.offset,d.byteLength)),!l.isBuffer(f)||!l.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===d)return 0;let M=f.length,A=d.length;for(let k=0,C=Math.min(M,A);k<C;++k)if(f[k]!==d[k]){M=f[k],A=d[k];break}return M<A?-1:A<M?1:0},l.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(f,d){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return l.alloc(0);let M;if(d===void 0)for(d=0,M=0;M<f.length;++M)d+=f[M].length;const A=l.allocUnsafe(d);let k=0;for(M=0;M<f.length;++M){let C=f[M];if(ve(C,Uint8Array))k+C.length>A.length?(l.isBuffer(C)||(C=l.from(C)),C.copy(A,k)):Uint8Array.prototype.set.call(A,C,k);else if(l.isBuffer(C))C.copy(A,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=C.length}return A};function N(b,f){if(l.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||ve(b,ArrayBuffer))return b.byteLength;if(typeof b!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);const d=b.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&d===0)return 0;let A=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return pt(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return wt(b).length;default:if(A)return M?-1:pt(b).length;f=(""+f).toLowerCase(),A=!0}}l.byteLength=N;function J(b,f,d){let M=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,f>>>=0,d<=f))return"";for(b||(b="utf8");;)switch(b){case"hex":return x(this,f,d);case"utf8":case"utf-8":return n(this,f,d);case"ascii":return g(this,f,d);case"latin1":case"binary":return y(this,f,d);case"base64":return w(this,f,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,f,d);default:if(M)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),M=!0}}l.prototype._isBuffer=!0;function H(b,f,d){const M=b[f];b[f]=b[d],b[d]=M}l.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<f;d+=2)H(this,d,d+1);return this},l.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<f;d+=4)H(this,d,d+3),H(this,d+1,d+2);return this},l.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<f;d+=8)H(this,d,d+7),H(this,d+1,d+6),H(this,d+2,d+5),H(this,d+3,d+4);return this},l.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?n(this,0,f):J.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(f){if(!l.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:l.compare(this,f)===0},l.prototype.inspect=function(){let f="";const d=s.INSPECT_MAX_BYTES;return f=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(f+=" ... "),"<Buffer "+f+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(f,d,M,A,k){if(ve(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),!l.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(d===void 0&&(d=0),M===void 0&&(M=f?f.length:0),A===void 0&&(A=0),k===void 0&&(k=this.length),d<0||M>f.length||A<0||k>this.length)throw new RangeError("out of range index");if(A>=k&&d>=M)return 0;if(A>=k)return-1;if(d>=M)return 1;if(d>>>=0,M>>>=0,A>>>=0,k>>>=0,this===f)return 0;let C=k-A,vt=M-d;const et=Math.min(C,vt),tt=this.slice(A,k),re=f.slice(d,M);for(let Q=0;Q<et;++Q)if(tt[Q]!==re[Q]){C=tt[Q],vt=re[Q];break}return C<vt?-1:vt<C?1:0};function Z(b,f,d,M,A){if(b.length===0)return-1;if(typeof d=="string"?(M=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,gt(d)&&(d=A?0:b.length-1),d<0&&(d=b.length+d),d>=b.length){if(A)return-1;d=b.length-1}else if(d<0)if(A)d=0;else return-1;if(typeof f=="string"&&(f=l.from(f,M)),l.isBuffer(f))return f.length===0?-1:j(b,f,d,M,A);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(b,f,d):Uint8Array.prototype.lastIndexOf.call(b,f,d):j(b,[f],d,M,A);throw new TypeError("val must be string, number or Buffer")}function j(b,f,d,M,A){let k=1,C=b.length,vt=f.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(b.length<2||f.length<2)return-1;k=2,C/=2,vt/=2,d/=2}function et(re,Q){return k===1?re[Q]:re.readUInt16BE(Q*k)}let tt;if(A){let re=-1;for(tt=d;tt<C;tt++)if(et(b,tt)===et(f,re===-1?0:tt-re)){if(re===-1&&(re=tt),tt-re+1===vt)return re*k}else re!==-1&&(tt-=tt-re),re=-1}else for(d+vt>C&&(d=C-vt),tt=d;tt>=0;tt--){let re=!0;for(let Q=0;Q<vt;Q++)if(et(b,tt+Q)!==et(f,Q)){re=!1;break}if(re)return tt}return-1}l.prototype.includes=function(f,d,M){return this.indexOf(f,d,M)!==-1},l.prototype.indexOf=function(f,d,M){return Z(this,f,d,M,!0)},l.prototype.lastIndexOf=function(f,d,M){return Z(this,f,d,M,!1)};function it(b,f,d,M){d=Number(d)||0;const A=b.length-d;M?(M=Number(M),M>A&&(M=A)):M=A;const k=f.length;M>k/2&&(M=k/2);let C;for(C=0;C<M;++C){const vt=parseInt(f.substr(C*2,2),16);if(gt(vt))return C;b[d+C]=vt}return C}function jt(b,f,d,M){return dt(pt(f,b.length-d),b,d,M)}function ce(b,f,d,M){return dt(Mt(f),b,d,M)}function at(b,f,d,M){return dt(wt(f),b,d,M)}function ne(b,f,d,M){return dt(fr(f,b.length-d),b,d,M)}l.prototype.write=function(f,d,M,A){if(d===void 0)A="utf8",M=this.length,d=0;else if(M===void 0&&typeof d=="string")A=d,M=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(M)?(M=M>>>0,A===void 0&&(A="utf8")):(A=M,M=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-d;if((M===void 0||M>k)&&(M=k),f.length>0&&(M<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let C=!1;for(;;)switch(A){case"hex":return it(this,f,d,M);case"utf8":case"utf-8":return jt(this,f,d,M);case"ascii":case"latin1":case"binary":return ce(this,f,d,M);case"base64":return at(this,f,d,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,f,d,M);default:if(C)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),C=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(b,f,d){return f===0&&d===b.length?t.fromByteArray(b):t.fromByteArray(b.slice(f,d))}function n(b,f,d){d=Math.min(b.length,d);const M=[];let A=f;for(;A<d;){const k=b[A];let C=null,vt=k>239?4:k>223?3:k>191?2:1;if(A+vt<=d){let et,tt,re,Q;switch(vt){case 1:k<128&&(C=k);break;case 2:et=b[A+1],(et&192)===128&&(Q=(k&31)<<6|et&63,Q>127&&(C=Q));break;case 3:et=b[A+1],tt=b[A+2],(et&192)===128&&(tt&192)===128&&(Q=(k&15)<<12|(et&63)<<6|tt&63,Q>2047&&(Q<55296||Q>57343)&&(C=Q));break;case 4:et=b[A+1],tt=b[A+2],re=b[A+3],(et&192)===128&&(tt&192)===128&&(re&192)===128&&(Q=(k&15)<<18|(et&63)<<12|(tt&63)<<6|re&63,Q>65535&&Q<1114112&&(C=Q))}}C===null?(C=65533,vt=1):C>65535&&(C-=65536,M.push(C>>>10&1023|55296),C=56320|C&1023),M.push(C),A+=vt}return h(M)}const c=4096;function h(b){const f=b.length;if(f<=c)return String.fromCharCode.apply(String,b);let d="",M=0;for(;M<f;)d+=String.fromCharCode.apply(String,b.slice(M,M+=c));return d}function g(b,f,d){let M="";d=Math.min(b.length,d);for(let A=f;A<d;++A)M+=String.fromCharCode(b[A]&127);return M}function y(b,f,d){let M="";d=Math.min(b.length,d);for(let A=f;A<d;++A)M+=String.fromCharCode(b[A]);return M}function x(b,f,d){const M=b.length;(!f||f<0)&&(f=0),(!d||d<0||d>M)&&(d=M);let A="";for(let k=f;k<d;++k)A+=_t[b[k]];return A}function _(b,f,d){const M=b.slice(f,d);let A="";for(let k=0;k<M.length-1;k+=2)A+=String.fromCharCode(M[k]+M[k+1]*256);return A}l.prototype.slice=function(f,d){const M=this.length;f=~~f,d=d===void 0?M:~~d,f<0?(f+=M,f<0&&(f=0)):f>M&&(f=M),d<0?(d+=M,d<0&&(d=0)):d>M&&(d=M),d<f&&(d=f);const A=this.subarray(f,d);return Object.setPrototypeOf(A,l.prototype),A};function p(b,f,d){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+f>d)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(f,d,M){f=f>>>0,d=d>>>0,M||p(f,d,this.length);let A=this[f],k=1,C=0;for(;++C<d&&(k*=256);)A+=this[f+C]*k;return A},l.prototype.readUintBE=l.prototype.readUIntBE=function(f,d,M){f=f>>>0,d=d>>>0,M||p(f,d,this.length);let A=this[f+--d],k=1;for(;d>0&&(k*=256);)A+=this[f+--d]*k;return A},l.prototype.readUint8=l.prototype.readUInt8=function(f,d){return f=f>>>0,d||p(f,1,this.length),this[f]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(f,d){return f=f>>>0,d||p(f,2,this.length),this[f]|this[f+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(f,d){return f=f>>>0,d||p(f,2,this.length),this[f]<<8|this[f+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(f,d){return f=f>>>0,d||p(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(f,d){return f=f>>>0,d||p(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},l.prototype.readBigUInt64LE=Me(function(f){f=f>>>0,Ie(f,"offset");const d=this[f],M=this[f+7];(d===void 0||M===void 0)&&lt(f,this.length-8);const A=d+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,k=this[++f]+this[++f]*2**8+this[++f]*2**16+M*2**24;return BigInt(A)+(BigInt(k)<<BigInt(32))}),l.prototype.readBigUInt64BE=Me(function(f){f=f>>>0,Ie(f,"offset");const d=this[f],M=this[f+7];(d===void 0||M===void 0)&&lt(f,this.length-8);const A=d*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],k=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+M;return(BigInt(A)<<BigInt(32))+BigInt(k)}),l.prototype.readIntLE=function(f,d,M){f=f>>>0,d=d>>>0,M||p(f,d,this.length);let A=this[f],k=1,C=0;for(;++C<d&&(k*=256);)A+=this[f+C]*k;return k*=128,A>=k&&(A-=Math.pow(2,8*d)),A},l.prototype.readIntBE=function(f,d,M){f=f>>>0,d=d>>>0,M||p(f,d,this.length);let A=d,k=1,C=this[f+--A];for(;A>0&&(k*=256);)C+=this[f+--A]*k;return k*=128,C>=k&&(C-=Math.pow(2,8*d)),C},l.prototype.readInt8=function(f,d){return f=f>>>0,d||p(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},l.prototype.readInt16LE=function(f,d){f=f>>>0,d||p(f,2,this.length);const M=this[f]|this[f+1]<<8;return M&32768?M|4294901760:M},l.prototype.readInt16BE=function(f,d){f=f>>>0,d||p(f,2,this.length);const M=this[f+1]|this[f]<<8;return M&32768?M|4294901760:M},l.prototype.readInt32LE=function(f,d){return f=f>>>0,d||p(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},l.prototype.readInt32BE=function(f,d){return f=f>>>0,d||p(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},l.prototype.readBigInt64LE=Me(function(f){f=f>>>0,Ie(f,"offset");const d=this[f],M=this[f+7];(d===void 0||M===void 0)&&lt(f,this.length-8);const A=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(M<<24);return(BigInt(A)<<BigInt(32))+BigInt(d+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),l.prototype.readBigInt64BE=Me(function(f){f=f>>>0,Ie(f,"offset");const d=this[f],M=this[f+7];(d===void 0||M===void 0)&&lt(f,this.length-8);const A=(d<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(A)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+M)}),l.prototype.readFloatLE=function(f,d){return f=f>>>0,d||p(f,4,this.length),e.read(this,f,!0,23,4)},l.prototype.readFloatBE=function(f,d){return f=f>>>0,d||p(f,4,this.length),e.read(this,f,!1,23,4)},l.prototype.readDoubleLE=function(f,d){return f=f>>>0,d||p(f,8,this.length),e.read(this,f,!0,52,8)},l.prototype.readDoubleBE=function(f,d){return f=f>>>0,d||p(f,8,this.length),e.read(this,f,!1,52,8)};function o(b,f,d,M,A,k){if(!l.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>A||f<k)throw new RangeError('"value" argument is out of bounds');if(d+M>b.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(f,d,M,A){if(f=+f,d=d>>>0,M=M>>>0,!A){const vt=Math.pow(2,8*M)-1;o(this,f,d,M,vt,0)}let k=1,C=0;for(this[d]=f&255;++C<M&&(k*=256);)this[d+C]=f/k&255;return d+M},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(f,d,M,A){if(f=+f,d=d>>>0,M=M>>>0,!A){const vt=Math.pow(2,8*M)-1;o(this,f,d,M,vt,0)}let k=M-1,C=1;for(this[d+k]=f&255;--k>=0&&(C*=256);)this[d+k]=f/C&255;return d+M},l.prototype.writeUint8=l.prototype.writeUInt8=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,1,255,0),this[d]=f&255,d+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,2,65535,0),this[d]=f&255,this[d+1]=f>>>8,d+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,2,65535,0),this[d]=f>>>8,this[d+1]=f&255,d+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,4,4294967295,0),this[d+3]=f>>>24,this[d+2]=f>>>16,this[d+1]=f>>>8,this[d]=f&255,d+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,4,4294967295,0),this[d]=f>>>24,this[d+1]=f>>>16,this[d+2]=f>>>8,this[d+3]=f&255,d+4};function m(b,f,d,M,A){yt(f,M,A,b,d,7);let k=Number(f&BigInt(4294967295));b[d++]=k,k=k>>8,b[d++]=k,k=k>>8,b[d++]=k,k=k>>8,b[d++]=k;let C=Number(f>>BigInt(32)&BigInt(4294967295));return b[d++]=C,C=C>>8,b[d++]=C,C=C>>8,b[d++]=C,C=C>>8,b[d++]=C,d}function $(b,f,d,M,A){yt(f,M,A,b,d,7);let k=Number(f&BigInt(4294967295));b[d+7]=k,k=k>>8,b[d+6]=k,k=k>>8,b[d+5]=k,k=k>>8,b[d+4]=k;let C=Number(f>>BigInt(32)&BigInt(4294967295));return b[d+3]=C,C=C>>8,b[d+2]=C,C=C>>8,b[d+1]=C,C=C>>8,b[d]=C,d+8}l.prototype.writeBigUInt64LE=Me(function(f,d=0){return m(this,f,d,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Me(function(f,d=0){return $(this,f,d,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(f,d,M,A){if(f=+f,d=d>>>0,!A){const et=Math.pow(2,8*M-1);o(this,f,d,M,et-1,-et)}let k=0,C=1,vt=0;for(this[d]=f&255;++k<M&&(C*=256);)f<0&&vt===0&&this[d+k-1]!==0&&(vt=1),this[d+k]=(f/C>>0)-vt&255;return d+M},l.prototype.writeIntBE=function(f,d,M,A){if(f=+f,d=d>>>0,!A){const et=Math.pow(2,8*M-1);o(this,f,d,M,et-1,-et)}let k=M-1,C=1,vt=0;for(this[d+k]=f&255;--k>=0&&(C*=256);)f<0&&vt===0&&this[d+k+1]!==0&&(vt=1),this[d+k]=(f/C>>0)-vt&255;return d+M},l.prototype.writeInt8=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,1,127,-128),f<0&&(f=255+f+1),this[d]=f&255,d+1},l.prototype.writeInt16LE=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,2,32767,-32768),this[d]=f&255,this[d+1]=f>>>8,d+2},l.prototype.writeInt16BE=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,2,32767,-32768),this[d]=f>>>8,this[d+1]=f&255,d+2},l.prototype.writeInt32LE=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,4,2147483647,-2147483648),this[d]=f&255,this[d+1]=f>>>8,this[d+2]=f>>>16,this[d+3]=f>>>24,d+4},l.prototype.writeInt32BE=function(f,d,M){return f=+f,d=d>>>0,M||o(this,f,d,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[d]=f>>>24,this[d+1]=f>>>16,this[d+2]=f>>>8,this[d+3]=f&255,d+4},l.prototype.writeBigInt64LE=Me(function(f,d=0){return m(this,f,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Me(function(f,d=0){return $(this,f,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(b,f,d,M,A,k){if(d+M>b.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function W(b,f,d,M,A){return f=+f,d=d>>>0,A||K(b,f,d,4),e.write(b,f,d,M,23,4),d+4}l.prototype.writeFloatLE=function(f,d,M){return W(this,f,d,!0,M)},l.prototype.writeFloatBE=function(f,d,M){return W(this,f,d,!1,M)};function Wt(b,f,d,M,A){return f=+f,d=d>>>0,A||K(b,f,d,8),e.write(b,f,d,M,52,8),d+8}l.prototype.writeDoubleLE=function(f,d,M){return Wt(this,f,d,!0,M)},l.prototype.writeDoubleBE=function(f,d,M){return Wt(this,f,d,!1,M)},l.prototype.copy=function(f,d,M,A){if(!l.isBuffer(f))throw new TypeError("argument should be a Buffer");if(M||(M=0),!A&&A!==0&&(A=this.length),d>=f.length&&(d=f.length),d||(d=0),A>0&&A<M&&(A=M),A===M||f.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(M<0||M>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),f.length-d<A-M&&(A=f.length-d+M);const k=A-M;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,M,A):Uint8Array.prototype.set.call(f,this.subarray(M,A),d),k},l.prototype.fill=function(f,d,M,A){if(typeof f=="string"){if(typeof d=="string"?(A=d,d=0,M=this.length):typeof M=="string"&&(A=M,M=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!l.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(f.length===1){const C=f.charCodeAt(0);(A==="utf8"&&C<128||A==="latin1")&&(f=C)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(d<0||this.length<d||this.length<M)throw new RangeError("Out of range index");if(M<=d)return this;d=d>>>0,M=M===void 0?this.length:M>>>0,f||(f=0);let k;if(typeof f=="number")for(k=d;k<M;++k)this[k]=f;else{const C=l.isBuffer(f)?f:l.from(f,A),vt=C.length;if(vt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(k=0;k<M-d;++k)this[k+d]=C[k%vt]}return this};const st={};function ht(b,f,d){st[b]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${b}]`,this.stack,delete this.name}get code(){return b}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${b}]: ${this.message}`}}}ht("ERR_BUFFER_OUT_OF_BOUNDS",function(b){return b?`${b} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ht("ERR_INVALID_ARG_TYPE",function(b,f){return`The "${b}" argument must be of type number. Received type ${typeof f}`},TypeError),ht("ERR_OUT_OF_RANGE",function(b,f,d){let M=`The value of "${b}" is out of range.`,A=d;return Number.isInteger(d)&&Math.abs(d)>2**32?A=Ve(String(d)):typeof d=="bigint"&&(A=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(A=Ve(A)),A+="n"),M+=` It must be ${f}. Received ${A}`,M},RangeError);function Ve(b){let f="",d=b.length;const M=b[0]==="-"?1:0;for(;d>=M+4;d-=3)f=`_${b.slice(d-3,d)}${f}`;return`${b.slice(0,d)}${f}`}function bt(b,f,d){Ie(f,"offset"),(b[f]===void 0||b[f+d]===void 0)&&lt(f,b.length-(d+1))}function yt(b,f,d,M,A,k){if(b>d||b<f){const C=typeof f=="bigint"?"n":"";let vt;throw k>3?f===0||f===BigInt(0)?vt=`>= 0${C} and < 2${C} ** ${(k+1)*8}${C}`:vt=`>= -(2${C} ** ${(k+1)*8-1}${C}) and < 2 ** ${(k+1)*8-1}${C}`:vt=`>= ${f}${C} and <= ${d}${C}`,new st.ERR_OUT_OF_RANGE("value",vt,b)}bt(M,A,k)}function Ie(b,f){if(typeof b!="number")throw new st.ERR_INVALID_ARG_TYPE(f,"number",b)}function lt(b,f,d){throw Math.floor(b)!==b?(Ie(b,d),new st.ERR_OUT_OF_RANGE(d||"offset","an integer",b)):f<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(d||"offset",`>= ${d?1:0} and <= ${f}`,b)}const xt=/[^+/0-9A-Za-z-_]/g;function hr(b){if(b=b.split("=")[0],b=b.trim().replace(xt,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function pt(b,f){f=f||1/0;let d;const M=b.length;let A=null;const k=[];for(let C=0;C<M;++C){if(d=b.charCodeAt(C),d>55295&&d<57344){if(!A){if(d>56319){(f-=3)>-1&&k.push(239,191,189);continue}else if(C+1===M){(f-=3)>-1&&k.push(239,191,189);continue}A=d;continue}if(d<56320){(f-=3)>-1&&k.push(239,191,189),A=d;continue}d=(A-55296<<10|d-56320)+65536}else A&&(f-=3)>-1&&k.push(239,191,189);if(A=null,d<128){if((f-=1)<0)break;k.push(d)}else if(d<2048){if((f-=2)<0)break;k.push(d>>6|192,d&63|128)}else if(d<65536){if((f-=3)<0)break;k.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((f-=4)<0)break;k.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return k}function Mt(b){const f=[];for(let d=0;d<b.length;++d)f.push(b.charCodeAt(d)&255);return f}function fr(b,f){let d,M,A;const k=[];for(let C=0;C<b.length&&!((f-=2)<0);++C)d=b.charCodeAt(C),M=d>>8,A=d%256,k.push(A),k.push(M);return k}function wt(b){return t.toByteArray(hr(b))}function dt(b,f,d,M){let A;for(A=0;A<M&&!(A+d>=f.length||A>=b.length);++A)f[A+d]=b[A];return A}function ve(b,f){return b instanceof f||b!=null&&b.constructor!=null&&b.constructor.name!=null&&b.constructor.name===f.name}function gt(b){return b!==b}const _t=function(){const b="0123456789abcdef",f=new Array(256);for(let d=0;d<16;++d){const M=d*16;for(let A=0;A<16;++A)f[M+A]=b[d]+b[A]}return f}();function Me(b){return typeof BigInt>"u"?St:b}function St(){throw new Error("BigInt not supported")}})(zt);function Oi(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function za(s){if(typeof s!="boolean")throw new Error(`Expected boolean, not ${s}`)}function xo(s,...t){if(!(s instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(s.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${s.length}`)}function Ka(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Oi(s.outputLen),Oi(s.blockLen)}function $a(s,t=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(t&&s.finished)throw new Error("Hash#digest() has already been called")}function Wa(s,t){xo(s);const e=t.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Ae={number:Oi,bool:za,bytes:xo,hash:Ka,exists:$a,output:Wa};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ga=s=>new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)),Mi=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),qe=(s,t)=>s<<32-t|s>>>t,Za=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Za)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function ja(s){if(typeof s!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof s}`);return new TextEncoder().encode(s)}function Tn(s){if(typeof s=="string"&&(s=ja(s)),!(s instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof s})`);return s}class rs{clone(){return this._cloneInto()}}function qr(s){const t=r=>s().update(Tn(r)).digest(),e=s();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>s(),t}function Va(s){const t=(r,a)=>s(a).update(Tn(r)).digest(),e=s({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=r=>s(r),t}function Xa(s,t,e,r){if(typeof s.setBigUint64=="function")return s.setBigUint64(t,e,r);const a=BigInt(32),i=BigInt(4294967295),u=Number(e>>a&i),l=Number(e&i),v=r?4:0,S=r?0:4;s.setUint32(t+v,u,r),s.setUint32(t+S,l,r)}class Mo extends rs{constructor(t,e,r,a){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Mi(this.buffer)}update(t){Ae.exists(this);const{view:e,buffer:r,blockLen:a}=this;t=Tn(t);const i=t.length;for(let u=0;u<i;){const l=Math.min(a-this.pos,i-u);if(l===a){const v=Mi(t);for(;a<=i-u;u+=a)this.process(v,u);continue}r.set(t.subarray(u,u+l),this.pos),this.pos+=l,u+=l,this.pos===a&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ae.exists(this),Ae.output(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:a,isLE:i}=this;let{pos:u}=this;e[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>a-u&&(this.process(r,0),u=0);for(let E=u;E<a;E++)e[E]=0;Xa(r,a-8,BigInt(this.length*8),i),this.process(r,0);const l=Mi(t),v=this.outputLen;if(v%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const S=v/4,B=this.get();if(S>B.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<S;E++)l.setUint32(4*E,B[E],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:a,finished:i,destroyed:u,pos:l}=this;return t.length=a,t.pos=l,t.finished=i,t.destroyed=u,a%e&&t.buffer.set(r),t}}const Fn=BigInt(2**32-1),Ni=BigInt(32);function _o(s,t=!1){return t?{h:Number(s&Fn),l:Number(s>>Ni&Fn)}:{h:Number(s>>Ni&Fn)|0,l:Number(s&Fn)|0}}function Ya(s,t=!1){let e=new Uint32Array(s.length),r=new Uint32Array(s.length);for(let a=0;a<s.length;a++){const{h:i,l:u}=_o(s[a],t);[e[a],r[a]]=[i,u]}return[e,r]}const Ja=(s,t)=>BigInt(s>>>0)<<Ni|BigInt(t>>>0),Qa=(s,t,e)=>s>>>e,tc=(s,t,e)=>s<<32-e|t>>>e,ec=(s,t,e)=>s>>>e|t<<32-e,rc=(s,t,e)=>s<<32-e|t>>>e,nc=(s,t,e)=>s<<64-e|t>>>e-32,ic=(s,t,e)=>s>>>e-32|t<<64-e,sc=(s,t)=>t,oc=(s,t)=>s,ac=(s,t,e)=>s<<e|t>>>32-e,cc=(s,t,e)=>t<<e|s>>>32-e,uc=(s,t,e)=>t<<e-32|s>>>64-e,hc=(s,t,e)=>s<<e-32|t>>>64-e;function fc(s,t,e,r){const a=(t>>>0)+(r>>>0);return{h:s+e+(a/2**32|0)|0,l:a|0}}const lc=(s,t,e)=>(s>>>0)+(t>>>0)+(e>>>0),dc=(s,t,e,r)=>t+e+r+(s/2**32|0)|0,pc=(s,t,e,r)=>(s>>>0)+(t>>>0)+(e>>>0)+(r>>>0),gc=(s,t,e,r,a)=>t+e+r+a+(s/2**32|0)|0,mc=(s,t,e,r,a)=>(s>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(a>>>0),yc=(s,t,e,r,a,i)=>t+e+r+a+i+(s/2**32|0)|0,mt={fromBig:_o,split:Ya,toBig:Ja,shrSH:Qa,shrSL:tc,rotrSH:ec,rotrSL:rc,rotrBH:nc,rotrBL:ic,rotr32H:sc,rotr32L:oc,rotlSH:ac,rotlSL:cc,rotlBH:uc,rotlBL:hc,add:fc,add3L:lc,add3H:dc,add4L:pc,add4H:gc,add5H:yc,add5L:mc},[wc,vc]=mt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),Xe=new Uint32Array(80),Ye=new Uint32Array(80);class fi extends Mo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:a,Ch:i,Cl:u,Dh:l,Dl:v,Eh:S,El:B,Fh:E,Fl:T,Gh:I,Gl:L,Hh:R,Hl:U}=this;return[t,e,r,a,i,u,l,v,S,B,E,T,I,L,R,U]}set(t,e,r,a,i,u,l,v,S,B,E,T,I,L,R,U){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=a|0,this.Ch=i|0,this.Cl=u|0,this.Dh=l|0,this.Dl=v|0,this.Eh=S|0,this.El=B|0,this.Fh=E|0,this.Fl=T|0,this.Gh=I|0,this.Gl=L|0,this.Hh=R|0,this.Hl=U|0}process(t,e){for(let N=0;N<16;N++,e+=4)Xe[N]=t.getUint32(e),Ye[N]=t.getUint32(e+=4);for(let N=16;N<80;N++){const J=Xe[N-15]|0,H=Ye[N-15]|0,Z=mt.rotrSH(J,H,1)^mt.rotrSH(J,H,8)^mt.shrSH(J,H,7),j=mt.rotrSL(J,H,1)^mt.rotrSL(J,H,8)^mt.shrSL(J,H,7),it=Xe[N-2]|0,jt=Ye[N-2]|0,ce=mt.rotrSH(it,jt,19)^mt.rotrBH(it,jt,61)^mt.shrSH(it,jt,6),at=mt.rotrSL(it,jt,19)^mt.rotrBL(it,jt,61)^mt.shrSL(it,jt,6),ne=mt.add4L(j,at,Ye[N-7],Ye[N-16]),w=mt.add4H(ne,Z,ce,Xe[N-7],Xe[N-16]);Xe[N]=w|0,Ye[N]=ne|0}let{Ah:r,Al:a,Bh:i,Bl:u,Ch:l,Cl:v,Dh:S,Dl:B,Eh:E,El:T,Fh:I,Fl:L,Gh:R,Gl:U,Hh:q,Hl:F}=this;for(let N=0;N<80;N++){const J=mt.rotrSH(E,T,14)^mt.rotrSH(E,T,18)^mt.rotrBH(E,T,41),H=mt.rotrSL(E,T,14)^mt.rotrSL(E,T,18)^mt.rotrBL(E,T,41),Z=E&I^~E&R,j=T&L^~T&U,it=mt.add5L(F,H,j,vc[N],Ye[N]),jt=mt.add5H(it,q,J,Z,wc[N],Xe[N]),ce=it|0,at=mt.rotrSH(r,a,28)^mt.rotrBH(r,a,34)^mt.rotrBH(r,a,39),ne=mt.rotrSL(r,a,28)^mt.rotrBL(r,a,34)^mt.rotrBL(r,a,39),w=r&i^r&l^i&l,n=a&u^a&v^u&v;q=R|0,F=U|0,R=I|0,U=L|0,I=E|0,L=T|0,{h:E,l:T}=mt.add(S|0,B|0,jt|0,ce|0),S=l|0,B=v|0,l=i|0,v=u|0,i=r|0,u=a|0;const c=mt.add3L(ce,ne,n);r=mt.add3H(c,jt,at,w),a=c|0}({h:r,l:a}=mt.add(this.Ah|0,this.Al|0,r|0,a|0)),{h:i,l:u}=mt.add(this.Bh|0,this.Bl|0,i|0,u|0),{h:l,l:v}=mt.add(this.Ch|0,this.Cl|0,l|0,v|0),{h:S,l:B}=mt.add(this.Dh|0,this.Dl|0,S|0,B|0),{h:E,l:T}=mt.add(this.Eh|0,this.El|0,E|0,T|0),{h:I,l:L}=mt.add(this.Fh|0,this.Fl|0,I|0,L|0),{h:R,l:U}=mt.add(this.Gh|0,this.Gl|0,R|0,U|0),{h:q,l:F}=mt.add(this.Hh|0,this.Hl|0,q|0,F|0),this.set(r,a,i,u,l,v,S,B,E,T,I,L,R,U,q,F)}roundClean(){Xe.fill(0),Ye.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class bc extends fi{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class xc extends fi{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Mc extends fi{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const _c=qr(()=>new fi);qr(()=>new bc);qr(()=>new xc);qr(()=>new Mc);/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const we=BigInt(0),Zt=BigInt(1),Vr=BigInt(2),Cs=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),ie=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Cs,n:Cs,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),So=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Mn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const Sc=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Ec=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Bc=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Ac=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class Vt{constructor(t,e,r,a){this.x=t,this.y=e,this.z=r,this.t=a}static fromAffine(t){if(!(t instanceof fe))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(fe.ZERO)?Vt.ZERO:new Vt(t.x,t.y,Zt,D(t.x*t.y))}static toAffineBatch(t){const e=Rc(t.map(r=>r.z));return t.map((r,a)=>r.toAffine(e[a]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){Ps(t);const{x:e,y:r,z:a}=this,{x:i,y:u,z:l}=t,v=D(e*l),S=D(i*a),B=D(r*l),E=D(u*a);return v===S&&B===E}negate(){return new Vt(D(-this.x),this.y,this.z,D(-this.t))}double(){const{x:t,y:e,z:r}=this,{a}=ie,i=D(t*t),u=D(e*e),l=D(Vr*D(r*r)),v=D(a*i),S=t+e,B=D(D(S*S)-i-u),E=v+u,T=E-l,I=v-u,L=D(B*T),R=D(E*I),U=D(B*I),q=D(T*E);return new Vt(L,R,q,U)}add(t){Ps(t);const{x:e,y:r,z:a,t:i}=this,{x:u,y:l,z:v,t:S}=t,B=D((r-e)*(l+u)),E=D((r+e)*(l-u)),T=D(E-B);if(T===we)return this.double();const I=D(a*Vr*S),L=D(i*Vr*v),R=L+I,U=E+B,q=L-I,F=D(R*T),N=D(U*q),J=D(R*q),H=D(T*U);return new Vt(F,N,H,J)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,r=[];let a=this,i=a;for(let u=0;u<e;u++){i=a,r.push(i);for(let l=1;l<2**(t-1);l++)i=i.add(a),r.push(i);a=i.double()}return r}wNAF(t,e){!e&&this.equals(Vt.BASE)&&(e=fe.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let a=e&&Fi.get(e);a||(a=this.precomputeWindow(r),e&&r!==1&&(a=Vt.normalizeZ(a),Fi.set(e,a)));let i=Vt.ZERO,u=Vt.ZERO;const l=1+256/r,v=2**(r-1),S=BigInt(2**r-1),B=2**r,E=BigInt(r);for(let T=0;T<l;T++){const I=T*v;let L=Number(t&S);if(t>>=E,L>v&&(L-=B,t+=Zt),L===0){let R=a[I];T%2&&(R=R.negate()),u=u.add(R)}else{let R=a[I+Math.abs(L)-1];L<0&&(R=R.negate()),i=i.add(R)}}return Vt.normalizeZ([i,u])[0]}multiply(t,e){return this.wNAF(Xn(t,ie.l),e)}multiplyUnsafe(t){let e=Xn(t,ie.l,!1);const r=Vt.BASE,a=Vt.ZERO;if(e===we)return a;if(this.equals(a)||e===Zt)return this;if(this.equals(r))return this.wNAF(e);let i=a,u=this;for(;e>we;)e&Zt&&(i=i.add(u)),u=u.double(),e>>=Zt;return i}isSmallOrder(){return this.multiplyUnsafe(ie.h).equals(Vt.ZERO)}isTorsionFree(){return this.multiplyUnsafe(ie.l).equals(Vt.ZERO)}toAffine(t=li(this.z)){const{x:e,y:r,z:a}=this,i=D(e*t),u=D(r*t);if(D(a*t)!==Zt)throw new Error("invZ was invalid");return new fe(i,u)}fromRistrettoBytes(){Si()}toRistrettoBytes(){Si()}fromRistrettoHash(){Si()}}Vt.BASE=new Vt(ie.Gx,ie.Gy,Zt,D(ie.Gx*ie.Gy));Vt.ZERO=new Vt(we,Zt,Zt,we);function Ps(s){if(!(s instanceof Vt))throw new TypeError("ExtendedPoint expected")}function _i(s){if(!(s instanceof Pe))throw new TypeError("RistrettoPoint expected")}function Si(){throw new Error("Legacy method: switch to RistrettoPoint")}class Pe{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=ie,r=D(Mn*t*t),a=D((r+Zt)*Bc);let i=BigInt(-1);const u=D((i-e*r)*D(r+e));let{isValid:l,value:v}=is(a,u),S=D(v*t);er(S)||(S=D(-S)),l||(v=S),l||(i=r);const B=D(i*(r-Zt)*Ac-u),E=v*v,T=D((v+v)*u),I=D(B*Sc),L=D(Zt-E),R=D(Zt+E);return new Vt(D(T*R),D(L*I),D(I*R),D(T*L))}static hashToCurve(t){t=or(t,64);const e=Ei(t.slice(0,32)),r=this.calcElligatorRistrettoMap(e),a=Ei(t.slice(32,64)),i=this.calcElligatorRistrettoMap(a);return new Pe(r.add(i))}static fromHex(t){t=or(t,32);const{a:e,d:r}=ie,a="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=Ei(t);if(!Lc(Bn(i),t)||er(i))throw new Error(a);const u=D(i*i),l=D(Zt+e*u),v=D(Zt-e*u),S=D(l*l),B=D(v*v),E=D(e*r*S-B),{isValid:T,value:I}=Os(D(E*B)),L=D(I*v),R=D(I*L*E);let U=D((i+i)*L);er(U)&&(U=D(-U));const q=D(l*R),F=D(U*q);if(!T||er(F)||q===we)throw new Error(a);return new Pe(new Vt(U,q,Zt,F))}toRawBytes(){let{x:t,y:e,z:r,t:a}=this.ep;const i=D(D(r+e)*D(r-e)),u=D(t*e),l=D(u*u),{value:v}=Os(D(i*l)),S=D(v*i),B=D(v*u),E=D(S*B*a);let T;if(er(a*E)){let L=D(e*Mn),R=D(t*Mn);t=L,e=R,T=D(S*Ec)}else T=B;er(t*E)&&(e=D(-e));let I=D((r-e)*T);return er(I)&&(I=D(-I)),Bn(I)}toHex(){return Ln(this.toRawBytes())}toString(){return this.toHex()}equals(t){_i(t);const e=this.ep,r=t.ep,a=D(e.x*r.y)===D(e.y*r.x),i=D(e.y*r.y)===D(e.x*r.x);return a||i}add(t){return _i(t),new Pe(this.ep.add(t.ep))}subtract(t){return _i(t),new Pe(this.ep.subtract(t.ep))}multiply(t){return new Pe(this.ep.multiply(t))}multiplyUnsafe(t){return new Pe(this.ep.multiplyUnsafe(t))}}Pe.BASE=new Pe(Vt.BASE);Pe.ZERO=new Pe(Vt.ZERO);const Fi=new WeakMap;let fe=class{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Fi.delete(this)}static fromHex(t,e=!0){const{d:r,P:a}=ie;t=or(t,32);const i=t.slice();i[31]=t[31]&-129;const u=Cn(i);if(e&&u>=a)throw new Error("Expected 0 < hex < P");if(!e&&u>=So)throw new Error("Expected 0 < hex < 2**256");const l=D(u*u),v=D(l-Zt),S=D(r*l+Zt);let{isValid:B,value:E}=is(v,S);if(!B)throw new Error("Point.fromHex: invalid y coordinate");const T=(E&Zt)===Zt;return(t[31]&128)!==0!==T&&(E=D(-E)),new fe(E,u)}static async fromPrivateKey(t){return(await ko(t)).point}toRawBytes(){const t=Bn(this.y);return t[31]|=this.x&Zt?128:0,t}toHex(){return Ln(this.toRawBytes())}toX25519(){const{y:t}=this,e=D((Zt+t)*li(Zt-t));return Bn(e)}isTorsionFree(){return Vt.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new fe(D(-this.x),this.y)}add(t){return Vt.fromAffine(this).add(Vt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Vt.fromAffine(this).multiply(t,this).toAffine()}};fe.BASE=new fe(ie.Gx,ie.Gy);fe.ZERO=new fe(we,Zt);let jn=class{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=or(t,64),r=fe.fromHex(e.slice(0,32),!1),a=Cn(e.slice(32,64));return new jn(r,a)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof fe))throw new Error("Expected Point instance");return Xn(e,ie.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(Bn(this.s),32),t}toHex(){return Ln(this.toRawBytes())}};function Us(...s){if(!s.every(r=>r instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(s.length===1)return s[0];const t=s.reduce((r,a)=>r+a.length,0),e=new Uint8Array(t);for(let r=0,a=0;r<s.length;r++){const i=s[r];e.set(i,a),a+=i.length}return e}const kc=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function Ln(s){if(!(s instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let e=0;e<s.length;e++)t+=kc[s[e]];return t}function ns(s){if(typeof s!="string")throw new TypeError("hexToBytes: expected string, got "+typeof s);if(s.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(s.length/2);for(let e=0;e<t.length;e++){const r=e*2,a=s.slice(r,r+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function Eo(s){const e=s.toString(16).padStart(64,"0");return ns(e)}function Bn(s){return Eo(s).reverse()}function er(s){return(D(s)&Zt)===Zt}function Cn(s){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Ln(Uint8Array.from(s).reverse()))}const Ic=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ei(s){return D(Cn(s)&Ic)}function D(s,t=ie.P){const e=s%t;return e>=we?e:t+e}function li(s,t=ie.P){if(s===we||t<=we)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=D(s,t),r=t,a=we,i=Zt;for(;e!==we;){const l=r/e,v=r%e,S=a-i*l;r=e,e=v,a=i,i=S}if(r!==Zt)throw new Error("invert: does not exist");return D(a,t)}function Rc(s,t=ie.P){const e=new Array(s.length),r=s.reduce((i,u,l)=>u===we?i:(e[l]=i,D(i*u,t)),Zt),a=li(r,t);return s.reduceRight((i,u,l)=>u===we?i:(e[l]=D(i*e[l],t),D(i*u,t)),a),e}function He(s,t){const{P:e}=ie;let r=s;for(;t-- >we;)r*=r,r%=e;return r}function Tc(s){const{P:t}=ie,e=BigInt(5),r=BigInt(10),a=BigInt(20),i=BigInt(40),u=BigInt(80),v=s*s%t*s%t,S=He(v,Vr)*v%t,B=He(S,Zt)*s%t,E=He(B,e)*B%t,T=He(E,r)*E%t,I=He(T,a)*T%t,L=He(I,i)*I%t,R=He(L,u)*L%t,U=He(R,u)*L%t,q=He(U,r)*E%t;return{pow_p_5_8:He(q,Vr)*s%t,b2:v}}function is(s,t){const e=D(t*t*t),r=D(e*e*t),a=Tc(s*r).pow_p_5_8;let i=D(s*e*a);const u=D(t*i*i),l=i,v=D(i*Mn),S=u===s,B=u===D(-s),E=u===D(-s*Mn);return S&&(i=l),(B||E)&&(i=v),er(i)&&(i=D(-i)),{isValid:S||B,value:i}}function Os(s){return is(Zt,s)}function Vn(s){return D(Cn(s),ie.l)}function Lc(s,t){if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==t[e])return!1;return!0}function or(s,t){const e=s instanceof Uint8Array?Uint8Array.from(s):ns(s);if(typeof t=="number"&&e.length!==t)throw new Error(`Expected ${t} bytes`);return e}function Xn(s,t,e=!0){if(!t)throw new TypeError("Specify max value");if(typeof s=="number"&&Number.isSafeInteger(s)&&(s=BigInt(s)),typeof s=="bigint"&&s<t){if(e){if(we<s)return s}else if(we<=s)return s}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Cc(s){return s[0]&=248,s[31]&=127,s[31]|=64,s}function Bo(s){if(s=typeof s=="bigint"||typeof s=="number"?Eo(Xn(s,So)):or(s),s.length!==32)throw new Error("Expected 32 bytes");return s}function Ao(s){const t=Cc(s.slice(0,32)),e=s.slice(32,64),r=Vn(t),a=fe.BASE.multiply(r),i=a.toRawBytes();return{head:t,prefix:e,scalar:r,point:a,pointBytes:i}}let _n;function Yn(...s){if(typeof _n!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return _n(...s)}async function ko(s){return Ao(await Fr.sha512(Bo(s)))}function ss(s){return Ao(Yn(Bo(s)))}function Pc(s){return ss(s).pointBytes}function Uc(s,t){s=or(s);const{prefix:e,scalar:r,pointBytes:a}=ss(t),i=Vn(Yn(e,s)),u=fe.BASE.multiply(i),l=Vn(Yn(u.toRawBytes(),a,s)),v=D(i+l*r,ie.l);return new jn(u,v).toRawBytes()}function Oc(s,t,e){t=or(t),e instanceof fe||(e=fe.fromHex(e,!1));const{r,s:a}=s instanceof jn?s.assertValidity():jn.fromHex(s),i=Vt.BASE.multiplyUnsafe(a);return{r,s:a,SB:i,pub:e,msg:t}}function Nc(s,t,e,r){const a=Vn(r),i=Vt.fromAffine(s).multiplyUnsafe(a);return Vt.fromAffine(t).add(i).subtract(e).multiplyUnsafe(ie.h).equals(Vt.ZERO)}function Fc(s,t,e){const{r,SB:a,msg:i,pub:u}=Oc(s,t,e),l=Yn(r.toRawBytes(),u.toRawBytes(),i);return Nc(u,r,a,l)}const os={getExtendedPublicKey:ss,getPublicKey:Pc,sign:Uc,verify:Fc};fe.BASE._setWindowSize(8);const Je={node:wo,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Fr={bytesToHex:Ln,hexToBytes:ns,concatBytes:Us,getExtendedPublicKey:ko,mod:D,invert:li,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:s=>{if(s=or(s),s.length<40||s.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return D(Cn(s),ie.l-Zt)+Zt},randomBytes:(s=32)=>{if(Je.web)return Je.web.getRandomValues(new Uint8Array(s));if(Je.node){const{randomBytes:t}=Je.node;return new Uint8Array(t(s).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Fr.randomBytes(32),sha512:async(...s)=>{const t=Us(...s);if(Je.web){const e=await Je.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Je.node)return Uint8Array.from(Je.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(s=8,t=fe.BASE){const e=t.equals(fe.BASE)?t:new fe(t.x,t.y);return e._setWindowSize(s),e.multiply(Vr),e},sha512Sync:void 0};Object.defineProperties(Fr,{sha512Sync:{configurable:!1,get(){return _n},set(s){_n||(_n=s)}}});var Jn={},qc={get exports(){return Jn},set exports(s){Jn=s}};(function(s){(function(t,e){function r(w,n){if(!w)throw new Error(n||"Assertion failed")}function a(w,n){w.super_=n;var c=function(){};c.prototype=n.prototype,w.prototype=new c,w.prototype.constructor=w}function i(w,n,c){if(i.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((n==="le"||n==="be")&&(c=n,n=10),this._init(w||0,n||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=vo.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,c){return n.cmp(c)>0?n:c},i.min=function(n,c){return n.cmp(c)<0?n:c},i.prototype._init=function(n,c,h){if(typeof n=="number")return this._initNumber(n,c,h);if(typeof n=="object")return this._initArray(n,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),n=n.toString().replace(/\s+/g,"");var g=0;n[0]==="-"&&(g++,this.negative=1),g<n.length&&(c===16?this._parseHex(n,g,h):(this._parseBase(n,c,g),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(n,c,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(n,c,h){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var y,x,_=0;if(h==="be")for(g=n.length-1,y=0;g>=0;g-=3)x=n[g]|n[g-1]<<8|n[g-2]<<16,this.words[y]|=x<<_&67108863,this.words[y+1]=x>>>26-_&67108863,_+=24,_>=26&&(_-=26,y++);else if(h==="le")for(g=0,y=0;g<n.length;g+=3)x=n[g]|n[g+1]<<8|n[g+2]<<16,this.words[y]|=x<<_&67108863,this.words[y+1]=x>>>26-_&67108863,_+=24,_>=26&&(_-=26,y++);return this._strip()};function l(w,n){var c=w.charCodeAt(n);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+w)}function v(w,n,c){var h=l(w,c);return c-1>=n&&(h|=l(w,c-1)<<4),h}i.prototype._parseHex=function(n,c,h){this.length=Math.ceil((n.length-c)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var y=0,x=0,_;if(h==="be")for(g=n.length-1;g>=c;g-=2)_=v(n,c,g)<<y,this.words[x]|=_&67108863,y>=18?(y-=18,x+=1,this.words[x]|=_>>>26):y+=8;else{var p=n.length-c;for(g=p%2===0?c+1:c;g<n.length;g+=2)_=v(n,c,g)<<y,this.words[x]|=_&67108863,y>=18?(y-=18,x+=1,this.words[x]|=_>>>26):y+=8}this._strip()};function S(w,n,c,h){for(var g=0,y=0,x=Math.min(w.length,c),_=n;_<x;_++){var p=w.charCodeAt(_)-48;g*=h,p>=49?y=p-49+10:p>=17?y=p-17+10:y=p,r(p>=0&&y<h,"Invalid character"),g+=y}return g}i.prototype._parseBase=function(n,c,h){this.words=[0],this.length=1;for(var g=0,y=1;y<=67108863;y*=c)g++;g--,y=y/c|0;for(var x=n.length-h,_=x%g,p=Math.min(x,x-_)+h,o=0,m=h;m<p;m+=g)o=S(n,m,m+g,c),this.imuln(y),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(_!==0){var $=1;for(o=S(n,m,n.length,c),m=0;m<_;m++)$*=c;this.imuln($),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var c=0;c<this.length;c++)n.words[c]=this.words[c];n.length=this.length,n.negative=this.negative,n.red=this.red};function B(w,n){w.words=n.words,w.length=n.length,w.negative=n.negative,w.red=n.red}if(i.prototype._move=function(n){B(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{i.prototype.inspect=E}else i.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,c){n=n||10,c=c|0||1;var h;if(n===16||n==="hex"){h="";for(var g=0,y=0,x=0;x<this.length;x++){var _=this.words[x],p=((_<<g|y)&16777215).toString(16);y=_>>>24-g&16777215,g+=2,g>=26&&(g-=26,x--),y!==0||x!==this.length-1?h=T[6-p.length]+p+h:h=p+h}for(y!==0&&(h=y.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var o=I[n],m=L[n];h="";var $=this.clone();for($.negative=0;!$.isZero();){var K=$.modrn(m).toString(n);$=$.idivn(m),$.isZero()?h=K+h:h=T[o-K.length]+K+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(n,c){return this.toArrayLike(u,n,c)}),i.prototype.toArray=function(n,c){return this.toArrayLike(Array,n,c)};var R=function(n,c){return n.allocUnsafe?n.allocUnsafe(c):new n(c)};i.prototype.toArrayLike=function(n,c,h){this._strip();var g=this.byteLength(),y=h||Math.max(1,g);r(g<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0");var x=R(n,y),_=c==="le"?"LE":"BE";return this["_toArrayLike"+_](x,g),x},i.prototype._toArrayLikeLE=function(n,c){for(var h=0,g=0,y=0,x=0;y<this.length;y++){var _=this.words[y]<<x|g;n[h++]=_&255,h<n.length&&(n[h++]=_>>8&255),h<n.length&&(n[h++]=_>>16&255),x===6?(h<n.length&&(n[h++]=_>>24&255),g=0,x=0):(g=_>>>24,x+=2)}if(h<n.length)for(n[h++]=g;h<n.length;)n[h++]=0},i.prototype._toArrayLikeBE=function(n,c){for(var h=n.length-1,g=0,y=0,x=0;y<this.length;y++){var _=this.words[y]<<x|g;n[h--]=_&255,h>=0&&(n[h--]=_>>8&255),h>=0&&(n[h--]=_>>16&255),x===6?(h>=0&&(n[h--]=_>>24&255),g=0,x=0):(g=_>>>24,x+=2)}if(h>=0)for(n[h--]=g;h>=0;)n[h--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var c=n,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(n){if(n===0)return 26;var c=n,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},i.prototype.bitLength=function(){var n=this.words[this.length-1],c=this._countBits(n);return(this.length-1)*26+c};function U(w){for(var n=new Array(w.bitLength()),c=0;c<n.length;c++){var h=c/26|0,g=c%26;n[c]=w.words[h]>>>g&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(n+=h,h!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var c=0;c<n.length;c++)this.words[c]=this.words[c]|n.words[c];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var c;this.length>n.length?c=n:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=c.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var c,h;this.length>n.length?(c=this,h=n):(c=n,h=this);for(var g=0;g<h.length;g++)this.words[g]=c.words[g]^h.words[g];if(this!==c)for(;g<c.length;g++)this.words[g]=c.words[g];return this.length=c.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var c=Math.ceil(n/26)|0,h=n%26;this._expand(c),h>0&&c--;for(var g=0;g<c;g++)this.words[g]=~this.words[g]&67108863;return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,c){r(typeof n=="number"&&n>=0);var h=n/26|0,g=n%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<g:this.words[h]=this.words[h]&~(1<<g),this._strip()},i.prototype.iadd=function(n){var c;if(this.negative!==0&&n.negative===0)return this.negative=0,c=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,c=this.isub(n),n.negative=1,c._normSign();var h,g;this.length>n.length?(h=this,g=n):(h=n,g=this);for(var y=0,x=0;x<g.length;x++)c=(h.words[x]|0)+(g.words[x]|0)+y,this.words[x]=c&67108863,y=c>>>26;for(;y!==0&&x<h.length;x++)c=(h.words[x]|0)+y,this.words[x]=c&67108863,y=c>>>26;if(this.length=h.length,y!==0)this.words[this.length]=y,this.length++;else if(h!==this)for(;x<h.length;x++)this.words[x]=h.words[x];return this},i.prototype.add=function(n){var c;return n.negative!==0&&this.negative===0?(n.negative=0,c=this.sub(n),n.negative^=1,c):n.negative===0&&this.negative!==0?(this.negative=0,c=n.sub(this),this.negative=1,c):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var c=this.iadd(n);return n.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,y;h>0?(g=this,y=n):(g=n,y=this);for(var x=0,_=0;_<y.length;_++)c=(g.words[_]|0)-(y.words[_]|0)+x,x=c>>26,this.words[_]=c&67108863;for(;x!==0&&_<g.length;_++)c=(g.words[_]|0)+x,x=c>>26,this.words[_]=c&67108863;if(x===0&&_<g.length&&g!==this)for(;_<g.length;_++)this.words[_]=g.words[_];return this.length=Math.max(this.length,_),g!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function q(w,n,c){c.negative=n.negative^w.negative;var h=w.length+n.length|0;c.length=h,h=h-1|0;var g=w.words[0]|0,y=n.words[0]|0,x=g*y,_=x&67108863,p=x/67108864|0;c.words[0]=_;for(var o=1;o<h;o++){for(var m=p>>>26,$=p&67108863,K=Math.min(o,n.length-1),W=Math.max(0,o-w.length+1);W<=K;W++){var Wt=o-W|0;g=w.words[Wt]|0,y=n.words[W]|0,x=g*y+$,m+=x/67108864|0,$=x&67108863}c.words[o]=$|0,p=m|0}return p!==0?c.words[o]=p|0:c.length--,c._strip()}var F=function(n,c,h){var g=n.words,y=c.words,x=h.words,_=0,p,o,m,$=g[0]|0,K=$&8191,W=$>>>13,Wt=g[1]|0,st=Wt&8191,ht=Wt>>>13,Ve=g[2]|0,bt=Ve&8191,yt=Ve>>>13,Ie=g[3]|0,lt=Ie&8191,xt=Ie>>>13,hr=g[4]|0,pt=hr&8191,Mt=hr>>>13,fr=g[5]|0,wt=fr&8191,dt=fr>>>13,ve=g[6]|0,gt=ve&8191,_t=ve>>>13,Me=g[7]|0,St=Me&8191,b=Me>>>13,f=g[8]|0,d=f&8191,M=f>>>13,A=g[9]|0,k=A&8191,C=A>>>13,vt=y[0]|0,et=vt&8191,tt=vt>>>13,re=y[1]|0,Q=re&8191,Et=re>>>13,cn=y[2]|0,Bt=cn&8191,At=cn>>>13,un=y[3]|0,kt=un&8191,It=un>>>13,hn=y[4]|0,Rt=hn&8191,Tt=hn>>>13,fn=y[5]|0,Lt=fn&8191,Ct=fn>>>13,ln=y[6]|0,Pt=ln&8191,Ut=ln>>>13,dn=y[7]|0,Ot=dn&8191,Nt=dn>>>13,pn=y[8]|0,Ft=pn&8191,qt=pn>>>13,gn=y[9]|0,Ht=gn&8191,Dt=gn>>>13;h.negative=n.negative^c.negative,h.length=19,p=Math.imul(K,et),o=Math.imul(K,tt),o=o+Math.imul(W,et)|0,m=Math.imul(W,tt);var lr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,p=Math.imul(st,et),o=Math.imul(st,tt),o=o+Math.imul(ht,et)|0,m=Math.imul(ht,tt),p=p+Math.imul(K,Q)|0,o=o+Math.imul(K,Et)|0,o=o+Math.imul(W,Q)|0,m=m+Math.imul(W,Et)|0;var dr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,p=Math.imul(bt,et),o=Math.imul(bt,tt),o=o+Math.imul(yt,et)|0,m=Math.imul(yt,tt),p=p+Math.imul(st,Q)|0,o=o+Math.imul(st,Et)|0,o=o+Math.imul(ht,Q)|0,m=m+Math.imul(ht,Et)|0,p=p+Math.imul(K,Bt)|0,o=o+Math.imul(K,At)|0,o=o+Math.imul(W,Bt)|0,m=m+Math.imul(W,At)|0;var pr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,p=Math.imul(lt,et),o=Math.imul(lt,tt),o=o+Math.imul(xt,et)|0,m=Math.imul(xt,tt),p=p+Math.imul(bt,Q)|0,o=o+Math.imul(bt,Et)|0,o=o+Math.imul(yt,Q)|0,m=m+Math.imul(yt,Et)|0,p=p+Math.imul(st,Bt)|0,o=o+Math.imul(st,At)|0,o=o+Math.imul(ht,Bt)|0,m=m+Math.imul(ht,At)|0,p=p+Math.imul(K,kt)|0,o=o+Math.imul(K,It)|0,o=o+Math.imul(W,kt)|0,m=m+Math.imul(W,It)|0;var gr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(gr>>>26)|0,gr&=67108863,p=Math.imul(pt,et),o=Math.imul(pt,tt),o=o+Math.imul(Mt,et)|0,m=Math.imul(Mt,tt),p=p+Math.imul(lt,Q)|0,o=o+Math.imul(lt,Et)|0,o=o+Math.imul(xt,Q)|0,m=m+Math.imul(xt,Et)|0,p=p+Math.imul(bt,Bt)|0,o=o+Math.imul(bt,At)|0,o=o+Math.imul(yt,Bt)|0,m=m+Math.imul(yt,At)|0,p=p+Math.imul(st,kt)|0,o=o+Math.imul(st,It)|0,o=o+Math.imul(ht,kt)|0,m=m+Math.imul(ht,It)|0,p=p+Math.imul(K,Rt)|0,o=o+Math.imul(K,Tt)|0,o=o+Math.imul(W,Rt)|0,m=m+Math.imul(W,Tt)|0;var mr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(mr>>>26)|0,mr&=67108863,p=Math.imul(wt,et),o=Math.imul(wt,tt),o=o+Math.imul(dt,et)|0,m=Math.imul(dt,tt),p=p+Math.imul(pt,Q)|0,o=o+Math.imul(pt,Et)|0,o=o+Math.imul(Mt,Q)|0,m=m+Math.imul(Mt,Et)|0,p=p+Math.imul(lt,Bt)|0,o=o+Math.imul(lt,At)|0,o=o+Math.imul(xt,Bt)|0,m=m+Math.imul(xt,At)|0,p=p+Math.imul(bt,kt)|0,o=o+Math.imul(bt,It)|0,o=o+Math.imul(yt,kt)|0,m=m+Math.imul(yt,It)|0,p=p+Math.imul(st,Rt)|0,o=o+Math.imul(st,Tt)|0,o=o+Math.imul(ht,Rt)|0,m=m+Math.imul(ht,Tt)|0,p=p+Math.imul(K,Lt)|0,o=o+Math.imul(K,Ct)|0,o=o+Math.imul(W,Lt)|0,m=m+Math.imul(W,Ct)|0;var yr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(yr>>>26)|0,yr&=67108863,p=Math.imul(gt,et),o=Math.imul(gt,tt),o=o+Math.imul(_t,et)|0,m=Math.imul(_t,tt),p=p+Math.imul(wt,Q)|0,o=o+Math.imul(wt,Et)|0,o=o+Math.imul(dt,Q)|0,m=m+Math.imul(dt,Et)|0,p=p+Math.imul(pt,Bt)|0,o=o+Math.imul(pt,At)|0,o=o+Math.imul(Mt,Bt)|0,m=m+Math.imul(Mt,At)|0,p=p+Math.imul(lt,kt)|0,o=o+Math.imul(lt,It)|0,o=o+Math.imul(xt,kt)|0,m=m+Math.imul(xt,It)|0,p=p+Math.imul(bt,Rt)|0,o=o+Math.imul(bt,Tt)|0,o=o+Math.imul(yt,Rt)|0,m=m+Math.imul(yt,Tt)|0,p=p+Math.imul(st,Lt)|0,o=o+Math.imul(st,Ct)|0,o=o+Math.imul(ht,Lt)|0,m=m+Math.imul(ht,Ct)|0,p=p+Math.imul(K,Pt)|0,o=o+Math.imul(K,Ut)|0,o=o+Math.imul(W,Pt)|0,m=m+Math.imul(W,Ut)|0;var wr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(wr>>>26)|0,wr&=67108863,p=Math.imul(St,et),o=Math.imul(St,tt),o=o+Math.imul(b,et)|0,m=Math.imul(b,tt),p=p+Math.imul(gt,Q)|0,o=o+Math.imul(gt,Et)|0,o=o+Math.imul(_t,Q)|0,m=m+Math.imul(_t,Et)|0,p=p+Math.imul(wt,Bt)|0,o=o+Math.imul(wt,At)|0,o=o+Math.imul(dt,Bt)|0,m=m+Math.imul(dt,At)|0,p=p+Math.imul(pt,kt)|0,o=o+Math.imul(pt,It)|0,o=o+Math.imul(Mt,kt)|0,m=m+Math.imul(Mt,It)|0,p=p+Math.imul(lt,Rt)|0,o=o+Math.imul(lt,Tt)|0,o=o+Math.imul(xt,Rt)|0,m=m+Math.imul(xt,Tt)|0,p=p+Math.imul(bt,Lt)|0,o=o+Math.imul(bt,Ct)|0,o=o+Math.imul(yt,Lt)|0,m=m+Math.imul(yt,Ct)|0,p=p+Math.imul(st,Pt)|0,o=o+Math.imul(st,Ut)|0,o=o+Math.imul(ht,Pt)|0,m=m+Math.imul(ht,Ut)|0,p=p+Math.imul(K,Ot)|0,o=o+Math.imul(K,Nt)|0,o=o+Math.imul(W,Ot)|0,m=m+Math.imul(W,Nt)|0;var vr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(vr>>>26)|0,vr&=67108863,p=Math.imul(d,et),o=Math.imul(d,tt),o=o+Math.imul(M,et)|0,m=Math.imul(M,tt),p=p+Math.imul(St,Q)|0,o=o+Math.imul(St,Et)|0,o=o+Math.imul(b,Q)|0,m=m+Math.imul(b,Et)|0,p=p+Math.imul(gt,Bt)|0,o=o+Math.imul(gt,At)|0,o=o+Math.imul(_t,Bt)|0,m=m+Math.imul(_t,At)|0,p=p+Math.imul(wt,kt)|0,o=o+Math.imul(wt,It)|0,o=o+Math.imul(dt,kt)|0,m=m+Math.imul(dt,It)|0,p=p+Math.imul(pt,Rt)|0,o=o+Math.imul(pt,Tt)|0,o=o+Math.imul(Mt,Rt)|0,m=m+Math.imul(Mt,Tt)|0,p=p+Math.imul(lt,Lt)|0,o=o+Math.imul(lt,Ct)|0,o=o+Math.imul(xt,Lt)|0,m=m+Math.imul(xt,Ct)|0,p=p+Math.imul(bt,Pt)|0,o=o+Math.imul(bt,Ut)|0,o=o+Math.imul(yt,Pt)|0,m=m+Math.imul(yt,Ut)|0,p=p+Math.imul(st,Ot)|0,o=o+Math.imul(st,Nt)|0,o=o+Math.imul(ht,Ot)|0,m=m+Math.imul(ht,Nt)|0,p=p+Math.imul(K,Ft)|0,o=o+Math.imul(K,qt)|0,o=o+Math.imul(W,Ft)|0,m=m+Math.imul(W,qt)|0;var br=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(br>>>26)|0,br&=67108863,p=Math.imul(k,et),o=Math.imul(k,tt),o=o+Math.imul(C,et)|0,m=Math.imul(C,tt),p=p+Math.imul(d,Q)|0,o=o+Math.imul(d,Et)|0,o=o+Math.imul(M,Q)|0,m=m+Math.imul(M,Et)|0,p=p+Math.imul(St,Bt)|0,o=o+Math.imul(St,At)|0,o=o+Math.imul(b,Bt)|0,m=m+Math.imul(b,At)|0,p=p+Math.imul(gt,kt)|0,o=o+Math.imul(gt,It)|0,o=o+Math.imul(_t,kt)|0,m=m+Math.imul(_t,It)|0,p=p+Math.imul(wt,Rt)|0,o=o+Math.imul(wt,Tt)|0,o=o+Math.imul(dt,Rt)|0,m=m+Math.imul(dt,Tt)|0,p=p+Math.imul(pt,Lt)|0,o=o+Math.imul(pt,Ct)|0,o=o+Math.imul(Mt,Lt)|0,m=m+Math.imul(Mt,Ct)|0,p=p+Math.imul(lt,Pt)|0,o=o+Math.imul(lt,Ut)|0,o=o+Math.imul(xt,Pt)|0,m=m+Math.imul(xt,Ut)|0,p=p+Math.imul(bt,Ot)|0,o=o+Math.imul(bt,Nt)|0,o=o+Math.imul(yt,Ot)|0,m=m+Math.imul(yt,Nt)|0,p=p+Math.imul(st,Ft)|0,o=o+Math.imul(st,qt)|0,o=o+Math.imul(ht,Ft)|0,m=m+Math.imul(ht,qt)|0,p=p+Math.imul(K,Ht)|0,o=o+Math.imul(K,Dt)|0,o=o+Math.imul(W,Ht)|0,m=m+Math.imul(W,Dt)|0;var xr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(xr>>>26)|0,xr&=67108863,p=Math.imul(k,Q),o=Math.imul(k,Et),o=o+Math.imul(C,Q)|0,m=Math.imul(C,Et),p=p+Math.imul(d,Bt)|0,o=o+Math.imul(d,At)|0,o=o+Math.imul(M,Bt)|0,m=m+Math.imul(M,At)|0,p=p+Math.imul(St,kt)|0,o=o+Math.imul(St,It)|0,o=o+Math.imul(b,kt)|0,m=m+Math.imul(b,It)|0,p=p+Math.imul(gt,Rt)|0,o=o+Math.imul(gt,Tt)|0,o=o+Math.imul(_t,Rt)|0,m=m+Math.imul(_t,Tt)|0,p=p+Math.imul(wt,Lt)|0,o=o+Math.imul(wt,Ct)|0,o=o+Math.imul(dt,Lt)|0,m=m+Math.imul(dt,Ct)|0,p=p+Math.imul(pt,Pt)|0,o=o+Math.imul(pt,Ut)|0,o=o+Math.imul(Mt,Pt)|0,m=m+Math.imul(Mt,Ut)|0,p=p+Math.imul(lt,Ot)|0,o=o+Math.imul(lt,Nt)|0,o=o+Math.imul(xt,Ot)|0,m=m+Math.imul(xt,Nt)|0,p=p+Math.imul(bt,Ft)|0,o=o+Math.imul(bt,qt)|0,o=o+Math.imul(yt,Ft)|0,m=m+Math.imul(yt,qt)|0,p=p+Math.imul(st,Ht)|0,o=o+Math.imul(st,Dt)|0,o=o+Math.imul(ht,Ht)|0,m=m+Math.imul(ht,Dt)|0;var Mr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,p=Math.imul(k,Bt),o=Math.imul(k,At),o=o+Math.imul(C,Bt)|0,m=Math.imul(C,At),p=p+Math.imul(d,kt)|0,o=o+Math.imul(d,It)|0,o=o+Math.imul(M,kt)|0,m=m+Math.imul(M,It)|0,p=p+Math.imul(St,Rt)|0,o=o+Math.imul(St,Tt)|0,o=o+Math.imul(b,Rt)|0,m=m+Math.imul(b,Tt)|0,p=p+Math.imul(gt,Lt)|0,o=o+Math.imul(gt,Ct)|0,o=o+Math.imul(_t,Lt)|0,m=m+Math.imul(_t,Ct)|0,p=p+Math.imul(wt,Pt)|0,o=o+Math.imul(wt,Ut)|0,o=o+Math.imul(dt,Pt)|0,m=m+Math.imul(dt,Ut)|0,p=p+Math.imul(pt,Ot)|0,o=o+Math.imul(pt,Nt)|0,o=o+Math.imul(Mt,Ot)|0,m=m+Math.imul(Mt,Nt)|0,p=p+Math.imul(lt,Ft)|0,o=o+Math.imul(lt,qt)|0,o=o+Math.imul(xt,Ft)|0,m=m+Math.imul(xt,qt)|0,p=p+Math.imul(bt,Ht)|0,o=o+Math.imul(bt,Dt)|0,o=o+Math.imul(yt,Ht)|0,m=m+Math.imul(yt,Dt)|0;var _r=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(_r>>>26)|0,_r&=67108863,p=Math.imul(k,kt),o=Math.imul(k,It),o=o+Math.imul(C,kt)|0,m=Math.imul(C,It),p=p+Math.imul(d,Rt)|0,o=o+Math.imul(d,Tt)|0,o=o+Math.imul(M,Rt)|0,m=m+Math.imul(M,Tt)|0,p=p+Math.imul(St,Lt)|0,o=o+Math.imul(St,Ct)|0,o=o+Math.imul(b,Lt)|0,m=m+Math.imul(b,Ct)|0,p=p+Math.imul(gt,Pt)|0,o=o+Math.imul(gt,Ut)|0,o=o+Math.imul(_t,Pt)|0,m=m+Math.imul(_t,Ut)|0,p=p+Math.imul(wt,Ot)|0,o=o+Math.imul(wt,Nt)|0,o=o+Math.imul(dt,Ot)|0,m=m+Math.imul(dt,Nt)|0,p=p+Math.imul(pt,Ft)|0,o=o+Math.imul(pt,qt)|0,o=o+Math.imul(Mt,Ft)|0,m=m+Math.imul(Mt,qt)|0,p=p+Math.imul(lt,Ht)|0,o=o+Math.imul(lt,Dt)|0,o=o+Math.imul(xt,Ht)|0,m=m+Math.imul(xt,Dt)|0;var Sr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,p=Math.imul(k,Rt),o=Math.imul(k,Tt),o=o+Math.imul(C,Rt)|0,m=Math.imul(C,Tt),p=p+Math.imul(d,Lt)|0,o=o+Math.imul(d,Ct)|0,o=o+Math.imul(M,Lt)|0,m=m+Math.imul(M,Ct)|0,p=p+Math.imul(St,Pt)|0,o=o+Math.imul(St,Ut)|0,o=o+Math.imul(b,Pt)|0,m=m+Math.imul(b,Ut)|0,p=p+Math.imul(gt,Ot)|0,o=o+Math.imul(gt,Nt)|0,o=o+Math.imul(_t,Ot)|0,m=m+Math.imul(_t,Nt)|0,p=p+Math.imul(wt,Ft)|0,o=o+Math.imul(wt,qt)|0,o=o+Math.imul(dt,Ft)|0,m=m+Math.imul(dt,qt)|0,p=p+Math.imul(pt,Ht)|0,o=o+Math.imul(pt,Dt)|0,o=o+Math.imul(Mt,Ht)|0,m=m+Math.imul(Mt,Dt)|0;var Er=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Er>>>26)|0,Er&=67108863,p=Math.imul(k,Lt),o=Math.imul(k,Ct),o=o+Math.imul(C,Lt)|0,m=Math.imul(C,Ct),p=p+Math.imul(d,Pt)|0,o=o+Math.imul(d,Ut)|0,o=o+Math.imul(M,Pt)|0,m=m+Math.imul(M,Ut)|0,p=p+Math.imul(St,Ot)|0,o=o+Math.imul(St,Nt)|0,o=o+Math.imul(b,Ot)|0,m=m+Math.imul(b,Nt)|0,p=p+Math.imul(gt,Ft)|0,o=o+Math.imul(gt,qt)|0,o=o+Math.imul(_t,Ft)|0,m=m+Math.imul(_t,qt)|0,p=p+Math.imul(wt,Ht)|0,o=o+Math.imul(wt,Dt)|0,o=o+Math.imul(dt,Ht)|0,m=m+Math.imul(dt,Dt)|0;var Br=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Br>>>26)|0,Br&=67108863,p=Math.imul(k,Pt),o=Math.imul(k,Ut),o=o+Math.imul(C,Pt)|0,m=Math.imul(C,Ut),p=p+Math.imul(d,Ot)|0,o=o+Math.imul(d,Nt)|0,o=o+Math.imul(M,Ot)|0,m=m+Math.imul(M,Nt)|0,p=p+Math.imul(St,Ft)|0,o=o+Math.imul(St,qt)|0,o=o+Math.imul(b,Ft)|0,m=m+Math.imul(b,qt)|0,p=p+Math.imul(gt,Ht)|0,o=o+Math.imul(gt,Dt)|0,o=o+Math.imul(_t,Ht)|0,m=m+Math.imul(_t,Dt)|0;var Ar=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,p=Math.imul(k,Ot),o=Math.imul(k,Nt),o=o+Math.imul(C,Ot)|0,m=Math.imul(C,Nt),p=p+Math.imul(d,Ft)|0,o=o+Math.imul(d,qt)|0,o=o+Math.imul(M,Ft)|0,m=m+Math.imul(M,qt)|0,p=p+Math.imul(St,Ht)|0,o=o+Math.imul(St,Dt)|0,o=o+Math.imul(b,Ht)|0,m=m+Math.imul(b,Dt)|0;var kr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(kr>>>26)|0,kr&=67108863,p=Math.imul(k,Ft),o=Math.imul(k,qt),o=o+Math.imul(C,Ft)|0,m=Math.imul(C,qt),p=p+Math.imul(d,Ht)|0,o=o+Math.imul(d,Dt)|0,o=o+Math.imul(M,Ht)|0,m=m+Math.imul(M,Dt)|0;var Ir=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,p=Math.imul(k,Ht),o=Math.imul(k,Dt),o=o+Math.imul(C,Ht)|0,m=Math.imul(C,Dt);var Rr=(_+p|0)+((o&8191)<<13)|0;return _=(m+(o>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,x[0]=lr,x[1]=dr,x[2]=pr,x[3]=gr,x[4]=mr,x[5]=yr,x[6]=wr,x[7]=vr,x[8]=br,x[9]=xr,x[10]=Mr,x[11]=_r,x[12]=Sr,x[13]=Er,x[14]=Br,x[15]=Ar,x[16]=kr,x[17]=Ir,x[18]=Rr,_!==0&&(x[19]=_,h.length++),h};Math.imul||(F=q);function N(w,n,c){c.negative=n.negative^w.negative,c.length=w.length+n.length;for(var h=0,g=0,y=0;y<c.length-1;y++){var x=g;g=0;for(var _=h&67108863,p=Math.min(y,n.length-1),o=Math.max(0,y-w.length+1);o<=p;o++){var m=y-o,$=w.words[m]|0,K=n.words[o]|0,W=$*K,Wt=W&67108863;x=x+(W/67108864|0)|0,Wt=Wt+_|0,_=Wt&67108863,x=x+(Wt>>>26)|0,g+=x>>>26,x&=67108863}c.words[y]=_,h=x,x=g}return h!==0?c.words[y]=h:c.length--,c._strip()}function J(w,n,c){return N(w,n,c)}i.prototype.mulTo=function(n,c){var h,g=this.length+n.length;return this.length===10&&n.length===10?h=F(this,n,c):g<63?h=q(this,n,c):g<1024?h=N(this,n,c):h=J(this,n,c),h},i.prototype.mul=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),this.mulTo(n,c)},i.prototype.mulf=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),J(this,n,c)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var c=n<0;c&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var h=0,g=0;g<this.length;g++){var y=(this.words[g]|0)*n,x=(y&67108863)+(h&67108863);h>>=26,h+=y/67108864|0,h+=x>>>26,this.words[g]=x&67108863}return h!==0&&(this.words[g]=h,this.length++),c?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var c=U(n);if(c.length===0)return new i(1);for(var h=this,g=0;g<c.length&&c[g]===0;g++,h=h.sqr());if(++g<c.length)for(var y=h.sqr();g<c.length;g++,y=y.sqr())c[g]!==0&&(h=h.mul(y));return h},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,g=67108863>>>26-c<<26-c,y;if(c!==0){var x=0;for(y=0;y<this.length;y++){var _=this.words[y]&g,p=(this.words[y]|0)-_<<c;this.words[y]=p|x,x=_>>>26-c}x&&(this.words[y]=x,this.length++)}if(h!==0){for(y=this.length-1;y>=0;y--)this.words[y+h]=this.words[y];for(y=0;y<h;y++)this.words[y]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,c,h){r(typeof n=="number"&&n>=0);var g;c?g=(c-c%26)/26:g=0;var y=n%26,x=Math.min((n-y)/26,this.length),_=67108863^67108863>>>y<<y,p=h;if(g-=x,g=Math.max(0,g),p){for(var o=0;o<x;o++)p.words[o]=this.words[o];p.length=x}if(x!==0)if(this.length>x)for(this.length-=x,o=0;o<this.length;o++)this.words[o]=this.words[o+x];else this.words[0]=0,this.length=1;var m=0;for(o=this.length-1;o>=0&&(m!==0||o>=g);o--){var $=this.words[o]|0;this.words[o]=m<<26-y|$>>>y,m=$&_}return p&&m!==0&&(p.words[p.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,c,h){return r(this.negative===0),this.iushrn(n,c,h)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,g=1<<c;if(this.length<=h)return!1;var y=this.words[h];return!!(y&g)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var g=67108863^67108863>>>c<<c;this.words[this.length-1]&=g}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,c,h){var g=n.length+h,y;this._expand(g);var x,_=0;for(y=0;y<n.length;y++){x=(this.words[y+h]|0)+_;var p=(n.words[y]|0)*c;x-=p&67108863,_=(x>>26)-(p/67108864|0),this.words[y+h]=x&67108863}for(;y<this.length-h;y++)x=(this.words[y+h]|0)+_,_=x>>26,this.words[y+h]=x&67108863;if(_===0)return this._strip();for(r(_===-1),_=0,y=0;y<this.length;y++)x=-(this.words[y]|0)+_,_=x>>26,this.words[y]=x&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,c){var h=this.length-n.length,g=this.clone(),y=n,x=y.words[y.length-1]|0,_=this._countBits(x);h=26-_,h!==0&&(y=y.ushln(h),g.iushln(h),x=y.words[y.length-1]|0);var p=g.length-y.length,o;if(c!=="mod"){o=new i(null),o.length=p+1,o.words=new Array(o.length);for(var m=0;m<o.length;m++)o.words[m]=0}var $=g.clone()._ishlnsubmul(y,1,p);$.negative===0&&(g=$,o&&(o.words[p]=1));for(var K=p-1;K>=0;K--){var W=(g.words[y.length+K]|0)*67108864+(g.words[y.length+K-1]|0);for(W=Math.min(W/x|0,67108863),g._ishlnsubmul(y,W,K);g.negative!==0;)W--,g.negative=0,g._ishlnsubmul(y,1,K),g.isZero()||(g.negative^=1);o&&(o.words[K]=W)}return o&&o._strip(),g._strip(),c!=="div"&&h!==0&&g.iushrn(h),{div:o||null,mod:g}},i.prototype.divmod=function(n,c,h){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var g,y,x;return this.negative!==0&&n.negative===0?(x=this.neg().divmod(n,c),c!=="mod"&&(g=x.div.neg()),c!=="div"&&(y=x.mod.neg(),h&&y.negative!==0&&y.iadd(n)),{div:g,mod:y}):this.negative===0&&n.negative!==0?(x=this.divmod(n.neg(),c),c!=="mod"&&(g=x.div.neg()),{div:g,mod:x.mod}):this.negative&n.negative?(x=this.neg().divmod(n.neg(),c),c!=="div"&&(y=x.mod.neg(),h&&y.negative!==0&&y.isub(n)),{div:x.div,mod:y}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?c==="div"?{div:this.divn(n.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,c)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var c=this.divmod(n);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(n):c.mod,g=n.ushrn(1),y=n.andln(1),x=h.cmp(g);return x<0||y===1&&x===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=(1<<26)%n,g=0,y=this.length-1;y>=0;y--)g=(h*g+(this.words[y]|0))%n;return c?-g:g},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=0,g=this.length-1;g>=0;g--){var y=(this.words[g]|0)+h*67108864;this.words[g]=y/n|0,h=y%n}return this._strip(),c?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var g=new i(1),y=new i(0),x=new i(0),_=new i(1),p=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++p;for(var o=h.clone(),m=c.clone();!c.isZero();){for(var $=0,K=1;!(c.words[0]&K)&&$<26;++$,K<<=1);if($>0)for(c.iushrn($);$-- >0;)(g.isOdd()||y.isOdd())&&(g.iadd(o),y.isub(m)),g.iushrn(1),y.iushrn(1);for(var W=0,Wt=1;!(h.words[0]&Wt)&&W<26;++W,Wt<<=1);if(W>0)for(h.iushrn(W);W-- >0;)(x.isOdd()||_.isOdd())&&(x.iadd(o),_.isub(m)),x.iushrn(1),_.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(x),y.isub(_)):(h.isub(c),x.isub(g),_.isub(y))}return{a:x,b:_,gcd:h.iushln(p)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var g=new i(1),y=new i(0),x=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var _=0,p=1;!(c.words[0]&p)&&_<26;++_,p<<=1);if(_>0)for(c.iushrn(_);_-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);for(var o=0,m=1;!(h.words[0]&m)&&o<26;++o,m<<=1);if(o>0)for(h.iushrn(o);o-- >0;)y.isOdd()&&y.iadd(x),y.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(y)):(h.isub(c),y.isub(g))}var $;return c.cmpn(1)===0?$=g:$=y,$.cmpn(0)<0&&$.iadd(n),$},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var c=this.clone(),h=n.clone();c.negative=0,h.negative=0;for(var g=0;c.isEven()&&h.isEven();g++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var y=c.cmp(h);if(y<0){var x=c;c=h,h=x}else if(y===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(g)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var c=n%26,h=(n-c)/26,g=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var y=g,x=h;y!==0&&x<this.length;x++){var _=this.words[x]|0;_+=y,y=_>>>26,_&=67108863,this.words[x]=_}return y!==0&&(this.words[x]=y,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var c=n<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(n=-n),r(n<=67108863,"Number is too big");var g=this.words[0]|0;h=g===n?0:g<n?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var c=this.ucmp(n);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var g=this.words[h]|0,y=n.words[h]|0;if(g!==y){g<y?c=-1:g>y&&(c=1);break}}return c},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new at(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var H={k256:null,p224:null,p192:null,p25519:null};function Z(w,n){this.name=w,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Z.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},Z.prototype.ireduce=function(n){var c=n,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var g=h<this.n?-1:c.ucmp(this.p);return g===0?(c.words[0]=0,c.length=1):g>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},Z.prototype.split=function(n,c){n.iushrn(this.n,0,c)},Z.prototype.imulK=function(n){return n.imul(this.k)};function j(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(j,Z),j.prototype.split=function(n,c){for(var h=4194303,g=Math.min(n.length,9),y=0;y<g;y++)c.words[y]=n.words[y];if(c.length=g,n.length<=9){n.words[0]=0,n.length=1;return}var x=n.words[9];for(c.words[c.length++]=x&h,y=10;y<n.length;y++){var _=n.words[y]|0;n.words[y-10]=(_&h)<<4|x>>>22,x=_}x>>>=22,n.words[y-10]=x,x===0&&n.length>10?n.length-=10:n.length-=9},j.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var c=0,h=0;h<n.length;h++){var g=n.words[h]|0;c+=g*977,n.words[h]=c&67108863,c=g*64+(c/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function it(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(it,Z);function jt(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(jt,Z);function ce(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(ce,Z),ce.prototype.imulK=function(n){for(var c=0,h=0;h<n.length;h++){var g=(n.words[h]|0)*19+c,y=g&67108863;g>>>=26,n.words[h]=y,c=g}return c!==0&&(n.words[n.length++]=c),n},i._prime=function(n){if(H[n])return H[n];var c;if(n==="k256")c=new j;else if(n==="p224")c=new it;else if(n==="p192")c=new jt;else if(n==="p25519")c=new ce;else throw new Error("Unknown prime "+n);return H[n]=c,c};function at(w){if(typeof w=="string"){var n=i._prime(w);this.m=n.p,this.prime=n}else r(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}at.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},at.prototype._verify2=function(n,c){r((n.negative|c.negative)===0,"red works only with positives"),r(n.red&&n.red===c.red,"red works only with red numbers")},at.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(B(n,n.umod(this.m)._forceRed(this)),n)},at.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},at.prototype.add=function(n,c){this._verify2(n,c);var h=n.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},at.prototype.iadd=function(n,c){this._verify2(n,c);var h=n.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},at.prototype.sub=function(n,c){this._verify2(n,c);var h=n.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},at.prototype.isub=function(n,c){this._verify2(n,c);var h=n.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},at.prototype.shl=function(n,c){return this._verify1(n),this.imod(n.ushln(c))},at.prototype.imul=function(n,c){return this._verify2(n,c),this.imod(n.imul(c))},at.prototype.mul=function(n,c){return this._verify2(n,c),this.imod(n.mul(c))},at.prototype.isqr=function(n){return this.imul(n,n.clone())},at.prototype.sqr=function(n){return this.mul(n,n)},at.prototype.sqrt=function(n){if(n.isZero())return n.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(n,h)}for(var g=this.m.subn(1),y=0;!g.isZero()&&g.andln(1)===0;)y++,g.iushrn(1);r(!g.isZero());var x=new i(1).toRed(this),_=x.redNeg(),p=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,p).cmp(_)!==0;)o.redIAdd(_);for(var m=this.pow(o,g),$=this.pow(n,g.addn(1).iushrn(1)),K=this.pow(n,g),W=y;K.cmp(x)!==0;){for(var Wt=K,st=0;Wt.cmp(x)!==0;st++)Wt=Wt.redSqr();r(st<W);var ht=this.pow(m,new i(1).iushln(W-st-1));$=$.redMul(ht),m=ht.redSqr(),K=K.redMul(m),W=st}return $},at.prototype.invm=function(n){var c=n._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},at.prototype.pow=function(n,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return n.clone();var h=4,g=new Array(1<<h);g[0]=new i(1).toRed(this),g[1]=n;for(var y=2;y<g.length;y++)g[y]=this.mul(g[y-1],n);var x=g[0],_=0,p=0,o=c.bitLength()%26;for(o===0&&(o=26),y=c.length-1;y>=0;y--){for(var m=c.words[y],$=o-1;$>=0;$--){var K=m>>$&1;if(x!==g[0]&&(x=this.sqr(x)),K===0&&_===0){p=0;continue}_<<=1,_|=K,p++,!(p!==h&&(y!==0||$!==0))&&(x=this.mul(x,g[_]),p=0,_=0)}o=26}return x},at.prototype.convertTo=function(n){var c=n.umod(this.m);return c===n?c.clone():c},at.prototype.convertFrom=function(n){var c=n.clone();return c.red=null,c},i.mont=function(n){return new ne(n)};function ne(w){at.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(ne,at),ne.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},ne.prototype.convertFrom=function(n){var c=this.imod(n.mul(this.rinv));return c.red=null,c},ne.prototype.imul=function(n,c){if(n.isZero()||c.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=h.isub(g).iushrn(this.shift),x=y;return y.cmp(this.m)>=0?x=y.isub(this.m):y.cmpn(0)<0&&(x=y.iadd(this.m)),x._forceRed(this)},ne.prototype.mul=function(n,c){if(n.isZero()||c.isZero())return new i(0)._forceRed(this);var h=n.mul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=h.isub(g).iushrn(this.shift),x=y;return y.cmp(this.m)>=0?x=y.isub(this.m):y.cmpn(0)<0&&(x=y.iadd(this.m)),x._forceRed(this)},ne.prototype.invm=function(n){var c=this.imod(n._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(s,Oe)})(qc);var qn=Ra.Buffer;function Hc(s){if(s.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<s.length;r++){var a=s.charAt(r),i=a.charCodeAt(0);if(t[i]!==255)throw new TypeError(a+" is ambiguous");t[i]=r}var u=s.length,l=s.charAt(0),v=Math.log(u)/Math.log(256),S=Math.log(256)/Math.log(u);function B(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=qn.from(I)),!qn.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var L=0,R=0,U=0,q=I.length;U!==q&&I[U]===0;)U++,L++;for(var F=(q-U)*S+1>>>0,N=new Uint8Array(F);U!==q;){for(var J=I[U],H=0,Z=F-1;(J!==0||H<R)&&Z!==-1;Z--,H++)J+=256*N[Z]>>>0,N[Z]=J%u>>>0,J=J/u>>>0;if(J!==0)throw new Error("Non-zero carry");R=H,U++}for(var j=F-R;j!==F&&N[j]===0;)j++;for(var it=l.repeat(L);j<F;++j)it+=s.charAt(N[j]);return it}function E(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return qn.alloc(0);for(var L=0,R=0,U=0;I[L]===l;)R++,L++;for(var q=(I.length-L)*v+1>>>0,F=new Uint8Array(q);I[L];){var N=t[I.charCodeAt(L)];if(N===255)return;for(var J=0,H=q-1;(N!==0||J<U)&&H!==-1;H--,J++)N+=u*F[H]>>>0,F[H]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");U=J,L++}for(var Z=q-U;Z!==q&&F[Z]===0;)Z++;var j=qn.allocUnsafe(R+(q-Z));j.fill(0,0,R);for(var it=R;Z!==q;)j[it++]=F[Z++];return j}function T(I){var L=E(I);if(L)return L;throw new Error("Non-base"+u+" character")}return{encode:B,decodeUnsafe:E,decode:T}}var Dc=Hc,zc=Dc,Kc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",te=zc(Kc);const $c=(s,t,e)=>s&t^~s&e,Wc=(s,t,e)=>s&t^s&e^t&e,Gc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tr=new Uint32Array(64);class Io extends Mo{constructor(){super(64,32,8,!1),this.A=Qe[0]|0,this.B=Qe[1]|0,this.C=Qe[2]|0,this.D=Qe[3]|0,this.E=Qe[4]|0,this.F=Qe[5]|0,this.G=Qe[6]|0,this.H=Qe[7]|0}get(){const{A:t,B:e,C:r,D:a,E:i,F:u,G:l,H:v}=this;return[t,e,r,a,i,u,l,v]}set(t,e,r,a,i,u,l,v){this.A=t|0,this.B=e|0,this.C=r|0,this.D=a|0,this.E=i|0,this.F=u|0,this.G=l|0,this.H=v|0}process(t,e){for(let E=0;E<16;E++,e+=4)tr[E]=t.getUint32(e,!1);for(let E=16;E<64;E++){const T=tr[E-15],I=tr[E-2],L=qe(T,7)^qe(T,18)^T>>>3,R=qe(I,17)^qe(I,19)^I>>>10;tr[E]=R+tr[E-7]+L+tr[E-16]|0}let{A:r,B:a,C:i,D:u,E:l,F:v,G:S,H:B}=this;for(let E=0;E<64;E++){const T=qe(l,6)^qe(l,11)^qe(l,25),I=B+T+$c(l,v,S)+Gc[E]+tr[E]|0,R=(qe(r,2)^qe(r,13)^qe(r,22))+Wc(r,a,i)|0;B=S,S=v,v=l,l=u+I|0,u=i,i=a,a=r,r=I+R|0}r=r+this.A|0,a=a+this.B|0,i=i+this.C|0,u=u+this.D|0,l=l+this.E|0,v=v+this.F|0,S=S+this.G|0,B=B+this.H|0,this.set(r,a,i,u,l,v,S,B)}roundClean(){tr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Zc extends Io{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const qi=qr(()=>new Io);qr(()=>new Zc);var ye={},Hi={},jc={get exports(){return Hi},set exports(s){Hi=s}};(function(s){(function(t,e){function r(w,n){if(!w)throw new Error(n||"Assertion failed")}function a(w,n){w.super_=n;var c=function(){};c.prototype=n.prototype,w.prototype=new c,w.prototype.constructor=w}function i(w,n,c){if(i.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((n==="le"||n==="be")&&(c=n,n=10),this._init(w||0,n||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=vo.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,c){return n.cmp(c)>0?n:c},i.min=function(n,c){return n.cmp(c)<0?n:c},i.prototype._init=function(n,c,h){if(typeof n=="number")return this._initNumber(n,c,h);if(typeof n=="object")return this._initArray(n,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),n=n.toString().replace(/\s+/g,"");var g=0;n[0]==="-"&&(g++,this.negative=1),g<n.length&&(c===16?this._parseHex(n,g,h):(this._parseBase(n,c,g),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(n,c,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(n,c,h){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var y,x,_=0;if(h==="be")for(g=n.length-1,y=0;g>=0;g-=3)x=n[g]|n[g-1]<<8|n[g-2]<<16,this.words[y]|=x<<_&67108863,this.words[y+1]=x>>>26-_&67108863,_+=24,_>=26&&(_-=26,y++);else if(h==="le")for(g=0,y=0;g<n.length;g+=3)x=n[g]|n[g+1]<<8|n[g+2]<<16,this.words[y]|=x<<_&67108863,this.words[y+1]=x>>>26-_&67108863,_+=24,_>=26&&(_-=26,y++);return this._strip()};function l(w,n){var c=w.charCodeAt(n);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+w)}function v(w,n,c){var h=l(w,c);return c-1>=n&&(h|=l(w,c-1)<<4),h}i.prototype._parseHex=function(n,c,h){this.length=Math.ceil((n.length-c)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var y=0,x=0,_;if(h==="be")for(g=n.length-1;g>=c;g-=2)_=v(n,c,g)<<y,this.words[x]|=_&67108863,y>=18?(y-=18,x+=1,this.words[x]|=_>>>26):y+=8;else{var p=n.length-c;for(g=p%2===0?c+1:c;g<n.length;g+=2)_=v(n,c,g)<<y,this.words[x]|=_&67108863,y>=18?(y-=18,x+=1,this.words[x]|=_>>>26):y+=8}this._strip()};function S(w,n,c,h){for(var g=0,y=0,x=Math.min(w.length,c),_=n;_<x;_++){var p=w.charCodeAt(_)-48;g*=h,p>=49?y=p-49+10:p>=17?y=p-17+10:y=p,r(p>=0&&y<h,"Invalid character"),g+=y}return g}i.prototype._parseBase=function(n,c,h){this.words=[0],this.length=1;for(var g=0,y=1;y<=67108863;y*=c)g++;g--,y=y/c|0;for(var x=n.length-h,_=x%g,p=Math.min(x,x-_)+h,o=0,m=h;m<p;m+=g)o=S(n,m,m+g,c),this.imuln(y),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(_!==0){var $=1;for(o=S(n,m,n.length,c),m=0;m<_;m++)$*=c;this.imuln($),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var c=0;c<this.length;c++)n.words[c]=this.words[c];n.length=this.length,n.negative=this.negative,n.red=this.red};function B(w,n){w.words=n.words,w.length=n.length,w.negative=n.negative,w.red=n.red}if(i.prototype._move=function(n){B(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{i.prototype.inspect=E}else i.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,c){n=n||10,c=c|0||1;var h;if(n===16||n==="hex"){h="";for(var g=0,y=0,x=0;x<this.length;x++){var _=this.words[x],p=((_<<g|y)&16777215).toString(16);y=_>>>24-g&16777215,g+=2,g>=26&&(g-=26,x--),y!==0||x!==this.length-1?h=T[6-p.length]+p+h:h=p+h}for(y!==0&&(h=y.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var o=I[n],m=L[n];h="";var $=this.clone();for($.negative=0;!$.isZero();){var K=$.modrn(m).toString(n);$=$.idivn(m),$.isZero()?h=K+h:h=T[o-K.length]+K+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(n,c){return this.toArrayLike(u,n,c)}),i.prototype.toArray=function(n,c){return this.toArrayLike(Array,n,c)};var R=function(n,c){return n.allocUnsafe?n.allocUnsafe(c):new n(c)};i.prototype.toArrayLike=function(n,c,h){this._strip();var g=this.byteLength(),y=h||Math.max(1,g);r(g<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0");var x=R(n,y),_=c==="le"?"LE":"BE";return this["_toArrayLike"+_](x,g),x},i.prototype._toArrayLikeLE=function(n,c){for(var h=0,g=0,y=0,x=0;y<this.length;y++){var _=this.words[y]<<x|g;n[h++]=_&255,h<n.length&&(n[h++]=_>>8&255),h<n.length&&(n[h++]=_>>16&255),x===6?(h<n.length&&(n[h++]=_>>24&255),g=0,x=0):(g=_>>>24,x+=2)}if(h<n.length)for(n[h++]=g;h<n.length;)n[h++]=0},i.prototype._toArrayLikeBE=function(n,c){for(var h=n.length-1,g=0,y=0,x=0;y<this.length;y++){var _=this.words[y]<<x|g;n[h--]=_&255,h>=0&&(n[h--]=_>>8&255),h>=0&&(n[h--]=_>>16&255),x===6?(h>=0&&(n[h--]=_>>24&255),g=0,x=0):(g=_>>>24,x+=2)}if(h>=0)for(n[h--]=g;h>=0;)n[h--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var c=n,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(n){if(n===0)return 26;var c=n,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},i.prototype.bitLength=function(){var n=this.words[this.length-1],c=this._countBits(n);return(this.length-1)*26+c};function U(w){for(var n=new Array(w.bitLength()),c=0;c<n.length;c++){var h=c/26|0,g=c%26;n[c]=w.words[h]>>>g&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(n+=h,h!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var c=0;c<n.length;c++)this.words[c]=this.words[c]|n.words[c];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var c;this.length>n.length?c=n:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=c.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var c,h;this.length>n.length?(c=this,h=n):(c=n,h=this);for(var g=0;g<h.length;g++)this.words[g]=c.words[g]^h.words[g];if(this!==c)for(;g<c.length;g++)this.words[g]=c.words[g];return this.length=c.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var c=Math.ceil(n/26)|0,h=n%26;this._expand(c),h>0&&c--;for(var g=0;g<c;g++)this.words[g]=~this.words[g]&67108863;return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,c){r(typeof n=="number"&&n>=0);var h=n/26|0,g=n%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<g:this.words[h]=this.words[h]&~(1<<g),this._strip()},i.prototype.iadd=function(n){var c;if(this.negative!==0&&n.negative===0)return this.negative=0,c=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,c=this.isub(n),n.negative=1,c._normSign();var h,g;this.length>n.length?(h=this,g=n):(h=n,g=this);for(var y=0,x=0;x<g.length;x++)c=(h.words[x]|0)+(g.words[x]|0)+y,this.words[x]=c&67108863,y=c>>>26;for(;y!==0&&x<h.length;x++)c=(h.words[x]|0)+y,this.words[x]=c&67108863,y=c>>>26;if(this.length=h.length,y!==0)this.words[this.length]=y,this.length++;else if(h!==this)for(;x<h.length;x++)this.words[x]=h.words[x];return this},i.prototype.add=function(n){var c;return n.negative!==0&&this.negative===0?(n.negative=0,c=this.sub(n),n.negative^=1,c):n.negative===0&&this.negative!==0?(this.negative=0,c=n.sub(this),this.negative=1,c):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var c=this.iadd(n);return n.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,y;h>0?(g=this,y=n):(g=n,y=this);for(var x=0,_=0;_<y.length;_++)c=(g.words[_]|0)-(y.words[_]|0)+x,x=c>>26,this.words[_]=c&67108863;for(;x!==0&&_<g.length;_++)c=(g.words[_]|0)+x,x=c>>26,this.words[_]=c&67108863;if(x===0&&_<g.length&&g!==this)for(;_<g.length;_++)this.words[_]=g.words[_];return this.length=Math.max(this.length,_),g!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function q(w,n,c){c.negative=n.negative^w.negative;var h=w.length+n.length|0;c.length=h,h=h-1|0;var g=w.words[0]|0,y=n.words[0]|0,x=g*y,_=x&67108863,p=x/67108864|0;c.words[0]=_;for(var o=1;o<h;o++){for(var m=p>>>26,$=p&67108863,K=Math.min(o,n.length-1),W=Math.max(0,o-w.length+1);W<=K;W++){var Wt=o-W|0;g=w.words[Wt]|0,y=n.words[W]|0,x=g*y+$,m+=x/67108864|0,$=x&67108863}c.words[o]=$|0,p=m|0}return p!==0?c.words[o]=p|0:c.length--,c._strip()}var F=function(n,c,h){var g=n.words,y=c.words,x=h.words,_=0,p,o,m,$=g[0]|0,K=$&8191,W=$>>>13,Wt=g[1]|0,st=Wt&8191,ht=Wt>>>13,Ve=g[2]|0,bt=Ve&8191,yt=Ve>>>13,Ie=g[3]|0,lt=Ie&8191,xt=Ie>>>13,hr=g[4]|0,pt=hr&8191,Mt=hr>>>13,fr=g[5]|0,wt=fr&8191,dt=fr>>>13,ve=g[6]|0,gt=ve&8191,_t=ve>>>13,Me=g[7]|0,St=Me&8191,b=Me>>>13,f=g[8]|0,d=f&8191,M=f>>>13,A=g[9]|0,k=A&8191,C=A>>>13,vt=y[0]|0,et=vt&8191,tt=vt>>>13,re=y[1]|0,Q=re&8191,Et=re>>>13,cn=y[2]|0,Bt=cn&8191,At=cn>>>13,un=y[3]|0,kt=un&8191,It=un>>>13,hn=y[4]|0,Rt=hn&8191,Tt=hn>>>13,fn=y[5]|0,Lt=fn&8191,Ct=fn>>>13,ln=y[6]|0,Pt=ln&8191,Ut=ln>>>13,dn=y[7]|0,Ot=dn&8191,Nt=dn>>>13,pn=y[8]|0,Ft=pn&8191,qt=pn>>>13,gn=y[9]|0,Ht=gn&8191,Dt=gn>>>13;h.negative=n.negative^c.negative,h.length=19,p=Math.imul(K,et),o=Math.imul(K,tt),o=o+Math.imul(W,et)|0,m=Math.imul(W,tt);var lr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,p=Math.imul(st,et),o=Math.imul(st,tt),o=o+Math.imul(ht,et)|0,m=Math.imul(ht,tt),p=p+Math.imul(K,Q)|0,o=o+Math.imul(K,Et)|0,o=o+Math.imul(W,Q)|0,m=m+Math.imul(W,Et)|0;var dr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,p=Math.imul(bt,et),o=Math.imul(bt,tt),o=o+Math.imul(yt,et)|0,m=Math.imul(yt,tt),p=p+Math.imul(st,Q)|0,o=o+Math.imul(st,Et)|0,o=o+Math.imul(ht,Q)|0,m=m+Math.imul(ht,Et)|0,p=p+Math.imul(K,Bt)|0,o=o+Math.imul(K,At)|0,o=o+Math.imul(W,Bt)|0,m=m+Math.imul(W,At)|0;var pr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,p=Math.imul(lt,et),o=Math.imul(lt,tt),o=o+Math.imul(xt,et)|0,m=Math.imul(xt,tt),p=p+Math.imul(bt,Q)|0,o=o+Math.imul(bt,Et)|0,o=o+Math.imul(yt,Q)|0,m=m+Math.imul(yt,Et)|0,p=p+Math.imul(st,Bt)|0,o=o+Math.imul(st,At)|0,o=o+Math.imul(ht,Bt)|0,m=m+Math.imul(ht,At)|0,p=p+Math.imul(K,kt)|0,o=o+Math.imul(K,It)|0,o=o+Math.imul(W,kt)|0,m=m+Math.imul(W,It)|0;var gr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(gr>>>26)|0,gr&=67108863,p=Math.imul(pt,et),o=Math.imul(pt,tt),o=o+Math.imul(Mt,et)|0,m=Math.imul(Mt,tt),p=p+Math.imul(lt,Q)|0,o=o+Math.imul(lt,Et)|0,o=o+Math.imul(xt,Q)|0,m=m+Math.imul(xt,Et)|0,p=p+Math.imul(bt,Bt)|0,o=o+Math.imul(bt,At)|0,o=o+Math.imul(yt,Bt)|0,m=m+Math.imul(yt,At)|0,p=p+Math.imul(st,kt)|0,o=o+Math.imul(st,It)|0,o=o+Math.imul(ht,kt)|0,m=m+Math.imul(ht,It)|0,p=p+Math.imul(K,Rt)|0,o=o+Math.imul(K,Tt)|0,o=o+Math.imul(W,Rt)|0,m=m+Math.imul(W,Tt)|0;var mr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(mr>>>26)|0,mr&=67108863,p=Math.imul(wt,et),o=Math.imul(wt,tt),o=o+Math.imul(dt,et)|0,m=Math.imul(dt,tt),p=p+Math.imul(pt,Q)|0,o=o+Math.imul(pt,Et)|0,o=o+Math.imul(Mt,Q)|0,m=m+Math.imul(Mt,Et)|0,p=p+Math.imul(lt,Bt)|0,o=o+Math.imul(lt,At)|0,o=o+Math.imul(xt,Bt)|0,m=m+Math.imul(xt,At)|0,p=p+Math.imul(bt,kt)|0,o=o+Math.imul(bt,It)|0,o=o+Math.imul(yt,kt)|0,m=m+Math.imul(yt,It)|0,p=p+Math.imul(st,Rt)|0,o=o+Math.imul(st,Tt)|0,o=o+Math.imul(ht,Rt)|0,m=m+Math.imul(ht,Tt)|0,p=p+Math.imul(K,Lt)|0,o=o+Math.imul(K,Ct)|0,o=o+Math.imul(W,Lt)|0,m=m+Math.imul(W,Ct)|0;var yr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(yr>>>26)|0,yr&=67108863,p=Math.imul(gt,et),o=Math.imul(gt,tt),o=o+Math.imul(_t,et)|0,m=Math.imul(_t,tt),p=p+Math.imul(wt,Q)|0,o=o+Math.imul(wt,Et)|0,o=o+Math.imul(dt,Q)|0,m=m+Math.imul(dt,Et)|0,p=p+Math.imul(pt,Bt)|0,o=o+Math.imul(pt,At)|0,o=o+Math.imul(Mt,Bt)|0,m=m+Math.imul(Mt,At)|0,p=p+Math.imul(lt,kt)|0,o=o+Math.imul(lt,It)|0,o=o+Math.imul(xt,kt)|0,m=m+Math.imul(xt,It)|0,p=p+Math.imul(bt,Rt)|0,o=o+Math.imul(bt,Tt)|0,o=o+Math.imul(yt,Rt)|0,m=m+Math.imul(yt,Tt)|0,p=p+Math.imul(st,Lt)|0,o=o+Math.imul(st,Ct)|0,o=o+Math.imul(ht,Lt)|0,m=m+Math.imul(ht,Ct)|0,p=p+Math.imul(K,Pt)|0,o=o+Math.imul(K,Ut)|0,o=o+Math.imul(W,Pt)|0,m=m+Math.imul(W,Ut)|0;var wr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(wr>>>26)|0,wr&=67108863,p=Math.imul(St,et),o=Math.imul(St,tt),o=o+Math.imul(b,et)|0,m=Math.imul(b,tt),p=p+Math.imul(gt,Q)|0,o=o+Math.imul(gt,Et)|0,o=o+Math.imul(_t,Q)|0,m=m+Math.imul(_t,Et)|0,p=p+Math.imul(wt,Bt)|0,o=o+Math.imul(wt,At)|0,o=o+Math.imul(dt,Bt)|0,m=m+Math.imul(dt,At)|0,p=p+Math.imul(pt,kt)|0,o=o+Math.imul(pt,It)|0,o=o+Math.imul(Mt,kt)|0,m=m+Math.imul(Mt,It)|0,p=p+Math.imul(lt,Rt)|0,o=o+Math.imul(lt,Tt)|0,o=o+Math.imul(xt,Rt)|0,m=m+Math.imul(xt,Tt)|0,p=p+Math.imul(bt,Lt)|0,o=o+Math.imul(bt,Ct)|0,o=o+Math.imul(yt,Lt)|0,m=m+Math.imul(yt,Ct)|0,p=p+Math.imul(st,Pt)|0,o=o+Math.imul(st,Ut)|0,o=o+Math.imul(ht,Pt)|0,m=m+Math.imul(ht,Ut)|0,p=p+Math.imul(K,Ot)|0,o=o+Math.imul(K,Nt)|0,o=o+Math.imul(W,Ot)|0,m=m+Math.imul(W,Nt)|0;var vr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(vr>>>26)|0,vr&=67108863,p=Math.imul(d,et),o=Math.imul(d,tt),o=o+Math.imul(M,et)|0,m=Math.imul(M,tt),p=p+Math.imul(St,Q)|0,o=o+Math.imul(St,Et)|0,o=o+Math.imul(b,Q)|0,m=m+Math.imul(b,Et)|0,p=p+Math.imul(gt,Bt)|0,o=o+Math.imul(gt,At)|0,o=o+Math.imul(_t,Bt)|0,m=m+Math.imul(_t,At)|0,p=p+Math.imul(wt,kt)|0,o=o+Math.imul(wt,It)|0,o=o+Math.imul(dt,kt)|0,m=m+Math.imul(dt,It)|0,p=p+Math.imul(pt,Rt)|0,o=o+Math.imul(pt,Tt)|0,o=o+Math.imul(Mt,Rt)|0,m=m+Math.imul(Mt,Tt)|0,p=p+Math.imul(lt,Lt)|0,o=o+Math.imul(lt,Ct)|0,o=o+Math.imul(xt,Lt)|0,m=m+Math.imul(xt,Ct)|0,p=p+Math.imul(bt,Pt)|0,o=o+Math.imul(bt,Ut)|0,o=o+Math.imul(yt,Pt)|0,m=m+Math.imul(yt,Ut)|0,p=p+Math.imul(st,Ot)|0,o=o+Math.imul(st,Nt)|0,o=o+Math.imul(ht,Ot)|0,m=m+Math.imul(ht,Nt)|0,p=p+Math.imul(K,Ft)|0,o=o+Math.imul(K,qt)|0,o=o+Math.imul(W,Ft)|0,m=m+Math.imul(W,qt)|0;var br=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(br>>>26)|0,br&=67108863,p=Math.imul(k,et),o=Math.imul(k,tt),o=o+Math.imul(C,et)|0,m=Math.imul(C,tt),p=p+Math.imul(d,Q)|0,o=o+Math.imul(d,Et)|0,o=o+Math.imul(M,Q)|0,m=m+Math.imul(M,Et)|0,p=p+Math.imul(St,Bt)|0,o=o+Math.imul(St,At)|0,o=o+Math.imul(b,Bt)|0,m=m+Math.imul(b,At)|0,p=p+Math.imul(gt,kt)|0,o=o+Math.imul(gt,It)|0,o=o+Math.imul(_t,kt)|0,m=m+Math.imul(_t,It)|0,p=p+Math.imul(wt,Rt)|0,o=o+Math.imul(wt,Tt)|0,o=o+Math.imul(dt,Rt)|0,m=m+Math.imul(dt,Tt)|0,p=p+Math.imul(pt,Lt)|0,o=o+Math.imul(pt,Ct)|0,o=o+Math.imul(Mt,Lt)|0,m=m+Math.imul(Mt,Ct)|0,p=p+Math.imul(lt,Pt)|0,o=o+Math.imul(lt,Ut)|0,o=o+Math.imul(xt,Pt)|0,m=m+Math.imul(xt,Ut)|0,p=p+Math.imul(bt,Ot)|0,o=o+Math.imul(bt,Nt)|0,o=o+Math.imul(yt,Ot)|0,m=m+Math.imul(yt,Nt)|0,p=p+Math.imul(st,Ft)|0,o=o+Math.imul(st,qt)|0,o=o+Math.imul(ht,Ft)|0,m=m+Math.imul(ht,qt)|0,p=p+Math.imul(K,Ht)|0,o=o+Math.imul(K,Dt)|0,o=o+Math.imul(W,Ht)|0,m=m+Math.imul(W,Dt)|0;var xr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(xr>>>26)|0,xr&=67108863,p=Math.imul(k,Q),o=Math.imul(k,Et),o=o+Math.imul(C,Q)|0,m=Math.imul(C,Et),p=p+Math.imul(d,Bt)|0,o=o+Math.imul(d,At)|0,o=o+Math.imul(M,Bt)|0,m=m+Math.imul(M,At)|0,p=p+Math.imul(St,kt)|0,o=o+Math.imul(St,It)|0,o=o+Math.imul(b,kt)|0,m=m+Math.imul(b,It)|0,p=p+Math.imul(gt,Rt)|0,o=o+Math.imul(gt,Tt)|0,o=o+Math.imul(_t,Rt)|0,m=m+Math.imul(_t,Tt)|0,p=p+Math.imul(wt,Lt)|0,o=o+Math.imul(wt,Ct)|0,o=o+Math.imul(dt,Lt)|0,m=m+Math.imul(dt,Ct)|0,p=p+Math.imul(pt,Pt)|0,o=o+Math.imul(pt,Ut)|0,o=o+Math.imul(Mt,Pt)|0,m=m+Math.imul(Mt,Ut)|0,p=p+Math.imul(lt,Ot)|0,o=o+Math.imul(lt,Nt)|0,o=o+Math.imul(xt,Ot)|0,m=m+Math.imul(xt,Nt)|0,p=p+Math.imul(bt,Ft)|0,o=o+Math.imul(bt,qt)|0,o=o+Math.imul(yt,Ft)|0,m=m+Math.imul(yt,qt)|0,p=p+Math.imul(st,Ht)|0,o=o+Math.imul(st,Dt)|0,o=o+Math.imul(ht,Ht)|0,m=m+Math.imul(ht,Dt)|0;var Mr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,p=Math.imul(k,Bt),o=Math.imul(k,At),o=o+Math.imul(C,Bt)|0,m=Math.imul(C,At),p=p+Math.imul(d,kt)|0,o=o+Math.imul(d,It)|0,o=o+Math.imul(M,kt)|0,m=m+Math.imul(M,It)|0,p=p+Math.imul(St,Rt)|0,o=o+Math.imul(St,Tt)|0,o=o+Math.imul(b,Rt)|0,m=m+Math.imul(b,Tt)|0,p=p+Math.imul(gt,Lt)|0,o=o+Math.imul(gt,Ct)|0,o=o+Math.imul(_t,Lt)|0,m=m+Math.imul(_t,Ct)|0,p=p+Math.imul(wt,Pt)|0,o=o+Math.imul(wt,Ut)|0,o=o+Math.imul(dt,Pt)|0,m=m+Math.imul(dt,Ut)|0,p=p+Math.imul(pt,Ot)|0,o=o+Math.imul(pt,Nt)|0,o=o+Math.imul(Mt,Ot)|0,m=m+Math.imul(Mt,Nt)|0,p=p+Math.imul(lt,Ft)|0,o=o+Math.imul(lt,qt)|0,o=o+Math.imul(xt,Ft)|0,m=m+Math.imul(xt,qt)|0,p=p+Math.imul(bt,Ht)|0,o=o+Math.imul(bt,Dt)|0,o=o+Math.imul(yt,Ht)|0,m=m+Math.imul(yt,Dt)|0;var _r=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(_r>>>26)|0,_r&=67108863,p=Math.imul(k,kt),o=Math.imul(k,It),o=o+Math.imul(C,kt)|0,m=Math.imul(C,It),p=p+Math.imul(d,Rt)|0,o=o+Math.imul(d,Tt)|0,o=o+Math.imul(M,Rt)|0,m=m+Math.imul(M,Tt)|0,p=p+Math.imul(St,Lt)|0,o=o+Math.imul(St,Ct)|0,o=o+Math.imul(b,Lt)|0,m=m+Math.imul(b,Ct)|0,p=p+Math.imul(gt,Pt)|0,o=o+Math.imul(gt,Ut)|0,o=o+Math.imul(_t,Pt)|0,m=m+Math.imul(_t,Ut)|0,p=p+Math.imul(wt,Ot)|0,o=o+Math.imul(wt,Nt)|0,o=o+Math.imul(dt,Ot)|0,m=m+Math.imul(dt,Nt)|0,p=p+Math.imul(pt,Ft)|0,o=o+Math.imul(pt,qt)|0,o=o+Math.imul(Mt,Ft)|0,m=m+Math.imul(Mt,qt)|0,p=p+Math.imul(lt,Ht)|0,o=o+Math.imul(lt,Dt)|0,o=o+Math.imul(xt,Ht)|0,m=m+Math.imul(xt,Dt)|0;var Sr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,p=Math.imul(k,Rt),o=Math.imul(k,Tt),o=o+Math.imul(C,Rt)|0,m=Math.imul(C,Tt),p=p+Math.imul(d,Lt)|0,o=o+Math.imul(d,Ct)|0,o=o+Math.imul(M,Lt)|0,m=m+Math.imul(M,Ct)|0,p=p+Math.imul(St,Pt)|0,o=o+Math.imul(St,Ut)|0,o=o+Math.imul(b,Pt)|0,m=m+Math.imul(b,Ut)|0,p=p+Math.imul(gt,Ot)|0,o=o+Math.imul(gt,Nt)|0,o=o+Math.imul(_t,Ot)|0,m=m+Math.imul(_t,Nt)|0,p=p+Math.imul(wt,Ft)|0,o=o+Math.imul(wt,qt)|0,o=o+Math.imul(dt,Ft)|0,m=m+Math.imul(dt,qt)|0,p=p+Math.imul(pt,Ht)|0,o=o+Math.imul(pt,Dt)|0,o=o+Math.imul(Mt,Ht)|0,m=m+Math.imul(Mt,Dt)|0;var Er=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Er>>>26)|0,Er&=67108863,p=Math.imul(k,Lt),o=Math.imul(k,Ct),o=o+Math.imul(C,Lt)|0,m=Math.imul(C,Ct),p=p+Math.imul(d,Pt)|0,o=o+Math.imul(d,Ut)|0,o=o+Math.imul(M,Pt)|0,m=m+Math.imul(M,Ut)|0,p=p+Math.imul(St,Ot)|0,o=o+Math.imul(St,Nt)|0,o=o+Math.imul(b,Ot)|0,m=m+Math.imul(b,Nt)|0,p=p+Math.imul(gt,Ft)|0,o=o+Math.imul(gt,qt)|0,o=o+Math.imul(_t,Ft)|0,m=m+Math.imul(_t,qt)|0,p=p+Math.imul(wt,Ht)|0,o=o+Math.imul(wt,Dt)|0,o=o+Math.imul(dt,Ht)|0,m=m+Math.imul(dt,Dt)|0;var Br=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Br>>>26)|0,Br&=67108863,p=Math.imul(k,Pt),o=Math.imul(k,Ut),o=o+Math.imul(C,Pt)|0,m=Math.imul(C,Ut),p=p+Math.imul(d,Ot)|0,o=o+Math.imul(d,Nt)|0,o=o+Math.imul(M,Ot)|0,m=m+Math.imul(M,Nt)|0,p=p+Math.imul(St,Ft)|0,o=o+Math.imul(St,qt)|0,o=o+Math.imul(b,Ft)|0,m=m+Math.imul(b,qt)|0,p=p+Math.imul(gt,Ht)|0,o=o+Math.imul(gt,Dt)|0,o=o+Math.imul(_t,Ht)|0,m=m+Math.imul(_t,Dt)|0;var Ar=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,p=Math.imul(k,Ot),o=Math.imul(k,Nt),o=o+Math.imul(C,Ot)|0,m=Math.imul(C,Nt),p=p+Math.imul(d,Ft)|0,o=o+Math.imul(d,qt)|0,o=o+Math.imul(M,Ft)|0,m=m+Math.imul(M,qt)|0,p=p+Math.imul(St,Ht)|0,o=o+Math.imul(St,Dt)|0,o=o+Math.imul(b,Ht)|0,m=m+Math.imul(b,Dt)|0;var kr=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(kr>>>26)|0,kr&=67108863,p=Math.imul(k,Ft),o=Math.imul(k,qt),o=o+Math.imul(C,Ft)|0,m=Math.imul(C,qt),p=p+Math.imul(d,Ht)|0,o=o+Math.imul(d,Dt)|0,o=o+Math.imul(M,Ht)|0,m=m+Math.imul(M,Dt)|0;var Ir=(_+p|0)+((o&8191)<<13)|0;_=(m+(o>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,p=Math.imul(k,Ht),o=Math.imul(k,Dt),o=o+Math.imul(C,Ht)|0,m=Math.imul(C,Dt);var Rr=(_+p|0)+((o&8191)<<13)|0;return _=(m+(o>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,x[0]=lr,x[1]=dr,x[2]=pr,x[3]=gr,x[4]=mr,x[5]=yr,x[6]=wr,x[7]=vr,x[8]=br,x[9]=xr,x[10]=Mr,x[11]=_r,x[12]=Sr,x[13]=Er,x[14]=Br,x[15]=Ar,x[16]=kr,x[17]=Ir,x[18]=Rr,_!==0&&(x[19]=_,h.length++),h};Math.imul||(F=q);function N(w,n,c){c.negative=n.negative^w.negative,c.length=w.length+n.length;for(var h=0,g=0,y=0;y<c.length-1;y++){var x=g;g=0;for(var _=h&67108863,p=Math.min(y,n.length-1),o=Math.max(0,y-w.length+1);o<=p;o++){var m=y-o,$=w.words[m]|0,K=n.words[o]|0,W=$*K,Wt=W&67108863;x=x+(W/67108864|0)|0,Wt=Wt+_|0,_=Wt&67108863,x=x+(Wt>>>26)|0,g+=x>>>26,x&=67108863}c.words[y]=_,h=x,x=g}return h!==0?c.words[y]=h:c.length--,c._strip()}function J(w,n,c){return N(w,n,c)}i.prototype.mulTo=function(n,c){var h,g=this.length+n.length;return this.length===10&&n.length===10?h=F(this,n,c):g<63?h=q(this,n,c):g<1024?h=N(this,n,c):h=J(this,n,c),h},i.prototype.mul=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),this.mulTo(n,c)},i.prototype.mulf=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),J(this,n,c)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var c=n<0;c&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var h=0,g=0;g<this.length;g++){var y=(this.words[g]|0)*n,x=(y&67108863)+(h&67108863);h>>=26,h+=y/67108864|0,h+=x>>>26,this.words[g]=x&67108863}return h!==0&&(this.words[g]=h,this.length++),c?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var c=U(n);if(c.length===0)return new i(1);for(var h=this,g=0;g<c.length&&c[g]===0;g++,h=h.sqr());if(++g<c.length)for(var y=h.sqr();g<c.length;g++,y=y.sqr())c[g]!==0&&(h=h.mul(y));return h},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,g=67108863>>>26-c<<26-c,y;if(c!==0){var x=0;for(y=0;y<this.length;y++){var _=this.words[y]&g,p=(this.words[y]|0)-_<<c;this.words[y]=p|x,x=_>>>26-c}x&&(this.words[y]=x,this.length++)}if(h!==0){for(y=this.length-1;y>=0;y--)this.words[y+h]=this.words[y];for(y=0;y<h;y++)this.words[y]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,c,h){r(typeof n=="number"&&n>=0);var g;c?g=(c-c%26)/26:g=0;var y=n%26,x=Math.min((n-y)/26,this.length),_=67108863^67108863>>>y<<y,p=h;if(g-=x,g=Math.max(0,g),p){for(var o=0;o<x;o++)p.words[o]=this.words[o];p.length=x}if(x!==0)if(this.length>x)for(this.length-=x,o=0;o<this.length;o++)this.words[o]=this.words[o+x];else this.words[0]=0,this.length=1;var m=0;for(o=this.length-1;o>=0&&(m!==0||o>=g);o--){var $=this.words[o]|0;this.words[o]=m<<26-y|$>>>y,m=$&_}return p&&m!==0&&(p.words[p.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,c,h){return r(this.negative===0),this.iushrn(n,c,h)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,g=1<<c;if(this.length<=h)return!1;var y=this.words[h];return!!(y&g)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var g=67108863^67108863>>>c<<c;this.words[this.length-1]&=g}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,c,h){var g=n.length+h,y;this._expand(g);var x,_=0;for(y=0;y<n.length;y++){x=(this.words[y+h]|0)+_;var p=(n.words[y]|0)*c;x-=p&67108863,_=(x>>26)-(p/67108864|0),this.words[y+h]=x&67108863}for(;y<this.length-h;y++)x=(this.words[y+h]|0)+_,_=x>>26,this.words[y+h]=x&67108863;if(_===0)return this._strip();for(r(_===-1),_=0,y=0;y<this.length;y++)x=-(this.words[y]|0)+_,_=x>>26,this.words[y]=x&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,c){var h=this.length-n.length,g=this.clone(),y=n,x=y.words[y.length-1]|0,_=this._countBits(x);h=26-_,h!==0&&(y=y.ushln(h),g.iushln(h),x=y.words[y.length-1]|0);var p=g.length-y.length,o;if(c!=="mod"){o=new i(null),o.length=p+1,o.words=new Array(o.length);for(var m=0;m<o.length;m++)o.words[m]=0}var $=g.clone()._ishlnsubmul(y,1,p);$.negative===0&&(g=$,o&&(o.words[p]=1));for(var K=p-1;K>=0;K--){var W=(g.words[y.length+K]|0)*67108864+(g.words[y.length+K-1]|0);for(W=Math.min(W/x|0,67108863),g._ishlnsubmul(y,W,K);g.negative!==0;)W--,g.negative=0,g._ishlnsubmul(y,1,K),g.isZero()||(g.negative^=1);o&&(o.words[K]=W)}return o&&o._strip(),g._strip(),c!=="div"&&h!==0&&g.iushrn(h),{div:o||null,mod:g}},i.prototype.divmod=function(n,c,h){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var g,y,x;return this.negative!==0&&n.negative===0?(x=this.neg().divmod(n,c),c!=="mod"&&(g=x.div.neg()),c!=="div"&&(y=x.mod.neg(),h&&y.negative!==0&&y.iadd(n)),{div:g,mod:y}):this.negative===0&&n.negative!==0?(x=this.divmod(n.neg(),c),c!=="mod"&&(g=x.div.neg()),{div:g,mod:x.mod}):this.negative&n.negative?(x=this.neg().divmod(n.neg(),c),c!=="div"&&(y=x.mod.neg(),h&&y.negative!==0&&y.isub(n)),{div:x.div,mod:y}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?c==="div"?{div:this.divn(n.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,c)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var c=this.divmod(n);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(n):c.mod,g=n.ushrn(1),y=n.andln(1),x=h.cmp(g);return x<0||y===1&&x===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=(1<<26)%n,g=0,y=this.length-1;y>=0;y--)g=(h*g+(this.words[y]|0))%n;return c?-g:g},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=0,g=this.length-1;g>=0;g--){var y=(this.words[g]|0)+h*67108864;this.words[g]=y/n|0,h=y%n}return this._strip(),c?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var g=new i(1),y=new i(0),x=new i(0),_=new i(1),p=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++p;for(var o=h.clone(),m=c.clone();!c.isZero();){for(var $=0,K=1;!(c.words[0]&K)&&$<26;++$,K<<=1);if($>0)for(c.iushrn($);$-- >0;)(g.isOdd()||y.isOdd())&&(g.iadd(o),y.isub(m)),g.iushrn(1),y.iushrn(1);for(var W=0,Wt=1;!(h.words[0]&Wt)&&W<26;++W,Wt<<=1);if(W>0)for(h.iushrn(W);W-- >0;)(x.isOdd()||_.isOdd())&&(x.iadd(o),_.isub(m)),x.iushrn(1),_.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(x),y.isub(_)):(h.isub(c),x.isub(g),_.isub(y))}return{a:x,b:_,gcd:h.iushln(p)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var g=new i(1),y=new i(0),x=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var _=0,p=1;!(c.words[0]&p)&&_<26;++_,p<<=1);if(_>0)for(c.iushrn(_);_-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);for(var o=0,m=1;!(h.words[0]&m)&&o<26;++o,m<<=1);if(o>0)for(h.iushrn(o);o-- >0;)y.isOdd()&&y.iadd(x),y.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(y)):(h.isub(c),y.isub(g))}var $;return c.cmpn(1)===0?$=g:$=y,$.cmpn(0)<0&&$.iadd(n),$},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var c=this.clone(),h=n.clone();c.negative=0,h.negative=0;for(var g=0;c.isEven()&&h.isEven();g++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var y=c.cmp(h);if(y<0){var x=c;c=h,h=x}else if(y===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(g)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var c=n%26,h=(n-c)/26,g=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var y=g,x=h;y!==0&&x<this.length;x++){var _=this.words[x]|0;_+=y,y=_>>>26,_&=67108863,this.words[x]=_}return y!==0&&(this.words[x]=y,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var c=n<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(n=-n),r(n<=67108863,"Number is too big");var g=this.words[0]|0;h=g===n?0:g<n?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var c=this.ucmp(n);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var g=this.words[h]|0,y=n.words[h]|0;if(g!==y){g<y?c=-1:g>y&&(c=1);break}}return c},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new at(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var H={k256:null,p224:null,p192:null,p25519:null};function Z(w,n){this.name=w,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Z.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},Z.prototype.ireduce=function(n){var c=n,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var g=h<this.n?-1:c.ucmp(this.p);return g===0?(c.words[0]=0,c.length=1):g>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},Z.prototype.split=function(n,c){n.iushrn(this.n,0,c)},Z.prototype.imulK=function(n){return n.imul(this.k)};function j(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(j,Z),j.prototype.split=function(n,c){for(var h=4194303,g=Math.min(n.length,9),y=0;y<g;y++)c.words[y]=n.words[y];if(c.length=g,n.length<=9){n.words[0]=0,n.length=1;return}var x=n.words[9];for(c.words[c.length++]=x&h,y=10;y<n.length;y++){var _=n.words[y]|0;n.words[y-10]=(_&h)<<4|x>>>22,x=_}x>>>=22,n.words[y-10]=x,x===0&&n.length>10?n.length-=10:n.length-=9},j.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var c=0,h=0;h<n.length;h++){var g=n.words[h]|0;c+=g*977,n.words[h]=c&67108863,c=g*64+(c/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function it(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(it,Z);function jt(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(jt,Z);function ce(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(ce,Z),ce.prototype.imulK=function(n){for(var c=0,h=0;h<n.length;h++){var g=(n.words[h]|0)*19+c,y=g&67108863;g>>>=26,n.words[h]=y,c=g}return c!==0&&(n.words[n.length++]=c),n},i._prime=function(n){if(H[n])return H[n];var c;if(n==="k256")c=new j;else if(n==="p224")c=new it;else if(n==="p192")c=new jt;else if(n==="p25519")c=new ce;else throw new Error("Unknown prime "+n);return H[n]=c,c};function at(w){if(typeof w=="string"){var n=i._prime(w);this.m=n.p,this.prime=n}else r(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}at.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},at.prototype._verify2=function(n,c){r((n.negative|c.negative)===0,"red works only with positives"),r(n.red&&n.red===c.red,"red works only with red numbers")},at.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(B(n,n.umod(this.m)._forceRed(this)),n)},at.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},at.prototype.add=function(n,c){this._verify2(n,c);var h=n.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},at.prototype.iadd=function(n,c){this._verify2(n,c);var h=n.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},at.prototype.sub=function(n,c){this._verify2(n,c);var h=n.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},at.prototype.isub=function(n,c){this._verify2(n,c);var h=n.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},at.prototype.shl=function(n,c){return this._verify1(n),this.imod(n.ushln(c))},at.prototype.imul=function(n,c){return this._verify2(n,c),this.imod(n.imul(c))},at.prototype.mul=function(n,c){return this._verify2(n,c),this.imod(n.mul(c))},at.prototype.isqr=function(n){return this.imul(n,n.clone())},at.prototype.sqr=function(n){return this.mul(n,n)},at.prototype.sqrt=function(n){if(n.isZero())return n.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(n,h)}for(var g=this.m.subn(1),y=0;!g.isZero()&&g.andln(1)===0;)y++,g.iushrn(1);r(!g.isZero());var x=new i(1).toRed(this),_=x.redNeg(),p=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,p).cmp(_)!==0;)o.redIAdd(_);for(var m=this.pow(o,g),$=this.pow(n,g.addn(1).iushrn(1)),K=this.pow(n,g),W=y;K.cmp(x)!==0;){for(var Wt=K,st=0;Wt.cmp(x)!==0;st++)Wt=Wt.redSqr();r(st<W);var ht=this.pow(m,new i(1).iushln(W-st-1));$=$.redMul(ht),m=ht.redSqr(),K=K.redMul(m),W=st}return $},at.prototype.invm=function(n){var c=n._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},at.prototype.pow=function(n,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return n.clone();var h=4,g=new Array(1<<h);g[0]=new i(1).toRed(this),g[1]=n;for(var y=2;y<g.length;y++)g[y]=this.mul(g[y-1],n);var x=g[0],_=0,p=0,o=c.bitLength()%26;for(o===0&&(o=26),y=c.length-1;y>=0;y--){for(var m=c.words[y],$=o-1;$>=0;$--){var K=m>>$&1;if(x!==g[0]&&(x=this.sqr(x)),K===0&&_===0){p=0;continue}_<<=1,_|=K,p++,!(p!==h&&(y!==0||$!==0))&&(x=this.mul(x,g[_]),p=0,_=0)}o=26}return x},at.prototype.convertTo=function(n){var c=n.umod(this.m);return c===n?c.clone():c},at.prototype.convertFrom=function(n){var c=n.clone();return c.red=null,c},i.mont=function(n){return new ne(n)};function ne(w){at.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(ne,at),ne.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},ne.prototype.convertFrom=function(n){var c=this.imod(n.mul(this.rinv));return c.red=null,c},ne.prototype.imul=function(n,c){if(n.isZero()||c.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=h.isub(g).iushrn(this.shift),x=y;return y.cmp(this.m)>=0?x=y.isub(this.m):y.cmpn(0)<0&&(x=y.iadd(this.m)),x._forceRed(this)},ne.prototype.mul=function(n,c){if(n.isZero()||c.isZero())return new i(0)._forceRed(this);var h=n.mul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=h.isub(g).iushrn(this.shift),x=y;return y.cmp(this.m)>=0?x=y.isub(this.m):y.cmpn(0)<0&&(x=y.iadd(this.m)),x._forceRed(this)},ne.prototype.invm=function(n){var c=this.imod(n._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(s,Oe)})(jc);function Ze(s,t,e){return t<=s&&s<=e}function di(s){if(s===void 0)return{};if(s===Object(s))return s;throw TypeError("Could not convert argument to dictionary")}function Vc(s){for(var t=String(s),e=t.length,r=0,a=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)a.push(i);else if(56320<=i&&i<=57343)a.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)a.push(65533);else{var u=s.charCodeAt(r+1);if(56320<=u&&u<=57343){var l=i&1023,v=u&1023;a.push(65536+(l<<10)+v),r+=1}else a.push(65533)}r+=1}return a}function Xc(s){for(var t="",e=0;e<s.length;++e){var r=s[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Qn=-1;function as(s){this.tokens=[].slice.call(s)}as.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Qn},prepend:function(s){if(Array.isArray(s))for(var t=s;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(s)},push:function(s){if(Array.isArray(s))for(var t=s;t.length;)this.tokens.push(t.shift());else this.tokens.push(s)}};var Qr=-1;function Bi(s,t){if(s)throw TypeError("Decoder error");return t||65533}var ti="utf-8";function ei(s,t){if(!(this instanceof ei))return new ei(s,t);if(s=s!==void 0?String(s).toLowerCase():ti,s!==ti)throw new Error("Encoding not supported. Only utf-8 is supported");t=di(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ei.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=di(e),this._streaming||(this._decoder=new Yc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var a=new as(r),i=[],u;!a.endOfStream()&&(u=this._decoder.handler(a,a.read()),u!==Qr);)u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u));if(!this._streaming){do{if(u=this._decoder.handler(a,a.read()),u===Qr)break;u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u))}while(!a.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Xc(i)}};function ri(s,t){if(!(this instanceof ri))return new ri(s,t);if(s=s!==void 0?String(s).toLowerCase():ti,s!==ti)throw new Error("Encoding not supported. Only utf-8 is supported");t=di(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}ri.prototype={encode:function(t,e){t=t?String(t):"",e=di(e),this._streaming||(this._encoder=new Jc(this._options)),this._streaming=Boolean(e.stream);for(var r=[],a=new as(Vc(t)),i;!a.endOfStream()&&(i=this._encoder.handler(a,a.read()),i!==Qr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(a,a.read()),i!==Qr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Yc(s){var t=s.fatal,e=0,r=0,a=0,i=128,u=191;this.handler=function(l,v){if(v===Qn&&a!==0)return a=0,Bi(t);if(v===Qn)return Qr;if(a===0){if(Ze(v,0,127))return v;if(Ze(v,194,223))a=1,e=v-192;else if(Ze(v,224,239))v===224&&(i=160),v===237&&(u=159),a=2,e=v-224;else if(Ze(v,240,244))v===240&&(i=144),v===244&&(u=143),a=3,e=v-240;else return Bi(t);return e=e<<6*a,null}if(!Ze(v,i,u))return e=a=r=0,i=128,u=191,l.prepend(v),Bi(t);if(i=128,u=191,r+=1,e+=v-128<<6*(a-r),r!==a)return null;var S=e;return e=a=r=0,S}}function Jc(s){s.fatal,this.handler=function(t,e){if(e===Qn)return Qr;if(Ze(e,0,127))return e;var r,a;Ze(e,128,2047)?(r=1,a=192):Ze(e,2048,65535)?(r=2,a=224):Ze(e,65536,1114111)&&(r=3,a=240);for(var i=[(e>>6*r)+a];r>0;){var u=e>>6*(r-1);i.push(128|u&63),r-=1}return i}}const Qc=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ei,TextEncoder:ri},Symbol.toStringTag,{value:"Module"})),tu=cr(Qc);var eu=Oe&&Oe.__createBinding||(Object.create?function(s,t,e,r){r===void 0&&(r=e),Object.defineProperty(s,r,{enumerable:!0,get:function(){return t[e]}})}:function(s,t,e,r){r===void 0&&(r=e),s[r]=t[e]}),ru=Oe&&Oe.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),Ke=Oe&&Oe.__decorate||function(s,t,e,r){var a=arguments.length,i=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,t,e,r);else for(var l=s.length-1;l>=0;l--)(u=s[l])&&(i=(a<3?u(i):a>3?u(t,e,i):u(t,e))||i);return a>3&&i&&Object.defineProperty(t,e,i),i},nu=Oe&&Oe.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.hasOwnProperty.call(s,e)&&eu(t,s,e);return ru(t,s),t},Ro=Oe&&Oe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ye,"__esModule",{value:!0});var To=ye.deserializeUnchecked=No=ye.deserialize=Oo=ye.serialize=ye.BinaryReader=ye.BinaryWriter=ye.BorshError=ye.baseDecode=ye.baseEncode=void 0;const nr=Ro(Hi),Lo=Ro(te),iu=nu(tu),su=typeof TextDecoder!="function"?iu.TextDecoder:TextDecoder,ou=new su("utf-8",{fatal:!0});function au(s){return typeof s=="string"&&(s=Buffer.from(s,"utf8")),Lo.default.encode(Buffer.from(s))}ye.baseEncode=au;function cu(s){return Buffer.from(Lo.default.decode(s))}ye.baseDecode=cu;const Ai=1024;class be extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ye.BorshError=be;class Co{constructor(){this.buf=Buffer.alloc(Ai),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Ai)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new nr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new nr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new nr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new nr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Ai)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}ye.BinaryWriter=Co;function $e(s,t,e){const r=e.value;e.value=function(...a){try{return r.apply(this,a)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new be("Reached the end of buffer when deserializing")}throw i}}}class ke{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new nr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new nr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new nr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new nr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new be(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return ou.decode(e)}catch(r){throw new be(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let a=0;a<e;++a)r.push(t());return r}}Ke([$e],ke.prototype,"readU8",null);Ke([$e],ke.prototype,"readU16",null);Ke([$e],ke.prototype,"readU32",null);Ke([$e],ke.prototype,"readU64",null);Ke([$e],ke.prototype,"readU128",null);Ke([$e],ke.prototype,"readU256",null);Ke([$e],ke.prototype,"readU512",null);Ke([$e],ke.prototype,"readString",null);Ke([$e],ke.prototype,"readFixedArray",null);Ke([$e],ke.prototype,"readArray",null);ye.BinaryReader=ke;function Po(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Tr(s,t,e,r,a){try{if(typeof r=="string")a[`write${Po(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new be(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);a.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new be(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)Tr(s,null,e[i],r[0],a)}else a.writeArray(e,i=>{Tr(s,t,i,r[0],a)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?a.writeU8(0):(a.writeU8(1),Tr(s,t,e,r.type,a));break}case"map":{a.writeU32(e.size),e.forEach((i,u)=>{Tr(s,t,u,r.key,a),Tr(s,t,i,r.value,a)});break}default:throw new be(`FieldType ${r} unrecognized`)}else Uo(s,e,a)}catch(i){throw i instanceof be&&i.addToFieldPath(t),i}}function Uo(s,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=s.get(t.constructor);if(!r)throw new be(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([a,i])=>{Tr(s,a,t[a],i,e)});else if(r.kind==="enum"){const a=t[r.field];for(let i=0;i<r.values.length;++i){const[u,l]=r.values[i];if(u===a){e.writeU8(i),Tr(s,u,t[u],l,e);break}}}else throw new be(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function uu(s,t,e=Co){const r=new e;return Uo(s,t,r),r.toArray()}var Oo=ye.serialize=uu;function Lr(s,t,e,r){try{if(typeof e=="string")return r[`read${Po(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const a=[];for(let i=0;i<e[1];i++)a.push(Lr(s,null,e[0],r));return a}else return r.readArray(()=>Lr(s,t,e[0],r))}if(e.kind==="option")return r.readU8()?Lr(s,t,e.type,r):void 0;if(e.kind==="map"){let a=new Map;const i=r.readU32();for(let u=0;u<i;u++){const l=Lr(s,t,e.key,r),v=Lr(s,t,e.value,r);a.set(l,v)}return a}return cs(s,e,r)}catch(a){throw a instanceof be&&a.addToFieldPath(t),a}}function cs(s,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=s.get(t);if(!r)throw new be(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const a={};for(const[i,u]of s.get(t).fields)a[i]=Lr(s,i,u,e);return new t(a)}if(r.kind==="enum"){const a=e.readU8();if(a>=r.values.length)throw new be(`Enum index: ${a} is out of range`);const[i,u]=r.values[a],l=Lr(s,i,u,e);return new t({[i]:l})}throw new be(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function hu(s,t,e,r=ke){const a=new r(e),i=cs(s,t,a);if(a.offset<e.length)throw new be(`Unexpected ${e.length-a.offset} bytes after deserialized data`);return i}var No=ye.deserialize=hu;function fu(s,t,e,r=ke){const a=new r(e);return cs(s,t,a)}To=ye.deserializeUnchecked=fu;var O={};Object.defineProperty(O,"__esModule",{value:!0});O.s16=O.s8=O.nu64be=O.u48be=O.u40be=O.u32be=O.u24be=O.u16be=me=O.nu64=O.u48=O.u40=ct=O.u32=O.u24=Te=O.u16=Jt=O.u8=Pr=O.offset=O.greedy=O.Constant=O.UTF8=O.CString=O.Blob=O.Boolean=O.BitField=O.BitStructure=O.VariantLayout=O.Union=O.UnionLayoutDiscriminator=O.UnionDiscriminator=O.Structure=O.Sequence=O.DoubleBE=O.Double=O.FloatBE=O.Float=O.NearInt64BE=O.NearInt64=O.NearUInt64BE=O.NearUInt64=O.IntBE=O.Int=O.UIntBE=O.UInt=O.OffsetLayout=O.GreedyCount=O.ExternalLayout=O.bindConstructorLayout=O.nameWithProperty=O.Layout=O.uint8ArrayToBuffer=O.checkUint8Array=void 0;O.constant=O.utf8=O.cstr=ue=O.blob=O.unionLayoutDiscriminator=O.union=xe=O.seq=O.bits=nt=O.struct=O.f64be=O.f64=O.f32be=O.f32=O.ns64be=O.s48be=O.s40be=O.s32be=O.s24be=O.s16be=Be=O.ns64=O.s48=O.s40=O.s32=O.s24=void 0;const us=Ta;function sn(s){if(!(s instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}O.checkUint8Array=sn;function Xt(s){return sn(s),us.Buffer.from(s.buffer,s.byteOffset,s.length)}O.uint8ArrayToBuffer=Xt;class ee{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}O.Layout=ee;function hs(s,t){return t.property?s+"["+t.property+"]":s}O.nameWithProperty=hs;function lu(s,t){if(typeof s!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(s,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof ee))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");s.layout_=t,t.boundConstructor_=s,t.makeDestinationObject=()=>new s,Object.defineProperty(s.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(s,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}O.bindConstructorLayout=lu;class _e extends ee{isCount(){throw new Error("ExternalLayout is abstract")}}O.ExternalLayout=_e;class Fo extends _e{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){sn(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}O.GreedyCount=Fo;class fs extends _e{constructor(t,e=0,r){if(!(t instanceof ee))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ue||this.layout instanceof Ne}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}O.OffsetLayout=fs;class Ue extends ee{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Xt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Xt(e).writeUIntLE(t,r,this.span),this.span}}O.UInt=Ue;class Ne extends ee{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Xt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Xt(e).writeUIntBE(t,r,this.span),this.span}}O.UIntBE=Ne;class Hr extends ee{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Xt(t).readIntLE(e,this.span)}encode(t,e,r=0){return Xt(e).writeIntLE(t,r,this.span),this.span}}O.Int=Hr;class on extends ee{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Xt(t).readIntBE(e,this.span)}encode(t,e,r=0){return Xt(e).writeIntBE(t,r,this.span),this.span}}O.IntBE=on;const Di=Math.pow(2,32);function pi(s){const t=Math.floor(s/Di),e=s-t*Di;return{hi32:t,lo32:e}}function gi(s,t){return s*Di+t}class qo extends ee{constructor(t){super(8,t)}decode(t,e=0){const r=Xt(t),a=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return gi(i,a)}encode(t,e,r=0){const a=pi(t),i=Xt(e);return i.writeUInt32LE(a.lo32,r),i.writeUInt32LE(a.hi32,r+4),8}}O.NearUInt64=qo;class Ho extends ee{constructor(t){super(8,t)}decode(t,e=0){const r=Xt(t),a=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return gi(a,i)}encode(t,e,r=0){const a=pi(t),i=Xt(e);return i.writeUInt32BE(a.hi32,r),i.writeUInt32BE(a.lo32,r+4),8}}O.NearUInt64BE=Ho;class Do extends ee{constructor(t){super(8,t)}decode(t,e=0){const r=Xt(t),a=r.readUInt32LE(e),i=r.readInt32LE(e+4);return gi(i,a)}encode(t,e,r=0){const a=pi(t),i=Xt(e);return i.writeUInt32LE(a.lo32,r),i.writeInt32LE(a.hi32,r+4),8}}O.NearInt64=Do;class zo extends ee{constructor(t){super(8,t)}decode(t,e=0){const r=Xt(t),a=r.readInt32BE(e),i=r.readUInt32BE(e+4);return gi(a,i)}encode(t,e,r=0){const a=pi(t),i=Xt(e);return i.writeInt32BE(a.hi32,r),i.writeUInt32BE(a.lo32,r+4),8}}O.NearInt64BE=zo;class Ko extends ee{constructor(t){super(4,t)}decode(t,e=0){return Xt(t).readFloatLE(e)}encode(t,e,r=0){return Xt(e).writeFloatLE(t,r),4}}O.Float=Ko;class $o extends ee{constructor(t){super(4,t)}decode(t,e=0){return Xt(t).readFloatBE(e)}encode(t,e,r=0){return Xt(e).writeFloatBE(t,r),4}}O.FloatBE=$o;class Wo extends ee{constructor(t){super(8,t)}decode(t,e=0){return Xt(t).readDoubleLE(e)}encode(t,e,r=0){return Xt(e).writeDoubleLE(t,r),8}}O.Double=Wo;class Go extends ee{constructor(t){super(8,t)}decode(t,e=0){return Xt(t).readDoubleBE(e)}encode(t,e,r=0){return Xt(e).writeDoubleBE(t,r),8}}O.DoubleBE=Go;class Zo extends ee{constructor(t,e,r){if(!(t instanceof ee))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof _e&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let a=-1;!(e instanceof _e)&&0<t.span&&(a=e*t.span),super(a,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,a=this.count;if(a instanceof _e&&(a=a.decode(t,e)),0<this.elementLayout.span)r=a*this.elementLayout.span;else{let i=0;for(;i<a;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let a=0,i=this.count;for(i instanceof _e&&(i=i.decode(t,e));a<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),a+=1;return r}encode(t,e,r=0){const a=this.elementLayout,i=t.reduce((u,l)=>u+a.encode(l,e,r+u),0);return this.count instanceof _e&&this.count.encode(t.length,e,r),i}}O.Sequence=Zo;class jo extends ee{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,u)=>i&&u instanceof ee,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let a=-1;try{a=t.reduce((i,u)=>i+u.getSpan(),0)}catch{}super(a,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((a,i)=>{const u=i.getSpan(t,e);return e+=u,a+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){sn(t);const r=this.makeDestinationObject();for(const a of this.fields)if(a.property!==void 0&&(r[a.property]=a.decode(t,e)),e+=a.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const a=r;let i=0,u=0;for(const l of this.fields){let v=l.span;if(u=0<v?v:0,l.property!==void 0){const S=t[l.property];S!==void 0&&(u=l.encode(S,e,r),0>v&&(v=l.getSpan(e,r)))}i=r,r+=v}return i+u-a}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}O.Structure=jo;class ls{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}O.UnionDiscriminator=ls;class ni extends ls{constructor(t,e){if(!(t instanceof _e&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}O.UnionLayoutDiscriminator=ni;class ds extends ee{constructor(t,e,r){let a;if(t instanceof Ue||t instanceof Ne)a=new ni(new fs(t));else if(t instanceof _e&&t.isCount())a=new ni(t);else if(t instanceof ls)a=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ee))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Ue||t instanceof Ne)&&(i+=a.layout.span)),super(i,r),this.discriminator=a,this.usesPrefixDiscriminator=t instanceof Ue||t instanceof Ne,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(l){return u(l)},this.configGetSourceVariant=function(l){u=l.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const a=this.discriminator,i=a.decode(t,e),u=this.registry[i];if(u===void 0){const l=this.defaultLayout;let v=0;this.usesPrefixDiscriminator&&(v=a.layout.span),r=this.makeDestinationObject(),r[a.property]=i,r[l.property]=l.decode(t,e+v)}else r=u.decode(t,e);return r}encode(t,e,r=0){const a=this.getSourceVariant(t);if(a===void 0){const i=this.discriminator,u=this.defaultLayout;let l=0;return this.usesPrefixDiscriminator&&(l=i.layout.span),i.encode(t[i.property],e,r),l+u.encode(t[u.property],e,r+l)}return a.encode(t,e,r)}addVariant(t,e,r){const a=new Vo(this,t,e,r);return this.registry[t]=a,a}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}O.Union=ds;class Vo extends ee{constructor(t,e,r,a){if(!(t instanceof ds))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&a===void 0&&(a=r,r=null),r){if(!(r instanceof ee))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof a!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,a),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let a=0;return this.layout&&(a=this.layout.getSpan(t,e+r)),r+a}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let a=0;return this.union.usesPrefixDiscriminator&&(a=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+a):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let a=0;if(this.union.usesPrefixDiscriminator&&(a=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=a;if(this.layout&&(this.layout.encode(t[this.property],e,r+a),i+=this.layout.getSpan(e,r+a),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}O.VariantLayout=Vo;function Wr(s){return 0>s&&(s+=4294967296),s}class ps extends ee{constructor(t,e,r){if(!(t instanceof Ue||t instanceof Ne))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let a=0;this._packedSetValue=function(i){return a=Wr(i),this},this._packedGetValue=function(){return a}}decode(t,e=0){const r=this.makeDestinationObject(),a=this.word.decode(t,e);this._packedSetValue(a);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const a=this.word.decode(e,r);this._packedSetValue(a);for(const i of this.fields)if(i.property!==void 0){const u=t[i.property];u!==void 0&&i.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new gs(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Xo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}O.BitStructure=ps;class gs{constructor(t,e,r){if(!(t instanceof ps))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const a=8*t.span,i=t.fields.reduce((u,l)=>u+l.bits,0);if(e+i>a)throw new Error("bits too long for span remainder ("+(a-i)+" of "+a+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=a-i-e),this.wordMask=Wr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Wr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Wr(t&this.valueMask))throw new TypeError(hs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Wr(t<<this.start);this.container._packedSetValue(Wr(e&~this.wordMask)|r)}}O.BitField=gs;let Xo=class extends gs{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};O.Boolean=Xo;class Yo extends ee{constructor(t,e){if(!(t instanceof _e&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof _e||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Xt(t).slice(e,e+r)}encode(t,e,r){let a=this.length;if(this.length instanceof _e&&(a=t.length),!(t instanceof Uint8Array&&a===t.length))throw new TypeError(hs("Blob.encode",this)+" requires (length "+a+") Uint8Array as src");if(r+a>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Xt(t);return Xt(e).write(i.toString("hex"),r,a,"hex"),this.length instanceof _e&&this.length.encode(a,e,r),a}}O.Blob=Yo;class Jo extends ee{constructor(t){super(-1,t)}getSpan(t,e=0){sn(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Xt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const a=us.Buffer.from(t,"utf8"),i=a.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const u=Xt(e);return a.copy(u,r),u[r+i]=0,i+1}}O.CString=Jo;class Qo extends ee{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return sn(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Xt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const a=us.Buffer.from(t,"utf8"),i=a.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return a.copy(Xt(e),r),i}}O.UTF8=Qo;class ta extends ee{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}O.Constant=ta;O.greedy=(s,t)=>new Fo(s,t);var Pr=O.offset=(s,t,e)=>new fs(s,t,e),Jt=O.u8=s=>new Ue(1,s),Te=O.u16=s=>new Ue(2,s);O.u24=s=>new Ue(3,s);var ct=O.u32=s=>new Ue(4,s);O.u40=s=>new Ue(5,s);O.u48=s=>new Ue(6,s);var me=O.nu64=s=>new qo(s);O.u16be=s=>new Ne(2,s);O.u24be=s=>new Ne(3,s);O.u32be=s=>new Ne(4,s);O.u40be=s=>new Ne(5,s);O.u48be=s=>new Ne(6,s);O.nu64be=s=>new Ho(s);O.s8=s=>new Hr(1,s);O.s16=s=>new Hr(2,s);O.s24=s=>new Hr(3,s);O.s32=s=>new Hr(4,s);O.s40=s=>new Hr(5,s);O.s48=s=>new Hr(6,s);var Be=O.ns64=s=>new Do(s);O.s16be=s=>new on(2,s);O.s24be=s=>new on(3,s);O.s32be=s=>new on(4,s);O.s40be=s=>new on(5,s);O.s48be=s=>new on(6,s);O.ns64be=s=>new zo(s);O.f32=s=>new Ko(s);O.f32be=s=>new $o(s);O.f64=s=>new Wo(s);O.f64be=s=>new Go(s);var nt=O.struct=(s,t,e)=>new jo(s,t,e);O.bits=(s,t,e)=>new ps(s,t,e);var xe=O.seq=(s,t,e)=>new Zo(s,t,e);O.union=(s,t,e)=>new ds(s,t,e);O.unionLayoutDiscriminator=(s,t)=>new ni(s,t);var ue=O.blob=(s,t)=>new Yo(s,t);O.cstr=s=>new Jo(s);O.utf8=(s,t)=>new Qo(s,t);O.constant=(s,t)=>new ta(s,t);var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});function du(s){{const t=Buffer.from(s);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var pu=Pn.toBigIntLE=du;function gu(s){{const t=s.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Pn.toBigIntBE=gu;function mu(s,t){{const e=s.toString(16),r=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var yu=Pn.toBufferLE=mu;function wu(s,t){{const e=s.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Pn.toBufferBE=wu;class vu extends TypeError{constructor(t,e){let r;const{message:a,...i}=t,{path:u}=t,l=u.length===0?a:"At path: "+u.join(".")+" -- "+a;super(l),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var v;return(v=r)!=null?v:r=[t,...e()]}}}function bu(s){return sr(s)&&typeof s[Symbol.iterator]=="function"}function sr(s){return typeof s=="object"&&s!=null}function Fe(s){return typeof s=="string"?JSON.stringify(s):""+s}function xu(s){const{done:t,value:e}=s.next();return t?void 0:e}function Mu(s,t,e,r){if(s===!0)return;s===!1?s={}:typeof s=="string"&&(s={message:s});const{path:a,branch:i}=t,{type:u}=e,{refinement:l,message:v="Expected a value of type `"+u+"`"+(l?" with refinement `"+l+"`":"")+", but received: `"+Fe(r)+"`"}=s;return{value:r,type:u,refinement:l,key:a[a.length-1],path:a,branch:i,...s,message:v}}function*Ns(s,t,e,r){bu(s)||(s=[s]);for(const a of s){const i=Mu(a,t,e,r);i&&(yield i)}}function*ms(s,t,e={}){const{path:r=[],branch:a=[s],coerce:i=!1,mask:u=!1}=e,l={path:r,branch:a};if(i&&(s=t.coercer(s,l),u&&t.type!=="type"&&sr(t.schema)&&sr(s)&&!Array.isArray(s)))for(const S in s)t.schema[S]===void 0&&delete s[S];let v=!0;for(const S of t.validator(s,l))v=!1,yield[S,void 0];for(let[S,B,E]of t.entries(s,l)){const T=ms(B,E,{path:S===void 0?r:[...r,S],branch:S===void 0?a:[...a,B],coerce:i,mask:u});for(const I of T)I[0]?(v=!1,yield[I[0],void 0]):i&&(B=I[1],S===void 0?s=B:s instanceof Map?s.set(S,B):s instanceof Set?s.add(B):sr(s)&&(s[S]=B))}if(v)for(const S of t.refiner(s,l))v=!1,yield[S,void 0];v&&(yield[void 0,s])}let We=class{constructor(t){const{type:e,schema:r,validator:a,refiner:i,coercer:u=v=>v,entries:l=function*(){}}=t;this.type=e,this.schema=r,this.entries=l,this.coercer=u,a?this.validator=(v,S)=>{const B=a(v,S);return Ns(B,S,this,v)}:this.validator=()=>[],i?this.refiner=(v,S)=>{const B=i(v,S);return Ns(B,S,this,v)}:this.refiner=()=>[]}assert(t){return _u(t,this)}create(t){return V(t,this)}is(t){return ea(t,this)}mask(t){return Su(t,this)}validate(t,e={}){return Un(t,this,e)}};function _u(s,t){const e=Un(s,t);if(e[0])throw e[0]}function V(s,t){const e=Un(s,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Su(s,t){const e=Un(s,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function ea(s,t){return!Un(s,t)[0]}function Un(s,t,e={}){const r=ms(s,t,e),a=xu(r);return a[0]?[new vu(a[0],function*(){for(const u of r)u[0]&&(yield u[0])}),void 0]:[void 0,a[1]]}function Dr(s,t){return new We({type:s,schema:null,validator:t})}function Eu(){return Dr("any",()=>!0)}function Y(s){return new We({type:"array",schema:s,*entries(t){if(s&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,s]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Fe(t)}})}function je(){return Dr("boolean",s=>typeof s=="boolean")}function ys(s){return Dr("instance",t=>t instanceof s||"Expected a `"+s.name+"` instance, but received: "+Fe(t))}function ae(s){const t=Fe(s),e=typeof s;return new We({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?s:null,validator(r){return r===s||"Expected the literal `"+t+"`, but received: "+Fe(r)}})}function Bu(){return Dr("never",()=>!1)}function X(s){return new We({...s,validator:(t,e)=>t===null||s.validator(t,e),refiner:(t,e)=>t===null||s.refiner(t,e)})}function P(){return Dr("number",s=>typeof s=="number"&&!isNaN(s)||"Expected a number, but received: "+Fe(s))}function ft(s){return new We({...s,validator:(t,e)=>t===void 0||s.validator(t,e),refiner:(t,e)=>t===void 0||s.refiner(t,e)})}function ra(s,t){return new We({type:"record",schema:null,*entries(e){if(sr(e))for(const r in e){const a=e[r];yield[r,r,s],yield[r,a,t]}},validator(e){return sr(e)||"Expected an object, but received: "+Fe(e)}})}function G(){return Dr("string",s=>typeof s=="string"||"Expected a string, but received: "+Fe(s))}function ws(s){const t=Bu();return new We({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(s.length,e.length);for(let a=0;a<r;a++)yield[a,e[a],s[a]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+Fe(e)}})}function z(s){const t=Object.keys(s);return new We({type:"type",schema:s,*entries(e){if(sr(e))for(const r of t)yield[r,e[r],s[r]]},validator(e){return sr(e)||"Expected an object, but received: "+Fe(e)}})}function Se(s){const t=s.map(e=>e.type).join(" | ");return new We({type:"union",schema:null,validator(e,r){const a=[];for(const i of s){const[...u]=ms(e,i,r),[l]=u;if(l[0])for(const[v]of u)v&&a.push(v);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Fe(e),...a]}})}function On(){return Dr("unknown",()=>!0)}function Nn(s,t,e){return new We({...s,coercer:(r,a)=>ea(r,t)?s.coercer(e(r,a),a):s.coercer(r,a)})}var vs={};const bs=cr(La),xs=cr(Ca),Ms=cr(Pa),_s=cr(Ua),Ss=cr(Oa);var ki={},ii={},Au={get exports(){return ii},set exports(s){ii=s}},Fs;function na(){return Fs||(Fs=1,function(s){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function a(v,S,B){this.fn=v,this.context=S,this.once=B||!1}function i(v,S,B,E,T){if(typeof B!="function")throw new TypeError("The listener must be a function");var I=new a(B,E||v,T),L=e?e+S:S;return v._events[L]?v._events[L].fn?v._events[L]=[v._events[L],I]:v._events[L].push(I):(v._events[L]=I,v._eventsCount++),v}function u(v,S){--v._eventsCount===0?v._events=new r:delete v._events[S]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var S=[],B,E;if(this._eventsCount===0)return S;for(E in B=this._events)t.call(B,E)&&S.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(B)):S},l.prototype.listeners=function(S){var B=e?e+S:S,E=this._events[B];if(!E)return[];if(E.fn)return[E.fn];for(var T=0,I=E.length,L=new Array(I);T<I;T++)L[T]=E[T].fn;return L},l.prototype.listenerCount=function(S){var B=e?e+S:S,E=this._events[B];return E?E.fn?1:E.length:0},l.prototype.emit=function(S,B,E,T,I,L){var R=e?e+S:S;if(!this._events[R])return!1;var U=this._events[R],q=arguments.length,F,N;if(U.fn){switch(U.once&&this.removeListener(S,U.fn,void 0,!0),q){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,B),!0;case 3:return U.fn.call(U.context,B,E),!0;case 4:return U.fn.call(U.context,B,E,T),!0;case 5:return U.fn.call(U.context,B,E,T,I),!0;case 6:return U.fn.call(U.context,B,E,T,I,L),!0}for(N=1,F=new Array(q-1);N<q;N++)F[N-1]=arguments[N];U.fn.apply(U.context,F)}else{var J=U.length,H;for(N=0;N<J;N++)switch(U[N].once&&this.removeListener(S,U[N].fn,void 0,!0),q){case 1:U[N].fn.call(U[N].context);break;case 2:U[N].fn.call(U[N].context,B);break;case 3:U[N].fn.call(U[N].context,B,E);break;case 4:U[N].fn.call(U[N].context,B,E,T);break;default:if(!F)for(H=1,F=new Array(q-1);H<q;H++)F[H-1]=arguments[H];U[N].fn.apply(U[N].context,F)}}return!0},l.prototype.on=function(S,B,E){return i(this,S,B,E,!1)},l.prototype.once=function(S,B,E){return i(this,S,B,E,!0)},l.prototype.removeListener=function(S,B,E,T){var I=e?e+S:S;if(!this._events[I])return this;if(!B)return u(this,I),this;var L=this._events[I];if(L.fn)L.fn===B&&(!T||L.once)&&(!E||L.context===E)&&u(this,I);else{for(var R=0,U=[],q=L.length;R<q;R++)(L[R].fn!==B||T&&!L[R].once||E&&L[R].context!==E)&&U.push(L[R]);U.length?this._events[I]=U.length===1?U[0]:U:u(this,I)}return this},l.prototype.removeAllListeners=function(S){var B;return S?(B=e?e+S:S,this._events[B]&&u(this,B)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,s.exports=l}(Au)),ii}var qs;function ku(){return qs||(qs=1,function(s){var t=es;Object.defineProperty(s,"__esModule",{value:!0}),s.default=E;var e=t(xs),r=t(bs),a=t(Ms),i=t(_s),u=t(Ss),l=na();function v(T){var I=S();return function(){var R=(0,u.default)(T),U;if(I){var q=(0,u.default)(this).constructor;U=Reflect.construct(R,arguments,q)}else U=R.apply(this,arguments);return(0,i.default)(this,U)}}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var B=function(T){(0,a.default)(L,T);var I=v(L);function L(R,U,q){var F;return(0,e.default)(this,L),F=I.call(this),F.socket=new window.WebSocket(R,q),F.socket.onopen=function(){return F.emit("open")},F.socket.onmessage=function(N){return F.emit("message",N.data)},F.socket.onerror=function(N){return F.emit("error",N)},F.socket.onclose=function(N){F.emit("close",N.code,N.reason)},F}return(0,r.default)(L,[{key:"send",value:function(U,q,F){var N=F||q;try{this.socket.send(U),N()}catch(J){N(J)}}},{key:"close",value:function(U,q){this.socket.close(U,q)}},{key:"addEventListener",value:function(U,q,F){this.socket.addEventListener(U,q,F)}}]),L}(l.EventEmitter);function E(T,I){return new B(T,I)}}(ki)),ki}var Ii={};const Iu=cr(Na),Ru=cr(Fa);var Hs;function Tu(){return Hs||(Hs=1,function(s){var t=es;Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var e=t(qa),r=t(Iu),a=t(Ru),i=t(xs),u=t(bs),l=t(Ms),v=t(_s),S=t(Ss),B=na();function E(R){var U=T();return function(){var F=(0,S.default)(R),N;if(U){var J=(0,S.default)(this).constructor;N=Reflect.construct(F,arguments,J)}else N=F.apply(this,arguments);return(0,v.default)(this,N)}}function T(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var I=function(R,U){var q={};for(var F in R)Object.prototype.hasOwnProperty.call(R,F)&&U.indexOf(F)<0&&(q[F]=R[F]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var N=0,F=Object.getOwnPropertySymbols(R);N<F.length;N++)U.indexOf(F[N])<0&&Object.prototype.propertyIsEnumerable.call(R,F[N])&&(q[F[N]]=R[F[N]]);return q},L=function(R){(0,l.default)(q,R);var U=E(q);function q(F){var N,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Z=arguments.length>3?arguments[3]:void 0;(0,i.default)(this,q);var j=H.autoconnect,it=j===void 0?!0:j,jt=H.reconnect,ce=jt===void 0?!0:jt,at=H.reconnect_interval,ne=at===void 0?1e3:at,w=H.max_reconnects,n=w===void 0?5:w,c=I(H,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return N=U.call(this),N.webSocketFactory=F,N.queue={},N.rpc_id=0,N.address=J,N.autoconnect=it,N.ready=!1,N.reconnect=ce,N.reconnect_interval=ne,N.max_reconnects=n,N.rest_options=c,N.current_reconnects=0,N.generate_request_id=Z||function(){return++N.rpc_id},N.autoconnect&&N._connect(N.address,Object.assign({autoconnect:N.autoconnect,reconnect:N.reconnect,reconnect_interval:N.reconnect_interval,max_reconnects:N.max_reconnects},N.rest_options)),N}return(0,u.default)(q,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(N,J,H,Z){var j=this;return!Z&&(0,a.default)(H)==="object"&&(Z=H,H=null),new Promise(function(it,jt){if(!j.ready)return jt(new Error("socket not ready"));var ce=j.generate_request_id(N,J),at={jsonrpc:"2.0",method:N,params:J||null,id:ce};j.socket.send(JSON.stringify(at),Z,function(ne){if(ne)return jt(ne);j.queue[ce]={promise:[it,jt]},H&&(j.queue[ce].timeout=setTimeout(function(){delete j.queue[ce],jt(new Error("reply timeout"))},H))})})}},{key:"login",value:function(){var F=(0,r.default)(e.default.mark(function J(H){var Z;return e.default.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,this.call("rpc.login",H);case 2:if(Z=it.sent,Z){it.next=5;break}throw new Error("authentication failed");case 5:return it.abrupt("return",Z);case 6:case"end":return it.stop()}},J,this)}));function N(J){return F.apply(this,arguments)}return N}()},{key:"listMethods",value:function(){var F=(0,r.default)(e.default.mark(function J(){return e.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.call("__listMethods");case 2:return Z.abrupt("return",Z.sent);case 3:case"end":return Z.stop()}},J,this)}));function N(){return F.apply(this,arguments)}return N}()},{key:"notify",value:function(N,J){var H=this;return new Promise(function(Z,j){if(!H.ready)return j(new Error("socket not ready"));var it={jsonrpc:"2.0",method:N,params:J||null};H.socket.send(JSON.stringify(it),function(jt){if(jt)return j(jt);Z()})})}},{key:"subscribe",value:function(){var F=(0,r.default)(e.default.mark(function J(H){var Z;return e.default.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return typeof H=="string"&&(H=[H]),it.next=3,this.call("rpc.on",H);case 3:if(Z=it.sent,!(typeof H=="string"&&Z[H]!=="ok")){it.next=6;break}throw new Error("Failed subscribing to an event '"+H+"' with: "+Z[H]);case 6:return it.abrupt("return",Z);case 7:case"end":return it.stop()}},J,this)}));function N(J){return F.apply(this,arguments)}return N}()},{key:"unsubscribe",value:function(){var F=(0,r.default)(e.default.mark(function J(H){var Z;return e.default.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return typeof H=="string"&&(H=[H]),it.next=3,this.call("rpc.off",H);case 3:if(Z=it.sent,!(typeof H=="string"&&Z[H]!=="ok")){it.next=6;break}throw new Error("Failed unsubscribing from an event with: "+Z);case 6:return it.abrupt("return",Z);case 7:case"end":return it.stop()}},J,this)}));function N(J){return F.apply(this,arguments)}return N}()},{key:"close",value:function(N,J){this.socket.close(N||1e3,J)}},{key:"_connect",value:function(N,J){var H=this;this.socket=this.webSocketFactory(N,J),this.socket.addEventListener("open",function(){H.ready=!0,H.emit("open"),H.current_reconnects=0}),this.socket.addEventListener("message",function(Z){var j=Z.data;j instanceof ArrayBuffer&&(j=Buffer.from(j).toString());try{j=JSON.parse(j)}catch{return}if(j.notification&&H.listeners(j.notification).length){if(!Object.keys(j.params).length)return H.emit(j.notification);var it=[j.notification];if(j.params.constructor===Object)it.push(j.params);else for(var jt=0;jt<j.params.length;jt++)it.push(j.params[jt]);return Promise.resolve().then(function(){H.emit.apply(H,it)})}if(!H.queue[j.id])return j.method&&j.params?Promise.resolve().then(function(){H.emit(j.method,j.params)}):void 0;"error"in j=="result"in j&&H.queue[j.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),H.queue[j.id].timeout&&clearTimeout(H.queue[j.id].timeout),j.error?H.queue[j.id].promise[1](j.error):H.queue[j.id].promise[0](j.result),delete H.queue[j.id]}),this.socket.addEventListener("error",function(Z){return H.emit("error",Z)}),this.socket.addEventListener("close",function(Z){var j=Z.code,it=Z.reason;H.ready&&setTimeout(function(){return H.emit("close",j,it)},0),H.ready=!1,H.socket=void 0,j!==1e3&&(H.current_reconnects++,H.reconnect&&(H.max_reconnects>H.current_reconnects||H.max_reconnects===0)&&setTimeout(function(){return H._connect(N,J)},H.reconnect_interval))})}}]),q}(B.EventEmitter);s.default=L}(Ii)),Ii}var zr=es;Object.defineProperty(vs,"__esModule",{value:!0});var ia=vs.Client=void 0,Lu=zr(bs),Cu=zr(xs),Pu=zr(Ms),Uu=zr(_s),Ds=zr(Ss),Ou=zr(ku()),Nu=zr(Tu());function Fu(s){var t=qu();return function(){var r=(0,Ds.default)(s),a;if(t){var i=(0,Ds.default)(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return(0,Uu.default)(this,a)}}function qu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Hu=function(s){(0,Pu.default)(e,s);var t=Fu(e);function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ws://localhost:8080",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.autoconnect,u=i===void 0?!0:i,l=a.reconnect,v=l===void 0?!0:l,S=a.reconnect_interval,B=S===void 0?1e3:S,E=a.max_reconnects,T=E===void 0?5:E,I=arguments.length>2?arguments[2]:void 0;return(0,Cu.default)(this,e),t.call(this,Ou.default,r,{autoconnect:u,reconnect:v,reconnect_interval:B,max_reconnects:T},I)}return(0,Lu.default)(e)}(Nu.default);ia=vs.Client=Hu;const Du=bo.v4,zu=function(s,t,e,r){if(typeof s!="string")throw new TypeError(s+" must be a string");r=r||{};const a=typeof r.version=="number"?r.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const i={method:s};if(a===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const u=typeof r.generator=="function"?r.generator:function(){return Du()};i.id=u(i,r)}else a===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var Ku=zu;const $u=bo.v4,Wu=Ku,An=function(s,t){if(!(this instanceof An))return new An(s,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return $u()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=s};var Gu=An;An.prototype.request=function(s,t,e,r){const a=this;let i=null;const u=Array.isArray(s)&&typeof t=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&s&&typeof s=="object"&&typeof t=="function")r=t,i=s;else{typeof e=="function"&&(r=e,e=void 0);const S=typeof r=="function";try{i=Wu(s,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(B){if(S)return r(B);throw B}if(!S)return i}let v;try{v=JSON.stringify(i,this.options.replacer)}catch(S){return r(S)}return this.callServer(v,function(S,B){a._parseResponse(S,B,r)}),i};An.prototype._parseResponse=function(s,t,e){if(s){e(s);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(a){return e(a)}if(e.length===3)if(Array.isArray(r)){const a=function(u){return typeof u.error<"u"},i=function(u){return!a(u)};return e(null,r.filter(a),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const[sa,oa,aa]=[[],[],[]],Zu=BigInt(0),mn=BigInt(1),ju=BigInt(2),Vu=BigInt(7),Xu=BigInt(256),Yu=BigInt(113);for(let s=0,t=mn,e=1,r=0;s<24;s++){[e,r]=[r,(2*e+3*r)%5],sa.push(2*(5*r+e)),oa.push((s+1)*(s+2)/2%64);let a=Zu;for(let i=0;i<7;i++)t=(t<<mn^(t>>Vu)*Yu)%Xu,t&ju&&(a^=mn<<(mn<<BigInt(i))-mn);aa.push(a)}const[Ju,Qu]=mt.split(aa,!0),zs=(s,t,e)=>e>32?mt.rotlBH(s,t,e):mt.rotlSH(s,t,e),Ks=(s,t,e)=>e>32?mt.rotlBL(s,t,e):mt.rotlSL(s,t,e);function th(s,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let u=0;u<10;u++)e[u]=s[u]^s[u+10]^s[u+20]^s[u+30]^s[u+40];for(let u=0;u<10;u+=2){const l=(u+8)%10,v=(u+2)%10,S=e[v],B=e[v+1],E=zs(S,B,1)^e[l],T=Ks(S,B,1)^e[l+1];for(let I=0;I<50;I+=10)s[u+I]^=E,s[u+I+1]^=T}let a=s[2],i=s[3];for(let u=0;u<24;u++){const l=oa[u],v=zs(a,i,l),S=Ks(a,i,l),B=sa[u];a=s[B],i=s[B+1],s[B]=v,s[B+1]=S}for(let u=0;u<50;u+=10){for(let l=0;l<10;l++)e[l]=s[u+l];for(let l=0;l<10;l++)s[u+l]^=~e[(l+2)%10]&e[(l+4)%10]}s[0]^=Ju[r],s[1]^=Qu[r]}e.fill(0)}class mi extends rs{constructor(t,e,r,a=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=a,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ae.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ga(this.state)}keccak(){th(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Ae.exists(this);const{blockLen:e,state:r}=this;t=Tn(t);const a=t.length;for(let i=0;i<a;){const u=Math.min(e-this.pos,a-i);for(let l=0;l<u;l++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:a}=this;t[r]^=e,e&128&&r===a-1&&this.keccak(),t[a-1]^=128,this.keccak()}writeInto(t){Ae.exists(this,!1),Ae.bytes(t),this.finish();const e=this.state,{blockLen:r}=this;for(let a=0,i=t.length;a<i;){this.posOut>=r&&this.keccak();const u=Math.min(r-this.posOut,i-a);t.set(e.subarray(this.posOut,this.posOut+u),a),this.posOut+=u,a+=u}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ae.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ae.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:a,rounds:i,enableXOF:u}=this;return t||(t=new mi(e,r,a,u,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=a,t.enableXOF=u,t.destroyed=this.destroyed,t}}const ur=(s,t,e)=>qr(()=>new mi(t,s,e));ur(6,144,224/8);ur(6,136,256/8);ur(6,104,384/8);ur(6,72,512/8);ur(1,144,224/8);ur(1,136,256/8);ur(1,104,384/8);ur(1,72,512/8);const ca=(s,t,e)=>Va((r={})=>new mi(t,s,r.dkLen===void 0?e:r.dkLen,!0));ca(31,168,128/8);ca(31,136,256/8);class ua extends rs{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ae.hash(t);const r=Tn(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,i=new Uint8Array(a);i.set(r.length>a?t.create().update(r).digest():r);for(let u=0;u<i.length;u++)i[u]^=54;this.iHash.update(i),this.oHash=t.create();for(let u=0;u<i.length;u++)i[u]^=106;this.oHash.update(i),i.fill(0)}update(t){return Ae.exists(this),this.iHash.update(t),this}digestInto(t){Ae.exists(this),Ae.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:a,destroyed:i,blockLen:u,outputLen:l}=this;return t=t,t.finished=a,t.destroyed=i,t.blockLen=u,t.outputLen=l,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ha=(s,t,e)=>new ua(s,t).update(e).digest();ha.create=(s,t)=>new ua(s,t);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const Qt=BigInt(0),oe=BigInt(1),ir=BigInt(2),Sn=BigInt(3),$s=BigInt(8),ge=Object.freeze({a:Qt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:oe,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Ws=(s,t)=>(s+t/ir)/t,Hn={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(s){const{n:t}=ge,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-oe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,u=BigInt("0x100000000000000000000000000000000"),l=Ws(i*s,t),v=Ws(-r*s,t);let S=rt(s-l*e-v*a,t),B=rt(-l*r-v*i,t);const E=S>u,T=B>u;if(E&&(S=t-S),T&&(B=t-B),S>u||B>u)throw new Error("splitScalarEndo: Endomorphism failed, k="+s);return{k1neg:E,k1:S,k2neg:T,k2:B}}},Zr=32,kn=32,Gs=Zr+1,Zs=2*Zr+1;function js(s){const{a:t,b:e}=ge,r=rt(s*s),a=rt(r*s);return rt(a+t*s+e)}const Dn=ge.a===Qt;class eh extends Error{constructor(t){super(t)}}function Vs(s){if(!(s instanceof Yt))throw new TypeError("JacobianPoint expected")}class Yt{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof he))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(he.ZERO)?Yt.ZERO:new Yt(t.x,t.y,oe)}static toAffineBatch(t){const e=oh(t.map(r=>r.z));return t.map((r,a)=>r.toAffine(e[a]))}static normalizeZ(t){return Yt.toAffineBatch(t).map(Yt.fromAffine)}equals(t){Vs(t);const{x:e,y:r,z:a}=this,{x:i,y:u,z:l}=t,v=rt(a*a),S=rt(l*l),B=rt(e*S),E=rt(i*v),T=rt(rt(r*l)*S),I=rt(rt(u*a)*v);return B===E&&T===I}negate(){return new Yt(this.x,rt(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,a=rt(t*t),i=rt(e*e),u=rt(i*i),l=t+i,v=rt(ir*(rt(l*l)-a-u)),S=rt(Sn*a),B=rt(S*S),E=rt(B-ir*v),T=rt(S*(v-E)-$s*u),I=rt(ir*e*r);return new Yt(E,T,I)}add(t){Vs(t);const{x:e,y:r,z:a}=this,{x:i,y:u,z:l}=t;if(i===Qt||u===Qt)return this;if(e===Qt||r===Qt)return t;const v=rt(a*a),S=rt(l*l),B=rt(e*S),E=rt(i*v),T=rt(rt(r*l)*S),I=rt(rt(u*a)*v),L=rt(E-B),R=rt(I-T);if(L===Qt)return R===Qt?this.double():Yt.ZERO;const U=rt(L*L),q=rt(L*U),F=rt(B*U),N=rt(R*R-q-ir*F),J=rt(R*(F-N)-T*q),H=rt(a*l*L);return new Yt(N,J,H)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=Yt.ZERO;if(typeof t=="bigint"&&t===Qt)return e;let r=Qs(t);if(r===oe)return this;if(!Dn){let E=e,T=this;for(;r>Qt;)r&oe&&(E=E.add(T)),T=T.double(),r>>=oe;return E}let{k1neg:a,k1:i,k2neg:u,k2:l}=Hn.splitScalar(r),v=e,S=e,B=this;for(;i>Qt||l>Qt;)i&oe&&(v=v.add(B)),l&oe&&(S=S.add(B)),B=B.double(),i>>=oe,l>>=oe;return a&&(v=v.negate()),u&&(S=S.negate()),S=new Yt(rt(S.x*Hn.beta),S.y,S.z),v.add(S)}precomputeWindow(t){const e=Dn?128/t+1:256/t+1,r=[];let a=this,i=a;for(let u=0;u<e;u++){i=a,r.push(i);for(let l=1;l<2**(t-1);l++)i=i.add(a),r.push(i);a=i.double()}return r}wNAF(t,e){!e&&this.equals(Yt.BASE)&&(e=he.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let a=e&&zi.get(e);a||(a=this.precomputeWindow(r),e&&r!==1&&(a=Yt.normalizeZ(a),zi.set(e,a)));let i=Yt.ZERO,u=Yt.BASE;const l=1+(Dn?128/r:256/r),v=2**(r-1),S=BigInt(2**r-1),B=2**r,E=BigInt(r);for(let T=0;T<l;T++){const I=T*v;let L=Number(t&S);t>>=E,L>v&&(L-=B,t+=oe);const R=I,U=I+Math.abs(L)-1,q=T%2!==0,F=L<0;L===0?u=u.add(zn(q,a[R])):i=i.add(zn(F,a[U]))}return{p:i,f:u}}multiply(t,e){let r=Qs(t),a,i;if(Dn){const{k1neg:u,k1:l,k2neg:v,k2:S}=Hn.splitScalar(r);let{p:B,f:E}=this.wNAF(l,e),{p:T,f:I}=this.wNAF(S,e);B=zn(u,B),T=zn(v,T),T=new Yt(rt(T.x*Hn.beta),T.y,T.z),a=B.add(T),i=E.add(I)}else{const{p:u,f:l}=this.wNAF(r,e);a=u,i=l}return Yt.normalizeZ([a,i])[0]}toAffine(t){const{x:e,y:r,z:a}=this,i=this.equals(Yt.ZERO);t==null&&(t=i?$s:yi(a));const u=t,l=rt(u*u),v=rt(l*u),S=rt(e*l),B=rt(r*v),E=rt(a*u);if(i)return he.ZERO;if(E!==oe)throw new Error("invZ was invalid");return new he(S,B)}}Yt.BASE=new Yt(ge.Gx,ge.Gy,oe);Yt.ZERO=new Yt(Qt,oe,Qt);function zn(s,t){const e=t.negate();return s?e:t}const zi=new WeakMap;class he{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,zi.delete(this)}hasEvenY(){return this.y%ir===Qt}static fromCompressedHex(t){const e=t.length===32,r=Nr(e?t:t.subarray(1));if(!Ti(r))throw new Error("Point is not on curve");const a=js(r);let i=sh(a);const u=(i&oe)===oe;e?u&&(i=rt(-i)):(t[0]&1)===1!==u&&(i=rt(-i));const l=new he(r,i);return l.assertValidity(),l}static fromUncompressedHex(t){const e=Nr(t.subarray(1,Zr+1)),r=Nr(t.subarray(Zr+1,Zr*2+1)),a=new he(e,r);return a.assertValidity(),a}static fromHex(t){const e=Ki(t),r=e.length,a=e[0];if(r===Zr)return this.fromCompressedHex(e);if(r===Gs&&(a===2||a===3))return this.fromCompressedHex(e);if(r===Zs&&a===4)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Gs} compressed bytes or ${Zs} uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return he.BASE.multiply($i(t))}static fromSignature(t,e,r){const{r:a,s:i}=uh(e);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const u=ch(Ki(t)),{n:l}=ge,v=r===2||r===3?a+l:a,S=yi(v,l),B=rt(-u*S,l),E=rt(i*S,l),T=r&1?"03":"02",I=he.fromHex(T+Xr(v)),L=he.BASE.multiplyAndAddUnsafe(I,B,E);if(!L)throw new Error("Cannot recover signature: point at infinify");return L.assertValidity(),L}toRawBytes(t=!1){return Or(this.toHex(t))}toHex(t=!1){const e=Xr(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${Xr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!Ti(e)||!Ti(r))throw new Error(t);const a=rt(r*r),i=js(e);if(rt(a-i)!==Qt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new he(this.x,rt(-this.y))}double(){return Yt.fromAffine(this).double().toAffine()}add(t){return Yt.fromAffine(this).add(Yt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Yt.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const a=Yt.fromAffine(this),i=e===Qt||e===oe||this!==he.BASE?a.multiplyUnsafe(e):a.multiply(e),u=Yt.fromAffine(t).multiplyUnsafe(r),l=i.add(u);return l.equals(Yt.ZERO)?void 0:l.toAffine()}}he.BASE=new he(ge.Gx,ge.Gy);he.ZERO=new he(Qt,Qt);function Xs(s){return Number.parseInt(s[0],16)>=8?"00"+s:s}function Ys(s){if(s.length<2||s[0]!==2)throw new Error(`Invalid signature integer tag: ${tn(s)}`);const t=s[1],e=s.subarray(2,t+2);if(!t||e.length!==t)throw new Error("Invalid signature integer: wrong length");if(e[0]===0&&e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Nr(e),left:s.subarray(t+2)}}function rh(s){if(s.length<2||s[0]!=48)throw new Error(`Invalid signature tag: ${tn(s)}`);if(s[1]!==s.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:e}=Ys(s.subarray(2)),{data:r,left:a}=Ys(e);if(a.length)throw new Error(`Invalid signature: left bytes after parsing: ${tn(a)}`);return{r:t,s:r}}class Ur{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,r="Signature.fromCompact";if(typeof t!="string"&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const a=e?tn(t):t;if(a.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new Ur(si(a.slice(0,64)),si(a.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if(typeof t!="string"&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s:a}=rh(e?t:Or(t));return new Ur(r,a)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!oi(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!oi(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=ge.n>>oe;return this.s>t}normalizeS(){return this.hasHighS()?new Ur(this.r,rt(-this.s,ge.n)):this}toDERRawBytes(){return Or(this.toDERHex())}toDERHex(){const t=Xs(wn(this.s)),e=Xs(wn(this.r)),r=t.length/2,a=e.length/2,i=wn(r),u=wn(a);return`30${wn(a+r+4)}02${u}${e}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Or(this.toCompactHex())}toCompactHex(){return Xr(this.r)+Xr(this.s)}}function yn(...s){if(!s.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(s.length===1)return s[0];const t=s.reduce((r,a)=>r+a.length,0),e=new Uint8Array(t);for(let r=0,a=0;r<s.length;r++){const i=s[r];e.set(i,a),a+=i.length}return e}const nh=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function tn(s){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let e=0;e<s.length;e++)t+=nh[s[e]];return t}const ih=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Xr(s){if(typeof s!="bigint")throw new Error("Expected bigint");if(!(Qt<=s&&s<ih))throw new Error("Expected number 0 <= n < 2^256");return s.toString(16).padStart(64,"0")}function Js(s){const t=Or(Xr(s));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function wn(s){const t=s.toString(16);return t.length&1?`0${t}`:t}function si(s){if(typeof s!="string")throw new TypeError("hexToNumber: expected string, got "+typeof s);return BigInt(`0x${s}`)}function Or(s){if(typeof s!="string")throw new TypeError("hexToBytes: expected string, got "+typeof s);if(s.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+s.length);const t=new Uint8Array(s.length/2);for(let e=0;e<t.length;e++){const r=e*2,a=s.slice(r,r+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function Nr(s){return si(tn(s))}function Ki(s){return s instanceof Uint8Array?Uint8Array.from(s):Or(s)}function Qs(s){if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)return BigInt(s);if(typeof s=="bigint"&&oi(s))return s;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function rt(s,t=ge.P){const e=s%t;return e>=Qt?e:t+e}function Re(s,t){const{P:e}=ge;let r=s;for(;t-- >Qt;)r*=r,r%=e;return r}function sh(s){const{P:t}=ge,e=BigInt(6),r=BigInt(11),a=BigInt(22),i=BigInt(23),u=BigInt(44),l=BigInt(88),v=s*s*s%t,S=v*v*s%t,B=Re(S,Sn)*S%t,E=Re(B,Sn)*S%t,T=Re(E,ir)*v%t,I=Re(T,r)*T%t,L=Re(I,a)*I%t,R=Re(L,u)*L%t,U=Re(R,l)*R%t,q=Re(U,u)*L%t,F=Re(q,Sn)*S%t,N=Re(F,i)*I%t,J=Re(N,e)*v%t,H=Re(J,ir);if(H*H%t!==s)throw new Error("Cannot find square root");return H}function yi(s,t=ge.P){if(s===Qt||t<=Qt)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=rt(s,t),r=t,a=Qt,i=oe;for(;e!==Qt;){const l=r/e,v=r%e,S=a-i*l;r=e,e=v,a=i,i=S}if(r!==oe)throw new Error("invert: does not exist");return rt(a,t)}function oh(s,t=ge.P){const e=new Array(s.length),r=s.reduce((i,u,l)=>u===Qt?i:(e[l]=i,rt(i*u,t)),oe),a=yi(r,t);return s.reduceRight((i,u,l)=>u===Qt?i:(e[l]=rt(i*e[l],t),rt(i*u,t)),a),e}function ah(s){const t=s.length*8-kn*8,e=Nr(s);return t>0?e>>BigInt(t):e}function ch(s,t=!1){const e=ah(s);if(t)return e;const{n:r}=ge;return e>=r?e-r:e}let Yr,Ri;function oi(s){return Qt<s&&s<ge.n}function Ti(s){return Qt<s&&s<ge.P}function $i(s){let t;if(typeof s=="bigint")t=s;else if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)t=BigInt(s);else if(typeof s=="string"){if(s.length!==2*kn)throw new Error("Expected 32 bytes of private key");t=si(s)}else if(s instanceof Uint8Array){if(s.length!==kn)throw new Error("Expected 32 bytes of private key");t=Nr(s)}else throw new TypeError("Expected valid private key");if(!oi(t))throw new Error("Expected private key: 0 < key < n");return t}function uh(s){if(s instanceof Ur)return s.assertValidity(),s;try{return Ur.fromDER(s)}catch{return Ur.fromCompact(s)}}he.BASE._setWindowSize(8);const Ee={node:wo,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Kn={},Cr={bytesToHex:tn,hexToBytes:Or,concatBytes:yn,mod:rt,invert:yi,isValidPrivateKey(s){try{return $i(s),!0}catch{return!1}},_bigintTo32Bytes:Js,_normalizePrivateKey:$i,hashToPrivateKey:s=>{s=Ki(s);const t=kn+8;if(s.length<t||s.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const e=rt(Nr(s),ge.n-oe)+oe;return Js(e)},randomBytes:(s=32)=>{if(Ee.web)return Ee.web.getRandomValues(new Uint8Array(s));if(Ee.node){const{randomBytes:t}=Ee.node;return Uint8Array.from(t(s))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Cr.hashToPrivateKey(Cr.randomBytes(kn+8)),precompute(s=8,t=he.BASE){const e=t===he.BASE?t:new he(t.x,t.y);return e._setWindowSize(s),e.multiply(Sn),e},sha256:async(...s)=>{if(Ee.web){const t=await Ee.web.subtle.digest("SHA-256",yn(...s));return new Uint8Array(t)}else if(Ee.node){const{createHash:t}=Ee.node,e=t("sha256");return s.forEach(r=>e.update(r)),Uint8Array.from(e.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(s,...t)=>{if(Ee.web){const e=await Ee.web.subtle.importKey("raw",s,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=yn(...t),a=await Ee.web.subtle.sign("HMAC",e,r);return new Uint8Array(a)}else if(Ee.node){const{createHmac:e}=Ee.node,r=e("sha256",s);return t.forEach(a=>r.update(a)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(s,...t)=>{let e=Kn[s];if(e===void 0){const r=await Cr.sha256(Uint8Array.from(s,a=>a.charCodeAt(0)));e=yn(r,r),Kn[s]=e}return Cr.sha256(e,...t)},taggedHashSync:(s,...t)=>{if(typeof Yr!="function")throw new eh("sha256Sync is undefined, you need to set it");let e=Kn[s];if(e===void 0){const r=Yr(Uint8Array.from(s,a=>a.charCodeAt(0)));e=yn(r,r),Kn[s]=e}return Yr(e,...t)},_JacobianPoint:Yt};Object.defineProperties(Cr,{sha256Sync:{configurable:!1,get(){return Yr},set(s){Yr||(Yr=s)}},hmacSha256Sync:{configurable:!1,get(){return Ri},set(s){Ri||(Ri=s)}}});Fr.sha512Sync=(...s)=>_c(Fr.concatBytes(...s));Fr.randomPrivateKey;const to=()=>{const s=Fr.randomPrivateKey(),t=Wi(s),e=new Uint8Array(64);return e.set(s),e.set(t,32),{publicKey:t,secretKey:e}},Wi=os.getPublicKey;function eo(s){try{return fe.fromHex(s,!0),!0}catch{return!1}}const hh=(s,t)=>os.sign(s,t.slice(0,32)),fh=os.verify,en=s=>zt.Buffer.isBuffer(s)?s:s instanceof Uint8Array?zt.Buffer.from(s.buffer,s.byteOffset,s.byteLength):zt.Buffer.from(s);class lh{constructor(t){Object.assign(this,t)}encode(){return zt.Buffer.from(Oo(Gn,this))}static decode(t){return No(Gn,this,t)}static decodeUnchecked(t){return To(Gn,this,t)}}const Gn=new Map;let fa;const dh=32,ze=32;function ph(s){return s._bn!==void 0}let ro=1;fa=Symbol.toStringTag;class ut extends lh{constructor(t){if(super({}),this._bn=void 0,ph(t))this._bn=t._bn;else{if(typeof t=="string"){const e=te.decode(t);if(e.length!=ze)throw new Error("Invalid public key input");this._bn=new Jn(e)}else this._bn=new Jn(t);if(this._bn.byteLength()>ze)throw new Error("Invalid public key input")}}static unique(){const t=new ut(ro);return ro+=1,new ut(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return te.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(zt.Buffer);if(t.length===ze)return t;const e=zt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[fa](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const a=zt.Buffer.concat([t.toBuffer(),zt.Buffer.from(e),r.toBuffer()]),i=qi(a);return new ut(i)}static createProgramAddressSync(t,e){let r=zt.Buffer.alloc(0);t.forEach(function(i){if(i.length>dh)throw new TypeError("Max seed length exceeded");r=zt.Buffer.concat([r,en(i)])}),r=zt.Buffer.concat([r,e.toBuffer(),zt.Buffer.from("ProgramDerivedAddress")]);const a=qi(r);if(eo(a))throw new Error("Invalid seeds, address must fall off the curve");return new ut(a)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,a;for(;r!=0;){try{const i=t.concat(zt.Buffer.from([r]));a=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[a,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ut(t);return eo(e.toBytes())}}ut.default=new ut("11111111111111111111111111111111");Gn.set(ut,{kind:"struct",fields:[["_bn","u256"]]});new ut("BPFLoader1111111111111111111111111111111111");const Jr=1280-40-8,la=127,Gi=64;class da extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(da.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class pa extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(pa.prototype,"name",{value:"TransactionExpiredTimeoutError"});class bn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(bn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ai{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,u)=>{r.set(i.toBase58(),u)});const a=i=>{const u=r.get(i.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(i=>({programIdIndex:a(i.programId),accountKeyIndexes:i.keys.map(u=>a(u.pubkey)),data:i.data}))}}const $t=(s="publicKey")=>ue(32,s),jr=(s="string")=>{const t=nt([ct("length"),ct("lengthPadding"),ue(Pr(ct(),-8),"chars")],s),e=t.decode.bind(t),r=t.encode.bind(t),a=t;return a.decode=(i,u)=>e(i,u).chars.toString(),a.encode=(i,u,l)=>{const v={chars:zt.Buffer.from(i,"utf8")};return r(v,u,l)},a.alloc=i=>ct().span+ct().span+zt.Buffer.from(i,"utf8").length,a},gh=(s="authorized")=>nt([$t("staker"),$t("withdrawer")],s),mh=(s="lockup")=>nt([Be("unixTimestamp"),Be("epoch"),$t("custodian")],s),yh=(s="voteInit")=>nt([$t("nodePubkey"),$t("authorizedVoter"),$t("authorizedWithdrawer"),Jt("commission")],s),wh=(s="voteAuthorizeWithSeedArgs")=>nt([ct("voteAuthorizationType"),$t("currentAuthorityDerivedKeyOwnerPubkey"),jr("currentAuthorityDerivedKeySeed"),$t("newAuthorized")],s);function Le(s){let t=0,e=0;for(;;){let r=s.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Ce(s,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){s.push(r);break}else r|=128,s.push(r)}}function le(s,t){if(!s)throw new Error(t||"Assertion failed")}class wi{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,a=u=>{const l=u.toBase58();let v=r.get(l);return v===void 0&&(v={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(l,v)),v},i=a(e);i.isSigner=!0,i.isWritable=!0;for(const u of t){a(u.programId).isInvoked=!0;for(const l of u.keys){const v=a(l.pubkey);v.isSigner||(v.isSigner=l.isSigner),v.isWritable||(v.isWritable=l.isWritable)}}return new wi(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];le(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,v])=>v.isSigner&&v.isWritable),r=t.filter(([,v])=>v.isSigner&&!v.isWritable),a=t.filter(([,v])=>!v.isSigner&&v.isWritable),i=t.filter(([,v])=>!v.isSigner&&!v.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{le(e.length>0,"Expected at least one writable signer key");const[v]=e[0];le(v===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...e.map(([v])=>new ut(v)),...r.map(([v])=>new ut(v)),...a.map(([v])=>new ut(v)),...i.map(([v])=>new ut(v))];return[u,l]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[a,i]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&a.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:a},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,a=new Array;for(const[i,u]of this.keyMetaMap.entries())if(e(u)){const l=new ut(i),v=t.findIndex(S=>S.equals(l));v>=0&&(le(v<256,"Max lookup table index exceeded"),r.push(v),a.push(l),this.keyMetaMap.delete(i))}return[r,a]}}class ar{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ut(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:te.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ai(this.staticAccountKeys)}static compile(t){const e=wi.compile(t.instructions,t.payerKey),[r,a]=e.getMessageComponents(),u=new ai(a).compileInstructions(t.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:te.encode(l.data)}));return new ar({header:r,accountKeys:a,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ce(e,t);const r=this.instructions.map(E=>{const{accounts:T,programIdIndex:I}=E,L=Array.from(te.decode(E.data));let R=[];Ce(R,T.length);let U=[];return Ce(U,L.length),{programIdIndex:I,keyIndicesCount:zt.Buffer.from(R),keyIndices:T,dataLength:zt.Buffer.from(U),data:L}});let a=[];Ce(a,r.length);let i=zt.Buffer.alloc(Jr);zt.Buffer.from(a).copy(i);let u=a.length;r.forEach(E=>{const I=nt([Jt("programIdIndex"),ue(E.keyIndicesCount.length,"keyIndicesCount"),xe(Jt("keyIndex"),E.keyIndices.length,"keyIndices"),ue(E.dataLength.length,"dataLength"),xe(Jt("userdatum"),E.data.length,"data")]).encode(E,i,u);u+=I}),i=i.slice(0,u);const l=nt([ue(1,"numRequiredSignatures"),ue(1,"numReadonlySignedAccounts"),ue(1,"numReadonlyUnsignedAccounts"),ue(e.length,"keyCount"),xe($t("key"),t,"keys"),$t("recentBlockhash")]),v={numRequiredSignatures:zt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:zt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:zt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:zt.Buffer.from(e),keys:this.accountKeys.map(E=>en(E.toBytes())),recentBlockhash:te.decode(this.recentBlockhash)};let S=zt.Buffer.alloc(2048);const B=l.encode(v,S);return i.copy(S,B),S.slice(0,B+i.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&la))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const a=e.shift(),i=e.shift(),u=Le(e);let l=[];for(let T=0;T<u;T++){const I=e.slice(0,ze);e=e.slice(ze),l.push(new ut(zt.Buffer.from(I)))}const v=e.slice(0,ze);e=e.slice(ze);const S=Le(e);let B=[];for(let T=0;T<S;T++){const I=e.shift(),L=Le(e),R=e.slice(0,L);e=e.slice(L);const U=Le(e),q=e.slice(0,U),F=te.encode(zt.Buffer.from(q));e=e.slice(U),B.push({programIdIndex:I,accounts:R,data:F})}const E={header:{numRequiredSignatures:r,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:i},recentBlockhash:te.encode(zt.Buffer.from(v)),accountKeys:l,instructions:B};return new ar(E)}}class ci{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ai(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const a=t-r,i=this.addressTableLookups.reduce((u,l)=>u+l.writableIndexes.length,0);return a<i}else if(t>=this.header.numRequiredSignatures){const a=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return a<u}else{const a=e-this.header.numReadonlySignedAccounts;return t<a}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const a=t.find(i=>i.key.equals(r.accountKey));if(!a)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<a.state.addresses.length)e.writable.push(a.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<a.state.addresses.length)e.readonly.push(a.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=wi.compile(t.instructions,t.payerKey),r=new Array,a={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const B of i){const E=e.extractTableLookup(B);if(E!==void 0){const[T,{writable:I,readonly:L}]=E;r.push(T),a.writable.push(...I),a.readonly.push(...L)}}const[u,l]=e.getMessageComponents(),S=new ai(l,a).compileInstructions(t.instructions);return new ci({header:u,staticAccountKeys:l,recentBlockhash:t.recentBlockhash,compiledInstructions:S,addressTableLookups:r})}serialize(){const t=Array();Ce(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Ce(r,this.compiledInstructions.length);const a=this.serializeAddressTableLookups(),i=Array();Ce(i,this.addressTableLookups.length);const u=nt([Jt("prefix"),nt([Jt("numRequiredSignatures"),Jt("numReadonlySignedAccounts"),Jt("numReadonlyUnsignedAccounts")],"header"),ue(t.length,"staticAccountKeysLength"),xe($t(),this.staticAccountKeys.length,"staticAccountKeys"),$t("recentBlockhash"),ue(r.length,"instructionsLength"),ue(e.length,"serializedInstructions"),ue(i.length,"addressTableLookupsLength"),ue(a.length,"serializedAddressTableLookups")]),l=new Uint8Array(Jr),v=1<<7,S=u.encode({prefix:v,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(B=>B.toBytes()),recentBlockhash:te.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:a},l);return l.slice(0,S)}serializeInstructions(){let t=0;const e=new Uint8Array(Jr);for(const r of this.compiledInstructions){const a=Array();Ce(a,r.accountKeyIndexes.length);const i=Array();Ce(i,r.data.length);const u=nt([Jt("programIdIndex"),ue(a.length,"encodedAccountKeyIndexesLength"),xe(Jt(),r.accountKeyIndexes.length,"accountKeyIndexes"),ue(i.length,"encodedDataLength"),ue(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(a),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Jr);for(const r of this.addressTableLookups){const a=Array();Ce(a,r.writableIndexes.length);const i=Array();Ce(i,r.readonlyIndexes.length);const u=nt([$t("accountKey"),ue(a.length,"encodedWritableIndexesLength"),xe(Jt(),r.writableIndexes.length,"writableIndexes"),ue(i.length,"encodedReadonlyIndexesLength"),xe(Jt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(a),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),a=r&la;le(r!==a,"Expected versioned message but received legacy message");const i=a;le(i===0,`Expected versioned message with version 0 but found version ${i}`);const u={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},l=[],v=Le(e);for(let L=0;L<v;L++)l.push(new ut(e.splice(0,ze)));const S=te.encode(e.splice(0,ze)),B=Le(e),E=[];for(let L=0;L<B;L++){const R=e.shift(),U=Le(e),q=e.splice(0,U),F=Le(e),N=new Uint8Array(e.splice(0,F));E.push({programIdIndex:R,accountKeyIndexes:q,data:N})}const T=Le(e),I=[];for(let L=0;L<T;L++){const R=new ut(e.splice(0,ze)),U=Le(e),q=e.splice(0,U),F=Le(e),N=e.splice(0,F);I.push({accountKey:R,writableIndexes:q,readonlyIndexes:N})}return new ci({header:u,staticAccountKeys:l,recentBlockhash:S,compiledInstructions:E,addressTableLookups:I})}}let De;(function(s){s[s.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",s[s.PROCESSED=1]="PROCESSED",s[s.TIMED_OUT=2]="TIMED_OUT",s[s.NONCE_INVALID=3]="NONCE_INVALID"})(De||(De={}));const vh=zt.Buffer.alloc(Gi).fill(0);class no{constructor(t){this.keys=void 0,this.programId=void 0,this.data=zt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class rr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new no(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<e.length;R++)if(e[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const a=[],i=[];e.forEach(R=>{R.keys.forEach(q=>{i.push({...q})});const U=R.programId.toString();a.includes(U)||a.push(U)}),a.forEach(R=>{i.push({pubkey:new ut(R),isSigner:!1,isWritable:!1})});const u=[];i.forEach(R=>{const U=R.pubkey.toString(),q=u.findIndex(F=>F.pubkey.toString()===U);q>-1?(u[q].isWritable=u[q].isWritable||R.isWritable,u[q].isSigner=u[q].isSigner||R.isSigner):u.push(R)}),u.sort(function(R,U){return R.isSigner!==U.isSigner?R.isSigner?-1:1:R.isWritable!==U.isWritable?R.isWritable?-1:1:R.pubkey.toBase58().localeCompare(U.pubkey.toBase58())});const l=u.findIndex(R=>R.pubkey.equals(r));if(l>-1){const[R]=u.splice(l,1);R.isSigner=!0,R.isWritable=!0,u.unshift(R)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const R of this.signatures){const U=u.findIndex(q=>q.pubkey.equals(R.publicKey));if(U>-1)u[U].isSigner||(u[U].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let v=0,S=0,B=0;const E=[],T=[];u.forEach(({pubkey:R,isSigner:U,isWritable:q})=>{U?(E.push(R.toString()),v+=1,q||(S+=1)):(T.push(R.toString()),q||(B+=1))});const I=E.concat(T),L=e.map(R=>{const{data:U,programId:q}=R;return{programIdIndex:I.indexOf(q.toString()),accounts:R.keys.map(F=>I.indexOf(F.pubkey.toString())),data:te.encode(U)}});return L.forEach(R=>{le(R.programIdIndex>=0),R.accounts.forEach(U=>le(U>=0))}),new ar({header:{numRequiredSignatures:v,numReadonlySignedAccounts:S,numReadonlyUnsignedAccounts:B},accountKeys:I,recentBlockhash:t,instructions:L})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((a,i)=>e[i].equals(a.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const a=r.toString();return e.has(a)?!1:(e.add(a),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const a=this._compile();this._partialSign(a,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}const a=this._compile();this._partialSign(a,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(a=>{const i=hh(r,a.secretKey);this._addSignature(a.publicKey,en(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){le(e.length===64);const r=this.signatures.findIndex(a=>t.equals(a.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=zt.Buffer.from(e)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),t===void 0?!0:t)}_verifySignatures(t,e){for(const{signature:r,publicKey:a}of this.signatures)if(r===null){if(e)return!1}else if(!fh(r,t,a.toBytes()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),a=this.serializeMessage();if(r&&!this._verifySignatures(a,e))throw new Error("Signature verification failed");return this._serialize(a)}_serialize(t){const{signatures:e}=this,r=[];Ce(r,e.length);const a=r.length+e.length*64+t.length,i=zt.Buffer.alloc(a);return le(e.length<256),zt.Buffer.from(r).copy(i,0),e.forEach(({signature:u},l)=>{u!==null&&(le(u.length===64,"signature has invalid length"),zt.Buffer.from(u).copy(i,r.length+l*64))}),t.copy(i,r.length+e.length*64),le(i.length<=Jr,`Transaction too large: ${i.length} > ${Jr}`),i}get keys(){return le(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return le(this.instructions.length===1),this.instructions[0].programId}get data(){return le(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Le(e);let a=[];for(let i=0;i<r;i++){const u=e.slice(0,Gi);e=e.slice(Gi),a.push(te.encode(zt.Buffer.from(u)))}return rr.populate(ar.from(e),a)}static populate(t,e=[]){const r=new rr;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((a,i)=>{const u={signature:a==te.encode(vh)?null:te.decode(a),publicKey:t.accountKeys[i]};r.signatures.push(u)}),t.instructions.forEach(a=>{const i=a.accounts.map(u=>{const l=t.accountKeys[u];return{pubkey:l,isSigner:r.signatures.some(v=>v.publicKey.toString()===l.toString())||t.isAccountSigner(u),isWritable:t.isAccountWritable(u)}});r.instructions.push(new no({keys:i,programId:t.accountKeys[a.programIdIndex],data:te.decode(a.data)}))}),r._message=t,r._json=r.toJSON(),r}}new ut("SysvarC1ock11111111111111111111111111111111");new ut("SysvarEpochSchedu1e111111111111111111111111");new ut("Sysvar1nstructions1111111111111111111111111");new ut("SysvarRecentB1ockHashes11111111111111111111");new ut("SysvarRent111111111111111111111111111111111");new ut("SysvarRewards111111111111111111111111111111");new ut("SysvarS1otHashes111111111111111111111111111");new ut("SysvarS1otHistory11111111111111111111111111");new ut("SysvarStakeHistory1111111111111111111111111");function Gr(s){return new Promise(t=>setTimeout(t,s))}const bh=me("lamportsPerSignature"),ga=nt([ct("version"),ct("state"),$t("authorizedPubkey"),$t("nonce"),nt([bh],"feeCalculator")]);ga.span;class Es{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=ga.decode(en(t),0);return new Es({authorizedPubkey:new ut(e.authorizedPubkey),nonce:new ut(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const xh=s=>{const t=s.decode.bind(s),e=s.encode.bind(s);return{decode:t,encode:e}},Mh=s=>t=>{const e=ue(s,t),{encode:r,decode:a}=xh(e),i=e;return i.decode=(u,l)=>{const v=a(u,l);return pu(zt.Buffer.from(v))},i.encode=(u,l,v)=>{const S=yu(u,s);return r(S,l,v)},i},rn=Mh(8);Object.freeze({Create:{index:0,layout:nt([ct("instruction"),Be("lamports"),Be("space"),$t("programId")])},Assign:{index:1,layout:nt([ct("instruction"),$t("programId")])},Transfer:{index:2,layout:nt([ct("instruction"),rn("lamports")])},CreateWithSeed:{index:3,layout:nt([ct("instruction"),$t("base"),jr("seed"),Be("lamports"),Be("space"),$t("programId")])},AdvanceNonceAccount:{index:4,layout:nt([ct("instruction")])},WithdrawNonceAccount:{index:5,layout:nt([ct("instruction"),Be("lamports")])},InitializeNonceAccount:{index:6,layout:nt([ct("instruction"),$t("authorized")])},AuthorizeNonceAccount:{index:7,layout:nt([ct("instruction"),$t("authorized")])},Allocate:{index:8,layout:nt([ct("instruction"),Be("space")])},AllocateWithSeed:{index:9,layout:nt([ct("instruction"),$t("base"),jr("seed"),Be("space"),$t("programId")])},AssignWithSeed:{index:10,layout:nt([ct("instruction"),$t("base"),jr("seed"),$t("programId")])},TransferWithSeed:{index:11,layout:nt([ct("instruction"),rn("lamports"),jr("seed"),$t("programId")])},UpgradeNonceAccount:{index:12,layout:nt([ct("instruction")])}});new ut("11111111111111111111111111111111");new ut("BPFLoader2111111111111111111111111111111111");var _h=Object.prototype.toString,Sh=Object.keys||function(s){var t=[];for(var e in s)t.push(e);return t};function xn(s,t){var e,r,a,i,u,l,v;if(s===!0)return"true";if(s===!1)return"false";switch(typeof s){case"object":if(s===null)return null;if(s.toJSON&&typeof s.toJSON=="function")return xn(s.toJSON(),t);if(v=_h.call(s),v==="[object Array]"){for(a="[",r=s.length-1,e=0;e<r;e++)a+=xn(s[e],!0)+",";return r>-1&&(a+=xn(s[e],!0)),a+"]"}else if(v==="[object Object]"){for(i=Sh(s).sort(),r=i.length,a="",e=0;e<r;)u=i[e],l=xn(s[u],!1),l!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),e++;return"{"+a+"}"}else return JSON.stringify(s);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(s);default:return isFinite(s)?s:null}}var Eh=function(s){var t=xn(s,!1);if(t!==void 0)return""+t},Bh=Eh;const vn=32;function Li(s){let t=0;for(;s>1;)s/=2,t++;return t}function Ah(s){return s===0?1:(s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s|=s>>16,s|=s>>32,s+1)}class kh{constructor(t,e,r,a,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=a,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Li(Ah(t+vn+1))-Li(vn)-1,r=this.getSlotsInEpoch(e),a=t-(r-vn);return[e,a]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),a=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[a,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*vn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Li(vn)):this.slotsPerEpoch}}class io extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class ot extends Error{constructor({code:t,message:e,data:r},a){super(a!=null?`${a}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Ih=globalThis.fetch;const Rh=160,Th=64,Lh=Rh/Th,Ch=1e3/Lh;function Ph(s,t){let e;try{e=s.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==s.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${s.index}`);return e}const so=56;class oo{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Ph(Uh,t),r=t.length-so;le(r>=0,"lookup table is invalid"),le(r%32===0,"lookup table is invalid");const a=r/32,{addresses:i}=nt([xe($t(),a,"addresses")]).decode(t.slice(so));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ut(e.authority[0]):void 0,addresses:i.map(u=>new ut(u))}}}const Uh={index:1,layout:nt([ct("typeIndex"),rn("deactivationSlot"),me("lastExtendedSlot"),Jt("lastExtendedStartIndex"),Jt(),xe($t(),Pr(Jt(),-1),"authority")])},Oh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Nh(s){const t=s.match(Oh);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${s}\``);const[e,r,a,i]=t,u=s.startsWith("https:")?"wss:":"ws:",l=a==null?null:parseInt(a.slice(1),10),v=l==null?"":`:${l+1}`;return`${u}//${r}${v}${i}`}var Ci;const pe=Nn(ys(ut),G(),s=>new ut(s)),ma=ws([G(),ae("base64")]),Bs=Nn(ys(zt.Buffer),ma,s=>zt.Buffer.from(s[0],"base64")),Fh=30*1e3;function qh(s){if(/^https?:/.test(s)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return s}function se(s){let t,e;if(typeof s=="string")t=s;else if(s){const{commitment:r,...a}=s;t=r,e=a}return{commitment:t,config:e}}function ya(s){return Se([z({jsonrpc:ae("2.0"),id:G(),result:s}),z({jsonrpc:ae("2.0"),id:G(),error:z({code:On(),message:G(),data:ft(Eu())})})])}const Hh=ya(On());function Kt(s){return Nn(ya(s),Hh,t=>"error"in t?t:{...t,result:V(t.result,s)})}function de(s){return Kt(z({context:z({slot:P()}),value:s}))}function vi(s){return z({context:z({slot:P()}),value:s})}function Pi(s,t){return s===0?new ci({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ut(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:te.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new ar(t)}const Dh=z({foundation:P(),foundationTerm:P(),initial:P(),taper:P(),terminal:P()}),zh=Kt(Y(X(z({epoch:P(),effectiveSlot:P(),amount:P(),postBalance:P(),commission:ft(X(P()))})))),Kh=z({total:P(),validator:P(),foundation:P(),epoch:P()}),$h=z({epoch:P(),slotIndex:P(),slotsInEpoch:P(),absoluteSlot:P(),blockHeight:ft(P()),transactionCount:ft(P())}),Wh=z({slotsPerEpoch:P(),leaderScheduleSlotOffset:P(),warmup:je(),firstNormalEpoch:P(),firstNormalSlot:P()}),Gh=ra(G(),Y(P())),Kr=X(Se([z({}),G()])),Zh=z({err:Kr}),jh=ae("receivedSignature"),Vh=z({"solana-core":G(),"feature-set":ft(P())}),ao=de(z({err:X(Se([z({}),G()])),logs:X(Y(G())),accounts:ft(X(Y(X(z({executable:je(),owner:G(),lamports:P(),data:Y(G()),rentEpoch:ft(P())}))))),unitsConsumed:ft(P()),returnData:ft(X(z({programId:G(),data:ws([G(),ae("base64")])})))})),Xh=de(z({byIdentity:ra(G(),Y(P())),range:z({firstSlot:P(),lastSlot:P()})}));function Yh(s,t,e,r,a,i){const u=e||Ih;let l;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let v;return r&&(v=async(B,E)=>{const T=await new Promise((I,L)=>{try{r(B,E,(R,U)=>I([R,U]))}catch(R){L(R)}});return await u(...T)}),new Gu(async(B,E)=>{const T={method:"POST",body:B,agent:l,headers:Object.assign({"Content-Type":"application/json"},t||{},Yf)};try{let I=5,L,R=500;for(;v?L=await v(s,T):L=await u(s,T),!(L.status!==429||a===!0||(I-=1,I===0));)console.log(`Server responded with ${L.status} ${L.statusText}.  Retrying after ${R}ms delay...`),await Gr(R),R*=2;const U=await L.text();L.ok?E(null,U):E(new Error(`${L.status} ${L.statusText}: ${U}`))}catch(I){I instanceof Error&&E(I)}},{})}function Jh(s){return(t,e)=>new Promise((r,a)=>{s.request(t,e,(i,u)=>{if(i){a(i);return}r(u)})})}function Qh(s){return t=>new Promise((e,r)=>{t.length===0&&e([]);const a=t.map(i=>s.request(i.methodName,i.args));s.request(a,(i,u)=>{if(i){r(i);return}e(u)})})}const tf=Kt(Dh),ef=Kt(Kh),rf=Kt($h),nf=Kt(Wh),sf=Kt(Gh),of=Kt(P()),af=de(z({total:P(),circulating:P(),nonCirculating:P(),nonCirculatingAccounts:Y(pe)})),Zi=z({amount:G(),uiAmount:X(P()),decimals:P(),uiAmountString:ft(G())}),cf=de(Y(z({address:pe,amount:G(),uiAmount:X(P()),decimals:P(),uiAmountString:ft(G())}))),uf=de(Y(z({pubkey:pe,account:z({executable:je(),owner:pe,lamports:P(),data:Bs,rentEpoch:P()})}))),ji=z({program:G(),parsed:On(),space:P()}),hf=de(Y(z({pubkey:pe,account:z({executable:je(),owner:pe,lamports:P(),data:ji,rentEpoch:P()})}))),ff=de(Y(z({lamports:P(),address:pe}))),In=z({executable:je(),owner:pe,lamports:P(),data:Bs,rentEpoch:P()}),lf=z({pubkey:pe,account:In}),df=Nn(Se([ys(zt.Buffer),ji]),Se([ma,ji]),s=>Array.isArray(s)?V(s,Bs):s),Vi=z({executable:je(),owner:pe,lamports:P(),data:df,rentEpoch:P()}),pf=z({pubkey:pe,account:Vi}),gf=z({state:Se([ae("active"),ae("inactive"),ae("activating"),ae("deactivating")]),active:P(),inactive:P()}),mf=Kt(Y(z({signature:G(),slot:P(),err:Kr,memo:X(G()),blockTime:ft(X(P()))}))),yf=Kt(Y(z({signature:G(),slot:P(),err:Kr,memo:X(G()),blockTime:ft(X(P()))}))),wf=z({subscription:P(),result:vi(In)}),vf=z({pubkey:pe,account:In}),bf=z({subscription:P(),result:vi(vf)}),xf=z({parent:P(),slot:P(),root:P()}),Mf=z({subscription:P(),result:xf}),_f=Se([z({type:Se([ae("firstShredReceived"),ae("completed"),ae("optimisticConfirmation"),ae("root")]),slot:P(),timestamp:P()}),z({type:ae("createdBank"),parent:P(),slot:P(),timestamp:P()}),z({type:ae("frozen"),slot:P(),timestamp:P(),stats:z({numTransactionEntries:P(),numSuccessfulTransactions:P(),numFailedTransactions:P(),maxTransactionsPerEntry:P()})}),z({type:ae("dead"),slot:P(),timestamp:P(),err:G()})]),Sf=z({subscription:P(),result:_f}),Ef=z({subscription:P(),result:vi(Se([Zh,jh]))}),Bf=z({subscription:P(),result:P()}),Af=z({pubkey:G(),gossip:X(G()),tpu:X(G()),rpc:X(G()),version:X(G())}),co=z({votePubkey:G(),nodePubkey:G(),activatedStake:P(),epochVoteAccount:je(),epochCredits:Y(ws([P(),P(),P()])),commission:P(),lastVote:P(),rootSlot:X(P())}),kf=Kt(z({current:Y(co),delinquent:Y(co)})),If=Se([ae("processed"),ae("confirmed"),ae("finalized")]),Rf=z({slot:P(),confirmations:X(P()),err:Kr,confirmationStatus:ft(If)}),Tf=de(Y(X(Rf))),Lf=Kt(P()),wa=z({accountKey:pe,writableIndexes:Y(P()),readonlyIndexes:Y(P())}),As=z({signatures:Y(G()),message:z({accountKeys:Y(G()),header:z({numRequiredSignatures:P(),numReadonlySignedAccounts:P(),numReadonlyUnsignedAccounts:P()}),instructions:Y(z({accounts:Y(P()),data:G(),programIdIndex:P()})),recentBlockhash:G(),addressTableLookups:ft(Y(wa))})}),va=z({pubkey:pe,signer:je(),writable:je(),source:ft(Se([ae("transaction"),ae("lookupTable")]))}),ba=z({accountKeys:Y(va),signatures:Y(G())}),xa=z({parsed:On(),program:G(),programId:pe}),Ma=z({accounts:Y(pe),data:G(),programId:pe}),Cf=Se([Ma,xa]),Pf=Se([z({parsed:On(),program:G(),programId:G()}),z({accounts:Y(G()),data:G(),programId:G()})]),_a=Nn(Cf,Pf,s=>"accounts"in s?V(s,Ma):V(s,xa)),Sa=z({signatures:Y(G()),message:z({accountKeys:Y(va),instructions:Y(_a),recentBlockhash:G(),addressTableLookups:ft(X(Y(wa)))})}),ui=z({accountIndex:P(),mint:G(),owner:ft(G()),uiTokenAmount:Zi}),Ea=z({writable:Y(pe),readonly:Y(pe)}),bi=z({err:Kr,fee:P(),innerInstructions:ft(X(Y(z({index:P(),instructions:Y(z({accounts:Y(P()),data:G(),programIdIndex:P()}))})))),preBalances:Y(P()),postBalances:Y(P()),logMessages:ft(X(Y(G()))),preTokenBalances:ft(X(Y(ui))),postTokenBalances:ft(X(Y(ui))),loadedAddresses:ft(Ea),computeUnitsConsumed:ft(P())}),ks=z({err:Kr,fee:P(),innerInstructions:ft(X(Y(z({index:P(),instructions:Y(_a)})))),preBalances:Y(P()),postBalances:Y(P()),logMessages:ft(X(Y(G()))),preTokenBalances:ft(X(Y(ui))),postTokenBalances:ft(X(Y(ui))),loadedAddresses:ft(Ea),computeUnitsConsumed:ft(P())}),an=Se([ae(0),ae("legacy")]),$r=z({pubkey:G(),lamports:P(),postBalance:X(P()),rewardType:X(G()),commission:ft(X(P()))}),Uf=Kt(X(z({blockhash:G(),previousBlockhash:G(),parentSlot:P(),transactions:Y(z({transaction:As,meta:X(bi),version:ft(an)})),rewards:ft(Y($r)),blockTime:X(P()),blockHeight:X(P())}))),Of=Kt(X(z({blockhash:G(),previousBlockhash:G(),parentSlot:P(),rewards:ft(Y($r)),blockTime:X(P()),blockHeight:X(P())}))),Nf=Kt(X(z({blockhash:G(),previousBlockhash:G(),parentSlot:P(),transactions:Y(z({transaction:ba,meta:X(bi),version:ft(an)})),rewards:ft(Y($r)),blockTime:X(P()),blockHeight:X(P())}))),Ff=Kt(X(z({blockhash:G(),previousBlockhash:G(),parentSlot:P(),transactions:Y(z({transaction:Sa,meta:X(ks),version:ft(an)})),rewards:ft(Y($r)),blockTime:X(P()),blockHeight:X(P())}))),qf=Kt(X(z({blockhash:G(),previousBlockhash:G(),parentSlot:P(),transactions:Y(z({transaction:ba,meta:X(ks),version:ft(an)})),rewards:ft(Y($r)),blockTime:X(P()),blockHeight:X(P())}))),Hf=Kt(X(z({blockhash:G(),previousBlockhash:G(),parentSlot:P(),rewards:ft(Y($r)),blockTime:X(P()),blockHeight:X(P())}))),Df=Kt(X(z({blockhash:G(),previousBlockhash:G(),parentSlot:P(),transactions:Y(z({transaction:As,meta:X(bi)})),rewards:ft(Y($r)),blockTime:X(P())}))),uo=Kt(X(z({blockhash:G(),previousBlockhash:G(),parentSlot:P(),signatures:Y(G()),blockTime:X(P())}))),Ui=Kt(X(z({slot:P(),meta:bi,blockTime:ft(X(P())),transaction:As,version:ft(an)}))),$n=Kt(X(z({slot:P(),transaction:Sa,meta:X(ks),blockTime:ft(X(P())),version:ft(an)}))),zf=de(z({blockhash:G(),feeCalculator:z({lamportsPerSignature:P()})})),Kf=de(z({blockhash:G(),lastValidBlockHeight:P()})),$f=z({slot:P(),numTransactions:P(),numSlots:P(),samplePeriodSecs:P()}),Wf=Kt(Y($f)),Gf=de(X(z({feeCalculator:z({lamportsPerSignature:P()})}))),Zf=Kt(G()),jf=Kt(G()),Vf=z({err:Kr,logs:Y(G()),signature:G()}),Xf=z({result:vi(Vf),subscription:P()}),Yf={"solana-client":`js/${(Ci="0.0.0-development")!==null&&Ci!==void 0?Ci:"UNKNOWN"}`};class Is{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let r,a,i,u,l,v;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,a=e.httpHeaders,i=e.fetch,u=e.fetchMiddleware,l=e.disableRetryOnRateLimit,v=e.httpAgent),this._rpcEndpoint=qh(t),this._rpcWsEndpoint=r||Nh(t),this._rpcClient=Yh(t,a,i,u,l,v),this._rpcRequest=Jh(this._rpcClient),this._rpcBatchRequest=Qh(this._rpcClient),this._rpcWebSocket=new ia(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:a}=se(e),i=this._buildArgs([t.toBase58()],r,void 0,a),u=await this._rpcRequest("getBalance",i),l=V(u,de(P()));if("error"in l)throw new ot(l.error,`failed to get balance for ${t.toBase58()}`);return l.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=V(e,Kt(X(P())));if("error"in r)throw new ot(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=V(t,Kt(P()));if("error"in e)throw new ot(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=V(t,of);if("error"in e)throw new ot(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),a=V(r,af);if("error"in a)throw new ot(a.error,"failed to get supply");return a.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),a=await this._rpcRequest("getTokenSupply",r),i=V(a,de(Zi));if("error"in i)throw new ot(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),a=await this._rpcRequest("getTokenAccountBalance",r),i=V(a,de(Zi));if("error"in i)throw new ot(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:a,config:i}=se(r);let u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});const l=this._buildArgs(u,a,"base64",i),v=await this._rpcRequest("getTokenAccountsByOwner",l),S=V(v,uf);if("error"in S)throw new ot(S.error,`failed to get token accounts owned by account ${t.toBase58()}`);return S.result}async getParsedTokenAccountsByOwner(t,e,r){let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const i=this._buildArgs(a,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",i),l=V(u,hf);if("error"in l)throw new ot(l.error,`failed to get token accounts owned by account ${t.toBase58()}`);return l.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],a=await this._rpcRequest("getLargestAccounts",r),i=V(a,ff);if("error"in i)throw new ot(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),a=await this._rpcRequest("getTokenLargestAccounts",r),i=V(a,cf);if("error"in i)throw new ot(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:a}=se(e),i=this._buildArgs([t.toBase58()],r,"base64",a),u=await this._rpcRequest("getAccountInfo",i),l=V(u,de(X(In)));if("error"in l)throw new ot(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getParsedAccountInfo(t,e){const{commitment:r,config:a}=se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",a),u=await this._rpcRequest("getAccountInfo",i),l=V(u,de(X(Vi)));if("error"in l)throw new ot(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:a}=se(e),i=t.map(S=>S.toBase58()),u=this._buildArgs([i],r,"jsonParsed",a),l=await this._rpcRequest("getMultipleAccounts",u),v=V(l,de(Y(X(Vi))));if("error"in v)throw new ot(v.error,`failed to get info for accounts ${i}`);return v.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:a}=se(e),i=t.map(S=>S.toBase58()),u=this._buildArgs([i],r,"base64",a),l=await this._rpcRequest("getMultipleAccounts",u),v=V(l,de(Y(X(In))));if("error"in v)throw new ot(v.error,`failed to get info for accounts ${i}`);return v.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:a,config:i}=se(e),u=this._buildArgs([t.toBase58()],a,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),l=await this._rpcRequest("getStakeActivation",u),v=V(l,Kt(gf));if("error"in v)throw new ot(v.error,`failed to get Stake Activation ${t.toBase58()}`);return v.result}async getProgramAccounts(t,e){const{commitment:r,config:a}=se(e),{encoding:i,...u}=a||{},l=this._buildArgs([t.toBase58()],r,i||"base64",u),v=await this._rpcRequest("getProgramAccounts",l),S=V(v,Kt(Y(lf)));if("error"in S)throw new ot(S.error,`failed to get accounts owned by program ${t.toBase58()}`);return S.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:a}=se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",a),u=await this._rpcRequest("getProgramAccounts",i),l=V(u,Kt(Y(pf)));if("error"in l)throw new ot(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{var a;const u=t;if((a=u.abortSignal)!==null&&a!==void 0&&a.aborted)return Promise.reject(u.abortSignal.reason);r=u.signature}let i;try{i=te.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return le(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,a,i=!1;const u=new Promise((v,S)=>{try{r=this.onSignature(e,(E,T)=>{r=void 0;const I={context:T,value:E};v({__type:De.PROCESSED,response:I})},t);const B=new Promise(E=>{r==null?E():a=this._onSubscriptionStateChange(r,T=>{T==="subscribed"&&E()})});(async()=>{if(await B,i)return;const E=await this.getSignatureStatus(e);if(i||E==null)return;const{context:T,value:I}=E;if(I!=null)if(I!=null&&I.err)S(I.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(I.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(I.confirmationStatus==="processed"||I.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,v({__type:De.PROCESSED,response:{context:T,value:I}})}})()}catch(B){S(B)}});return{abortConfirmation:()=>{a&&(a(),a=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:a}}){let i=!1;const u=new Promise(E=>{const T=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let I=await T();if(!i){for(;I<=r;)if(await Gr(1e3),i||(I=await T(),i))return;E({__type:De.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:v}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),S=this.getCancellationPromise(e);let B;try{const E=await Promise.race([S,v,u]);if(E.__type===De.PROCESSED)B=E.response;else throw new da(a)}finally{i=!0,l()}return B}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:a,nonceValue:i,signature:u}}){let l=!1;const v=new Promise(R=>{let U=i,q=null;const F=async()=>{try{const{context:N,value:J}=await this.getNonceAndContext(a,{commitment:t,minContextSlot:r});return q=N.slot,J==null?void 0:J.nonce}catch{return U}};(async()=>{if(U=await F(),!l)for(;;){if(i!==U){R({__type:De.NONCE_INVALID,slotInWhichNonceDidAdvance:q});return}if(await Gr(2e3),l||(U=await F(),l))return}})()}),{abortConfirmation:S,confirmationPromise:B}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),E=this.getCancellationPromise(e);let T;try{const R=await Promise.race([E,B,v]);if(R.__type===De.PROCESSED)T=R.response;else{var I;let U;for(;;){var L;const q=await this.getSignatureStatus(u);if(q==null)break;if(q.context.slot<((L=R.slotInWhichNonceDidAdvance)!==null&&L!==void 0?L:r)){await Gr(400);continue}U=q;break}if((I=U)!==null&&I!==void 0&&I.value){const q=t||"finalized",{confirmationStatus:F}=U.value;switch(q){case"processed":case"recent":if(F!=="processed"&&F!=="confirmed"&&F!=="finalized")throw new bn(u);break;case"confirmed":case"single":case"singleGossip":if(F!=="confirmed"&&F!=="finalized")throw new bn(u);break;case"finalized":case"max":case"root":if(F!=="finalized")throw new bn(u);break;default:(N=>{})(q)}T={context:U.context,value:{err:U.value.err}}}else throw new bn(u)}}finally{l=!0,S()}return T}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const a=new Promise(v=>{let S=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{S=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>v({__type:De.TIMED_OUT,timeoutMs:S}),S)}),{abortConfirmation:i,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let l;try{const v=await Promise.race([u,a]);if(v.__type===De.PROCESSED)l=v.response;else throw new pa(e,v.timeoutMs/1e3)}finally{clearTimeout(r),i()}return l}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=V(t,Kt(Y(Af)));if("error"in e)throw new ot(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),a=V(r,kf);if("error"in a)throw new ot(a.error,"failed to get vote accounts");return a.result}async getSlot(t){const{commitment:e,config:r}=se(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",a),u=V(i,Kt(P()));if("error"in u)throw new ot(u.error,"failed to get slot");return u.result}async getSlotLeader(t){const{commitment:e,config:r}=se(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",a),u=V(i,Kt(G()));if("error"in u)throw new ot(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(t,e){const r=[t,e],a=await this._rpcRequest("getSlotLeaders",r),i=V(a,Kt(Y(pe)));if("error"in i)throw new ot(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:a}=await this.getSignatureStatuses([t],e);le(a.length===1);const i=a[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const a=await this._rpcRequest("getSignatureStatuses",r),i=V(a,Tf);if("error"in i)throw new ot(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=se(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",a),u=V(i,Kt(P()));if("error"in u)throw new ot(u.error,"failed to get transaction count");return u.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),a=V(r,tf);if("error"in a)throw new ot(a.error,"failed to get inflation");return a.result}async getInflationReward(t,e,r){const{commitment:a,config:i}=se(r),u=this._buildArgs([t.map(S=>S.toBase58())],a,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),l=await this._rpcRequest("getInflationReward",u),v=V(l,zh);if("error"in v)throw new ot(v.error,"failed to get inflation reward");return v.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=V(t,ef);if("error"in e)throw new ot(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=se(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",a),u=V(i,rf);if("error"in u)throw new ot(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=V(t,nf);if("error"in e)throw new ot(e.error,"failed to get epoch schedule");const r=e.result;return new kh(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=V(t,sf);if("error"in e)throw new ot(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),a=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=V(a,Lf);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),a=V(r,zf);if("error"in a)throw new ot(a.error,"failed to get recent blockhash");return a.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=V(e,Wf);if("error"in r)throw new ot(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),a=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=V(a,Gf);if("error"in i)throw new ot(i.error,"failed to get fee calculator");const{context:u,value:l}=i.result;return{context:u,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(t,e){const r=en(t.serialize()).toString("base64"),a=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",a),u=V(i,de(X(P())));if("error"in u)throw new ot(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=se(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",a),u=V(i,Kf);if("error"in u)throw new ot(u.error,"failed to get latest blockhash");return u.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=V(t,Kt(Vh));if("error"in e)throw new ot(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=V(t,Kt(G()));if("error"in e)throw new ot(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:a}=se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,a),u=await this._rpcRequest("getBlock",i);try{switch(a==null?void 0:a.transactionDetails){case"accounts":{const l=V(u,Nf);if("error"in l)throw l.error;return l.result}case"none":{const l=V(u,Of);if("error"in l)throw l.error;return l.result}default:{const l=V(u,Uf);if("error"in l)throw l.error;const{result:v}=l;return v?{...v,transactions:v.transactions.map(({transaction:S,meta:B,version:E})=>({meta:B,transaction:{...S,message:Pi(E,S.message)},version:E}))}:null}}}catch(l){throw new ot(l,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:a}=se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",a),u=await this._rpcRequest("getBlock",i);try{switch(a==null?void 0:a.transactionDetails){case"accounts":{const l=V(u,qf);if("error"in l)throw l.error;return l.result}case"none":{const l=V(u,Hf);if("error"in l)throw l.error;return l.result}default:{const l=V(u,Ff);if("error"in l)throw l.error;return l.result}}}catch(l){throw new ot(l,"failed to get block")}}async getBlockHeight(t){const{commitment:e,config:r}=se(t),a=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getBlockHeight",a),u=V(i,Kt(P()));if("error"in u)throw new ot(u.error,"failed to get block height information");return u.result}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:l,...v}=t;r=l,e=v}const a=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",a),u=V(i,Xh);if("error"in u)throw new ot(u.error,"failed to get block production information");return u.result}async getTransaction(t,e){const{commitment:r,config:a}=se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,a),u=await this._rpcRequest("getTransaction",i),l=V(u,Ui);if("error"in l)throw new ot(l.error,"failed to get transaction");const v=l.result;return v&&{...v,transaction:{...v.transaction,message:Pi(v.version,v.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:a}=se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",a),u=await this._rpcRequest("getTransaction",i),l=V(u,$n);if("error"in l)throw new ot(l.error,"failed to get transaction");return l.result}async getParsedTransactions(t,e){const{commitment:r,config:a}=se(e),i=t.map(v=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([v],r,"jsonParsed",a)}));return(await this._rpcBatchRequest(i)).map(v=>{const S=V(v,$n);if("error"in S)throw new ot(S.error,"failed to get transactions");return S.result})}async getTransactions(t,e){const{commitment:r,config:a}=se(e),i=t.map(v=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([v],r,void 0,a)}));return(await this._rpcBatchRequest(i)).map(v=>{const S=V(v,Ui);if("error"in S)throw new ot(S.error,"failed to get transactions");const B=S.result;return B&&{...B,transaction:{...B.transaction,message:Pi(B.version,B.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),a=await this._rpcRequest("getConfirmedBlock",r),i=V(a,Df);if("error"in i)throw new ot(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");const l={...u,transactions:u.transactions.map(({transaction:v,meta:S})=>{const B=new ar(v.message);return{meta:S,transaction:{...v,message:B}}})};return{...l,transactions:l.transactions.map(({transaction:v,meta:S})=>({meta:S,transaction:rr.populate(v.message,v.signatures)}))}}async getBlocks(t,e,r){const a=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",a),u=V(i,Kt(Y(P())));if("error"in u)throw new ot(u.error,"failed to get blocks");return u.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),a=await this._rpcRequest("getBlock",r),i=V(a,uo);if("error"in i)throw new ot(i.error,"failed to get block");const u=i.result;if(!u)throw new Error("Block "+t+" not found");return u}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),a=await this._rpcRequest("getConfirmedBlock",r),i=V(a,uo);if("error"in i)throw new ot(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");return u}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),a=await this._rpcRequest("getConfirmedTransaction",r),i=V(a,Ui);if("error"in i)throw new ot(i.error,"failed to get transaction");const u=i.result;if(!u)return u;const l=new ar(u.transaction.message),v=u.transaction.signatures;return{...u,transaction:rr.populate(l,v)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),a=await this._rpcRequest("getConfirmedTransaction",r),i=V(a,$n);if("error"in i)throw new ot(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(u=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([u],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{const l=V(u,$n);if("error"in l)throw new ot(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(t,e,r){let a={},i=await this.getFirstAvailableBlock();for(;!("until"in a)&&(e--,!(e<=0||e<i));)try{const v=await this.getConfirmedBlockSignatures(e,"finalized");v.signatures.length>0&&(a.until=v.signatures[v.signatures.length-1].toString())}catch(v){if(v instanceof Error&&v.message.includes("skipped"))continue;throw v}let u=await this.getSlot("finalized");for(;!("before"in a)&&(r++,!(r>u));)try{const v=await this.getConfirmedBlockSignatures(r);v.signatures.length>0&&(a.before=v.signatures[v.signatures.length-1].toString())}catch(v){if(v instanceof Error&&v.message.includes("skipped"))continue;throw v}return(await this.getConfirmedSignaturesForAddress2(t,a)).map(v=>v.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const a=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",a),u=V(i,mf);if("error"in u)throw new ot(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(t,e,r){const a=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",a),u=V(i,yf);if("error"in u)throw new ot(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(t,e){const{context:r,value:a}=await this.getAccountInfoAndContext(t,e);let i=null;return a!==null&&(i=new oo({key:t,state:oo.deserialize(a.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:a}=await this.getAccountInfoAndContext(t,e);let i=null;return a!==null&&(i=Es.fromAccountData(a.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),a=V(r,Zf);if("error"in a)throw new ot(a.error,`airdrop to ${t.toBase58()} failed`);return a.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Gr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Fh;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let a=0;a<50;a++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Gr(Ch/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=se(t),a=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",a),u=V(i,de(P()));if("error"in u)throw new ot(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(t,e,r){if("message"in t){const R=t.serialize(),U=zt.Buffer.from(R).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const q=e||{};q.encoding="base64","commitment"in q||(q.commitment=this.commitment);const F=[U,q],N=await this._rpcRequest("simulateTransaction",F),J=V(N,ao);if("error"in J)throw new Error("failed to simulate transaction: "+J.error.message);return J.result}let a;if(t instanceof rr){let L=t;a=new rr,a.feePayer=L.feePayer,a.instructions=t.instructions,a.nonceInfo=L.nonceInfo,a.signatures=L.signatures}else a=rr.populate(t),a._message=a._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(a.nonceInfo&&i)a.sign(...i);else{let L=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(L);if(a.lastValidBlockHeight=R.lastValidBlockHeight,a.recentBlockhash=R.blockhash,!i)break;if(a.sign(...i),!a.signature)throw new Error("!signature");const U=a.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(U)&&!this._blockhashInfo.transactionSignatures.includes(U)){this._blockhashInfo.simulatedSignatures.push(U);break}else L=!0}}const u=a._compile(),l=u.serialize(),S=a._serialize(l).toString("base64"),B={encoding:"base64",commitment:this.commitment};if(r){const L=(Array.isArray(r)?r:u.nonProgramIds()).map(R=>R.toBase58());B.accounts={encoding:"base64",addresses:L}}i&&(B.sigVerify=!0);const E=[S,B],T=await this._rpcRequest("simulateTransaction",E),I=V(T,ao);if("error"in I){let L;if("data"in I.error&&(L=I.error.data.logs,L&&Array.isArray(L))){const R=`
    `,U=R+L.join(R);console.error(I.error.message,U)}throw new io("failed to simulate transaction: "+I.error.message,L)}return I.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const u=t.serialize();return await this.sendRawTransaction(u,r)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const a=e;if(t.nonceInfo)t.sign(...a);else{let u=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(u);if(t.lastValidBlockHeight=l.lastValidBlockHeight,t.recentBlockhash=l.blockhash,t.sign(...a),!t.signature)throw new Error("!signature");const v=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(v))u=!0;else{this._blockhashInfo.transactionSignatures.push(v);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=en(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},a=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),a&&(r.skipPreflight=a),i&&(r.preflightCommitment=i);const u=[t,r],l=await this._rpcRequest("sendTransaction",u),v=V(l,jf);if("error"in v){let S;throw"data"in v.error&&(S=v.error.data.logs),new io("failed to send transaction: "+v.error.message,S)}return v.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var r;const a=(r=this._subscriptionsByHash[t])===null||r===void 0?void 0:r.state;if(this._subscriptionsByHash[t]=e,a!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(u=>{try{u(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var r;const a=this._subscriptionHashByClientSubscriptionId[t];if(a==null)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[a]||(r[a]=new Set);return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[a]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const a=this._subscriptionsByHash[r];if(a!==void 0)switch(a.state){case"pending":case"unsubscribed":if(a.callbacks.size===0){delete this._subscriptionsByHash[r],a.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[a.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:u}=a;try{this._setSubscription(r,{...a,state:"subscribing"});const l=await this._rpcWebSocket.call(u,i);this._setSubscription(r,{...a,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=a.callbacks,await this._updateSubscriptions()}catch(l){if(l instanceof Error&&console.error(`${u} error for argument`,i,l.message),!e())return;this._setSubscription(r,{...a,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":a.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:u}=a;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...a,state:"unsubscribing"}),this._setSubscription(r,{...a,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[i])}catch(l){if(l instanceof Error&&console.error(`${u} error:`,l.message),!e())return;this._setSubscription(r,{...a,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...a,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(a=>{try{a(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=V(t,wf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,a=Bh([t.method,e]),i=this._subscriptionsByHash[a];return i===void 0?this._subscriptionsByHash[a]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=a,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const u=this._subscriptionsByHash[a];le(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const a=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=V(t,bf);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,a){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",a?{filters:a}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const a=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},a)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=V(t,Xf);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=V(t,Mf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=V(t,Sf);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,a){const i=e||this._commitment;if(i||r||a){let u={};r&&(u.encoding=r),i&&(u.commitment=i),a&&(u=Object.assign(u,a)),t.push(u)}return t}_buildArgsAtLeastConfirmed(t,e,r,a){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,a)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=V(t,Ef);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const a=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(u,l)=>{if(u.type==="status"){e(u.result,l);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return i}onSignatureWithOptions(t,e,r){const{commitment:a,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([t],a,void 0,i),l=this._makeSubscription({callback:(v,S)=>{e(v,S);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return l}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=V(t,Bf);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class En{constructor(t){this._keypair=void 0,this._keypair=t??to()}static generate(){return new En(to())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const a=t.slice(0,32),i=Wi(a);for(let u=0;u<32;u++)if(r[u]!==i[u])throw new Error("provided secretKey is invalid")}return new En({publicKey:r,secretKey:t})}static fromSeed(t){const e=Wi(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new En({publicKey:e,secretKey:r})}get publicKey(){return new ut(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:nt([ct("instruction"),rn("recentSlot"),Jt("bumpSeed")])},FreezeLookupTable:{index:1,layout:nt([ct("instruction")])},ExtendLookupTable:{index:2,layout:nt([ct("instruction"),rn(),xe($t(),Pr(ct(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:nt([ct("instruction")])},CloseLookupTable:{index:4,layout:nt([ct("instruction")])}});new ut("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:nt([Jt("instruction"),ct("units"),ct("additionalFee")])},RequestHeapFrame:{index:1,layout:nt([Jt("instruction"),ct("bytes")])},SetComputeUnitLimit:{index:2,layout:nt([Jt("instruction"),ct("units")])},SetComputeUnitPrice:{index:3,layout:nt([Jt("instruction"),rn("microLamports")])}});new ut("ComputeBudget111111111111111111111111111111");nt([Jt("numSignatures"),Jt("padding"),Te("signatureOffset"),Te("signatureInstructionIndex"),Te("publicKeyOffset"),Te("publicKeyInstructionIndex"),Te("messageDataOffset"),Te("messageDataSize"),Te("messageInstructionIndex")]);new ut("Ed25519SigVerify111111111111111111111111111");Cr.hmacSha256Sync=(s,...t)=>{const e=ha.create(qi,s);return t.forEach(r=>e.update(r)),e.digest()};Cr.isValidPrivateKey;nt([Jt("numSignatures"),Te("signatureOffset"),Jt("signatureInstructionIndex"),Te("ethAddressOffset"),Jt("ethAddressInstructionIndex"),Te("messageDataOffset"),Te("messageDataSize"),Jt("messageInstructionIndex"),ue(20,"ethAddress"),ue(64,"signature"),Jt("recoveryId")]);new ut("KeccakSecp256k11111111111111111111111111111");new ut("StakeConfig11111111111111111111111111111111");class ho{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}ho.default=new ho(0,0,ut.default);Object.freeze({Initialize:{index:0,layout:nt([ct("instruction"),gh(),mh()])},Authorize:{index:1,layout:nt([ct("instruction"),$t("newAuthorized"),ct("stakeAuthorizationType")])},Delegate:{index:2,layout:nt([ct("instruction")])},Split:{index:3,layout:nt([ct("instruction"),Be("lamports")])},Withdraw:{index:4,layout:nt([ct("instruction"),Be("lamports")])},Deactivate:{index:5,layout:nt([ct("instruction")])},Merge:{index:7,layout:nt([ct("instruction")])},AuthorizeWithSeed:{index:8,layout:nt([ct("instruction"),$t("newAuthorized"),ct("stakeAuthorizationType"),jr("authoritySeed"),$t("authorityOwner")])}});new ut("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:nt([ct("instruction"),yh()])},Authorize:{index:1,layout:nt([ct("instruction"),$t("newAuthorized"),ct("voteAuthorizationType")])},Withdraw:{index:3,layout:nt([ct("instruction"),Be("lamports")])},AuthorizeWithSeed:{index:10,layout:nt([ct("instruction"),wh()])}});new ut("Vote111111111111111111111111111111111111111");new ut("Va1idator1nfo111111111111111111111111111111");z({name:G(),website:ft(G()),details:ft(G()),keybaseUsername:ft(G())});new ut("Vote111111111111111111111111111111111111111");nt([$t("nodePubkey"),$t("authorizedWithdrawer"),Jt("commission"),me(),xe(nt([me("slot"),ct("confirmationCount")]),Pr(ct(),-8),"votes"),Jt("rootSlotValid"),me("rootSlot"),me(),xe(nt([me("epoch"),$t("authorizedVoter")]),Pr(ct(),-8),"authorizedVoters"),nt([xe(nt([$t("authorizedPubkey"),me("epochOfLastAuthorizedSwitch"),me("targetEpoch")]),32,"buf"),me("idx"),Jt("isEmpty")],"priorVoters"),me(),xe(nt([me("epoch"),me("credits"),me("prevCredits")]),Pr(ct(),-8),"epochCredits"),nt([me("slot"),me("timestamp")],"lastTimestamp")]);function Jf(s){return(t,e,r,a)=>t.method==="solana_chainId"?(e.result=s,a()):r()}function Qf(s){return(t,e,r,a)=>t.method==="solana_provider_config"?(e.result=s,a()):r()}function Ba(s){const{chainId:t}=s;return Rn([Jf(t),Qf(s)])}function tl(s){const{rpcTarget:t}=s,e=Ha({rpcTarget:t});return{networkMiddleware:Rn([Ba(s),e]),fetchMiddleware:e}}function el(s){let{getAccounts:t}=s;return hi(async(e,r,a)=>{const{method:i}=e;if(i!=="getAccounts")return a();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const u=await t(e);r.result=u})}function rl(s){let{requestAccounts:t}=s;return hi(async(e,r,a)=>{const{method:i}=e;if(i!=="requestAccounts")return a();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const u=await t(e);r.result=u})}function Ge(s,t){return hi(async(e,r,a)=>{const{method:i}=e;if(i!==s)return a();if(!t)throw new Error("WalletMiddleware - ".concat(s," not provided"));const u=await t(e);r.result=u})}function Rs(s){const{getAccounts:t,requestAccounts:e,signTransaction:r,signAndSendTransaction:a,signAllTransactions:i,signMessage:u,getPrivateKey:l,getSecretKey:v}=s;return Rn([rl({requestAccounts:e}),el({getAccounts:t}),Ge("signTransaction",r),Ge("signAndSendTransaction",a),Ge("signAllTransactions",i),Ge("signMessage",u),Ge("solanaPrivateKey",l),Ge("solanaSecretKey",v)])}function nl(s){let{addNewChainConfig:t,switchSolanaChain:e}=s;return Rn([Ge("addSolanaChain",t),Ge("switchSolanaChain",e)])}function il(s){let{updatePrivatekey:t}=s;return Rn([Ge("updateAccount",t)])}function fo(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,r)}return e}function lo(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?fo(Object(e),!0).forEach(function(r){nn(s,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):fo(Object(e)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(e,r))})}return s}class xi extends Qi{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:lo(lo({},e.chainConfig),{},{chainNamespace:Zn.SOLANA})},state:r})}async switchChain(t){return Promise.resolve()}async setupProvider(t){const e=new Ji,r=this.getProviderHandlers(t),a=Rs(r);e.push(a);const i=Ba(this.config.chainConfig);e.push(i);const u=this.getInjectedProviderProxy(t);u&&e.push(u);const l=ts(e);this.updateProviderEngineProxy(l),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig:t}=this.config;return this.update({chainId:t.chainId}),t.chainId||""}getInjectedProviderProxy(t){}}const Ts=s=>({requestAccounts:async()=>s.publicKey?[te.encode(s.publicKey.toBytes())]:[],getAccounts:async()=>s.publicKey?[te.encode(s.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw Gt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Gt.ethErrors.rpc.methodNotSupported()},signTransaction:async e=>await s.signTransaction(e.params.message),signMessage:async e=>(await s.signMessage(e.params.message,e.params.display)).signature,signAllTransactions:async e=>{var r,a;if(!((r=e.params)!==null&&r!==void 0&&r.message)||!((a=e.params)!==null&&a!==void 0&&a.message.length))throw Gt.ethErrors.rpc.invalidParams("message");return await s.signAllTransactions(e.params.message)},signAndSendTransaction:async e=>({signature:(await s.signAndSendTransaction(e.params.message)).signature})});function po(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,r)}return e}function sl(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?po(Object(e),!0).forEach(function(r){nn(s,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):po(Object(e)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(e,r))})}return s}function Aa(s){return hi(async(t,e,r)=>{const a=await s.request(sl({},t));e.result=a})}class ol extends xi{getProviderHandlers(t){return Ts(t)}getInjectedProviderProxy(t){return Aa(t)}}const al=(s,t)=>({requestAccounts:async()=>{const{data:r}=await s.connect();return[r.publicKey]},getAccounts:async()=>{const{data:r}=await s.connect();return[r.publicKey]},getPrivateKey:async()=>{throw Gt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Gt.ethErrors.rpc.methodNotSupported()},signTransaction:async r=>{const a=r.params.message;if(!a)throw Gt.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:i}=await s.signTransaction(te.encode(a.serializeMessage()));if(!i.publicKey||!i.signature)throw new Error("Invalid signature from slope wallet");const u=new ut(i.publicKey),l=te.decode(i.signature);return a.addSignature(u,l),a},signMessage:async r=>{const a=await s.signMessage(r.params.message);return te.decode(a.data.signature)},signAndSendTransaction:async r=>{const a=t();if(!a)throw Gt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=r.params.message;if(!i)throw Gt.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:u}=await s.signTransaction(te.encode(i.serializeMessage()));if(!u.publicKey||!u.signature)throw new Error("Invalid signature from slope wallet");const l=new ut(u.publicKey),v=te.decode(u.signature);i.addSignature(l,v);const S=await a.request({method:"solana_provider_config",params:[]});return{signature:await new Is(S.rpcTarget).sendRawTransaction(i.serialize())}},signAllTransactions:async r=>{var a,i,u;if(!((a=r.params)!==null&&a!==void 0&&a.message)||!((i=r.params)!==null&&i!==void 0&&i.message.length))throw Gt.ethErrors.rpc.invalidParams("message");const l=r.params.message,{length:v}=l,S=[];for(let I=0;I<v;I++)S.push(te.encode(r.params.message[I].serializeMessage()));const{msg:B,data:E}=await s.signAllTransactions(S);if(!E.publicKey||((u=E.signatures)===null||u===void 0?void 0:u.length)!==v)throw new Error(B);const T=new ut(E.publicKey);for(let I=0;I<v;I++){const L=te.decode(E.signatures[I]);l[I].addSignature(T,L)}return l}});class cl extends xi{getProviderHandlers(t){return al(t,this.getProviderEngineProxy.bind(this))}}const ul=(s,t)=>{const e=Ts(s);return e.signAndSendTransaction=async r=>{const a=t();if(!a)throw Gt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=await s.signTransaction(r.params.message),u=await a.request({method:"solana_provider_config",params:[]});return{signature:await new Is(u.rpcTarget).sendRawTransaction(i.serialize())}},e};class hl extends xi{getProviderHandlers(t){return ul(t,this.getProviderEngineProxy.bind(this))}}const fl=(s,t)=>{const e=Ts(s);return e.signMessage=async r=>{const{signature:a}=await s.sign(r.params.message,"utf8");return a},e.signAndSendTransaction=async r=>{const a=t();if(!a)throw Gt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=await s.signTransaction(r.params.message),u=await a.request({method:"solana_provider_config",params:[]});return{signature:await new Is(u.rpcTarget).sendRawTransaction(i.serialize())}},e};class ll extends xi{getProviderHandlers(t){return fl(t,this.getProviderEngineProxy.bind(this))}}const dl=s=>({requestAccounts:async()=>await s.request({method:"solana_requestAccounts",params:{}}),getAccounts:async()=>await s.request({method:"solana_requestAccounts",params:{}}),getPrivateKey:async()=>{throw Gt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Gt.ethErrors.rpc.methodNotSupported()},signMessage:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw Gt.ethErrors.rpc.invalidParams("message");return await s.signMessage(e.params.message)},signTransaction:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw Gt.ethErrors.rpc.invalidParams("message");const a=e.params.message;return await s.signTransaction(a)},signAndSendTransaction:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw Gt.ethErrors.rpc.invalidParams("message");const a=e.params.message;return{signature:await s.sendTransaction(a)}},signAllTransactions:async e=>{var r,a;if(!((r=e.params)!==null&&r!==void 0&&r.message)||!((a=e.params)!==null&&a!==void 0&&a.message.length))throw Gt.ethErrors.rpc.invalidParams("message");const i=e.params.message;return await s.signAllTransactions(i)}});function go(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,r)}return e}function Wn(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?go(Object(e),!0).forEach(function(r){nn(s,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):go(Object(e)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(e,r))})}return s}class pl extends Qi{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:Wn(Wn({},e.chainConfig),{},{chainNamespace:Zn.SOLANA})},state:r})}async switchChain(t){return Promise.resolve()}async setupProvider(t){this.handleInjectedProviderUpdate(t),await this.setupEngine(t)}async lookupNetwork(){if(!this.provider)throw Gt.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});const{chainId:t}=this.config.chainConfig,e=await this.provider.request({method:"solana_chainId"}),r=Ls(e.toString())?e:"0x".concat(parseInt(e,10).toString(16));if(t!==r)throw Yi.rpcConnectionError("Invalid network, net_version is: ".concat(r,", expected: ").concat(t));return this.update({chainId:r}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),this.state.chainId}async setupEngine(t){const e=dl(t),r=Rs(e),a=Aa(t),i=new Ji;i.push(r),i.push(a);const u=ts(i);this.updateProviderEngineProxy(u),await this.lookupNetwork()}async handleInjectedProviderUpdate(t){t.on("accountsChanged",async e=>{this.provider.emit("accountsChanged",e)}),t.on("chainChanged",async e=>{const r=Ls(e)?e:"0x".concat(parseInt(e,10).toString(16));this.configure({chainConfig:Wn(Wn({},this.config.chainConfig),{},{chainId:r})}),await this.setupProvider(t)})}}async function gl(s){let{privKey:t,getProviderEngineProxy:e}=s;const r=()=>En.fromSecretKey(Buffer.from(t,"hex"));if(typeof t!="string")throw Yi.invalidParams("privKey must be a string");const a=r();return{requestAccounts:async()=>[a.publicKey.toBase58()],getAccounts:async()=>[a.publicKey.toBase58()],getPrivateKey:async()=>t,getSecretKey:async()=>te.encode(a.secretKey),signTransaction:async u=>{var l;if(!((l=u.params)!==null&&l!==void 0&&l.message))throw Gt.ethErrors.rpc.invalidParams("message");const v=u.params.message;return v.partialSign(a),v},signMessage:async u=>{var l;if(!((l=u.params)!==null&&l!==void 0&&l.message))throw Gt.ethErrors.rpc.invalidParams("message");return Da.sign.detached(u.params.message,a.secretKey)},signAndSendTransaction:async u=>{var l;if(!((l=u.params)!==null&&l!==void 0&&l.message))throw Gt.ethErrors.rpc.invalidParams("message");const v=e();if(!v)throw Gt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const S=u.params.message;return S.sign(a),{signature:await v.request({method:"sendTransaction",params:[te.encode(S.serialize())]})}},signAllTransactions:async u=>{var l,v,S;if(!((l=u.params)!==null&&l!==void 0&&l.message)||!((v=u.params)!==null&&v!==void 0&&v.message.length))throw Gt.ethErrors.rpc.invalidParams("message");const B=(S=u.params)===null||S===void 0?void 0:S.message;for(const E of B||[])E.partialSign(a);return B}}}function mo(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,r)}return e}function yo(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?mo(Object(e),!0).forEach(function(r){nn(s,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):mo(Object(e)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(e,r))})}return s}class Xi extends Qi{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:yo(yo({},e.chainConfig),{},{chainNamespace:Zn.SOLANA})},state:r})}async enable(){if(!this.state.privateKey)throw Gt.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(t){const e=await gl({privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=Rs(e),a=new Ji,{networkMiddleware:i}=tl(this.config.chainConfig);a.push(this.getChainSwitchMiddleware()),a.push(this.getAccountMiddleware()),a.push(r),a.push(i);const u=ts(a);this.updateProviderEngineProxy(u),await this.lookupNetwork()}async updateAccount(t){if(!this._providerEngineProxy)throw Gt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==t.privateKey&&(await this.setupProvider(t.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(t){if(!this._providerEngineProxy)throw Gt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const e=this.getChainConfig(t.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:e});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw Gt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const t=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:e}=this.config;if(t!=="ok")throw Yi.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(e.rpcTarget));return this.update({chainId:e.chainId}),this.state.chainId!==e.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return nl({addNewChainConfig:async r=>{if(!r.params)throw Gt.ethErrors.rpc.invalidParams("Missing request params");const{chainId:a,chainName:i,rpcUrls:u,blockExplorerUrls:l,nativeCurrency:v}=r.params;if(!a)throw Gt.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!u||u.length===0)throw Gt.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!v)throw Gt.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:Zn.SOLANA,chainId:a,ticker:(v==null?void 0:v.symbol)||"SOL",tickerName:(v==null?void 0:v.name)||"Solana",displayName:i,rpcTarget:u[0],blockExplorer:(l==null?void 0:l[0])||""})},switchSolanaChain:async r=>{if(!r.params)throw Gt.ethErrors.rpc.invalidParams("Missing request params");if(!r.params.chainId)throw Gt.ethErrors.rpc.invalidParams("Missing chainId");await this.switchChain(r.params)}})}getAccountMiddleware(){return il({updatePrivatekey:async e=>{if(!e.params)throw Gt.ethErrors.rpc.invalidParams("Missing request params");if(!e.params.privateKey)throw Gt.ethErrors.rpc.invalidParams("Missing privateKey");const{privateKey:r}=e.params;await this.updateAccount({privateKey:r})}})}}nn(Xi,"getProviderInstance",async s=>{const t=new Xi({config:{chainConfig:s.chainConfig}});return await t.setupProvider(s.privKey),t});class ml{constructor(t){nn(this,"provider",void 0),this.provider=t}async requestAccounts(){return await this.provider.request({method:"requestAccounts",params:{}})}async signAndSendTransaction(t){const{signature:e}=await this.provider.request({method:"signAndSendTransaction",params:{message:t}});return{signature:e}}async signTransaction(t){return await this.provider.request({method:"signTransaction",params:{message:t}})}async signAllTransactions(t){return await this.provider.request({method:"signAllTransactions",params:{message:t}})}async signMessage(t){return await this.provider.request({method:"signMessage",params:{message:t}})}async request(t){return await this.provider.request(t)}}const Al=Object.freeze(Object.defineProperty({__proto__:null,PhantomInjectedProvider:ol,SlopeInjectedProxyProvider:cl,SolanaPrivateKeyProvider:Xi,SolanaWallet:ml,SolflareInjectedProvider:hl,SolletInjectedProvider:ll,TorusInjectedProvider:pl},Symbol.toStringTag,{value:"Module"}));export{ut as P,pl as T,ol as a,Al as s};

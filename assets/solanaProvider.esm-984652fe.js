import{aa as Js,ab as Qs,ac as to,r as eo,c as xe,g as Ai,a8 as Do,b as Ze,ad as Ho,ae as $o,af as zo,ag as Ko,ah as Wo,ai as Go,aj as Zo,ak as jo,f as Fr,C as xn,X as Vt,al as ts,W as Ii,J as ki,am as on,an as Nn}from"./base.esm-93c22595.js";import{B as Ri,p as Ti,d as Vo}from"./baseProvider.esm-e30dfb92.js";import{r as Li}from"./interopRequireDefault-6280ca4a.js";import{r as ro}from"./index-88d43be4.js";import{n as Xo}from"./nacl-fast-9879c64e.js";var jn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var es;function Yo(){return es||(es=1,function(c){const t=Js(),e=Qs(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.Buffer=d,c.SlowBuffer=W,c.INSPECT_MAX_BYTES=50;const h=2147483647;c.kMaxLength=h,d.TYPED_ARRAY_SUPPORT=a(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const l=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(l,i),l.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function p(l){if(l>h)throw new RangeError('The value "'+l+'" is invalid for option "size"');const i=new Uint8Array(l);return Object.setPrototypeOf(i,d.prototype),i}function d(l,i,o){if(typeof l=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(l)}return x(l,i,o)}d.poolSize=8192;function x(l,i,o){if(typeof l=="string")return P(l,i);if(ArrayBuffer.isView(l))return N(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(ee(l,ArrayBuffer)||l&&ee(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(l,SharedArrayBuffer)||l&&ee(l.buffer,SharedArrayBuffer)))return U(l,i,o);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const m=l.valueOf&&l.valueOf();if(m!=null&&m!==l)return d.from(m,i,o);const E=O(l);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return d.from(l[Symbol.toPrimitive]("string"),i,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}d.from=function(l,i,o){return x(l,i,o)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function I(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function L(l,i,o){return I(l),l<=0?p(l):i!==void 0?typeof o=="string"?p(l).fill(i,o):p(l).fill(i):p(l)}d.alloc=function(l,i,o){return L(l,i,o)};function R(l){return I(l),p(l<0?0:Z(l)|0)}d.allocUnsafe=function(l){return R(l)},d.allocUnsafeSlow=function(l){return R(l)};function P(l,i){if((typeof i!="string"||i==="")&&(i="utf8"),!d.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const o=D(l,i)|0;let m=p(o);const E=m.write(l,i);return E!==o&&(m=m.slice(0,E)),m}function F(l){const i=l.length<0?0:Z(l.length)|0,o=p(i);for(let m=0;m<i;m+=1)o[m]=l[m]&255;return o}function N(l){if(ee(l,Uint8Array)){const i=new Uint8Array(l);return U(i.buffer,i.byteOffset,i.byteLength)}return F(l)}function U(l,i,o){if(i<0||l.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<i+(o||0))throw new RangeError('"length" is outside of buffer bounds');let m;return i===void 0&&o===void 0?m=new Uint8Array(l):o===void 0?m=new Uint8Array(l,i):m=new Uint8Array(l,i,o),Object.setPrototypeOf(m,d.prototype),m}function O(l){if(d.isBuffer(l)){const i=Z(l.length)|0,o=p(i);return o.length===0||l.copy(o,0,0,i),o}if(l.length!==void 0)return typeof l.length!="number"||vt(l.length)?p(0):F(l);if(l.type==="Buffer"&&Array.isArray(l.data))return F(l.data)}function Z(l){if(l>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return l|0}function W(l){return+l!=l&&(l=0),d.alloc(+l)}d.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==d.prototype},d.compare=function(i,o){if(ee(i,Uint8Array)&&(i=d.from(i,i.offset,i.byteLength)),ee(o,Uint8Array)&&(o=d.from(o,o.offset,o.byteLength)),!d.isBuffer(i)||!d.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;let m=i.length,E=o.length;for(let _=0,k=Math.min(m,E);_<k;++_)if(i[_]!==o[_]){m=i[_],E=o[_];break}return m<E?-1:E<m?1:0},d.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(i,o){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return d.alloc(0);let m;if(o===void 0)for(o=0,m=0;m<i.length;++m)o+=i[m].length;const E=d.allocUnsafe(o);let _=0;for(m=0;m<i.length;++m){let k=i[m];if(ee(k,Uint8Array))_+k.length>E.length?(d.isBuffer(k)||(k=d.from(k)),k.copy(E,_)):Uint8Array.prototype.set.call(E,k,_);else if(d.isBuffer(k))k.copy(E,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=k.length}return E};function D(l,i){if(d.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||ee(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const o=l.length,m=arguments.length>2&&arguments[2]===!0;if(!m&&o===0)return 0;let E=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return wt(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return Bt(l).length;default:if(E)return m?-1:wt(l).length;i=(""+i).toLowerCase(),E=!0}}d.byteLength=D;function ot(l,i,o){let m=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,i>>>=0,o<=i))return"";for(l||(l="utf8");;)switch(l){case"hex":return B(this,i,o);case"utf8":case"utf-8":return r(this,i,o);case"ascii":return w(this,i,o);case"latin1":case"binary":return b(this,i,o);case"base64":return v(this,i,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,i,o);default:if(m)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),m=!0}}d.prototype._isBuffer=!0;function K(l,i,o){const m=l[i];l[i]=l[o],l[o]=m}d.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<i;o+=2)K(this,o,o+1);return this},d.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<i;o+=4)K(this,o,o+3),K(this,o+1,o+2);return this},d.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<i;o+=8)K(this,o,o+7),K(this,o+1,o+6),K(this,o+2,o+5),K(this,o+3,o+4);return this},d.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?r(this,0,i):ot.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(i){if(!d.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:d.compare(this,i)===0},d.prototype.inspect=function(){let i="";const o=c.INSPECT_MAX_BYTES;return i=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(i+=" ... "),"<Buffer "+i+">"},n&&(d.prototype[n]=d.prototype.inspect),d.prototype.compare=function(i,o,m,E,_){if(ee(i,Uint8Array)&&(i=d.from(i,i.offset,i.byteLength)),!d.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(o===void 0&&(o=0),m===void 0&&(m=i?i.length:0),E===void 0&&(E=0),_===void 0&&(_=this.length),o<0||m>i.length||E<0||_>this.length)throw new RangeError("out of range index");if(E>=_&&o>=m)return 0;if(E>=_)return-1;if(o>=m)return 1;if(o>>>=0,m>>>=0,E>>>=0,_>>>=0,this===i)return 0;let k=_-E,it=m-o;const rt=Math.min(k,it),et=this.slice(E,_),yt=i.slice(o,m);for(let J=0;J<rt;++J)if(et[J]!==yt[J]){k=et[J],it=yt[J];break}return k<it?-1:it<k?1:0};function tt(l,i,o,m,E){if(l.length===0)return-1;if(typeof o=="string"?(m=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,vt(o)&&(o=E?0:l.length-1),o<0&&(o=l.length+o),o>=l.length){if(E)return-1;o=l.length-1}else if(o<0)if(E)o=0;else return-1;if(typeof i=="string"&&(i=d.from(i,m)),d.isBuffer(i))return i.length===0?-1:nt(l,i,o,m,E);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(l,i,o):Uint8Array.prototype.lastIndexOf.call(l,i,o):nt(l,[i],o,m,E);throw new TypeError("val must be string, number or Buffer")}function nt(l,i,o,m,E){let _=1,k=l.length,it=i.length;if(m!==void 0&&(m=String(m).toLowerCase(),m==="ucs2"||m==="ucs-2"||m==="utf16le"||m==="utf-16le")){if(l.length<2||i.length<2)return-1;_=2,k/=2,it/=2,o/=2}function rt(yt,J){return _===1?yt[J]:yt.readUInt16BE(J*_)}let et;if(E){let yt=-1;for(et=o;et<k;et++)if(rt(l,et)===rt(i,yt===-1?0:et-yt)){if(yt===-1&&(yt=et),et-yt+1===it)return yt*_}else yt!==-1&&(et-=et-yt),yt=-1}else for(o+it>k&&(o=k-it),et=o;et>=0;et--){let yt=!0;for(let J=0;J<it;J++)if(rt(l,et+J)!==rt(i,J)){yt=!1;break}if(yt)return et}return-1}d.prototype.includes=function(i,o,m){return this.indexOf(i,o,m)!==-1},d.prototype.indexOf=function(i,o,m){return tt(this,i,o,m,!0)},d.prototype.lastIndexOf=function(i,o,m){return tt(this,i,o,m,!1)};function ut(l,i,o,m){o=Number(o)||0;const E=l.length-o;m?(m=Number(m),m>E&&(m=E)):m=E;const _=i.length;m>_/2&&(m=_/2);let k;for(k=0;k<m;++k){const it=parseInt(i.substr(k*2,2),16);if(vt(it))return k;l[o+k]=it}return k}function j(l,i,o,m){return mt(wt(i,l.length-o),l,o,m)}function $(l,i,o,m){return mt(_t(i),l,o,m)}function z(l,i,o,m){return mt(Bt(i),l,o,m)}function V(l,i,o,m){return mt(Le(i,l.length-o),l,o,m)}d.prototype.write=function(i,o,m,E){if(o===void 0)E="utf8",m=this.length,o=0;else if(m===void 0&&typeof o=="string")E=o,m=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(m)?(m=m>>>0,E===void 0&&(E="utf8")):(E=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const _=this.length-o;if((m===void 0||m>_)&&(m=_),i.length>0&&(m<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let k=!1;for(;;)switch(E){case"hex":return ut(this,i,o,m);case"utf8":case"utf-8":return j(this,i,o,m);case"ascii":case"latin1":case"binary":return $(this,i,o,m);case"base64":return z(this,i,o,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,i,o,m);default:if(k)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),k=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function v(l,i,o){return i===0&&o===l.length?t.fromByteArray(l):t.fromByteArray(l.slice(i,o))}function r(l,i,o){o=Math.min(l.length,o);const m=[];let E=i;for(;E<o;){const _=l[E];let k=null,it=_>239?4:_>223?3:_>191?2:1;if(E+it<=o){let rt,et,yt,J;switch(it){case 1:_<128&&(k=_);break;case 2:rt=l[E+1],(rt&192)===128&&(J=(_&31)<<6|rt&63,J>127&&(k=J));break;case 3:rt=l[E+1],et=l[E+2],(rt&192)===128&&(et&192)===128&&(J=(_&15)<<12|(rt&63)<<6|et&63,J>2047&&(J<55296||J>57343)&&(k=J));break;case 4:rt=l[E+1],et=l[E+2],yt=l[E+3],(rt&192)===128&&(et&192)===128&&(yt&192)===128&&(J=(_&15)<<18|(rt&63)<<12|(et&63)<<6|yt&63,J>65535&&J<1114112&&(k=J))}}k===null?(k=65533,it=1):k>65535&&(k-=65536,m.push(k>>>10&1023|55296),k=56320|k&1023),m.push(k),E+=it}return g(m)}const u=4096;function g(l){const i=l.length;if(i<=u)return String.fromCharCode.apply(String,l);let o="",m=0;for(;m<i;)o+=String.fromCharCode.apply(String,l.slice(m,m+=u));return o}function w(l,i,o){let m="";o=Math.min(l.length,o);for(let E=i;E<o;++E)m+=String.fromCharCode(l[E]&127);return m}function b(l,i,o){let m="";o=Math.min(l.length,o);for(let E=i;E<o;++E)m+=String.fromCharCode(l[E]);return m}function B(l,i,o){const m=l.length;(!i||i<0)&&(i=0),(!o||o<0||o>m)&&(o=m);let E="";for(let _=i;_<o;++_)E+=St[l[_]];return E}function S(l,i,o){const m=l.slice(i,o);let E="";for(let _=0;_<m.length-1;_+=2)E+=String.fromCharCode(m[_]+m[_+1]*256);return E}d.prototype.slice=function(i,o){const m=this.length;i=~~i,o=o===void 0?m:~~o,i<0?(i+=m,i<0&&(i=0)):i>m&&(i=m),o<0?(o+=m,o<0&&(o=0)):o>m&&(o=m),o<i&&(o=i);const E=this.subarray(i,o);return Object.setPrototypeOf(E,d.prototype),E};function y(l,i,o){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+i>o)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(i,o,m){i=i>>>0,o=o>>>0,m||y(i,o,this.length);let E=this[i],_=1,k=0;for(;++k<o&&(_*=256);)E+=this[i+k]*_;return E},d.prototype.readUintBE=d.prototype.readUIntBE=function(i,o,m){i=i>>>0,o=o>>>0,m||y(i,o,this.length);let E=this[i+--o],_=1;for(;o>0&&(_*=256);)E+=this[i+--o]*_;return E},d.prototype.readUint8=d.prototype.readUInt8=function(i,o){return i=i>>>0,o||y(i,1,this.length),this[i]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(i,o){return i=i>>>0,o||y(i,2,this.length),this[i]|this[i+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(i,o){return i=i>>>0,o||y(i,2,this.length),this[i]<<8|this[i+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(i,o){return i=i>>>0,o||y(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(i,o){return i=i>>>0,o||y(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},d.prototype.readBigUInt64LE=ne(function(i){i=i>>>0,de(i,"offset");const o=this[i],m=this[i+7];(o===void 0||m===void 0)&&pt(i,this.length-8);const E=o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,_=this[++i]+this[++i]*2**8+this[++i]*2**16+m*2**24;return BigInt(E)+(BigInt(_)<<BigInt(32))}),d.prototype.readBigUInt64BE=ne(function(i){i=i>>>0,de(i,"offset");const o=this[i],m=this[i+7];(o===void 0||m===void 0)&&pt(i,this.length-8);const E=o*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],_=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+m;return(BigInt(E)<<BigInt(32))+BigInt(_)}),d.prototype.readIntLE=function(i,o,m){i=i>>>0,o=o>>>0,m||y(i,o,this.length);let E=this[i],_=1,k=0;for(;++k<o&&(_*=256);)E+=this[i+k]*_;return _*=128,E>=_&&(E-=Math.pow(2,8*o)),E},d.prototype.readIntBE=function(i,o,m){i=i>>>0,o=o>>>0,m||y(i,o,this.length);let E=o,_=1,k=this[i+--E];for(;E>0&&(_*=256);)k+=this[i+--E]*_;return _*=128,k>=_&&(k-=Math.pow(2,8*o)),k},d.prototype.readInt8=function(i,o){return i=i>>>0,o||y(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},d.prototype.readInt16LE=function(i,o){i=i>>>0,o||y(i,2,this.length);const m=this[i]|this[i+1]<<8;return m&32768?m|4294901760:m},d.prototype.readInt16BE=function(i,o){i=i>>>0,o||y(i,2,this.length);const m=this[i+1]|this[i]<<8;return m&32768?m|4294901760:m},d.prototype.readInt32LE=function(i,o){return i=i>>>0,o||y(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},d.prototype.readInt32BE=function(i,o){return i=i>>>0,o||y(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},d.prototype.readBigInt64LE=ne(function(i){i=i>>>0,de(i,"offset");const o=this[i],m=this[i+7];(o===void 0||m===void 0)&&pt(i,this.length-8);const E=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(m<<24);return(BigInt(E)<<BigInt(32))+BigInt(o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),d.prototype.readBigInt64BE=ne(function(i){i=i>>>0,de(i,"offset");const o=this[i],m=this[i+7];(o===void 0||m===void 0)&&pt(i,this.length-8);const E=(o<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(E)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+m)}),d.prototype.readFloatLE=function(i,o){return i=i>>>0,o||y(i,4,this.length),e.read(this,i,!0,23,4)},d.prototype.readFloatBE=function(i,o){return i=i>>>0,o||y(i,4,this.length),e.read(this,i,!1,23,4)},d.prototype.readDoubleLE=function(i,o){return i=i>>>0,o||y(i,8,this.length),e.read(this,i,!0,52,8)},d.prototype.readDoubleBE=function(i,o){return i=i>>>0,o||y(i,8,this.length),e.read(this,i,!1,52,8)};function s(l,i,o,m,E,_){if(!d.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>E||i<_)throw new RangeError('"value" argument is out of bounds');if(o+m>l.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(i,o,m,E){if(i=+i,o=o>>>0,m=m>>>0,!E){const it=Math.pow(2,8*m)-1;s(this,i,o,m,it,0)}let _=1,k=0;for(this[o]=i&255;++k<m&&(_*=256);)this[o+k]=i/_&255;return o+m},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(i,o,m,E){if(i=+i,o=o>>>0,m=m>>>0,!E){const it=Math.pow(2,8*m)-1;s(this,i,o,m,it,0)}let _=m-1,k=1;for(this[o+_]=i&255;--_>=0&&(k*=256);)this[o+_]=i/k&255;return o+m},d.prototype.writeUint8=d.prototype.writeUInt8=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,1,255,0),this[o]=i&255,o+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,2,65535,0),this[o]=i&255,this[o+1]=i>>>8,o+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=i&255,o+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=i&255,o+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4};function f(l,i,o,m,E){Et(i,m,E,l,o,7);let _=Number(i&BigInt(4294967295));l[o++]=_,_=_>>8,l[o++]=_,_=_>>8,l[o++]=_,_=_>>8,l[o++]=_;let k=Number(i>>BigInt(32)&BigInt(4294967295));return l[o++]=k,k=k>>8,l[o++]=k,k=k>>8,l[o++]=k,k=k>>8,l[o++]=k,o}function M(l,i,o,m,E){Et(i,m,E,l,o,7);let _=Number(i&BigInt(4294967295));l[o+7]=_,_=_>>8,l[o+6]=_,_=_>>8,l[o+5]=_,_=_>>8,l[o+4]=_;let k=Number(i>>BigInt(32)&BigInt(4294967295));return l[o+3]=k,k=k>>8,l[o+2]=k,k=k>>8,l[o+1]=k,k=k>>8,l[o]=k,o+8}d.prototype.writeBigUInt64LE=ne(function(i,o=0){return f(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=ne(function(i,o=0){return M(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(i,o,m,E){if(i=+i,o=o>>>0,!E){const rt=Math.pow(2,8*m-1);s(this,i,o,m,rt-1,-rt)}let _=0,k=1,it=0;for(this[o]=i&255;++_<m&&(k*=256);)i<0&&it===0&&this[o+_-1]!==0&&(it=1),this[o+_]=(i/k>>0)-it&255;return o+m},d.prototype.writeIntBE=function(i,o,m,E){if(i=+i,o=o>>>0,!E){const rt=Math.pow(2,8*m-1);s(this,i,o,m,rt-1,-rt)}let _=m-1,k=1,it=0;for(this[o+_]=i&255;--_>=0&&(k*=256);)i<0&&it===0&&this[o+_+1]!==0&&(it=1),this[o+_]=(i/k>>0)-it&255;return o+m},d.prototype.writeInt8=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=i&255,o+1},d.prototype.writeInt16LE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,2,32767,-32768),this[o]=i&255,this[o+1]=i>>>8,o+2},d.prototype.writeInt16BE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=i&255,o+2},d.prototype.writeInt32LE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,4,2147483647,-2147483648),this[o]=i&255,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},d.prototype.writeInt32BE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4},d.prototype.writeBigInt64LE=ne(function(i,o=0){return f(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=ne(function(i,o=0){return M(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function A(l,i,o,m,E,_){if(o+m>l.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function C(l,i,o,m,E){return i=+i,o=o>>>0,E||A(l,i,o,4),e.write(l,i,o,m,23,4),o+4}d.prototype.writeFloatLE=function(i,o,m){return C(this,i,o,!0,m)},d.prototype.writeFloatBE=function(i,o,m){return C(this,i,o,!1,m)};function G(l,i,o,m,E){return i=+i,o=o>>>0,E||A(l,i,o,8),e.write(l,i,o,m,52,8),o+8}d.prototype.writeDoubleLE=function(i,o,m){return G(this,i,o,!0,m)},d.prototype.writeDoubleBE=function(i,o,m){return G(this,i,o,!1,m)},d.prototype.copy=function(i,o,m,E){if(!d.isBuffer(i))throw new TypeError("argument should be a Buffer");if(m||(m=0),!E&&E!==0&&(E=this.length),o>=i.length&&(o=i.length),o||(o=0),E>0&&E<m&&(E=m),E===m||i.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),i.length-o<E-m&&(E=i.length-o+m);const _=E-m;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,m,E):Uint8Array.prototype.set.call(i,this.subarray(m,E),o),_},d.prototype.fill=function(i,o,m,E){if(typeof i=="string"){if(typeof o=="string"?(E=o,o=0,m=this.length):typeof m=="string"&&(E=m,m=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!d.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(i.length===1){const k=i.charCodeAt(0);(E==="utf8"&&k<128||E==="latin1")&&(i=k)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(o<0||this.length<o||this.length<m)throw new RangeError("Out of range index");if(m<=o)return this;o=o>>>0,m=m===void 0?this.length:m>>>0,i||(i=0);let _;if(typeof i=="number")for(_=o;_<m;++_)this[_]=i;else{const k=d.isBuffer(i)?i:d.from(i,E),it=k.length;if(it===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(_=0;_<m-o;++_)this[_+o]=k[_%it]}return this};const Q={};function ct(l,i,o){Q[l]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}ct("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ct("ERR_INVALID_ARG_TYPE",function(l,i){return`The "${l}" argument must be of type number. Received type ${typeof i}`},TypeError),ct("ERR_OUT_OF_RANGE",function(l,i,o){let m=`The value of "${l}" is out of range.`,E=o;return Number.isInteger(o)&&Math.abs(o)>2**32?E=ue(String(o)):typeof o=="bigint"&&(E=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(E=ue(E)),E+="n"),m+=` It must be ${i}. Received ${E}`,m},RangeError);function ue(l){let i="",o=l.length;const m=l[0]==="-"?1:0;for(;o>=m+4;o-=3)i=`_${l.slice(o-3,o)}${i}`;return`${l.slice(0,o)}${i}`}function xt(l,i,o){de(i,"offset"),(l[i]===void 0||l[i+o]===void 0)&&pt(i,l.length-(o+1))}function Et(l,i,o,m,E,_){if(l>o||l<i){const k=typeof i=="bigint"?"n":"";let it;throw _>3?i===0||i===BigInt(0)?it=`>= 0${k} and < 2${k} ** ${(_+1)*8}${k}`:it=`>= -(2${k} ** ${(_+1)*8-1}${k}) and < 2 ** ${(_+1)*8-1}${k}`:it=`>= ${i}${k} and <= ${o}${k}`,new Q.ERR_OUT_OF_RANGE("value",it,l)}xt(m,E,_)}function de(l,i){if(typeof l!="number")throw new Q.ERR_INVALID_ARG_TYPE(i,"number",l)}function pt(l,i,o){throw Math.floor(l)!==l?(de(l,o),new Q.ERR_OUT_OF_RANGE(o||"offset","an integer",l)):i<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${i}`,l)}const Mt=/[^+/0-9A-Za-z-_]/g;function Te(l){if(l=l.split("=")[0],l=l.trim().replace(Mt,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function wt(l,i){i=i||1/0;let o;const m=l.length;let E=null;const _=[];for(let k=0;k<m;++k){if(o=l.charCodeAt(k),o>55295&&o<57344){if(!E){if(o>56319){(i-=3)>-1&&_.push(239,191,189);continue}else if(k+1===m){(i-=3)>-1&&_.push(239,191,189);continue}E=o;continue}if(o<56320){(i-=3)>-1&&_.push(239,191,189),E=o;continue}o=(E-55296<<10|o-56320)+65536}else E&&(i-=3)>-1&&_.push(239,191,189);if(E=null,o<128){if((i-=1)<0)break;_.push(o)}else if(o<2048){if((i-=2)<0)break;_.push(o>>6|192,o&63|128)}else if(o<65536){if((i-=3)<0)break;_.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((i-=4)<0)break;_.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return _}function _t(l){const i=[];for(let o=0;o<l.length;++o)i.push(l.charCodeAt(o)&255);return i}function Le(l,i){let o,m,E;const _=[];for(let k=0;k<l.length&&!((i-=2)<0);++k)o=l.charCodeAt(k),m=o>>8,E=o%256,_.push(E),_.push(m);return _}function Bt(l){return t.toByteArray(Te(l))}function mt(l,i,o,m){let E;for(E=0;E<m&&!(E+o>=i.length||E>=l.length);++E)i[E+o]=l[E];return E}function ee(l,i){return l instanceof i||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===i.name}function vt(l){return l!==l}const St=function(){const l="0123456789abcdef",i=new Array(256);for(let o=0;o<16;++o){const m=o*16;for(let E=0;E<16;++E)i[m+E]=l[o]+l[E]}return i}();function ne(l){return typeof BigInt>"u"?At:l}function At(){throw new Error("BigInt not supported")}}(jn)),jn}var Zt=Yo();function pi(c){if(!Number.isSafeInteger(c)||c<0)throw new Error(`Wrong positive integer: ${c}`)}function Jo(c){if(typeof c!="boolean")throw new Error(`Expected boolean, not ${c}`)}function no(c,...t){if(!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(c.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${c.length}`)}function Qo(c){if(typeof c!="function"||typeof c.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");pi(c.outputLen),pi(c.blockLen)}function ta(c,t=!0){if(c.destroyed)throw new Error("Hash instance has been destroyed");if(t&&c.finished)throw new Error("Hash#digest() has already been called")}function ea(c,t){no(c);const e=t.outputLen;if(c.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const ve={number:pi,bool:Jo,bytes:no,hash:Qo,exists:ta,output:ea};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ra=c=>new Uint32Array(c.buffer,c.byteOffset,Math.floor(c.byteLength/4)),Vn=c=>new DataView(c.buffer,c.byteOffset,c.byteLength),Se=(c,t)=>c<<32-t|c>>>t,na=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!na)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(c,t)=>t.toString(16).padStart(2,"0"));function ia(c){if(typeof c!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof c}`);return new TextEncoder().encode(c)}function an(c){if(typeof c=="string"&&(c=ia(c)),!(c instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof c})`);return c}class Ui{clone(){return this._cloneInto()}}function br(c){const t=n=>c().update(an(n)).digest(),e=c();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>c(),t}function sa(c){const t=(n,h)=>c(h).update(an(n)).digest(),e=c({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=n=>c(n),t}function oa(c,t,e,n){if(typeof c.setBigUint64=="function")return c.setBigUint64(t,e,n);const h=BigInt(32),a=BigInt(4294967295),p=Number(e>>h&a),d=Number(e&a),x=n?4:0,I=n?0:4;c.setUint32(t+x,p,n),c.setUint32(t+I,d,n)}class io extends Ui{constructor(t,e,n,h){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=h,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Vn(this.buffer)}update(t){ve.exists(this);const{view:e,buffer:n,blockLen:h}=this;t=an(t);const a=t.length;for(let p=0;p<a;){const d=Math.min(h-this.pos,a-p);if(d===h){const x=Vn(t);for(;h<=a-p;p+=h)this.process(x,p);continue}n.set(t.subarray(p,p+d),this.pos),this.pos+=d,p+=d,this.pos===h&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ve.exists(this),ve.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:h,isLE:a}=this;let{pos:p}=this;e[p++]=128,this.buffer.subarray(p).fill(0),this.padOffset>h-p&&(this.process(n,0),p=0);for(let R=p;R<h;R++)e[R]=0;oa(n,h-8,BigInt(this.length*8),a),this.process(n,0);const d=Vn(t),x=this.outputLen;if(x%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const I=x/4,L=this.get();if(I>L.length)throw new Error("_sha2: outputLen bigger than state");for(let R=0;R<I;R++)d.setUint32(4*R,L[R],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:h,finished:a,destroyed:p,pos:d}=this;return t.length=h,t.pos=d,t.finished=a,t.destroyed=p,h%e&&t.buffer.set(n),t}}const dn=BigInt(2**32-1),gi=BigInt(32);function so(c,t=!1){return t?{h:Number(c&dn),l:Number(c>>gi&dn)}:{h:Number(c>>gi&dn)|0,l:Number(c&dn)|0}}function aa(c,t=!1){let e=new Uint32Array(c.length),n=new Uint32Array(c.length);for(let h=0;h<c.length;h++){const{h:a,l:p}=so(c[h],t);[e[h],n[h]]=[a,p]}return[e,n]}const ca=(c,t)=>BigInt(c>>>0)<<gi|BigInt(t>>>0),ua=(c,t,e)=>c>>>e,ha=(c,t,e)=>c<<32-e|t>>>e,fa=(c,t,e)=>c>>>e|t<<32-e,la=(c,t,e)=>c<<32-e|t>>>e,da=(c,t,e)=>c<<64-e|t>>>e-32,pa=(c,t,e)=>c>>>e-32|t<<64-e,ga=(c,t)=>t,ma=(c,t)=>c,ya=(c,t,e)=>c<<e|t>>>32-e,wa=(c,t,e)=>t<<e|c>>>32-e,va=(c,t,e)=>t<<e-32|c>>>64-e,ba=(c,t,e)=>c<<e-32|t>>>64-e;function xa(c,t,e,n){const h=(t>>>0)+(n>>>0);return{h:c+e+(h/2**32|0)|0,l:h|0}}const Ea=(c,t,e)=>(c>>>0)+(t>>>0)+(e>>>0),Ba=(c,t,e,n)=>t+e+n+(c/2**32|0)|0,Ma=(c,t,e,n)=>(c>>>0)+(t>>>0)+(e>>>0)+(n>>>0),_a=(c,t,e,n,h)=>t+e+n+h+(c/2**32|0)|0,Sa=(c,t,e,n,h)=>(c>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(h>>>0),Aa=(c,t,e,n,h,a)=>t+e+n+h+a+(c/2**32|0)|0,It={fromBig:so,split:aa,toBig:ca,shrSH:ua,shrSL:ha,rotrSH:fa,rotrSL:la,rotrBH:da,rotrBL:pa,rotr32H:ga,rotr32L:ma,rotlSH:ya,rotlSL:wa,rotlBH:va,rotlBL:ba,add:xa,add3L:Ea,add3H:Ba,add4L:Ma,add4H:_a,add5H:Aa,add5L:Sa},[Ia,ka]=It.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(c=>BigInt(c))),Pe=new Uint32Array(80),Oe=new Uint32Array(80);class qn extends io{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:h,Ch:a,Cl:p,Dh:d,Dl:x,Eh:I,El:L,Fh:R,Fl:P,Gh:F,Gl:N,Hh:U,Hl:O}=this;return[t,e,n,h,a,p,d,x,I,L,R,P,F,N,U,O]}set(t,e,n,h,a,p,d,x,I,L,R,P,F,N,U,O){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=h|0,this.Ch=a|0,this.Cl=p|0,this.Dh=d|0,this.Dl=x|0,this.Eh=I|0,this.El=L|0,this.Fh=R|0,this.Fl=P|0,this.Gh=F|0,this.Gl=N|0,this.Hh=U|0,this.Hl=O|0}process(t,e){for(let D=0;D<16;D++,e+=4)Pe[D]=t.getUint32(e),Oe[D]=t.getUint32(e+=4);for(let D=16;D<80;D++){const ot=Pe[D-15]|0,K=Oe[D-15]|0,tt=It.rotrSH(ot,K,1)^It.rotrSH(ot,K,8)^It.shrSH(ot,K,7),nt=It.rotrSL(ot,K,1)^It.rotrSL(ot,K,8)^It.shrSL(ot,K,7),ut=Pe[D-2]|0,j=Oe[D-2]|0,$=It.rotrSH(ut,j,19)^It.rotrBH(ut,j,61)^It.shrSH(ut,j,6),z=It.rotrSL(ut,j,19)^It.rotrBL(ut,j,61)^It.shrSL(ut,j,6),V=It.add4L(nt,z,Oe[D-7],Oe[D-16]),v=It.add4H(V,tt,$,Pe[D-7],Pe[D-16]);Pe[D]=v|0,Oe[D]=V|0}let{Ah:n,Al:h,Bh:a,Bl:p,Ch:d,Cl:x,Dh:I,Dl:L,Eh:R,El:P,Fh:F,Fl:N,Gh:U,Gl:O,Hh:Z,Hl:W}=this;for(let D=0;D<80;D++){const ot=It.rotrSH(R,P,14)^It.rotrSH(R,P,18)^It.rotrBH(R,P,41),K=It.rotrSL(R,P,14)^It.rotrSL(R,P,18)^It.rotrBL(R,P,41),tt=R&F^~R&U,nt=P&N^~P&O,ut=It.add5L(W,K,nt,ka[D],Oe[D]),j=It.add5H(ut,Z,ot,tt,Ia[D],Pe[D]),$=ut|0,z=It.rotrSH(n,h,28)^It.rotrBH(n,h,34)^It.rotrBH(n,h,39),V=It.rotrSL(n,h,28)^It.rotrBL(n,h,34)^It.rotrBL(n,h,39),v=n&a^n&d^a&d,r=h&p^h&x^p&x;Z=U|0,W=O|0,U=F|0,O=N|0,F=R|0,N=P|0,{h:R,l:P}=It.add(I|0,L|0,j|0,$|0),I=d|0,L=x|0,d=a|0,x=p|0,a=n|0,p=h|0;const u=It.add3L($,V,r);n=It.add3H(u,j,z,v),h=u|0}({h:n,l:h}=It.add(this.Ah|0,this.Al|0,n|0,h|0)),{h:a,l:p}=It.add(this.Bh|0,this.Bl|0,a|0,p|0),{h:d,l:x}=It.add(this.Ch|0,this.Cl|0,d|0,x|0),{h:I,l:L}=It.add(this.Dh|0,this.Dl|0,I|0,L|0),{h:R,l:P}=It.add(this.Eh|0,this.El|0,R|0,P|0),{h:F,l:N}=It.add(this.Fh|0,this.Fl|0,F|0,N|0),{h:U,l:O}=It.add(this.Gh|0,this.Gl|0,U|0,O|0),{h:Z,l:W}=It.add(this.Hh|0,this.Hl|0,Z|0,W|0),this.set(n,h,a,p,d,x,I,L,R,P,F,N,U,O,Z,W)}roundClean(){Pe.fill(0),Oe.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Ra extends qn{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Ta extends qn{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class La extends qn{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Ua=br(()=>new qn);br(()=>new Ra);br(()=>new Ta);br(()=>new La);/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const me=BigInt(0),Xt=BigInt(1),Ar=BigInt(2),rs=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),re=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:rs,n:rs,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),oo=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Jr=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const Ca=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Fa=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Pa=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Oa=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class Yt{constructor(t,e,n,h){this.x=t,this.y=e,this.z=n,this.t=h}static fromAffine(t){if(!(t instanceof ce))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(ce.ZERO)?Yt.ZERO:new Yt(t.x,t.y,Xt,X(t.x*t.y))}static toAffineBatch(t){const e=Da(t.map(n=>n.z));return t.map((n,h)=>n.toAffine(e[h]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){ns(t);const{x:e,y:n,z:h}=this,{x:a,y:p,z:d}=t,x=X(e*d),I=X(a*h),L=X(n*d),R=X(p*h);return x===I&&L===R}negate(){return new Yt(X(-this.x),this.y,this.z,X(-this.t))}double(){const{x:t,y:e,z:n}=this,{a:h}=re,a=X(t*t),p=X(e*e),d=X(Ar*X(n*n)),x=X(h*a),I=t+e,L=X(X(I*I)-a-p),R=x+p,P=R-d,F=x-p,N=X(L*P),U=X(R*F),O=X(L*F),Z=X(P*R);return new Yt(N,U,Z,O)}add(t){ns(t);const{x:e,y:n,z:h,t:a}=this,{x:p,y:d,z:x,t:I}=t,L=X((n-e)*(d+p)),R=X((n+e)*(d-p)),P=X(R-L);if(P===me)return this.double();const F=X(h*Ar*I),N=X(a*Ar*x),U=N+F,O=R+L,Z=N-F,W=X(U*P),D=X(O*Z),ot=X(U*Z),K=X(P*O);return new Yt(W,D,K,ot)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,n=[];let h=this,a=h;for(let p=0;p<e;p++){a=h,n.push(a);for(let d=1;d<2**(t-1);d++)a=a.add(h),n.push(a);h=a.double()}return n}wNAF(t,e){!e&&this.equals(Yt.BASE)&&(e=ce.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let h=e&&mi.get(e);h||(h=this.precomputeWindow(n),e&&n!==1&&(h=Yt.normalizeZ(h),mi.set(e,h)));let a=Yt.ZERO,p=Yt.ZERO;const d=1+256/n,x=2**(n-1),I=BigInt(2**n-1),L=2**n,R=BigInt(n);for(let P=0;P<d;P++){const F=P*x;let N=Number(t&I);if(t>>=R,N>x&&(N-=L,t+=Xt),N===0){let U=h[F];P%2&&(U=U.negate()),p=p.add(U)}else{let U=h[F+Math.abs(N)-1];N<0&&(U=U.negate()),a=a.add(U)}}return Yt.normalizeZ([a,p])[0]}multiply(t,e){return this.wNAF(Mn(t,re.l),e)}multiplyUnsafe(t){let e=Mn(t,re.l,!1);const n=Yt.BASE,h=Yt.ZERO;if(e===me)return h;if(this.equals(h)||e===Xt)return this;if(this.equals(n))return this.wNAF(e);let a=h,p=this;for(;e>me;)e&Xt&&(a=a.add(p)),p=p.double(),e>>=Xt;return a}isSmallOrder(){return this.multiplyUnsafe(re.h).equals(Yt.ZERO)}isTorsionFree(){return this.multiplyUnsafe(re.l).equals(Yt.ZERO)}toAffine(t=Dn(this.z)){const{x:e,y:n,z:h}=this,a=X(e*t),p=X(n*t);if(X(h*t)!==Xt)throw new Error("invZ was invalid");return new ce(a,p)}fromRistrettoBytes(){Yn()}toRistrettoBytes(){Yn()}fromRistrettoHash(){Yn()}}Yt.BASE=new Yt(re.Gx,re.Gy,Xt,X(re.Gx*re.Gy));Yt.ZERO=new Yt(me,Xt,Xt,me);function ns(c){if(!(c instanceof Yt))throw new TypeError("ExtendedPoint expected")}function Xn(c){if(!(c instanceof Me))throw new TypeError("RistrettoPoint expected")}function Yn(){throw new Error("Legacy method: switch to RistrettoPoint")}class Me{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=re,n=X(Jr*t*t),h=X((n+Xt)*Pa);let a=BigInt(-1);const p=X((a-e*n)*X(n+e));let{isValid:d,value:x}=Fi(h,p),I=X(x*t);He(I)||(I=X(-I)),d||(x=I),d||(a=n);const L=X(a*(n-Xt)*Oa-p),R=x*x,P=X((x+x)*p),F=X(L*Ca),N=X(Xt-R),U=X(Xt+R);return new Yt(X(P*U),X(N*F),X(F*U),X(P*N))}static hashToCurve(t){t=We(t,64);const e=Jn(t.slice(0,32)),n=this.calcElligatorRistrettoMap(e),h=Jn(t.slice(32,64)),a=this.calcElligatorRistrettoMap(h);return new Me(n.add(a))}static fromHex(t){t=We(t,32);const{a:e,d:n}=re,h="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=Jn(t);if(!$a(rn(a),t)||He(a))throw new Error(h);const p=X(a*a),d=X(Xt+e*p),x=X(Xt-e*p),I=X(d*d),L=X(x*x),R=X(e*n*I-L),{isValid:P,value:F}=ss(X(R*L)),N=X(F*x),U=X(F*N*R);let O=X((a+a)*N);He(O)&&(O=X(-O));const Z=X(d*U),W=X(O*Z);if(!P||He(W)||Z===me)throw new Error(h);return new Me(new Yt(O,Z,Xt,W))}toRawBytes(){let{x:t,y:e,z:n,t:h}=this.ep;const a=X(X(n+e)*X(n-e)),p=X(t*e),d=X(p*p),{value:x}=ss(X(a*d)),I=X(x*a),L=X(x*p),R=X(I*L*h);let P;if(He(h*R)){let N=X(e*Jr),U=X(t*Jr);t=N,e=U,P=X(I*Fa)}else P=L;He(t*R)&&(e=X(-e));let F=X((n-e)*P);return He(F)&&(F=X(-F)),rn(F)}toHex(){return cn(this.toRawBytes())}toString(){return this.toHex()}equals(t){Xn(t);const e=this.ep,n=t.ep,h=X(e.x*n.y)===X(e.y*n.x),a=X(e.y*n.y)===X(e.x*n.x);return h||a}add(t){return Xn(t),new Me(this.ep.add(t.ep))}subtract(t){return Xn(t),new Me(this.ep.subtract(t.ep))}multiply(t){return new Me(this.ep.multiply(t))}multiplyUnsafe(t){return new Me(this.ep.multiplyUnsafe(t))}}Me.BASE=new Me(Yt.BASE);Me.ZERO=new Me(Yt.ZERO);const mi=new WeakMap;let ce=class{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,mi.delete(this)}static fromHex(t,e=!0){const{d:n,P:h}=re;t=We(t,32);const a=t.slice();a[31]=t[31]&-129;const p=un(a);if(e&&p>=h)throw new Error("Expected 0 < hex < P");if(!e&&p>=oo)throw new Error("Expected 0 < hex < 2**256");const d=X(p*p),x=X(d-Xt),I=X(n*d+Xt);let{isValid:L,value:R}=Fi(x,I);if(!L)throw new Error("Point.fromHex: invalid y coordinate");const P=(R&Xt)===Xt;return(t[31]&128)!==0!==P&&(R=X(-R)),new ce(R,p)}static async fromPrivateKey(t){return(await ho(t)).point}toRawBytes(){const t=rn(this.y);return t[31]|=this.x&Xt?128:0,t}toHex(){return cn(this.toRawBytes())}toX25519(){const{y:t}=this,e=X((Xt+t)*Dn(Xt-t));return rn(e)}isTorsionFree(){return Yt.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new ce(X(-this.x),this.y)}add(t){return Yt.fromAffine(this).add(Yt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Yt.fromAffine(this).multiply(t,this).toAffine()}};ce.BASE=new ce(re.Gx,re.Gy);ce.ZERO=new ce(me,Xt);let En=class{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=We(t,64),n=ce.fromHex(e.slice(0,32),!1),h=un(e.slice(32,64));return new En(n,h)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof ce))throw new Error("Expected Point instance");return Mn(e,re.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(rn(this.s),32),t}toHex(){return cn(this.toRawBytes())}};function is(...c){if(!c.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(c.length===1)return c[0];const t=c.reduce((n,h)=>n+h.length,0),e=new Uint8Array(t);for(let n=0,h=0;n<c.length;n++){const a=c[n];e.set(a,h),h+=a.length}return e}const Na=Array.from({length:256},(c,t)=>t.toString(16).padStart(2,"0"));function cn(c){if(!(c instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let e=0;e<c.length;e++)t+=Na[c[e]];return t}function Ci(c){if(typeof c!="string")throw new TypeError("hexToBytes: expected string, got "+typeof c);if(c.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(c.length/2);for(let e=0;e<t.length;e++){const n=e*2,h=c.slice(n,n+2),a=Number.parseInt(h,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");t[e]=a}return t}function ao(c){const e=c.toString(16).padStart(64,"0");return Ci(e)}function rn(c){return ao(c).reverse()}function He(c){return(X(c)&Xt)===Xt}function un(c){if(!(c instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+cn(Uint8Array.from(c).reverse()))}const qa=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Jn(c){return X(un(c)&qa)}function X(c,t=re.P){const e=c%t;return e>=me?e:t+e}function Dn(c,t=re.P){if(c===me||t<=me)throw new Error(`invert: expected positive integers, got n=${c} mod=${t}`);let e=X(c,t),n=t,h=me,a=Xt;for(;e!==me;){const d=n/e,x=n%e,I=h-a*d;n=e,e=x,h=a,a=I}if(n!==Xt)throw new Error("invert: does not exist");return X(h,t)}function Da(c,t=re.P){const e=new Array(c.length),n=c.reduce((a,p,d)=>p===me?a:(e[d]=a,X(a*p,t)),Xt),h=Dn(n,t);return c.reduceRight((a,p,d)=>p===me?a:(e[d]=X(a*e[d],t),X(a*p,t)),h),e}function Ae(c,t){const{P:e}=re;let n=c;for(;t-- >me;)n*=n,n%=e;return n}function Ha(c){const{P:t}=re,e=BigInt(5),n=BigInt(10),h=BigInt(20),a=BigInt(40),p=BigInt(80),x=c*c%t*c%t,I=Ae(x,Ar)*x%t,L=Ae(I,Xt)*c%t,R=Ae(L,e)*L%t,P=Ae(R,n)*R%t,F=Ae(P,h)*P%t,N=Ae(F,a)*F%t,U=Ae(N,p)*N%t,O=Ae(U,p)*N%t,Z=Ae(O,n)*R%t;return{pow_p_5_8:Ae(Z,Ar)*c%t,b2:x}}function Fi(c,t){const e=X(t*t*t),n=X(e*e*t),h=Ha(c*n).pow_p_5_8;let a=X(c*e*h);const p=X(t*a*a),d=a,x=X(a*Jr),I=p===c,L=p===X(-c),R=p===X(-c*Jr);return I&&(a=d),(L||R)&&(a=x),He(a)&&(a=X(-a)),{isValid:I||L,value:a}}function ss(c){return Fi(Xt,c)}function Bn(c){return X(un(c),re.l)}function $a(c,t){if(c.length!==t.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==t[e])return!1;return!0}function We(c,t){const e=c instanceof Uint8Array?Uint8Array.from(c):Ci(c);if(typeof t=="number"&&e.length!==t)throw new Error(`Expected ${t} bytes`);return e}function Mn(c,t,e=!0){if(!t)throw new TypeError("Specify max value");if(typeof c=="number"&&Number.isSafeInteger(c)&&(c=BigInt(c)),typeof c=="bigint"&&c<t){if(e){if(me<c)return c}else if(me<=c)return c}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function za(c){return c[0]&=248,c[31]&=127,c[31]|=64,c}function co(c){if(c=typeof c=="bigint"||typeof c=="number"?ao(Mn(c,oo)):We(c),c.length!==32)throw new Error("Expected 32 bytes");return c}function uo(c){const t=za(c.slice(0,32)),e=c.slice(32,64),n=Bn(t),h=ce.BASE.multiply(n),a=h.toRawBytes();return{head:t,prefix:e,scalar:n,point:h,pointBytes:a}}let Qr;function _n(...c){if(typeof Qr!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return Qr(...c)}async function ho(c){return uo(await vr.sha512(co(c)))}function Pi(c){return uo(_n(co(c)))}function Ka(c){return Pi(c).pointBytes}function Wa(c,t){c=We(c);const{prefix:e,scalar:n,pointBytes:h}=Pi(t),a=Bn(_n(e,c)),p=ce.BASE.multiply(a),d=Bn(_n(p.toRawBytes(),h,c)),x=X(a+d*n,re.l);return new En(p,x).toRawBytes()}function Ga(c,t,e){t=We(t),e instanceof ce||(e=ce.fromHex(e,!1));const{r:n,s:h}=c instanceof En?c.assertValidity():En.fromHex(c),a=Yt.BASE.multiplyUnsafe(h);return{r:n,s:h,SB:a,pub:e,msg:t}}function Za(c,t,e,n){const h=Bn(n),a=Yt.fromAffine(c).multiplyUnsafe(h);return Yt.fromAffine(t).add(a).subtract(e).multiplyUnsafe(re.h).equals(Yt.ZERO)}function ja(c,t,e){const{r:n,SB:h,msg:a,pub:p}=Ga(c,t,e),d=_n(n.toRawBytes(),p.toRawBytes(),a);return Za(p,n,h,d)}const Oi={getExtendedPublicKey:Pi,getPublicKey:Ka,sign:Wa,verify:ja};ce.BASE._setWindowSize(8);const Ne={node:to,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},vr={bytesToHex:cn,hexToBytes:Ci,concatBytes:is,getExtendedPublicKey:ho,mod:X,invert:Dn,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:c=>{if(c=We(c),c.length<40||c.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return X(un(c),re.l-Xt)+Xt},randomBytes:(c=32)=>{if(Ne.web)return Ne.web.getRandomValues(new Uint8Array(c));if(Ne.node){const{randomBytes:t}=Ne.node;return new Uint8Array(t(c).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>vr.randomBytes(32),sha512:async(...c)=>{const t=is(...c);if(Ne.web){const e=await Ne.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Ne.node)return Uint8Array.from(Ne.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(c=8,t=ce.BASE){const e=t.equals(ce.BASE)?t:new ce(t.x,t.y);return e._setWindowSize(c),e.multiply(Ar),e},sha512Sync:void 0};Object.defineProperties(vr,{sha512Sync:{configurable:!1,get(){return Qr},set(c){Qr||(Qr=c)}}});var Sn={},Va={get exports(){return Sn},set exports(c){Sn=c}},os;function Xa(){return os||(os=1,function(c){(function(t,e){function n(v,r){if(!v)throw new Error(r||"Assertion failed")}function h(v,r){v.super_=r;var u=function(){};u.prototype=r.prototype,v.prototype=new u,v.prototype.constructor=v}function a(v,r,u){if(a.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((r==="le"||r==="be")&&(u=r,r=10),this._init(v||0,r||10,u||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var p;try{typeof window<"u"&&typeof window.Buffer<"u"?p=window.Buffer:p=eo.Buffer}catch{}a.isBN=function(r){return r instanceof a?!0:r!==null&&typeof r=="object"&&r.constructor.wordSize===a.wordSize&&Array.isArray(r.words)},a.max=function(r,u){return r.cmp(u)>0?r:u},a.min=function(r,u){return r.cmp(u)<0?r:u},a.prototype._init=function(r,u,g){if(typeof r=="number")return this._initNumber(r,u,g);if(typeof r=="object")return this._initArray(r,u,g);u==="hex"&&(u=16),n(u===(u|0)&&u>=2&&u<=36),r=r.toString().replace(/\s+/g,"");var w=0;r[0]==="-"&&(w++,this.negative=1),w<r.length&&(u===16?this._parseHex(r,w,g):(this._parseBase(r,u,w),g==="le"&&this._initArray(this.toArray(),u,g)))},a.prototype._initNumber=function(r,u,g){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[r&67108863],this.length=1):r<4503599627370496?(this.words=[r&67108863,r/67108864&67108863],this.length=2):(n(r<9007199254740992),this.words=[r&67108863,r/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),u,g)},a.prototype._initArray=function(r,u,g){if(n(typeof r.length=="number"),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var b,B,S=0;if(g==="be")for(w=r.length-1,b=0;w>=0;w-=3)B=r[w]|r[w-1]<<8|r[w-2]<<16,this.words[b]|=B<<S&67108863,this.words[b+1]=B>>>26-S&67108863,S+=24,S>=26&&(S-=26,b++);else if(g==="le")for(w=0,b=0;w<r.length;w+=3)B=r[w]|r[w+1]<<8|r[w+2]<<16,this.words[b]|=B<<S&67108863,this.words[b+1]=B>>>26-S&67108863,S+=24,S>=26&&(S-=26,b++);return this._strip()};function d(v,r){var u=v.charCodeAt(r);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;n(!1,"Invalid character in "+v)}function x(v,r,u){var g=d(v,u);return u-1>=r&&(g|=d(v,u-1)<<4),g}a.prototype._parseHex=function(r,u,g){this.length=Math.ceil((r.length-u)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var b=0,B=0,S;if(g==="be")for(w=r.length-1;w>=u;w-=2)S=x(r,u,w)<<b,this.words[B]|=S&67108863,b>=18?(b-=18,B+=1,this.words[B]|=S>>>26):b+=8;else{var y=r.length-u;for(w=y%2===0?u+1:u;w<r.length;w+=2)S=x(r,u,w)<<b,this.words[B]|=S&67108863,b>=18?(b-=18,B+=1,this.words[B]|=S>>>26):b+=8}this._strip()};function I(v,r,u,g){for(var w=0,b=0,B=Math.min(v.length,u),S=r;S<B;S++){var y=v.charCodeAt(S)-48;w*=g,y>=49?b=y-49+10:y>=17?b=y-17+10:b=y,n(y>=0&&b<g,"Invalid character"),w+=b}return w}a.prototype._parseBase=function(r,u,g){this.words=[0],this.length=1;for(var w=0,b=1;b<=67108863;b*=u)w++;w--,b=b/u|0;for(var B=r.length-g,S=B%w,y=Math.min(B,B-S)+g,s=0,f=g;f<y;f+=w)s=I(r,f,f+w,u),this.imuln(b),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(S!==0){var M=1;for(s=I(r,f,r.length,u),f=0;f<S;f++)M*=u;this.imuln(M),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},a.prototype.copy=function(r){r.words=new Array(this.length);for(var u=0;u<this.length;u++)r.words[u]=this.words[u];r.length=this.length,r.negative=this.negative,r.red=this.red};function L(v,r){v.words=r.words,v.length=r.length,v.negative=r.negative,v.red=r.red}if(a.prototype._move=function(r){L(r,this)},a.prototype.clone=function(){var r=new a(null);return this.copy(r),r},a.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=R}catch{a.prototype.inspect=R}else a.prototype.inspect=R;function R(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],F=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(r,u){r=r||10,u=u|0||1;var g;if(r===16||r==="hex"){g="";for(var w=0,b=0,B=0;B<this.length;B++){var S=this.words[B],y=((S<<w|b)&16777215).toString(16);b=S>>>24-w&16777215,w+=2,w>=26&&(w-=26,B--),b!==0||B!==this.length-1?g=P[6-y.length]+y+g:g=y+g}for(b!==0&&(g=b.toString(16)+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(r===(r|0)&&r>=2&&r<=36){var s=F[r],f=N[r];g="";var M=this.clone();for(M.negative=0;!M.isZero();){var A=M.modrn(f).toString(r);M=M.idivn(f),M.isZero()?g=A+g:g=P[s-A.length]+A+g}for(this.isZero()&&(g="0"+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var r=this.words[0];return this.length===2?r+=this.words[1]*67108864:this.length===3&&this.words[2]===1?r+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-r:r},a.prototype.toJSON=function(){return this.toString(16,2)},p&&(a.prototype.toBuffer=function(r,u){return this.toArrayLike(p,r,u)}),a.prototype.toArray=function(r,u){return this.toArrayLike(Array,r,u)};var U=function(r,u){return r.allocUnsafe?r.allocUnsafe(u):new r(u)};a.prototype.toArrayLike=function(r,u,g){this._strip();var w=this.byteLength(),b=g||Math.max(1,w);n(w<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0");var B=U(r,b),S=u==="le"?"LE":"BE";return this["_toArrayLike"+S](B,w),B},a.prototype._toArrayLikeLE=function(r,u){for(var g=0,w=0,b=0,B=0;b<this.length;b++){var S=this.words[b]<<B|w;r[g++]=S&255,g<r.length&&(r[g++]=S>>8&255),g<r.length&&(r[g++]=S>>16&255),B===6?(g<r.length&&(r[g++]=S>>24&255),w=0,B=0):(w=S>>>24,B+=2)}if(g<r.length)for(r[g++]=w;g<r.length;)r[g++]=0},a.prototype._toArrayLikeBE=function(r,u){for(var g=r.length-1,w=0,b=0,B=0;b<this.length;b++){var S=this.words[b]<<B|w;r[g--]=S&255,g>=0&&(r[g--]=S>>8&255),g>=0&&(r[g--]=S>>16&255),B===6?(g>=0&&(r[g--]=S>>24&255),w=0,B=0):(w=S>>>24,B+=2)}if(g>=0)for(r[g--]=w;g>=0;)r[g--]=0},Math.clz32?a.prototype._countBits=function(r){return 32-Math.clz32(r)}:a.prototype._countBits=function(r){var u=r,g=0;return u>=4096&&(g+=13,u>>>=13),u>=64&&(g+=7,u>>>=7),u>=8&&(g+=4,u>>>=4),u>=2&&(g+=2,u>>>=2),g+u},a.prototype._zeroBits=function(r){if(r===0)return 26;var u=r,g=0;return u&8191||(g+=13,u>>>=13),u&127||(g+=7,u>>>=7),u&15||(g+=4,u>>>=4),u&3||(g+=2,u>>>=2),u&1||g++,g},a.prototype.bitLength=function(){var r=this.words[this.length-1],u=this._countBits(r);return(this.length-1)*26+u};function O(v){for(var r=new Array(v.bitLength()),u=0;u<r.length;u++){var g=u/26|0,w=u%26;r[u]=v.words[g]>>>w&1}return r}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,u=0;u<this.length;u++){var g=this._zeroBits(this.words[u]);if(r+=g,g!==26)break}return r},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(r){return this.negative!==0?this.abs().inotn(r).iaddn(1):this.clone()},a.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var u=0;u<r.length;u++)this.words[u]=this.words[u]|r.words[u];return this._strip()},a.prototype.ior=function(r){return n((this.negative|r.negative)===0),this.iuor(r)},a.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},a.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},a.prototype.iuand=function(r){var u;this.length>r.length?u=r:u=this;for(var g=0;g<u.length;g++)this.words[g]=this.words[g]&r.words[g];return this.length=u.length,this._strip()},a.prototype.iand=function(r){return n((this.negative|r.negative)===0),this.iuand(r)},a.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},a.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},a.prototype.iuxor=function(r){var u,g;this.length>r.length?(u=this,g=r):(u=r,g=this);for(var w=0;w<g.length;w++)this.words[w]=u.words[w]^g.words[w];if(this!==u)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=u.length,this._strip()},a.prototype.ixor=function(r){return n((this.negative|r.negative)===0),this.iuxor(r)},a.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},a.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},a.prototype.inotn=function(r){n(typeof r=="number"&&r>=0);var u=Math.ceil(r/26)|0,g=r%26;this._expand(u),g>0&&u--;for(var w=0;w<u;w++)this.words[w]=~this.words[w]&67108863;return g>0&&(this.words[w]=~this.words[w]&67108863>>26-g),this._strip()},a.prototype.notn=function(r){return this.clone().inotn(r)},a.prototype.setn=function(r,u){n(typeof r=="number"&&r>=0);var g=r/26|0,w=r%26;return this._expand(g+1),u?this.words[g]=this.words[g]|1<<w:this.words[g]=this.words[g]&~(1<<w),this._strip()},a.prototype.iadd=function(r){var u;if(this.negative!==0&&r.negative===0)return this.negative=0,u=this.isub(r),this.negative^=1,this._normSign();if(this.negative===0&&r.negative!==0)return r.negative=0,u=this.isub(r),r.negative=1,u._normSign();var g,w;this.length>r.length?(g=this,w=r):(g=r,w=this);for(var b=0,B=0;B<w.length;B++)u=(g.words[B]|0)+(w.words[B]|0)+b,this.words[B]=u&67108863,b=u>>>26;for(;b!==0&&B<g.length;B++)u=(g.words[B]|0)+b,this.words[B]=u&67108863,b=u>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;B<g.length;B++)this.words[B]=g.words[B];return this},a.prototype.add=function(r){var u;return r.negative!==0&&this.negative===0?(r.negative=0,u=this.sub(r),r.negative^=1,u):r.negative===0&&this.negative!==0?(this.negative=0,u=r.sub(this),this.negative=1,u):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},a.prototype.isub=function(r){if(r.negative!==0){r.negative=0;var u=this.iadd(r);return r.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var g=this.cmp(r);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,b;g>0?(w=this,b=r):(w=r,b=this);for(var B=0,S=0;S<b.length;S++)u=(w.words[S]|0)-(b.words[S]|0)+B,B=u>>26,this.words[S]=u&67108863;for(;B!==0&&S<w.length;S++)u=(w.words[S]|0)+B,B=u>>26,this.words[S]=u&67108863;if(B===0&&S<w.length&&w!==this)for(;S<w.length;S++)this.words[S]=w.words[S];return this.length=Math.max(this.length,S),w!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(r){return this.clone().isub(r)};function Z(v,r,u){u.negative=r.negative^v.negative;var g=v.length+r.length|0;u.length=g,g=g-1|0;var w=v.words[0]|0,b=r.words[0]|0,B=w*b,S=B&67108863,y=B/67108864|0;u.words[0]=S;for(var s=1;s<g;s++){for(var f=y>>>26,M=y&67108863,A=Math.min(s,r.length-1),C=Math.max(0,s-v.length+1);C<=A;C++){var G=s-C|0;w=v.words[G]|0,b=r.words[C]|0,B=w*b+M,f+=B/67108864|0,M=B&67108863}u.words[s]=M|0,y=f|0}return y!==0?u.words[s]=y|0:u.length--,u._strip()}var W=function(r,u,g){var w=r.words,b=u.words,B=g.words,S=0,y,s,f,M=w[0]|0,A=M&8191,C=M>>>13,G=w[1]|0,Q=G&8191,ct=G>>>13,ue=w[2]|0,xt=ue&8191,Et=ue>>>13,de=w[3]|0,pt=de&8191,Mt=de>>>13,Te=w[4]|0,wt=Te&8191,_t=Te>>>13,Le=w[5]|0,Bt=Le&8191,mt=Le>>>13,ee=w[6]|0,vt=ee&8191,St=ee>>>13,ne=w[7]|0,At=ne&8191,l=ne>>>13,i=w[8]|0,o=i&8191,m=i>>>13,E=w[9]|0,_=E&8191,k=E>>>13,it=b[0]|0,rt=it&8191,et=it>>>13,yt=b[1]|0,J=yt&8191,kt=yt>>>13,Or=b[2]|0,Rt=Or&8191,Tt=Or>>>13,Nr=b[3]|0,Lt=Nr&8191,Ut=Nr>>>13,qr=b[4]|0,Ct=qr&8191,Ft=qr>>>13,Dr=b[5]|0,Pt=Dr&8191,Ot=Dr>>>13,Hr=b[6]|0,Nt=Hr&8191,qt=Hr>>>13,$r=b[7]|0,Dt=$r&8191,Ht=$r>>>13,zr=b[8]|0,$t=zr&8191,zt=zr>>>13,Kr=b[9]|0,Kt=Kr&8191,Wt=Kr>>>13;g.negative=r.negative^u.negative,g.length=19,y=Math.imul(A,rt),s=Math.imul(A,et),s=s+Math.imul(C,rt)|0,f=Math.imul(C,et);var Ve=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,y=Math.imul(Q,rt),s=Math.imul(Q,et),s=s+Math.imul(ct,rt)|0,f=Math.imul(ct,et),y=y+Math.imul(A,J)|0,s=s+Math.imul(A,kt)|0,s=s+Math.imul(C,J)|0,f=f+Math.imul(C,kt)|0;var Xe=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,y=Math.imul(xt,rt),s=Math.imul(xt,et),s=s+Math.imul(Et,rt)|0,f=Math.imul(Et,et),y=y+Math.imul(Q,J)|0,s=s+Math.imul(Q,kt)|0,s=s+Math.imul(ct,J)|0,f=f+Math.imul(ct,kt)|0,y=y+Math.imul(A,Rt)|0,s=s+Math.imul(A,Tt)|0,s=s+Math.imul(C,Rt)|0,f=f+Math.imul(C,Tt)|0;var Ye=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,y=Math.imul(pt,rt),s=Math.imul(pt,et),s=s+Math.imul(Mt,rt)|0,f=Math.imul(Mt,et),y=y+Math.imul(xt,J)|0,s=s+Math.imul(xt,kt)|0,s=s+Math.imul(Et,J)|0,f=f+Math.imul(Et,kt)|0,y=y+Math.imul(Q,Rt)|0,s=s+Math.imul(Q,Tt)|0,s=s+Math.imul(ct,Rt)|0,f=f+Math.imul(ct,Tt)|0,y=y+Math.imul(A,Lt)|0,s=s+Math.imul(A,Ut)|0,s=s+Math.imul(C,Lt)|0,f=f+Math.imul(C,Ut)|0;var Je=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Je>>>26)|0,Je&=67108863,y=Math.imul(wt,rt),s=Math.imul(wt,et),s=s+Math.imul(_t,rt)|0,f=Math.imul(_t,et),y=y+Math.imul(pt,J)|0,s=s+Math.imul(pt,kt)|0,s=s+Math.imul(Mt,J)|0,f=f+Math.imul(Mt,kt)|0,y=y+Math.imul(xt,Rt)|0,s=s+Math.imul(xt,Tt)|0,s=s+Math.imul(Et,Rt)|0,f=f+Math.imul(Et,Tt)|0,y=y+Math.imul(Q,Lt)|0,s=s+Math.imul(Q,Ut)|0,s=s+Math.imul(ct,Lt)|0,f=f+Math.imul(ct,Ut)|0,y=y+Math.imul(A,Ct)|0,s=s+Math.imul(A,Ft)|0,s=s+Math.imul(C,Ct)|0,f=f+Math.imul(C,Ft)|0;var Qe=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,y=Math.imul(Bt,rt),s=Math.imul(Bt,et),s=s+Math.imul(mt,rt)|0,f=Math.imul(mt,et),y=y+Math.imul(wt,J)|0,s=s+Math.imul(wt,kt)|0,s=s+Math.imul(_t,J)|0,f=f+Math.imul(_t,kt)|0,y=y+Math.imul(pt,Rt)|0,s=s+Math.imul(pt,Tt)|0,s=s+Math.imul(Mt,Rt)|0,f=f+Math.imul(Mt,Tt)|0,y=y+Math.imul(xt,Lt)|0,s=s+Math.imul(xt,Ut)|0,s=s+Math.imul(Et,Lt)|0,f=f+Math.imul(Et,Ut)|0,y=y+Math.imul(Q,Ct)|0,s=s+Math.imul(Q,Ft)|0,s=s+Math.imul(ct,Ct)|0,f=f+Math.imul(ct,Ft)|0,y=y+Math.imul(A,Pt)|0,s=s+Math.imul(A,Ot)|0,s=s+Math.imul(C,Pt)|0,f=f+Math.imul(C,Ot)|0;var tr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,y=Math.imul(vt,rt),s=Math.imul(vt,et),s=s+Math.imul(St,rt)|0,f=Math.imul(St,et),y=y+Math.imul(Bt,J)|0,s=s+Math.imul(Bt,kt)|0,s=s+Math.imul(mt,J)|0,f=f+Math.imul(mt,kt)|0,y=y+Math.imul(wt,Rt)|0,s=s+Math.imul(wt,Tt)|0,s=s+Math.imul(_t,Rt)|0,f=f+Math.imul(_t,Tt)|0,y=y+Math.imul(pt,Lt)|0,s=s+Math.imul(pt,Ut)|0,s=s+Math.imul(Mt,Lt)|0,f=f+Math.imul(Mt,Ut)|0,y=y+Math.imul(xt,Ct)|0,s=s+Math.imul(xt,Ft)|0,s=s+Math.imul(Et,Ct)|0,f=f+Math.imul(Et,Ft)|0,y=y+Math.imul(Q,Pt)|0,s=s+Math.imul(Q,Ot)|0,s=s+Math.imul(ct,Pt)|0,f=f+Math.imul(ct,Ot)|0,y=y+Math.imul(A,Nt)|0,s=s+Math.imul(A,qt)|0,s=s+Math.imul(C,Nt)|0,f=f+Math.imul(C,qt)|0;var er=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(er>>>26)|0,er&=67108863,y=Math.imul(At,rt),s=Math.imul(At,et),s=s+Math.imul(l,rt)|0,f=Math.imul(l,et),y=y+Math.imul(vt,J)|0,s=s+Math.imul(vt,kt)|0,s=s+Math.imul(St,J)|0,f=f+Math.imul(St,kt)|0,y=y+Math.imul(Bt,Rt)|0,s=s+Math.imul(Bt,Tt)|0,s=s+Math.imul(mt,Rt)|0,f=f+Math.imul(mt,Tt)|0,y=y+Math.imul(wt,Lt)|0,s=s+Math.imul(wt,Ut)|0,s=s+Math.imul(_t,Lt)|0,f=f+Math.imul(_t,Ut)|0,y=y+Math.imul(pt,Ct)|0,s=s+Math.imul(pt,Ft)|0,s=s+Math.imul(Mt,Ct)|0,f=f+Math.imul(Mt,Ft)|0,y=y+Math.imul(xt,Pt)|0,s=s+Math.imul(xt,Ot)|0,s=s+Math.imul(Et,Pt)|0,f=f+Math.imul(Et,Ot)|0,y=y+Math.imul(Q,Nt)|0,s=s+Math.imul(Q,qt)|0,s=s+Math.imul(ct,Nt)|0,f=f+Math.imul(ct,qt)|0,y=y+Math.imul(A,Dt)|0,s=s+Math.imul(A,Ht)|0,s=s+Math.imul(C,Dt)|0,f=f+Math.imul(C,Ht)|0;var rr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(o,rt),s=Math.imul(o,et),s=s+Math.imul(m,rt)|0,f=Math.imul(m,et),y=y+Math.imul(At,J)|0,s=s+Math.imul(At,kt)|0,s=s+Math.imul(l,J)|0,f=f+Math.imul(l,kt)|0,y=y+Math.imul(vt,Rt)|0,s=s+Math.imul(vt,Tt)|0,s=s+Math.imul(St,Rt)|0,f=f+Math.imul(St,Tt)|0,y=y+Math.imul(Bt,Lt)|0,s=s+Math.imul(Bt,Ut)|0,s=s+Math.imul(mt,Lt)|0,f=f+Math.imul(mt,Ut)|0,y=y+Math.imul(wt,Ct)|0,s=s+Math.imul(wt,Ft)|0,s=s+Math.imul(_t,Ct)|0,f=f+Math.imul(_t,Ft)|0,y=y+Math.imul(pt,Pt)|0,s=s+Math.imul(pt,Ot)|0,s=s+Math.imul(Mt,Pt)|0,f=f+Math.imul(Mt,Ot)|0,y=y+Math.imul(xt,Nt)|0,s=s+Math.imul(xt,qt)|0,s=s+Math.imul(Et,Nt)|0,f=f+Math.imul(Et,qt)|0,y=y+Math.imul(Q,Dt)|0,s=s+Math.imul(Q,Ht)|0,s=s+Math.imul(ct,Dt)|0,f=f+Math.imul(ct,Ht)|0,y=y+Math.imul(A,$t)|0,s=s+Math.imul(A,zt)|0,s=s+Math.imul(C,$t)|0,f=f+Math.imul(C,zt)|0;var nr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(_,rt),s=Math.imul(_,et),s=s+Math.imul(k,rt)|0,f=Math.imul(k,et),y=y+Math.imul(o,J)|0,s=s+Math.imul(o,kt)|0,s=s+Math.imul(m,J)|0,f=f+Math.imul(m,kt)|0,y=y+Math.imul(At,Rt)|0,s=s+Math.imul(At,Tt)|0,s=s+Math.imul(l,Rt)|0,f=f+Math.imul(l,Tt)|0,y=y+Math.imul(vt,Lt)|0,s=s+Math.imul(vt,Ut)|0,s=s+Math.imul(St,Lt)|0,f=f+Math.imul(St,Ut)|0,y=y+Math.imul(Bt,Ct)|0,s=s+Math.imul(Bt,Ft)|0,s=s+Math.imul(mt,Ct)|0,f=f+Math.imul(mt,Ft)|0,y=y+Math.imul(wt,Pt)|0,s=s+Math.imul(wt,Ot)|0,s=s+Math.imul(_t,Pt)|0,f=f+Math.imul(_t,Ot)|0,y=y+Math.imul(pt,Nt)|0,s=s+Math.imul(pt,qt)|0,s=s+Math.imul(Mt,Nt)|0,f=f+Math.imul(Mt,qt)|0,y=y+Math.imul(xt,Dt)|0,s=s+Math.imul(xt,Ht)|0,s=s+Math.imul(Et,Dt)|0,f=f+Math.imul(Et,Ht)|0,y=y+Math.imul(Q,$t)|0,s=s+Math.imul(Q,zt)|0,s=s+Math.imul(ct,$t)|0,f=f+Math.imul(ct,zt)|0,y=y+Math.imul(A,Kt)|0,s=s+Math.imul(A,Wt)|0,s=s+Math.imul(C,Kt)|0,f=f+Math.imul(C,Wt)|0;var ir=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(_,J),s=Math.imul(_,kt),s=s+Math.imul(k,J)|0,f=Math.imul(k,kt),y=y+Math.imul(o,Rt)|0,s=s+Math.imul(o,Tt)|0,s=s+Math.imul(m,Rt)|0,f=f+Math.imul(m,Tt)|0,y=y+Math.imul(At,Lt)|0,s=s+Math.imul(At,Ut)|0,s=s+Math.imul(l,Lt)|0,f=f+Math.imul(l,Ut)|0,y=y+Math.imul(vt,Ct)|0,s=s+Math.imul(vt,Ft)|0,s=s+Math.imul(St,Ct)|0,f=f+Math.imul(St,Ft)|0,y=y+Math.imul(Bt,Pt)|0,s=s+Math.imul(Bt,Ot)|0,s=s+Math.imul(mt,Pt)|0,f=f+Math.imul(mt,Ot)|0,y=y+Math.imul(wt,Nt)|0,s=s+Math.imul(wt,qt)|0,s=s+Math.imul(_t,Nt)|0,f=f+Math.imul(_t,qt)|0,y=y+Math.imul(pt,Dt)|0,s=s+Math.imul(pt,Ht)|0,s=s+Math.imul(Mt,Dt)|0,f=f+Math.imul(Mt,Ht)|0,y=y+Math.imul(xt,$t)|0,s=s+Math.imul(xt,zt)|0,s=s+Math.imul(Et,$t)|0,f=f+Math.imul(Et,zt)|0,y=y+Math.imul(Q,Kt)|0,s=s+Math.imul(Q,Wt)|0,s=s+Math.imul(ct,Kt)|0,f=f+Math.imul(ct,Wt)|0;var sr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(_,Rt),s=Math.imul(_,Tt),s=s+Math.imul(k,Rt)|0,f=Math.imul(k,Tt),y=y+Math.imul(o,Lt)|0,s=s+Math.imul(o,Ut)|0,s=s+Math.imul(m,Lt)|0,f=f+Math.imul(m,Ut)|0,y=y+Math.imul(At,Ct)|0,s=s+Math.imul(At,Ft)|0,s=s+Math.imul(l,Ct)|0,f=f+Math.imul(l,Ft)|0,y=y+Math.imul(vt,Pt)|0,s=s+Math.imul(vt,Ot)|0,s=s+Math.imul(St,Pt)|0,f=f+Math.imul(St,Ot)|0,y=y+Math.imul(Bt,Nt)|0,s=s+Math.imul(Bt,qt)|0,s=s+Math.imul(mt,Nt)|0,f=f+Math.imul(mt,qt)|0,y=y+Math.imul(wt,Dt)|0,s=s+Math.imul(wt,Ht)|0,s=s+Math.imul(_t,Dt)|0,f=f+Math.imul(_t,Ht)|0,y=y+Math.imul(pt,$t)|0,s=s+Math.imul(pt,zt)|0,s=s+Math.imul(Mt,$t)|0,f=f+Math.imul(Mt,zt)|0,y=y+Math.imul(xt,Kt)|0,s=s+Math.imul(xt,Wt)|0,s=s+Math.imul(Et,Kt)|0,f=f+Math.imul(Et,Wt)|0;var or=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(_,Lt),s=Math.imul(_,Ut),s=s+Math.imul(k,Lt)|0,f=Math.imul(k,Ut),y=y+Math.imul(o,Ct)|0,s=s+Math.imul(o,Ft)|0,s=s+Math.imul(m,Ct)|0,f=f+Math.imul(m,Ft)|0,y=y+Math.imul(At,Pt)|0,s=s+Math.imul(At,Ot)|0,s=s+Math.imul(l,Pt)|0,f=f+Math.imul(l,Ot)|0,y=y+Math.imul(vt,Nt)|0,s=s+Math.imul(vt,qt)|0,s=s+Math.imul(St,Nt)|0,f=f+Math.imul(St,qt)|0,y=y+Math.imul(Bt,Dt)|0,s=s+Math.imul(Bt,Ht)|0,s=s+Math.imul(mt,Dt)|0,f=f+Math.imul(mt,Ht)|0,y=y+Math.imul(wt,$t)|0,s=s+Math.imul(wt,zt)|0,s=s+Math.imul(_t,$t)|0,f=f+Math.imul(_t,zt)|0,y=y+Math.imul(pt,Kt)|0,s=s+Math.imul(pt,Wt)|0,s=s+Math.imul(Mt,Kt)|0,f=f+Math.imul(Mt,Wt)|0;var ar=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(_,Ct),s=Math.imul(_,Ft),s=s+Math.imul(k,Ct)|0,f=Math.imul(k,Ft),y=y+Math.imul(o,Pt)|0,s=s+Math.imul(o,Ot)|0,s=s+Math.imul(m,Pt)|0,f=f+Math.imul(m,Ot)|0,y=y+Math.imul(At,Nt)|0,s=s+Math.imul(At,qt)|0,s=s+Math.imul(l,Nt)|0,f=f+Math.imul(l,qt)|0,y=y+Math.imul(vt,Dt)|0,s=s+Math.imul(vt,Ht)|0,s=s+Math.imul(St,Dt)|0,f=f+Math.imul(St,Ht)|0,y=y+Math.imul(Bt,$t)|0,s=s+Math.imul(Bt,zt)|0,s=s+Math.imul(mt,$t)|0,f=f+Math.imul(mt,zt)|0,y=y+Math.imul(wt,Kt)|0,s=s+Math.imul(wt,Wt)|0,s=s+Math.imul(_t,Kt)|0,f=f+Math.imul(_t,Wt)|0;var cr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(_,Pt),s=Math.imul(_,Ot),s=s+Math.imul(k,Pt)|0,f=Math.imul(k,Ot),y=y+Math.imul(o,Nt)|0,s=s+Math.imul(o,qt)|0,s=s+Math.imul(m,Nt)|0,f=f+Math.imul(m,qt)|0,y=y+Math.imul(At,Dt)|0,s=s+Math.imul(At,Ht)|0,s=s+Math.imul(l,Dt)|0,f=f+Math.imul(l,Ht)|0,y=y+Math.imul(vt,$t)|0,s=s+Math.imul(vt,zt)|0,s=s+Math.imul(St,$t)|0,f=f+Math.imul(St,zt)|0,y=y+Math.imul(Bt,Kt)|0,s=s+Math.imul(Bt,Wt)|0,s=s+Math.imul(mt,Kt)|0,f=f+Math.imul(mt,Wt)|0;var ur=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(_,Nt),s=Math.imul(_,qt),s=s+Math.imul(k,Nt)|0,f=Math.imul(k,qt),y=y+Math.imul(o,Dt)|0,s=s+Math.imul(o,Ht)|0,s=s+Math.imul(m,Dt)|0,f=f+Math.imul(m,Ht)|0,y=y+Math.imul(At,$t)|0,s=s+Math.imul(At,zt)|0,s=s+Math.imul(l,$t)|0,f=f+Math.imul(l,zt)|0,y=y+Math.imul(vt,Kt)|0,s=s+Math.imul(vt,Wt)|0,s=s+Math.imul(St,Kt)|0,f=f+Math.imul(St,Wt)|0;var hr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(hr>>>26)|0,hr&=67108863,y=Math.imul(_,Dt),s=Math.imul(_,Ht),s=s+Math.imul(k,Dt)|0,f=Math.imul(k,Ht),y=y+Math.imul(o,$t)|0,s=s+Math.imul(o,zt)|0,s=s+Math.imul(m,$t)|0,f=f+Math.imul(m,zt)|0,y=y+Math.imul(At,Kt)|0,s=s+Math.imul(At,Wt)|0,s=s+Math.imul(l,Kt)|0,f=f+Math.imul(l,Wt)|0;var fr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(fr>>>26)|0,fr&=67108863,y=Math.imul(_,$t),s=Math.imul(_,zt),s=s+Math.imul(k,$t)|0,f=Math.imul(k,zt),y=y+Math.imul(o,Kt)|0,s=s+Math.imul(o,Wt)|0,s=s+Math.imul(m,Kt)|0,f=f+Math.imul(m,Wt)|0;var lr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(_,Kt),s=Math.imul(_,Wt),s=s+Math.imul(k,Kt)|0,f=Math.imul(k,Wt);var dr=(S+y|0)+((s&8191)<<13)|0;return S=(f+(s>>>13)|0)+(dr>>>26)|0,dr&=67108863,B[0]=Ve,B[1]=Xe,B[2]=Ye,B[3]=Je,B[4]=Qe,B[5]=tr,B[6]=er,B[7]=rr,B[8]=nr,B[9]=ir,B[10]=sr,B[11]=or,B[12]=ar,B[13]=cr,B[14]=ur,B[15]=hr,B[16]=fr,B[17]=lr,B[18]=dr,S!==0&&(B[19]=S,g.length++),g};Math.imul||(W=Z);function D(v,r,u){u.negative=r.negative^v.negative,u.length=v.length+r.length;for(var g=0,w=0,b=0;b<u.length-1;b++){var B=w;w=0;for(var S=g&67108863,y=Math.min(b,r.length-1),s=Math.max(0,b-v.length+1);s<=y;s++){var f=b-s,M=v.words[f]|0,A=r.words[s]|0,C=M*A,G=C&67108863;B=B+(C/67108864|0)|0,G=G+S|0,S=G&67108863,B=B+(G>>>26)|0,w+=B>>>26,B&=67108863}u.words[b]=S,g=B,B=w}return g!==0?u.words[b]=g:u.length--,u._strip()}function ot(v,r,u){return D(v,r,u)}a.prototype.mulTo=function(r,u){var g,w=this.length+r.length;return this.length===10&&r.length===10?g=W(this,r,u):w<63?g=Z(this,r,u):w<1024?g=D(this,r,u):g=ot(this,r,u),g},a.prototype.mul=function(r){var u=new a(null);return u.words=new Array(this.length+r.length),this.mulTo(r,u)},a.prototype.mulf=function(r){var u=new a(null);return u.words=new Array(this.length+r.length),ot(this,r,u)},a.prototype.imul=function(r){return this.clone().mulTo(r,this)},a.prototype.imuln=function(r){var u=r<0;u&&(r=-r),n(typeof r=="number"),n(r<67108864);for(var g=0,w=0;w<this.length;w++){var b=(this.words[w]|0)*r,B=(b&67108863)+(g&67108863);g>>=26,g+=b/67108864|0,g+=B>>>26,this.words[w]=B&67108863}return g!==0&&(this.words[w]=g,this.length++),u?this.ineg():this},a.prototype.muln=function(r){return this.clone().imuln(r)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(r){var u=O(r);if(u.length===0)return new a(1);for(var g=this,w=0;w<u.length&&u[w]===0;w++,g=g.sqr());if(++w<u.length)for(var b=g.sqr();w<u.length;w++,b=b.sqr())u[w]!==0&&(g=g.mul(b));return g},a.prototype.iushln=function(r){n(typeof r=="number"&&r>=0);var u=r%26,g=(r-u)/26,w=67108863>>>26-u<<26-u,b;if(u!==0){var B=0;for(b=0;b<this.length;b++){var S=this.words[b]&w,y=(this.words[b]|0)-S<<u;this.words[b]=y|B,B=S>>>26-u}B&&(this.words[b]=B,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this._strip()},a.prototype.ishln=function(r){return n(this.negative===0),this.iushln(r)},a.prototype.iushrn=function(r,u,g){n(typeof r=="number"&&r>=0);var w;u?w=(u-u%26)/26:w=0;var b=r%26,B=Math.min((r-b)/26,this.length),S=67108863^67108863>>>b<<b,y=g;if(w-=B,w=Math.max(0,w),y){for(var s=0;s<B;s++)y.words[s]=this.words[s];y.length=B}if(B!==0)if(this.length>B)for(this.length-=B,s=0;s<this.length;s++)this.words[s]=this.words[s+B];else this.words[0]=0,this.length=1;var f=0;for(s=this.length-1;s>=0&&(f!==0||s>=w);s--){var M=this.words[s]|0;this.words[s]=f<<26-b|M>>>b,f=M&S}return y&&f!==0&&(y.words[y.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(r,u,g){return n(this.negative===0),this.iushrn(r,u,g)},a.prototype.shln=function(r){return this.clone().ishln(r)},a.prototype.ushln=function(r){return this.clone().iushln(r)},a.prototype.shrn=function(r){return this.clone().ishrn(r)},a.prototype.ushrn=function(r){return this.clone().iushrn(r)},a.prototype.testn=function(r){n(typeof r=="number"&&r>=0);var u=r%26,g=(r-u)/26,w=1<<u;if(this.length<=g)return!1;var b=this.words[g];return!!(b&w)},a.prototype.imaskn=function(r){n(typeof r=="number"&&r>=0);var u=r%26,g=(r-u)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(u!==0&&g++,this.length=Math.min(g,this.length),u!==0){var w=67108863^67108863>>>u<<u;this.words[this.length-1]&=w}return this._strip()},a.prototype.maskn=function(r){return this.clone().imaskn(r)},a.prototype.iaddn=function(r){return n(typeof r=="number"),n(r<67108864),r<0?this.isubn(-r):this.negative!==0?this.length===1&&(this.words[0]|0)<=r?(this.words[0]=r-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},a.prototype._iaddn=function(r){this.words[0]+=r;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},a.prototype.isubn=function(r){if(n(typeof r=="number"),n(r<67108864),r<0)return this.iaddn(-r);if(this.negative!==0)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},a.prototype.addn=function(r){return this.clone().iaddn(r)},a.prototype.subn=function(r){return this.clone().isubn(r)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(r,u,g){var w=r.length+g,b;this._expand(w);var B,S=0;for(b=0;b<r.length;b++){B=(this.words[b+g]|0)+S;var y=(r.words[b]|0)*u;B-=y&67108863,S=(B>>26)-(y/67108864|0),this.words[b+g]=B&67108863}for(;b<this.length-g;b++)B=(this.words[b+g]|0)+S,S=B>>26,this.words[b+g]=B&67108863;if(S===0)return this._strip();for(n(S===-1),S=0,b=0;b<this.length;b++)B=-(this.words[b]|0)+S,S=B>>26,this.words[b]=B&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(r,u){var g=this.length-r.length,w=this.clone(),b=r,B=b.words[b.length-1]|0,S=this._countBits(B);g=26-S,g!==0&&(b=b.ushln(g),w.iushln(g),B=b.words[b.length-1]|0);var y=w.length-b.length,s;if(u!=="mod"){s=new a(null),s.length=y+1,s.words=new Array(s.length);for(var f=0;f<s.length;f++)s.words[f]=0}var M=w.clone()._ishlnsubmul(b,1,y);M.negative===0&&(w=M,s&&(s.words[y]=1));for(var A=y-1;A>=0;A--){var C=(w.words[b.length+A]|0)*67108864+(w.words[b.length+A-1]|0);for(C=Math.min(C/B|0,67108863),w._ishlnsubmul(b,C,A);w.negative!==0;)C--,w.negative=0,w._ishlnsubmul(b,1,A),w.isZero()||(w.negative^=1);s&&(s.words[A]=C)}return s&&s._strip(),w._strip(),u!=="div"&&g!==0&&w.iushrn(g),{div:s||null,mod:w}},a.prototype.divmod=function(r,u,g){if(n(!r.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var w,b,B;return this.negative!==0&&r.negative===0?(B=this.neg().divmod(r,u),u!=="mod"&&(w=B.div.neg()),u!=="div"&&(b=B.mod.neg(),g&&b.negative!==0&&b.iadd(r)),{div:w,mod:b}):this.negative===0&&r.negative!==0?(B=this.divmod(r.neg(),u),u!=="mod"&&(w=B.div.neg()),{div:w,mod:B.mod}):this.negative&r.negative?(B=this.neg().divmod(r.neg(),u),u!=="div"&&(b=B.mod.neg(),g&&b.negative!==0&&b.isub(r)),{div:B.div,mod:b}):r.length>this.length||this.cmp(r)<0?{div:new a(0),mod:this}:r.length===1?u==="div"?{div:this.divn(r.words[0]),mod:null}:u==="mod"?{div:null,mod:new a(this.modrn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new a(this.modrn(r.words[0]))}:this._wordDiv(r,u)},a.prototype.div=function(r){return this.divmod(r,"div",!1).div},a.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},a.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},a.prototype.divRound=function(r){var u=this.divmod(r);if(u.mod.isZero())return u.div;var g=u.div.negative!==0?u.mod.isub(r):u.mod,w=r.ushrn(1),b=r.andln(1),B=g.cmp(w);return B<0||b===1&&B===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},a.prototype.modrn=function(r){var u=r<0;u&&(r=-r),n(r<=67108863);for(var g=(1<<26)%r,w=0,b=this.length-1;b>=0;b--)w=(g*w+(this.words[b]|0))%r;return u?-w:w},a.prototype.modn=function(r){return this.modrn(r)},a.prototype.idivn=function(r){var u=r<0;u&&(r=-r),n(r<=67108863);for(var g=0,w=this.length-1;w>=0;w--){var b=(this.words[w]|0)+g*67108864;this.words[w]=b/r|0,g=b%r}return this._strip(),u?this.ineg():this},a.prototype.divn=function(r){return this.clone().idivn(r)},a.prototype.egcd=function(r){n(r.negative===0),n(!r.isZero());var u=this,g=r.clone();u.negative!==0?u=u.umod(r):u=u.clone();for(var w=new a(1),b=new a(0),B=new a(0),S=new a(1),y=0;u.isEven()&&g.isEven();)u.iushrn(1),g.iushrn(1),++y;for(var s=g.clone(),f=u.clone();!u.isZero();){for(var M=0,A=1;!(u.words[0]&A)&&M<26;++M,A<<=1);if(M>0)for(u.iushrn(M);M-- >0;)(w.isOdd()||b.isOdd())&&(w.iadd(s),b.isub(f)),w.iushrn(1),b.iushrn(1);for(var C=0,G=1;!(g.words[0]&G)&&C<26;++C,G<<=1);if(C>0)for(g.iushrn(C);C-- >0;)(B.isOdd()||S.isOdd())&&(B.iadd(s),S.isub(f)),B.iushrn(1),S.iushrn(1);u.cmp(g)>=0?(u.isub(g),w.isub(B),b.isub(S)):(g.isub(u),B.isub(w),S.isub(b))}return{a:B,b:S,gcd:g.iushln(y)}},a.prototype._invmp=function(r){n(r.negative===0),n(!r.isZero());var u=this,g=r.clone();u.negative!==0?u=u.umod(r):u=u.clone();for(var w=new a(1),b=new a(0),B=g.clone();u.cmpn(1)>0&&g.cmpn(1)>0;){for(var S=0,y=1;!(u.words[0]&y)&&S<26;++S,y<<=1);if(S>0)for(u.iushrn(S);S-- >0;)w.isOdd()&&w.iadd(B),w.iushrn(1);for(var s=0,f=1;!(g.words[0]&f)&&s<26;++s,f<<=1);if(s>0)for(g.iushrn(s);s-- >0;)b.isOdd()&&b.iadd(B),b.iushrn(1);u.cmp(g)>=0?(u.isub(g),w.isub(b)):(g.isub(u),b.isub(w))}var M;return u.cmpn(1)===0?M=w:M=b,M.cmpn(0)<0&&M.iadd(r),M},a.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var u=this.clone(),g=r.clone();u.negative=0,g.negative=0;for(var w=0;u.isEven()&&g.isEven();w++)u.iushrn(1),g.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=u.cmp(g);if(b<0){var B=u;u=g,g=B}else if(b===0||g.cmpn(1)===0)break;u.isub(g)}while(!0);return g.iushln(w)},a.prototype.invm=function(r){return this.egcd(r).a.umod(r)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(r){return this.words[0]&r},a.prototype.bincn=function(r){n(typeof r=="number");var u=r%26,g=(r-u)/26,w=1<<u;if(this.length<=g)return this._expand(g+1),this.words[g]|=w,this;for(var b=w,B=g;b!==0&&B<this.length;B++){var S=this.words[B]|0;S+=b,b=S>>>26,S&=67108863,this.words[B]=S}return b!==0&&(this.words[B]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(r){var u=r<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var g;if(this.length>1)g=1;else{u&&(r=-r),n(r<=67108863,"Number is too big");var w=this.words[0]|0;g=w===r?0:w<r?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(r){if(this.negative!==0&&r.negative===0)return-1;if(this.negative===0&&r.negative!==0)return 1;var u=this.ucmp(r);return this.negative!==0?-u|0:u},a.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var u=0,g=this.length-1;g>=0;g--){var w=this.words[g]|0,b=r.words[g]|0;if(w!==b){w<b?u=-1:w>b&&(u=1);break}}return u},a.prototype.gtn=function(r){return this.cmpn(r)===1},a.prototype.gt=function(r){return this.cmp(r)===1},a.prototype.gten=function(r){return this.cmpn(r)>=0},a.prototype.gte=function(r){return this.cmp(r)>=0},a.prototype.ltn=function(r){return this.cmpn(r)===-1},a.prototype.lt=function(r){return this.cmp(r)===-1},a.prototype.lten=function(r){return this.cmpn(r)<=0},a.prototype.lte=function(r){return this.cmp(r)<=0},a.prototype.eqn=function(r){return this.cmpn(r)===0},a.prototype.eq=function(r){return this.cmp(r)===0},a.red=function(r){return new z(r)},a.prototype.toRed=function(r){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),r.convertTo(this)._forceRed(r)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(r){return this.red=r,this},a.prototype.forceRed=function(r){return n(!this.red,"Already a number in reduction context"),this._forceRed(r)},a.prototype.redAdd=function(r){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},a.prototype.redIAdd=function(r){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},a.prototype.redSub=function(r){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},a.prototype.redISub=function(r){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},a.prototype.redShl=function(r){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},a.prototype.redMul=function(r){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},a.prototype.redIMul=function(r){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(r){return n(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var K={k256:null,p224:null,p192:null,p25519:null};function tt(v,r){this.name=v,this.p=new a(r,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}tt.prototype._tmp=function(){var r=new a(null);return r.words=new Array(Math.ceil(this.n/13)),r},tt.prototype.ireduce=function(r){var u=r,g;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),g=u.bitLength();while(g>this.n);var w=g<this.n?-1:u.ucmp(this.p);return w===0?(u.words[0]=0,u.length=1):w>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},tt.prototype.split=function(r,u){r.iushrn(this.n,0,u)},tt.prototype.imulK=function(r){return r.imul(this.k)};function nt(){tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}h(nt,tt),nt.prototype.split=function(r,u){for(var g=4194303,w=Math.min(r.length,9),b=0;b<w;b++)u.words[b]=r.words[b];if(u.length=w,r.length<=9){r.words[0]=0,r.length=1;return}var B=r.words[9];for(u.words[u.length++]=B&g,b=10;b<r.length;b++){var S=r.words[b]|0;r.words[b-10]=(S&g)<<4|B>>>22,B=S}B>>>=22,r.words[b-10]=B,B===0&&r.length>10?r.length-=10:r.length-=9},nt.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var u=0,g=0;g<r.length;g++){var w=r.words[g]|0;u+=w*977,r.words[g]=u&67108863,u=w*64+(u/67108864|0)}return r.words[r.length-1]===0&&(r.length--,r.words[r.length-1]===0&&r.length--),r};function ut(){tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}h(ut,tt);function j(){tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}h(j,tt);function $(){tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}h($,tt),$.prototype.imulK=function(r){for(var u=0,g=0;g<r.length;g++){var w=(r.words[g]|0)*19+u,b=w&67108863;w>>>=26,r.words[g]=b,u=w}return u!==0&&(r.words[r.length++]=u),r},a._prime=function(r){if(K[r])return K[r];var u;if(r==="k256")u=new nt;else if(r==="p224")u=new ut;else if(r==="p192")u=new j;else if(r==="p25519")u=new $;else throw new Error("Unknown prime "+r);return K[r]=u,u};function z(v){if(typeof v=="string"){var r=a._prime(v);this.m=r.p,this.prime=r}else n(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}z.prototype._verify1=function(r){n(r.negative===0,"red works only with positives"),n(r.red,"red works only with red numbers")},z.prototype._verify2=function(r,u){n((r.negative|u.negative)===0,"red works only with positives"),n(r.red&&r.red===u.red,"red works only with red numbers")},z.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):(L(r,r.umod(this.m)._forceRed(this)),r)},z.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},z.prototype.add=function(r,u){this._verify2(r,u);var g=r.add(u);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},z.prototype.iadd=function(r,u){this._verify2(r,u);var g=r.iadd(u);return g.cmp(this.m)>=0&&g.isub(this.m),g},z.prototype.sub=function(r,u){this._verify2(r,u);var g=r.sub(u);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},z.prototype.isub=function(r,u){this._verify2(r,u);var g=r.isub(u);return g.cmpn(0)<0&&g.iadd(this.m),g},z.prototype.shl=function(r,u){return this._verify1(r),this.imod(r.ushln(u))},z.prototype.imul=function(r,u){return this._verify2(r,u),this.imod(r.imul(u))},z.prototype.mul=function(r,u){return this._verify2(r,u),this.imod(r.mul(u))},z.prototype.isqr=function(r){return this.imul(r,r.clone())},z.prototype.sqr=function(r){return this.mul(r,r)},z.prototype.sqrt=function(r){if(r.isZero())return r.clone();var u=this.m.andln(3);if(n(u%2===1),u===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(r,g)}for(var w=this.m.subn(1),b=0;!w.isZero()&&w.andln(1)===0;)b++,w.iushrn(1);n(!w.isZero());var B=new a(1).toRed(this),S=B.redNeg(),y=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new a(2*s*s).toRed(this);this.pow(s,y).cmp(S)!==0;)s.redIAdd(S);for(var f=this.pow(s,w),M=this.pow(r,w.addn(1).iushrn(1)),A=this.pow(r,w),C=b;A.cmp(B)!==0;){for(var G=A,Q=0;G.cmp(B)!==0;Q++)G=G.redSqr();n(Q<C);var ct=this.pow(f,new a(1).iushln(C-Q-1));M=M.redMul(ct),f=ct.redSqr(),A=A.redMul(f),C=Q}return M},z.prototype.invm=function(r){var u=r._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},z.prototype.pow=function(r,u){if(u.isZero())return new a(1).toRed(this);if(u.cmpn(1)===0)return r.clone();var g=4,w=new Array(1<<g);w[0]=new a(1).toRed(this),w[1]=r;for(var b=2;b<w.length;b++)w[b]=this.mul(w[b-1],r);var B=w[0],S=0,y=0,s=u.bitLength()%26;for(s===0&&(s=26),b=u.length-1;b>=0;b--){for(var f=u.words[b],M=s-1;M>=0;M--){var A=f>>M&1;if(B!==w[0]&&(B=this.sqr(B)),A===0&&S===0){y=0;continue}S<<=1,S|=A,y++,!(y!==g&&(b!==0||M!==0))&&(B=this.mul(B,w[S]),y=0,S=0)}s=26}return B},z.prototype.convertTo=function(r){var u=r.umod(this.m);return u===r?u.clone():u},z.prototype.convertFrom=function(r){var u=r.clone();return u.red=null,u},a.mont=function(r){return new V(r)};function V(v){z.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}h(V,z),V.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},V.prototype.convertFrom=function(r){var u=this.imod(r.mul(this.rinv));return u.red=null,u},V.prototype.imul=function(r,u){if(r.isZero()||u.isZero())return r.words[0]=0,r.length=1,r;var g=r.imul(u),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(w).iushrn(this.shift),B=b;return b.cmp(this.m)>=0?B=b.isub(this.m):b.cmpn(0)<0&&(B=b.iadd(this.m)),B._forceRed(this)},V.prototype.mul=function(r,u){if(r.isZero()||u.isZero())return new a(0)._forceRed(this);var g=r.mul(u),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(w).iushrn(this.shift),B=b;return b.cmp(this.m)>=0?B=b.isub(this.m):b.cmpn(0)<0&&(B=b.iadd(this.m)),B._forceRed(this)},V.prototype.invm=function(r){var u=this.imod(r._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(c,xe)}(Va)),Sn}var Ya=Xa();const as=Ai(Ya);var Qn,cs;function Ja(){if(cs)return Qn;cs=1;var c=Do().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),h=0;h<n.length;h++)n[h]=255;for(var a=0;a<e.length;a++){var p=e.charAt(a),d=p.charCodeAt(0);if(n[d]!==255)throw new TypeError(p+" is ambiguous");n[d]=a}var x=e.length,I=e.charAt(0),L=Math.log(x)/Math.log(256),R=Math.log(256)/Math.log(x);function P(U){if((Array.isArray(U)||U instanceof Uint8Array)&&(U=c.from(U)),!c.isBuffer(U))throw new TypeError("Expected Buffer");if(U.length===0)return"";for(var O=0,Z=0,W=0,D=U.length;W!==D&&U[W]===0;)W++,O++;for(var ot=(D-W)*R+1>>>0,K=new Uint8Array(ot);W!==D;){for(var tt=U[W],nt=0,ut=ot-1;(tt!==0||nt<Z)&&ut!==-1;ut--,nt++)tt+=256*K[ut]>>>0,K[ut]=tt%x>>>0,tt=tt/x>>>0;if(tt!==0)throw new Error("Non-zero carry");Z=nt,W++}for(var j=ot-Z;j!==ot&&K[j]===0;)j++;for(var $=I.repeat(O);j<ot;++j)$+=e.charAt(K[j]);return $}function F(U){if(typeof U!="string")throw new TypeError("Expected String");if(U.length===0)return c.alloc(0);for(var O=0,Z=0,W=0;U[O]===I;)Z++,O++;for(var D=(U.length-O)*L+1>>>0,ot=new Uint8Array(D);U[O];){var K=n[U.charCodeAt(O)];if(K===255)return;for(var tt=0,nt=D-1;(K!==0||tt<W)&&nt!==-1;nt--,tt++)K+=x*ot[nt]>>>0,ot[nt]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");W=tt,O++}for(var ut=D-W;ut!==D&&ot[ut]===0;)ut++;var j=c.allocUnsafe(Z+(D-ut));j.fill(0,0,Z);for(var $=Z;ut!==D;)j[$++]=ot[ut++];return j}function N(U){var O=F(U);if(O)return O;throw new Error("Non-base"+x+" character")}return{encode:P,decodeUnsafe:F,decode:N}}return Qn=t,Qn}var ti,us;function fo(){if(us)return ti;us=1;var c=Ja(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return ti=c(t),ti}var Qa=fo();const te=Ai(Qa),tc=(c,t,e)=>c&t^~c&e,ec=(c,t,e)=>c&t^c&e^t&e,rc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),De=new Uint32Array(64);class lo extends io{constructor(){super(64,32,8,!1),this.A=qe[0]|0,this.B=qe[1]|0,this.C=qe[2]|0,this.D=qe[3]|0,this.E=qe[4]|0,this.F=qe[5]|0,this.G=qe[6]|0,this.H=qe[7]|0}get(){const{A:t,B:e,C:n,D:h,E:a,F:p,G:d,H:x}=this;return[t,e,n,h,a,p,d,x]}set(t,e,n,h,a,p,d,x){this.A=t|0,this.B=e|0,this.C=n|0,this.D=h|0,this.E=a|0,this.F=p|0,this.G=d|0,this.H=x|0}process(t,e){for(let R=0;R<16;R++,e+=4)De[R]=t.getUint32(e,!1);for(let R=16;R<64;R++){const P=De[R-15],F=De[R-2],N=Se(P,7)^Se(P,18)^P>>>3,U=Se(F,17)^Se(F,19)^F>>>10;De[R]=U+De[R-7]+N+De[R-16]|0}let{A:n,B:h,C:a,D:p,E:d,F:x,G:I,H:L}=this;for(let R=0;R<64;R++){const P=Se(d,6)^Se(d,11)^Se(d,25),F=L+P+tc(d,x,I)+rc[R]+De[R]|0,U=(Se(n,2)^Se(n,13)^Se(n,22))+ec(n,h,a)|0;L=I,I=x,x=d,d=p+F|0,p=a,a=h,h=n,n=F+U|0}n=n+this.A|0,h=h+this.B|0,a=a+this.C|0,p=p+this.D|0,d=d+this.E|0,x=x+this.F|0,I=I+this.G|0,L=L+this.H|0,this.set(n,h,a,p,d,x,I,L)}roundClean(){De.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class nc extends lo{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const yi=br(()=>new lo);br(()=>new nc);var pe={},An={},ic={get exports(){return An},set exports(c){An=c}},hs;function sc(){return hs||(hs=1,function(c){(function(t,e){function n(v,r){if(!v)throw new Error(r||"Assertion failed")}function h(v,r){v.super_=r;var u=function(){};u.prototype=r.prototype,v.prototype=new u,v.prototype.constructor=v}function a(v,r,u){if(a.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((r==="le"||r==="be")&&(u=r,r=10),this._init(v||0,r||10,u||"be"))}typeof t=="object"?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;var p;try{typeof window<"u"&&typeof window.Buffer<"u"?p=window.Buffer:p=eo.Buffer}catch{}a.isBN=function(r){return r instanceof a?!0:r!==null&&typeof r=="object"&&r.constructor.wordSize===a.wordSize&&Array.isArray(r.words)},a.max=function(r,u){return r.cmp(u)>0?r:u},a.min=function(r,u){return r.cmp(u)<0?r:u},a.prototype._init=function(r,u,g){if(typeof r=="number")return this._initNumber(r,u,g);if(typeof r=="object")return this._initArray(r,u,g);u==="hex"&&(u=16),n(u===(u|0)&&u>=2&&u<=36),r=r.toString().replace(/\s+/g,"");var w=0;r[0]==="-"&&(w++,this.negative=1),w<r.length&&(u===16?this._parseHex(r,w,g):(this._parseBase(r,u,w),g==="le"&&this._initArray(this.toArray(),u,g)))},a.prototype._initNumber=function(r,u,g){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[r&67108863],this.length=1):r<4503599627370496?(this.words=[r&67108863,r/67108864&67108863],this.length=2):(n(r<9007199254740992),this.words=[r&67108863,r/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),u,g)},a.prototype._initArray=function(r,u,g){if(n(typeof r.length=="number"),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var b,B,S=0;if(g==="be")for(w=r.length-1,b=0;w>=0;w-=3)B=r[w]|r[w-1]<<8|r[w-2]<<16,this.words[b]|=B<<S&67108863,this.words[b+1]=B>>>26-S&67108863,S+=24,S>=26&&(S-=26,b++);else if(g==="le")for(w=0,b=0;w<r.length;w+=3)B=r[w]|r[w+1]<<8|r[w+2]<<16,this.words[b]|=B<<S&67108863,this.words[b+1]=B>>>26-S&67108863,S+=24,S>=26&&(S-=26,b++);return this._strip()};function d(v,r){var u=v.charCodeAt(r);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;n(!1,"Invalid character in "+v)}function x(v,r,u){var g=d(v,u);return u-1>=r&&(g|=d(v,u-1)<<4),g}a.prototype._parseHex=function(r,u,g){this.length=Math.ceil((r.length-u)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var b=0,B=0,S;if(g==="be")for(w=r.length-1;w>=u;w-=2)S=x(r,u,w)<<b,this.words[B]|=S&67108863,b>=18?(b-=18,B+=1,this.words[B]|=S>>>26):b+=8;else{var y=r.length-u;for(w=y%2===0?u+1:u;w<r.length;w+=2)S=x(r,u,w)<<b,this.words[B]|=S&67108863,b>=18?(b-=18,B+=1,this.words[B]|=S>>>26):b+=8}this._strip()};function I(v,r,u,g){for(var w=0,b=0,B=Math.min(v.length,u),S=r;S<B;S++){var y=v.charCodeAt(S)-48;w*=g,y>=49?b=y-49+10:y>=17?b=y-17+10:b=y,n(y>=0&&b<g,"Invalid character"),w+=b}return w}a.prototype._parseBase=function(r,u,g){this.words=[0],this.length=1;for(var w=0,b=1;b<=67108863;b*=u)w++;w--,b=b/u|0;for(var B=r.length-g,S=B%w,y=Math.min(B,B-S)+g,s=0,f=g;f<y;f+=w)s=I(r,f,f+w,u),this.imuln(b),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(S!==0){var M=1;for(s=I(r,f,r.length,u),f=0;f<S;f++)M*=u;this.imuln(M),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},a.prototype.copy=function(r){r.words=new Array(this.length);for(var u=0;u<this.length;u++)r.words[u]=this.words[u];r.length=this.length,r.negative=this.negative,r.red=this.red};function L(v,r){v.words=r.words,v.length=r.length,v.negative=r.negative,v.red=r.red}if(a.prototype._move=function(r){L(r,this)},a.prototype.clone=function(){var r=new a(null);return this.copy(r),r},a.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=R}catch{a.prototype.inspect=R}else a.prototype.inspect=R;function R(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],F=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(r,u){r=r||10,u=u|0||1;var g;if(r===16||r==="hex"){g="";for(var w=0,b=0,B=0;B<this.length;B++){var S=this.words[B],y=((S<<w|b)&16777215).toString(16);b=S>>>24-w&16777215,w+=2,w>=26&&(w-=26,B--),b!==0||B!==this.length-1?g=P[6-y.length]+y+g:g=y+g}for(b!==0&&(g=b.toString(16)+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(r===(r|0)&&r>=2&&r<=36){var s=F[r],f=N[r];g="";var M=this.clone();for(M.negative=0;!M.isZero();){var A=M.modrn(f).toString(r);M=M.idivn(f),M.isZero()?g=A+g:g=P[s-A.length]+A+g}for(this.isZero()&&(g="0"+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var r=this.words[0];return this.length===2?r+=this.words[1]*67108864:this.length===3&&this.words[2]===1?r+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-r:r},a.prototype.toJSON=function(){return this.toString(16,2)},p&&(a.prototype.toBuffer=function(r,u){return this.toArrayLike(p,r,u)}),a.prototype.toArray=function(r,u){return this.toArrayLike(Array,r,u)};var U=function(r,u){return r.allocUnsafe?r.allocUnsafe(u):new r(u)};a.prototype.toArrayLike=function(r,u,g){this._strip();var w=this.byteLength(),b=g||Math.max(1,w);n(w<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0");var B=U(r,b),S=u==="le"?"LE":"BE";return this["_toArrayLike"+S](B,w),B},a.prototype._toArrayLikeLE=function(r,u){for(var g=0,w=0,b=0,B=0;b<this.length;b++){var S=this.words[b]<<B|w;r[g++]=S&255,g<r.length&&(r[g++]=S>>8&255),g<r.length&&(r[g++]=S>>16&255),B===6?(g<r.length&&(r[g++]=S>>24&255),w=0,B=0):(w=S>>>24,B+=2)}if(g<r.length)for(r[g++]=w;g<r.length;)r[g++]=0},a.prototype._toArrayLikeBE=function(r,u){for(var g=r.length-1,w=0,b=0,B=0;b<this.length;b++){var S=this.words[b]<<B|w;r[g--]=S&255,g>=0&&(r[g--]=S>>8&255),g>=0&&(r[g--]=S>>16&255),B===6?(g>=0&&(r[g--]=S>>24&255),w=0,B=0):(w=S>>>24,B+=2)}if(g>=0)for(r[g--]=w;g>=0;)r[g--]=0},Math.clz32?a.prototype._countBits=function(r){return 32-Math.clz32(r)}:a.prototype._countBits=function(r){var u=r,g=0;return u>=4096&&(g+=13,u>>>=13),u>=64&&(g+=7,u>>>=7),u>=8&&(g+=4,u>>>=4),u>=2&&(g+=2,u>>>=2),g+u},a.prototype._zeroBits=function(r){if(r===0)return 26;var u=r,g=0;return u&8191||(g+=13,u>>>=13),u&127||(g+=7,u>>>=7),u&15||(g+=4,u>>>=4),u&3||(g+=2,u>>>=2),u&1||g++,g},a.prototype.bitLength=function(){var r=this.words[this.length-1],u=this._countBits(r);return(this.length-1)*26+u};function O(v){for(var r=new Array(v.bitLength()),u=0;u<r.length;u++){var g=u/26|0,w=u%26;r[u]=v.words[g]>>>w&1}return r}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,u=0;u<this.length;u++){var g=this._zeroBits(this.words[u]);if(r+=g,g!==26)break}return r},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(r){return this.negative!==0?this.abs().inotn(r).iaddn(1):this.clone()},a.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var u=0;u<r.length;u++)this.words[u]=this.words[u]|r.words[u];return this._strip()},a.prototype.ior=function(r){return n((this.negative|r.negative)===0),this.iuor(r)},a.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},a.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},a.prototype.iuand=function(r){var u;this.length>r.length?u=r:u=this;for(var g=0;g<u.length;g++)this.words[g]=this.words[g]&r.words[g];return this.length=u.length,this._strip()},a.prototype.iand=function(r){return n((this.negative|r.negative)===0),this.iuand(r)},a.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},a.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},a.prototype.iuxor=function(r){var u,g;this.length>r.length?(u=this,g=r):(u=r,g=this);for(var w=0;w<g.length;w++)this.words[w]=u.words[w]^g.words[w];if(this!==u)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=u.length,this._strip()},a.prototype.ixor=function(r){return n((this.negative|r.negative)===0),this.iuxor(r)},a.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},a.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},a.prototype.inotn=function(r){n(typeof r=="number"&&r>=0);var u=Math.ceil(r/26)|0,g=r%26;this._expand(u),g>0&&u--;for(var w=0;w<u;w++)this.words[w]=~this.words[w]&67108863;return g>0&&(this.words[w]=~this.words[w]&67108863>>26-g),this._strip()},a.prototype.notn=function(r){return this.clone().inotn(r)},a.prototype.setn=function(r,u){n(typeof r=="number"&&r>=0);var g=r/26|0,w=r%26;return this._expand(g+1),u?this.words[g]=this.words[g]|1<<w:this.words[g]=this.words[g]&~(1<<w),this._strip()},a.prototype.iadd=function(r){var u;if(this.negative!==0&&r.negative===0)return this.negative=0,u=this.isub(r),this.negative^=1,this._normSign();if(this.negative===0&&r.negative!==0)return r.negative=0,u=this.isub(r),r.negative=1,u._normSign();var g,w;this.length>r.length?(g=this,w=r):(g=r,w=this);for(var b=0,B=0;B<w.length;B++)u=(g.words[B]|0)+(w.words[B]|0)+b,this.words[B]=u&67108863,b=u>>>26;for(;b!==0&&B<g.length;B++)u=(g.words[B]|0)+b,this.words[B]=u&67108863,b=u>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;B<g.length;B++)this.words[B]=g.words[B];return this},a.prototype.add=function(r){var u;return r.negative!==0&&this.negative===0?(r.negative=0,u=this.sub(r),r.negative^=1,u):r.negative===0&&this.negative!==0?(this.negative=0,u=r.sub(this),this.negative=1,u):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},a.prototype.isub=function(r){if(r.negative!==0){r.negative=0;var u=this.iadd(r);return r.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var g=this.cmp(r);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,b;g>0?(w=this,b=r):(w=r,b=this);for(var B=0,S=0;S<b.length;S++)u=(w.words[S]|0)-(b.words[S]|0)+B,B=u>>26,this.words[S]=u&67108863;for(;B!==0&&S<w.length;S++)u=(w.words[S]|0)+B,B=u>>26,this.words[S]=u&67108863;if(B===0&&S<w.length&&w!==this)for(;S<w.length;S++)this.words[S]=w.words[S];return this.length=Math.max(this.length,S),w!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(r){return this.clone().isub(r)};function Z(v,r,u){u.negative=r.negative^v.negative;var g=v.length+r.length|0;u.length=g,g=g-1|0;var w=v.words[0]|0,b=r.words[0]|0,B=w*b,S=B&67108863,y=B/67108864|0;u.words[0]=S;for(var s=1;s<g;s++){for(var f=y>>>26,M=y&67108863,A=Math.min(s,r.length-1),C=Math.max(0,s-v.length+1);C<=A;C++){var G=s-C|0;w=v.words[G]|0,b=r.words[C]|0,B=w*b+M,f+=B/67108864|0,M=B&67108863}u.words[s]=M|0,y=f|0}return y!==0?u.words[s]=y|0:u.length--,u._strip()}var W=function(r,u,g){var w=r.words,b=u.words,B=g.words,S=0,y,s,f,M=w[0]|0,A=M&8191,C=M>>>13,G=w[1]|0,Q=G&8191,ct=G>>>13,ue=w[2]|0,xt=ue&8191,Et=ue>>>13,de=w[3]|0,pt=de&8191,Mt=de>>>13,Te=w[4]|0,wt=Te&8191,_t=Te>>>13,Le=w[5]|0,Bt=Le&8191,mt=Le>>>13,ee=w[6]|0,vt=ee&8191,St=ee>>>13,ne=w[7]|0,At=ne&8191,l=ne>>>13,i=w[8]|0,o=i&8191,m=i>>>13,E=w[9]|0,_=E&8191,k=E>>>13,it=b[0]|0,rt=it&8191,et=it>>>13,yt=b[1]|0,J=yt&8191,kt=yt>>>13,Or=b[2]|0,Rt=Or&8191,Tt=Or>>>13,Nr=b[3]|0,Lt=Nr&8191,Ut=Nr>>>13,qr=b[4]|0,Ct=qr&8191,Ft=qr>>>13,Dr=b[5]|0,Pt=Dr&8191,Ot=Dr>>>13,Hr=b[6]|0,Nt=Hr&8191,qt=Hr>>>13,$r=b[7]|0,Dt=$r&8191,Ht=$r>>>13,zr=b[8]|0,$t=zr&8191,zt=zr>>>13,Kr=b[9]|0,Kt=Kr&8191,Wt=Kr>>>13;g.negative=r.negative^u.negative,g.length=19,y=Math.imul(A,rt),s=Math.imul(A,et),s=s+Math.imul(C,rt)|0,f=Math.imul(C,et);var Ve=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,y=Math.imul(Q,rt),s=Math.imul(Q,et),s=s+Math.imul(ct,rt)|0,f=Math.imul(ct,et),y=y+Math.imul(A,J)|0,s=s+Math.imul(A,kt)|0,s=s+Math.imul(C,J)|0,f=f+Math.imul(C,kt)|0;var Xe=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,y=Math.imul(xt,rt),s=Math.imul(xt,et),s=s+Math.imul(Et,rt)|0,f=Math.imul(Et,et),y=y+Math.imul(Q,J)|0,s=s+Math.imul(Q,kt)|0,s=s+Math.imul(ct,J)|0,f=f+Math.imul(ct,kt)|0,y=y+Math.imul(A,Rt)|0,s=s+Math.imul(A,Tt)|0,s=s+Math.imul(C,Rt)|0,f=f+Math.imul(C,Tt)|0;var Ye=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,y=Math.imul(pt,rt),s=Math.imul(pt,et),s=s+Math.imul(Mt,rt)|0,f=Math.imul(Mt,et),y=y+Math.imul(xt,J)|0,s=s+Math.imul(xt,kt)|0,s=s+Math.imul(Et,J)|0,f=f+Math.imul(Et,kt)|0,y=y+Math.imul(Q,Rt)|0,s=s+Math.imul(Q,Tt)|0,s=s+Math.imul(ct,Rt)|0,f=f+Math.imul(ct,Tt)|0,y=y+Math.imul(A,Lt)|0,s=s+Math.imul(A,Ut)|0,s=s+Math.imul(C,Lt)|0,f=f+Math.imul(C,Ut)|0;var Je=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Je>>>26)|0,Je&=67108863,y=Math.imul(wt,rt),s=Math.imul(wt,et),s=s+Math.imul(_t,rt)|0,f=Math.imul(_t,et),y=y+Math.imul(pt,J)|0,s=s+Math.imul(pt,kt)|0,s=s+Math.imul(Mt,J)|0,f=f+Math.imul(Mt,kt)|0,y=y+Math.imul(xt,Rt)|0,s=s+Math.imul(xt,Tt)|0,s=s+Math.imul(Et,Rt)|0,f=f+Math.imul(Et,Tt)|0,y=y+Math.imul(Q,Lt)|0,s=s+Math.imul(Q,Ut)|0,s=s+Math.imul(ct,Lt)|0,f=f+Math.imul(ct,Ut)|0,y=y+Math.imul(A,Ct)|0,s=s+Math.imul(A,Ft)|0,s=s+Math.imul(C,Ct)|0,f=f+Math.imul(C,Ft)|0;var Qe=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,y=Math.imul(Bt,rt),s=Math.imul(Bt,et),s=s+Math.imul(mt,rt)|0,f=Math.imul(mt,et),y=y+Math.imul(wt,J)|0,s=s+Math.imul(wt,kt)|0,s=s+Math.imul(_t,J)|0,f=f+Math.imul(_t,kt)|0,y=y+Math.imul(pt,Rt)|0,s=s+Math.imul(pt,Tt)|0,s=s+Math.imul(Mt,Rt)|0,f=f+Math.imul(Mt,Tt)|0,y=y+Math.imul(xt,Lt)|0,s=s+Math.imul(xt,Ut)|0,s=s+Math.imul(Et,Lt)|0,f=f+Math.imul(Et,Ut)|0,y=y+Math.imul(Q,Ct)|0,s=s+Math.imul(Q,Ft)|0,s=s+Math.imul(ct,Ct)|0,f=f+Math.imul(ct,Ft)|0,y=y+Math.imul(A,Pt)|0,s=s+Math.imul(A,Ot)|0,s=s+Math.imul(C,Pt)|0,f=f+Math.imul(C,Ot)|0;var tr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,y=Math.imul(vt,rt),s=Math.imul(vt,et),s=s+Math.imul(St,rt)|0,f=Math.imul(St,et),y=y+Math.imul(Bt,J)|0,s=s+Math.imul(Bt,kt)|0,s=s+Math.imul(mt,J)|0,f=f+Math.imul(mt,kt)|0,y=y+Math.imul(wt,Rt)|0,s=s+Math.imul(wt,Tt)|0,s=s+Math.imul(_t,Rt)|0,f=f+Math.imul(_t,Tt)|0,y=y+Math.imul(pt,Lt)|0,s=s+Math.imul(pt,Ut)|0,s=s+Math.imul(Mt,Lt)|0,f=f+Math.imul(Mt,Ut)|0,y=y+Math.imul(xt,Ct)|0,s=s+Math.imul(xt,Ft)|0,s=s+Math.imul(Et,Ct)|0,f=f+Math.imul(Et,Ft)|0,y=y+Math.imul(Q,Pt)|0,s=s+Math.imul(Q,Ot)|0,s=s+Math.imul(ct,Pt)|0,f=f+Math.imul(ct,Ot)|0,y=y+Math.imul(A,Nt)|0,s=s+Math.imul(A,qt)|0,s=s+Math.imul(C,Nt)|0,f=f+Math.imul(C,qt)|0;var er=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(er>>>26)|0,er&=67108863,y=Math.imul(At,rt),s=Math.imul(At,et),s=s+Math.imul(l,rt)|0,f=Math.imul(l,et),y=y+Math.imul(vt,J)|0,s=s+Math.imul(vt,kt)|0,s=s+Math.imul(St,J)|0,f=f+Math.imul(St,kt)|0,y=y+Math.imul(Bt,Rt)|0,s=s+Math.imul(Bt,Tt)|0,s=s+Math.imul(mt,Rt)|0,f=f+Math.imul(mt,Tt)|0,y=y+Math.imul(wt,Lt)|0,s=s+Math.imul(wt,Ut)|0,s=s+Math.imul(_t,Lt)|0,f=f+Math.imul(_t,Ut)|0,y=y+Math.imul(pt,Ct)|0,s=s+Math.imul(pt,Ft)|0,s=s+Math.imul(Mt,Ct)|0,f=f+Math.imul(Mt,Ft)|0,y=y+Math.imul(xt,Pt)|0,s=s+Math.imul(xt,Ot)|0,s=s+Math.imul(Et,Pt)|0,f=f+Math.imul(Et,Ot)|0,y=y+Math.imul(Q,Nt)|0,s=s+Math.imul(Q,qt)|0,s=s+Math.imul(ct,Nt)|0,f=f+Math.imul(ct,qt)|0,y=y+Math.imul(A,Dt)|0,s=s+Math.imul(A,Ht)|0,s=s+Math.imul(C,Dt)|0,f=f+Math.imul(C,Ht)|0;var rr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(o,rt),s=Math.imul(o,et),s=s+Math.imul(m,rt)|0,f=Math.imul(m,et),y=y+Math.imul(At,J)|0,s=s+Math.imul(At,kt)|0,s=s+Math.imul(l,J)|0,f=f+Math.imul(l,kt)|0,y=y+Math.imul(vt,Rt)|0,s=s+Math.imul(vt,Tt)|0,s=s+Math.imul(St,Rt)|0,f=f+Math.imul(St,Tt)|0,y=y+Math.imul(Bt,Lt)|0,s=s+Math.imul(Bt,Ut)|0,s=s+Math.imul(mt,Lt)|0,f=f+Math.imul(mt,Ut)|0,y=y+Math.imul(wt,Ct)|0,s=s+Math.imul(wt,Ft)|0,s=s+Math.imul(_t,Ct)|0,f=f+Math.imul(_t,Ft)|0,y=y+Math.imul(pt,Pt)|0,s=s+Math.imul(pt,Ot)|0,s=s+Math.imul(Mt,Pt)|0,f=f+Math.imul(Mt,Ot)|0,y=y+Math.imul(xt,Nt)|0,s=s+Math.imul(xt,qt)|0,s=s+Math.imul(Et,Nt)|0,f=f+Math.imul(Et,qt)|0,y=y+Math.imul(Q,Dt)|0,s=s+Math.imul(Q,Ht)|0,s=s+Math.imul(ct,Dt)|0,f=f+Math.imul(ct,Ht)|0,y=y+Math.imul(A,$t)|0,s=s+Math.imul(A,zt)|0,s=s+Math.imul(C,$t)|0,f=f+Math.imul(C,zt)|0;var nr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(_,rt),s=Math.imul(_,et),s=s+Math.imul(k,rt)|0,f=Math.imul(k,et),y=y+Math.imul(o,J)|0,s=s+Math.imul(o,kt)|0,s=s+Math.imul(m,J)|0,f=f+Math.imul(m,kt)|0,y=y+Math.imul(At,Rt)|0,s=s+Math.imul(At,Tt)|0,s=s+Math.imul(l,Rt)|0,f=f+Math.imul(l,Tt)|0,y=y+Math.imul(vt,Lt)|0,s=s+Math.imul(vt,Ut)|0,s=s+Math.imul(St,Lt)|0,f=f+Math.imul(St,Ut)|0,y=y+Math.imul(Bt,Ct)|0,s=s+Math.imul(Bt,Ft)|0,s=s+Math.imul(mt,Ct)|0,f=f+Math.imul(mt,Ft)|0,y=y+Math.imul(wt,Pt)|0,s=s+Math.imul(wt,Ot)|0,s=s+Math.imul(_t,Pt)|0,f=f+Math.imul(_t,Ot)|0,y=y+Math.imul(pt,Nt)|0,s=s+Math.imul(pt,qt)|0,s=s+Math.imul(Mt,Nt)|0,f=f+Math.imul(Mt,qt)|0,y=y+Math.imul(xt,Dt)|0,s=s+Math.imul(xt,Ht)|0,s=s+Math.imul(Et,Dt)|0,f=f+Math.imul(Et,Ht)|0,y=y+Math.imul(Q,$t)|0,s=s+Math.imul(Q,zt)|0,s=s+Math.imul(ct,$t)|0,f=f+Math.imul(ct,zt)|0,y=y+Math.imul(A,Kt)|0,s=s+Math.imul(A,Wt)|0,s=s+Math.imul(C,Kt)|0,f=f+Math.imul(C,Wt)|0;var ir=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(_,J),s=Math.imul(_,kt),s=s+Math.imul(k,J)|0,f=Math.imul(k,kt),y=y+Math.imul(o,Rt)|0,s=s+Math.imul(o,Tt)|0,s=s+Math.imul(m,Rt)|0,f=f+Math.imul(m,Tt)|0,y=y+Math.imul(At,Lt)|0,s=s+Math.imul(At,Ut)|0,s=s+Math.imul(l,Lt)|0,f=f+Math.imul(l,Ut)|0,y=y+Math.imul(vt,Ct)|0,s=s+Math.imul(vt,Ft)|0,s=s+Math.imul(St,Ct)|0,f=f+Math.imul(St,Ft)|0,y=y+Math.imul(Bt,Pt)|0,s=s+Math.imul(Bt,Ot)|0,s=s+Math.imul(mt,Pt)|0,f=f+Math.imul(mt,Ot)|0,y=y+Math.imul(wt,Nt)|0,s=s+Math.imul(wt,qt)|0,s=s+Math.imul(_t,Nt)|0,f=f+Math.imul(_t,qt)|0,y=y+Math.imul(pt,Dt)|0,s=s+Math.imul(pt,Ht)|0,s=s+Math.imul(Mt,Dt)|0,f=f+Math.imul(Mt,Ht)|0,y=y+Math.imul(xt,$t)|0,s=s+Math.imul(xt,zt)|0,s=s+Math.imul(Et,$t)|0,f=f+Math.imul(Et,zt)|0,y=y+Math.imul(Q,Kt)|0,s=s+Math.imul(Q,Wt)|0,s=s+Math.imul(ct,Kt)|0,f=f+Math.imul(ct,Wt)|0;var sr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(_,Rt),s=Math.imul(_,Tt),s=s+Math.imul(k,Rt)|0,f=Math.imul(k,Tt),y=y+Math.imul(o,Lt)|0,s=s+Math.imul(o,Ut)|0,s=s+Math.imul(m,Lt)|0,f=f+Math.imul(m,Ut)|0,y=y+Math.imul(At,Ct)|0,s=s+Math.imul(At,Ft)|0,s=s+Math.imul(l,Ct)|0,f=f+Math.imul(l,Ft)|0,y=y+Math.imul(vt,Pt)|0,s=s+Math.imul(vt,Ot)|0,s=s+Math.imul(St,Pt)|0,f=f+Math.imul(St,Ot)|0,y=y+Math.imul(Bt,Nt)|0,s=s+Math.imul(Bt,qt)|0,s=s+Math.imul(mt,Nt)|0,f=f+Math.imul(mt,qt)|0,y=y+Math.imul(wt,Dt)|0,s=s+Math.imul(wt,Ht)|0,s=s+Math.imul(_t,Dt)|0,f=f+Math.imul(_t,Ht)|0,y=y+Math.imul(pt,$t)|0,s=s+Math.imul(pt,zt)|0,s=s+Math.imul(Mt,$t)|0,f=f+Math.imul(Mt,zt)|0,y=y+Math.imul(xt,Kt)|0,s=s+Math.imul(xt,Wt)|0,s=s+Math.imul(Et,Kt)|0,f=f+Math.imul(Et,Wt)|0;var or=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(_,Lt),s=Math.imul(_,Ut),s=s+Math.imul(k,Lt)|0,f=Math.imul(k,Ut),y=y+Math.imul(o,Ct)|0,s=s+Math.imul(o,Ft)|0,s=s+Math.imul(m,Ct)|0,f=f+Math.imul(m,Ft)|0,y=y+Math.imul(At,Pt)|0,s=s+Math.imul(At,Ot)|0,s=s+Math.imul(l,Pt)|0,f=f+Math.imul(l,Ot)|0,y=y+Math.imul(vt,Nt)|0,s=s+Math.imul(vt,qt)|0,s=s+Math.imul(St,Nt)|0,f=f+Math.imul(St,qt)|0,y=y+Math.imul(Bt,Dt)|0,s=s+Math.imul(Bt,Ht)|0,s=s+Math.imul(mt,Dt)|0,f=f+Math.imul(mt,Ht)|0,y=y+Math.imul(wt,$t)|0,s=s+Math.imul(wt,zt)|0,s=s+Math.imul(_t,$t)|0,f=f+Math.imul(_t,zt)|0,y=y+Math.imul(pt,Kt)|0,s=s+Math.imul(pt,Wt)|0,s=s+Math.imul(Mt,Kt)|0,f=f+Math.imul(Mt,Wt)|0;var ar=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(_,Ct),s=Math.imul(_,Ft),s=s+Math.imul(k,Ct)|0,f=Math.imul(k,Ft),y=y+Math.imul(o,Pt)|0,s=s+Math.imul(o,Ot)|0,s=s+Math.imul(m,Pt)|0,f=f+Math.imul(m,Ot)|0,y=y+Math.imul(At,Nt)|0,s=s+Math.imul(At,qt)|0,s=s+Math.imul(l,Nt)|0,f=f+Math.imul(l,qt)|0,y=y+Math.imul(vt,Dt)|0,s=s+Math.imul(vt,Ht)|0,s=s+Math.imul(St,Dt)|0,f=f+Math.imul(St,Ht)|0,y=y+Math.imul(Bt,$t)|0,s=s+Math.imul(Bt,zt)|0,s=s+Math.imul(mt,$t)|0,f=f+Math.imul(mt,zt)|0,y=y+Math.imul(wt,Kt)|0,s=s+Math.imul(wt,Wt)|0,s=s+Math.imul(_t,Kt)|0,f=f+Math.imul(_t,Wt)|0;var cr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(_,Pt),s=Math.imul(_,Ot),s=s+Math.imul(k,Pt)|0,f=Math.imul(k,Ot),y=y+Math.imul(o,Nt)|0,s=s+Math.imul(o,qt)|0,s=s+Math.imul(m,Nt)|0,f=f+Math.imul(m,qt)|0,y=y+Math.imul(At,Dt)|0,s=s+Math.imul(At,Ht)|0,s=s+Math.imul(l,Dt)|0,f=f+Math.imul(l,Ht)|0,y=y+Math.imul(vt,$t)|0,s=s+Math.imul(vt,zt)|0,s=s+Math.imul(St,$t)|0,f=f+Math.imul(St,zt)|0,y=y+Math.imul(Bt,Kt)|0,s=s+Math.imul(Bt,Wt)|0,s=s+Math.imul(mt,Kt)|0,f=f+Math.imul(mt,Wt)|0;var ur=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(_,Nt),s=Math.imul(_,qt),s=s+Math.imul(k,Nt)|0,f=Math.imul(k,qt),y=y+Math.imul(o,Dt)|0,s=s+Math.imul(o,Ht)|0,s=s+Math.imul(m,Dt)|0,f=f+Math.imul(m,Ht)|0,y=y+Math.imul(At,$t)|0,s=s+Math.imul(At,zt)|0,s=s+Math.imul(l,$t)|0,f=f+Math.imul(l,zt)|0,y=y+Math.imul(vt,Kt)|0,s=s+Math.imul(vt,Wt)|0,s=s+Math.imul(St,Kt)|0,f=f+Math.imul(St,Wt)|0;var hr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(hr>>>26)|0,hr&=67108863,y=Math.imul(_,Dt),s=Math.imul(_,Ht),s=s+Math.imul(k,Dt)|0,f=Math.imul(k,Ht),y=y+Math.imul(o,$t)|0,s=s+Math.imul(o,zt)|0,s=s+Math.imul(m,$t)|0,f=f+Math.imul(m,zt)|0,y=y+Math.imul(At,Kt)|0,s=s+Math.imul(At,Wt)|0,s=s+Math.imul(l,Kt)|0,f=f+Math.imul(l,Wt)|0;var fr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(fr>>>26)|0,fr&=67108863,y=Math.imul(_,$t),s=Math.imul(_,zt),s=s+Math.imul(k,$t)|0,f=Math.imul(k,zt),y=y+Math.imul(o,Kt)|0,s=s+Math.imul(o,Wt)|0,s=s+Math.imul(m,Kt)|0,f=f+Math.imul(m,Wt)|0;var lr=(S+y|0)+((s&8191)<<13)|0;S=(f+(s>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(_,Kt),s=Math.imul(_,Wt),s=s+Math.imul(k,Kt)|0,f=Math.imul(k,Wt);var dr=(S+y|0)+((s&8191)<<13)|0;return S=(f+(s>>>13)|0)+(dr>>>26)|0,dr&=67108863,B[0]=Ve,B[1]=Xe,B[2]=Ye,B[3]=Je,B[4]=Qe,B[5]=tr,B[6]=er,B[7]=rr,B[8]=nr,B[9]=ir,B[10]=sr,B[11]=or,B[12]=ar,B[13]=cr,B[14]=ur,B[15]=hr,B[16]=fr,B[17]=lr,B[18]=dr,S!==0&&(B[19]=S,g.length++),g};Math.imul||(W=Z);function D(v,r,u){u.negative=r.negative^v.negative,u.length=v.length+r.length;for(var g=0,w=0,b=0;b<u.length-1;b++){var B=w;w=0;for(var S=g&67108863,y=Math.min(b,r.length-1),s=Math.max(0,b-v.length+1);s<=y;s++){var f=b-s,M=v.words[f]|0,A=r.words[s]|0,C=M*A,G=C&67108863;B=B+(C/67108864|0)|0,G=G+S|0,S=G&67108863,B=B+(G>>>26)|0,w+=B>>>26,B&=67108863}u.words[b]=S,g=B,B=w}return g!==0?u.words[b]=g:u.length--,u._strip()}function ot(v,r,u){return D(v,r,u)}a.prototype.mulTo=function(r,u){var g,w=this.length+r.length;return this.length===10&&r.length===10?g=W(this,r,u):w<63?g=Z(this,r,u):w<1024?g=D(this,r,u):g=ot(this,r,u),g},a.prototype.mul=function(r){var u=new a(null);return u.words=new Array(this.length+r.length),this.mulTo(r,u)},a.prototype.mulf=function(r){var u=new a(null);return u.words=new Array(this.length+r.length),ot(this,r,u)},a.prototype.imul=function(r){return this.clone().mulTo(r,this)},a.prototype.imuln=function(r){var u=r<0;u&&(r=-r),n(typeof r=="number"),n(r<67108864);for(var g=0,w=0;w<this.length;w++){var b=(this.words[w]|0)*r,B=(b&67108863)+(g&67108863);g>>=26,g+=b/67108864|0,g+=B>>>26,this.words[w]=B&67108863}return g!==0&&(this.words[w]=g,this.length++),u?this.ineg():this},a.prototype.muln=function(r){return this.clone().imuln(r)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(r){var u=O(r);if(u.length===0)return new a(1);for(var g=this,w=0;w<u.length&&u[w]===0;w++,g=g.sqr());if(++w<u.length)for(var b=g.sqr();w<u.length;w++,b=b.sqr())u[w]!==0&&(g=g.mul(b));return g},a.prototype.iushln=function(r){n(typeof r=="number"&&r>=0);var u=r%26,g=(r-u)/26,w=67108863>>>26-u<<26-u,b;if(u!==0){var B=0;for(b=0;b<this.length;b++){var S=this.words[b]&w,y=(this.words[b]|0)-S<<u;this.words[b]=y|B,B=S>>>26-u}B&&(this.words[b]=B,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this._strip()},a.prototype.ishln=function(r){return n(this.negative===0),this.iushln(r)},a.prototype.iushrn=function(r,u,g){n(typeof r=="number"&&r>=0);var w;u?w=(u-u%26)/26:w=0;var b=r%26,B=Math.min((r-b)/26,this.length),S=67108863^67108863>>>b<<b,y=g;if(w-=B,w=Math.max(0,w),y){for(var s=0;s<B;s++)y.words[s]=this.words[s];y.length=B}if(B!==0)if(this.length>B)for(this.length-=B,s=0;s<this.length;s++)this.words[s]=this.words[s+B];else this.words[0]=0,this.length=1;var f=0;for(s=this.length-1;s>=0&&(f!==0||s>=w);s--){var M=this.words[s]|0;this.words[s]=f<<26-b|M>>>b,f=M&S}return y&&f!==0&&(y.words[y.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(r,u,g){return n(this.negative===0),this.iushrn(r,u,g)},a.prototype.shln=function(r){return this.clone().ishln(r)},a.prototype.ushln=function(r){return this.clone().iushln(r)},a.prototype.shrn=function(r){return this.clone().ishrn(r)},a.prototype.ushrn=function(r){return this.clone().iushrn(r)},a.prototype.testn=function(r){n(typeof r=="number"&&r>=0);var u=r%26,g=(r-u)/26,w=1<<u;if(this.length<=g)return!1;var b=this.words[g];return!!(b&w)},a.prototype.imaskn=function(r){n(typeof r=="number"&&r>=0);var u=r%26,g=(r-u)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(u!==0&&g++,this.length=Math.min(g,this.length),u!==0){var w=67108863^67108863>>>u<<u;this.words[this.length-1]&=w}return this._strip()},a.prototype.maskn=function(r){return this.clone().imaskn(r)},a.prototype.iaddn=function(r){return n(typeof r=="number"),n(r<67108864),r<0?this.isubn(-r):this.negative!==0?this.length===1&&(this.words[0]|0)<=r?(this.words[0]=r-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},a.prototype._iaddn=function(r){this.words[0]+=r;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},a.prototype.isubn=function(r){if(n(typeof r=="number"),n(r<67108864),r<0)return this.iaddn(-r);if(this.negative!==0)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},a.prototype.addn=function(r){return this.clone().iaddn(r)},a.prototype.subn=function(r){return this.clone().isubn(r)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(r,u,g){var w=r.length+g,b;this._expand(w);var B,S=0;for(b=0;b<r.length;b++){B=(this.words[b+g]|0)+S;var y=(r.words[b]|0)*u;B-=y&67108863,S=(B>>26)-(y/67108864|0),this.words[b+g]=B&67108863}for(;b<this.length-g;b++)B=(this.words[b+g]|0)+S,S=B>>26,this.words[b+g]=B&67108863;if(S===0)return this._strip();for(n(S===-1),S=0,b=0;b<this.length;b++)B=-(this.words[b]|0)+S,S=B>>26,this.words[b]=B&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(r,u){var g=this.length-r.length,w=this.clone(),b=r,B=b.words[b.length-1]|0,S=this._countBits(B);g=26-S,g!==0&&(b=b.ushln(g),w.iushln(g),B=b.words[b.length-1]|0);var y=w.length-b.length,s;if(u!=="mod"){s=new a(null),s.length=y+1,s.words=new Array(s.length);for(var f=0;f<s.length;f++)s.words[f]=0}var M=w.clone()._ishlnsubmul(b,1,y);M.negative===0&&(w=M,s&&(s.words[y]=1));for(var A=y-1;A>=0;A--){var C=(w.words[b.length+A]|0)*67108864+(w.words[b.length+A-1]|0);for(C=Math.min(C/B|0,67108863),w._ishlnsubmul(b,C,A);w.negative!==0;)C--,w.negative=0,w._ishlnsubmul(b,1,A),w.isZero()||(w.negative^=1);s&&(s.words[A]=C)}return s&&s._strip(),w._strip(),u!=="div"&&g!==0&&w.iushrn(g),{div:s||null,mod:w}},a.prototype.divmod=function(r,u,g){if(n(!r.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var w,b,B;return this.negative!==0&&r.negative===0?(B=this.neg().divmod(r,u),u!=="mod"&&(w=B.div.neg()),u!=="div"&&(b=B.mod.neg(),g&&b.negative!==0&&b.iadd(r)),{div:w,mod:b}):this.negative===0&&r.negative!==0?(B=this.divmod(r.neg(),u),u!=="mod"&&(w=B.div.neg()),{div:w,mod:B.mod}):this.negative&r.negative?(B=this.neg().divmod(r.neg(),u),u!=="div"&&(b=B.mod.neg(),g&&b.negative!==0&&b.isub(r)),{div:B.div,mod:b}):r.length>this.length||this.cmp(r)<0?{div:new a(0),mod:this}:r.length===1?u==="div"?{div:this.divn(r.words[0]),mod:null}:u==="mod"?{div:null,mod:new a(this.modrn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new a(this.modrn(r.words[0]))}:this._wordDiv(r,u)},a.prototype.div=function(r){return this.divmod(r,"div",!1).div},a.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},a.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},a.prototype.divRound=function(r){var u=this.divmod(r);if(u.mod.isZero())return u.div;var g=u.div.negative!==0?u.mod.isub(r):u.mod,w=r.ushrn(1),b=r.andln(1),B=g.cmp(w);return B<0||b===1&&B===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},a.prototype.modrn=function(r){var u=r<0;u&&(r=-r),n(r<=67108863);for(var g=(1<<26)%r,w=0,b=this.length-1;b>=0;b--)w=(g*w+(this.words[b]|0))%r;return u?-w:w},a.prototype.modn=function(r){return this.modrn(r)},a.prototype.idivn=function(r){var u=r<0;u&&(r=-r),n(r<=67108863);for(var g=0,w=this.length-1;w>=0;w--){var b=(this.words[w]|0)+g*67108864;this.words[w]=b/r|0,g=b%r}return this._strip(),u?this.ineg():this},a.prototype.divn=function(r){return this.clone().idivn(r)},a.prototype.egcd=function(r){n(r.negative===0),n(!r.isZero());var u=this,g=r.clone();u.negative!==0?u=u.umod(r):u=u.clone();for(var w=new a(1),b=new a(0),B=new a(0),S=new a(1),y=0;u.isEven()&&g.isEven();)u.iushrn(1),g.iushrn(1),++y;for(var s=g.clone(),f=u.clone();!u.isZero();){for(var M=0,A=1;!(u.words[0]&A)&&M<26;++M,A<<=1);if(M>0)for(u.iushrn(M);M-- >0;)(w.isOdd()||b.isOdd())&&(w.iadd(s),b.isub(f)),w.iushrn(1),b.iushrn(1);for(var C=0,G=1;!(g.words[0]&G)&&C<26;++C,G<<=1);if(C>0)for(g.iushrn(C);C-- >0;)(B.isOdd()||S.isOdd())&&(B.iadd(s),S.isub(f)),B.iushrn(1),S.iushrn(1);u.cmp(g)>=0?(u.isub(g),w.isub(B),b.isub(S)):(g.isub(u),B.isub(w),S.isub(b))}return{a:B,b:S,gcd:g.iushln(y)}},a.prototype._invmp=function(r){n(r.negative===0),n(!r.isZero());var u=this,g=r.clone();u.negative!==0?u=u.umod(r):u=u.clone();for(var w=new a(1),b=new a(0),B=g.clone();u.cmpn(1)>0&&g.cmpn(1)>0;){for(var S=0,y=1;!(u.words[0]&y)&&S<26;++S,y<<=1);if(S>0)for(u.iushrn(S);S-- >0;)w.isOdd()&&w.iadd(B),w.iushrn(1);for(var s=0,f=1;!(g.words[0]&f)&&s<26;++s,f<<=1);if(s>0)for(g.iushrn(s);s-- >0;)b.isOdd()&&b.iadd(B),b.iushrn(1);u.cmp(g)>=0?(u.isub(g),w.isub(b)):(g.isub(u),b.isub(w))}var M;return u.cmpn(1)===0?M=w:M=b,M.cmpn(0)<0&&M.iadd(r),M},a.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var u=this.clone(),g=r.clone();u.negative=0,g.negative=0;for(var w=0;u.isEven()&&g.isEven();w++)u.iushrn(1),g.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=u.cmp(g);if(b<0){var B=u;u=g,g=B}else if(b===0||g.cmpn(1)===0)break;u.isub(g)}while(!0);return g.iushln(w)},a.prototype.invm=function(r){return this.egcd(r).a.umod(r)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(r){return this.words[0]&r},a.prototype.bincn=function(r){n(typeof r=="number");var u=r%26,g=(r-u)/26,w=1<<u;if(this.length<=g)return this._expand(g+1),this.words[g]|=w,this;for(var b=w,B=g;b!==0&&B<this.length;B++){var S=this.words[B]|0;S+=b,b=S>>>26,S&=67108863,this.words[B]=S}return b!==0&&(this.words[B]=b,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(r){var u=r<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var g;if(this.length>1)g=1;else{u&&(r=-r),n(r<=67108863,"Number is too big");var w=this.words[0]|0;g=w===r?0:w<r?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(r){if(this.negative!==0&&r.negative===0)return-1;if(this.negative===0&&r.negative!==0)return 1;var u=this.ucmp(r);return this.negative!==0?-u|0:u},a.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var u=0,g=this.length-1;g>=0;g--){var w=this.words[g]|0,b=r.words[g]|0;if(w!==b){w<b?u=-1:w>b&&(u=1);break}}return u},a.prototype.gtn=function(r){return this.cmpn(r)===1},a.prototype.gt=function(r){return this.cmp(r)===1},a.prototype.gten=function(r){return this.cmpn(r)>=0},a.prototype.gte=function(r){return this.cmp(r)>=0},a.prototype.ltn=function(r){return this.cmpn(r)===-1},a.prototype.lt=function(r){return this.cmp(r)===-1},a.prototype.lten=function(r){return this.cmpn(r)<=0},a.prototype.lte=function(r){return this.cmp(r)<=0},a.prototype.eqn=function(r){return this.cmpn(r)===0},a.prototype.eq=function(r){return this.cmp(r)===0},a.red=function(r){return new z(r)},a.prototype.toRed=function(r){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),r.convertTo(this)._forceRed(r)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(r){return this.red=r,this},a.prototype.forceRed=function(r){return n(!this.red,"Already a number in reduction context"),this._forceRed(r)},a.prototype.redAdd=function(r){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},a.prototype.redIAdd=function(r){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},a.prototype.redSub=function(r){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},a.prototype.redISub=function(r){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},a.prototype.redShl=function(r){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},a.prototype.redMul=function(r){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},a.prototype.redIMul=function(r){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(r){return n(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var K={k256:null,p224:null,p192:null,p25519:null};function tt(v,r){this.name=v,this.p=new a(r,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}tt.prototype._tmp=function(){var r=new a(null);return r.words=new Array(Math.ceil(this.n/13)),r},tt.prototype.ireduce=function(r){var u=r,g;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),g=u.bitLength();while(g>this.n);var w=g<this.n?-1:u.ucmp(this.p);return w===0?(u.words[0]=0,u.length=1):w>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},tt.prototype.split=function(r,u){r.iushrn(this.n,0,u)},tt.prototype.imulK=function(r){return r.imul(this.k)};function nt(){tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}h(nt,tt),nt.prototype.split=function(r,u){for(var g=4194303,w=Math.min(r.length,9),b=0;b<w;b++)u.words[b]=r.words[b];if(u.length=w,r.length<=9){r.words[0]=0,r.length=1;return}var B=r.words[9];for(u.words[u.length++]=B&g,b=10;b<r.length;b++){var S=r.words[b]|0;r.words[b-10]=(S&g)<<4|B>>>22,B=S}B>>>=22,r.words[b-10]=B,B===0&&r.length>10?r.length-=10:r.length-=9},nt.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var u=0,g=0;g<r.length;g++){var w=r.words[g]|0;u+=w*977,r.words[g]=u&67108863,u=w*64+(u/67108864|0)}return r.words[r.length-1]===0&&(r.length--,r.words[r.length-1]===0&&r.length--),r};function ut(){tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}h(ut,tt);function j(){tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}h(j,tt);function $(){tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}h($,tt),$.prototype.imulK=function(r){for(var u=0,g=0;g<r.length;g++){var w=(r.words[g]|0)*19+u,b=w&67108863;w>>>=26,r.words[g]=b,u=w}return u!==0&&(r.words[r.length++]=u),r},a._prime=function(r){if(K[r])return K[r];var u;if(r==="k256")u=new nt;else if(r==="p224")u=new ut;else if(r==="p192")u=new j;else if(r==="p25519")u=new $;else throw new Error("Unknown prime "+r);return K[r]=u,u};function z(v){if(typeof v=="string"){var r=a._prime(v);this.m=r.p,this.prime=r}else n(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}z.prototype._verify1=function(r){n(r.negative===0,"red works only with positives"),n(r.red,"red works only with red numbers")},z.prototype._verify2=function(r,u){n((r.negative|u.negative)===0,"red works only with positives"),n(r.red&&r.red===u.red,"red works only with red numbers")},z.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):(L(r,r.umod(this.m)._forceRed(this)),r)},z.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},z.prototype.add=function(r,u){this._verify2(r,u);var g=r.add(u);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},z.prototype.iadd=function(r,u){this._verify2(r,u);var g=r.iadd(u);return g.cmp(this.m)>=0&&g.isub(this.m),g},z.prototype.sub=function(r,u){this._verify2(r,u);var g=r.sub(u);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},z.prototype.isub=function(r,u){this._verify2(r,u);var g=r.isub(u);return g.cmpn(0)<0&&g.iadd(this.m),g},z.prototype.shl=function(r,u){return this._verify1(r),this.imod(r.ushln(u))},z.prototype.imul=function(r,u){return this._verify2(r,u),this.imod(r.imul(u))},z.prototype.mul=function(r,u){return this._verify2(r,u),this.imod(r.mul(u))},z.prototype.isqr=function(r){return this.imul(r,r.clone())},z.prototype.sqr=function(r){return this.mul(r,r)},z.prototype.sqrt=function(r){if(r.isZero())return r.clone();var u=this.m.andln(3);if(n(u%2===1),u===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(r,g)}for(var w=this.m.subn(1),b=0;!w.isZero()&&w.andln(1)===0;)b++,w.iushrn(1);n(!w.isZero());var B=new a(1).toRed(this),S=B.redNeg(),y=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new a(2*s*s).toRed(this);this.pow(s,y).cmp(S)!==0;)s.redIAdd(S);for(var f=this.pow(s,w),M=this.pow(r,w.addn(1).iushrn(1)),A=this.pow(r,w),C=b;A.cmp(B)!==0;){for(var G=A,Q=0;G.cmp(B)!==0;Q++)G=G.redSqr();n(Q<C);var ct=this.pow(f,new a(1).iushln(C-Q-1));M=M.redMul(ct),f=ct.redSqr(),A=A.redMul(f),C=Q}return M},z.prototype.invm=function(r){var u=r._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},z.prototype.pow=function(r,u){if(u.isZero())return new a(1).toRed(this);if(u.cmpn(1)===0)return r.clone();var g=4,w=new Array(1<<g);w[0]=new a(1).toRed(this),w[1]=r;for(var b=2;b<w.length;b++)w[b]=this.mul(w[b-1],r);var B=w[0],S=0,y=0,s=u.bitLength()%26;for(s===0&&(s=26),b=u.length-1;b>=0;b--){for(var f=u.words[b],M=s-1;M>=0;M--){var A=f>>M&1;if(B!==w[0]&&(B=this.sqr(B)),A===0&&S===0){y=0;continue}S<<=1,S|=A,y++,!(y!==g&&(b!==0||M!==0))&&(B=this.mul(B,w[S]),y=0,S=0)}s=26}return B},z.prototype.convertTo=function(r){var u=r.umod(this.m);return u===r?u.clone():u},z.prototype.convertFrom=function(r){var u=r.clone();return u.red=null,u},a.mont=function(r){return new V(r)};function V(v){z.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}h(V,z),V.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},V.prototype.convertFrom=function(r){var u=this.imod(r.mul(this.rinv));return u.red=null,u},V.prototype.imul=function(r,u){if(r.isZero()||u.isZero())return r.words[0]=0,r.length=1,r;var g=r.imul(u),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(w).iushrn(this.shift),B=b;return b.cmp(this.m)>=0?B=b.isub(this.m):b.cmpn(0)<0&&(B=b.iadd(this.m)),B._forceRed(this)},V.prototype.mul=function(r,u){if(r.isZero()||u.isZero())return new a(0)._forceRed(this);var g=r.mul(u),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(w).iushrn(this.shift),B=b;return b.cmp(this.m)>=0?B=b.isub(this.m):b.cmpn(0)<0&&(B=b.iadd(this.m)),B._forceRed(this)},V.prototype.invm=function(r){var u=this.imod(r._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(c,xe)}(ic)),An}function Ce(c,t,e){return t<=c&&c<=e}function Hn(c){if(c===void 0)return{};if(c===Object(c))return c;throw TypeError("Could not convert argument to dictionary")}function oc(c){for(var t=String(c),e=t.length,n=0,h=[];n<e;){var a=t.charCodeAt(n);if(a<55296||a>57343)h.push(a);else if(56320<=a&&a<=57343)h.push(65533);else if(55296<=a&&a<=56319)if(n===e-1)h.push(65533);else{var p=c.charCodeAt(n+1);if(56320<=p&&p<=57343){var d=a&1023,x=p&1023;h.push(65536+(d<<10)+x),n+=1}else h.push(65533)}n+=1}return h}function ac(c){for(var t="",e=0;e<c.length;++e){var n=c[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var In=-1;function Ni(c){this.tokens=[].slice.call(c)}Ni.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():In},prepend:function(c){if(Array.isArray(c))for(var t=c;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(c)},push:function(c){if(Array.isArray(c))for(var t=c;t.length;)this.tokens.push(t.shift());else this.tokens.push(c)}};var Tr=-1;function ei(c,t){if(c)throw TypeError("Decoder error");return t||65533}var kn="utf-8";function Rn(c,t){if(!(this instanceof Rn))return new Rn(c,t);if(c=c!==void 0?String(c).toLowerCase():kn,c!==kn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Hn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Rn.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Hn(e),this._streaming||(this._decoder=new cc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var h=new Ni(n),a=[],p;!h.endOfStream()&&(p=this._decoder.handler(h,h.read()),p!==Tr);)p!==null&&(Array.isArray(p)?a.push.apply(a,p):a.push(p));if(!this._streaming){do{if(p=this._decoder.handler(h,h.read()),p===Tr)break;p!==null&&(Array.isArray(p)?a.push.apply(a,p):a.push(p))}while(!h.endOfStream());this._decoder=null}return a.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(a[0]===65279?(this._BOMseen=!0,a.shift()):this._BOMseen=!0),ac(a)}};function Tn(c,t){if(!(this instanceof Tn))return new Tn(c,t);if(c=c!==void 0?String(c).toLowerCase():kn,c!==kn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Hn(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}Tn.prototype={encode:function(t,e){t=t?String(t):"",e=Hn(e),this._streaming||(this._encoder=new uc(this._options)),this._streaming=Boolean(e.stream);for(var n=[],h=new Ni(oc(t)),a;!h.endOfStream()&&(a=this._encoder.handler(h,h.read()),a!==Tr);)Array.isArray(a)?n.push.apply(n,a):n.push(a);if(!this._streaming){for(;a=this._encoder.handler(h,h.read()),a!==Tr;)Array.isArray(a)?n.push.apply(n,a):n.push(a);this._encoder=null}return new Uint8Array(n)}};function cc(c){var t=c.fatal,e=0,n=0,h=0,a=128,p=191;this.handler=function(d,x){if(x===In&&h!==0)return h=0,ei(t);if(x===In)return Tr;if(h===0){if(Ce(x,0,127))return x;if(Ce(x,194,223))h=1,e=x-192;else if(Ce(x,224,239))x===224&&(a=160),x===237&&(p=159),h=2,e=x-224;else if(Ce(x,240,244))x===240&&(a=144),x===244&&(p=143),h=3,e=x-240;else return ei(t);return e=e<<6*h,null}if(!Ce(x,a,p))return e=h=n=0,a=128,p=191,d.prepend(x),ei(t);if(a=128,p=191,n+=1,e+=x-128<<6*(h-n),n!==h)return null;var I=e;return e=h=n=0,I}}function uc(c){c.fatal,this.handler=function(t,e){if(e===In)return Tr;if(Ce(e,0,127))return e;var n,h;Ce(e,128,2047)?(n=1,h=192):Ce(e,2048,65535)?(n=2,h=224):Ce(e,65536,1114111)&&(n=3,h=240);for(var a=[(e>>6*n)+h];n>0;){var p=e>>6*(n-1);a.push(128|p&63),n-=1}return a}}const hc=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Rn,TextEncoder:Tn},Symbol.toStringTag,{value:"Module"})),fc=Ze(hc);var fs;function lc(){if(fs)return pe;fs=1;var c=xe&&xe.__createBinding||(Object.create?function(j,$,z,V){V===void 0&&(V=z),Object.defineProperty(j,V,{enumerable:!0,get:function(){return $[z]}})}:function(j,$,z,V){V===void 0&&(V=z),j[V]=$[z]}),t=xe&&xe.__setModuleDefault||(Object.create?function(j,$){Object.defineProperty(j,"default",{enumerable:!0,value:$})}:function(j,$){j.default=$}),e=xe&&xe.__decorate||function(j,$,z,V){var v=arguments.length,r=v<3?$:V===null?V=Object.getOwnPropertyDescriptor($,z):V,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(j,$,z,V);else for(var g=j.length-1;g>=0;g--)(u=j[g])&&(r=(v<3?u(r):v>3?u($,z,r):u($,z))||r);return v>3&&r&&Object.defineProperty($,z,r),r},n=xe&&xe.__importStar||function(j){if(j&&j.__esModule)return j;var $={};if(j!=null)for(var z in j)z!=="default"&&Object.hasOwnProperty.call(j,z)&&c($,j,z);return t($,j),$},h=xe&&xe.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(pe,"__esModule",{value:!0}),pe.deserializeUnchecked=pe.deserialize=pe.serialize=pe.BinaryReader=pe.BinaryWriter=pe.BorshError=pe.baseDecode=pe.baseEncode=void 0;const a=h(sc()),p=h(fo()),d=n(fc),x=typeof TextDecoder!="function"?d.TextDecoder:TextDecoder,I=new x("utf-8",{fatal:!0});function L(j){return typeof j=="string"&&(j=Buffer.from(j,"utf8")),p.default.encode(Buffer.from(j))}pe.baseEncode=L;function R(j){return Buffer.from(p.default.decode(j))}pe.baseDecode=R;const P=1024;class F extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}pe.BorshError=F;class N{constructor(){this.buf=Buffer.alloc(P),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(P)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(Buffer.from(new a.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(Buffer.from(new a.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(Buffer.from(new a.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(Buffer.from(new a.default($).toArray("le",64)))}writeBuffer($){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),$,Buffer.alloc(P)]),this.length+=$.length}writeString($){this.maybeResize();const z=Buffer.from($,"utf8");this.writeU32(z.length),this.writeBuffer(z)}writeFixedArray($){this.writeBuffer(Buffer.from($))}writeArray($,z){this.maybeResize(),this.writeU32($.length);for(const V of $)this.maybeResize(),z(V)}toArray(){return this.buf.subarray(0,this.length)}}pe.BinaryWriter=N;function U(j,$,z){const V=z.value;z.value=function(...v){try{return V.apply(this,v)}catch(r){if(r instanceof RangeError){const u=r.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new F("Reached the end of buffer when deserializing")}throw r}}}class O{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new a.default($,"le")}readU128(){const $=this.readBuffer(16);return new a.default($,"le")}readU256(){const $=this.readBuffer(32);return new a.default($,"le")}readU512(){const $=this.readBuffer(64);return new a.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new F(`Expected buffer length ${$} isn't within bounds`);const z=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,z}readString(){const $=this.readU32(),z=this.readBuffer($);try{return I.decode(z)}catch(V){throw new F(`Error decoding UTF-8 string: ${V}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const z=this.readU32(),V=Array();for(let v=0;v<z;++v)V.push($());return V}}e([U],O.prototype,"readU8",null),e([U],O.prototype,"readU16",null),e([U],O.prototype,"readU32",null),e([U],O.prototype,"readU64",null),e([U],O.prototype,"readU128",null),e([U],O.prototype,"readU256",null),e([U],O.prototype,"readU512",null),e([U],O.prototype,"readString",null),e([U],O.prototype,"readFixedArray",null),e([U],O.prototype,"readArray",null),pe.BinaryReader=O;function Z(j){return j.charAt(0).toUpperCase()+j.slice(1)}function W(j,$,z,V,v){try{if(typeof V=="string")v[`write${Z(V)}`](z);else if(V instanceof Array)if(typeof V[0]=="number"){if(z.length!==V[0])throw new F(`Expecting byte array of length ${V[0]}, but got ${z.length} bytes`);v.writeFixedArray(z)}else if(V.length===2&&typeof V[1]=="number"){if(z.length!==V[1])throw new F(`Expecting byte array of length ${V[1]}, but got ${z.length} bytes`);for(let r=0;r<V[1];r++)W(j,null,z[r],V[0],v)}else v.writeArray(z,r=>{W(j,$,r,V[0],v)});else if(V.kind!==void 0)switch(V.kind){case"option":{z==null?v.writeU8(0):(v.writeU8(1),W(j,$,z,V.type,v));break}case"map":{v.writeU32(z.size),z.forEach((r,u)=>{W(j,$,u,V.key,v),W(j,$,r,V.value,v)});break}default:throw new F(`FieldType ${V} unrecognized`)}else D(j,z,v)}catch(r){throw r instanceof F&&r.addToFieldPath($),r}}function D(j,$,z){if(typeof $.borshSerialize=="function"){$.borshSerialize(z);return}const V=j.get($.constructor);if(!V)throw new F(`Class ${$.constructor.name} is missing in schema`);if(V.kind==="struct")V.fields.map(([v,r])=>{W(j,v,$[v],r,z)});else if(V.kind==="enum"){const v=$[V.field];for(let r=0;r<V.values.length;++r){const[u,g]=V.values[r];if(u===v){z.writeU8(r),W(j,u,$[u],g,z);break}}}else throw new F(`Unexpected schema kind: ${V.kind} for ${$.constructor.name}`)}function ot(j,$,z=N){const V=new z;return D(j,$,V),V.toArray()}pe.serialize=ot;function K(j,$,z,V){try{if(typeof z=="string")return V[`read${Z(z)}`]();if(z instanceof Array){if(typeof z[0]=="number")return V.readFixedArray(z[0]);if(typeof z[1]=="number"){const v=[];for(let r=0;r<z[1];r++)v.push(K(j,null,z[0],V));return v}else return V.readArray(()=>K(j,$,z[0],V))}if(z.kind==="option")return V.readU8()?K(j,$,z.type,V):void 0;if(z.kind==="map"){let v=new Map;const r=V.readU32();for(let u=0;u<r;u++){const g=K(j,$,z.key,V),w=K(j,$,z.value,V);v.set(g,w)}return v}return tt(j,z,V)}catch(v){throw v instanceof F&&v.addToFieldPath($),v}}function tt(j,$,z){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(z);const V=j.get($);if(!V)throw new F(`Class ${$.name} is missing in schema`);if(V.kind==="struct"){const v={};for(const[r,u]of j.get($).fields)v[r]=K(j,r,u,z);return new $(v)}if(V.kind==="enum"){const v=z.readU8();if(v>=V.values.length)throw new F(`Enum index: ${v} is out of range`);const[r,u]=V.values[v],g=K(j,r,u,z);return new $({[r]:g})}throw new F(`Unexpected schema kind: ${V.kind} for ${$.constructor.name}`)}function nt(j,$,z,V=O){const v=new V(z),r=tt(j,$,v);if(v.offset<z.length)throw new F(`Unexpected ${z.length-v.offset} bytes after deserialized data`);return r}pe.deserialize=nt;function ut(j,$,z,V=O){const v=new V(z);return tt(j,$,v)}return pe.deserializeUnchecked=ut,pe}var ri=lc(),H={},ni={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ls;function dc(){return ls||(ls=1,function(c){const t=Js(),e=Qs(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.Buffer=d,c.SlowBuffer=W,c.INSPECT_MAX_BYTES=50;const h=2147483647;c.kMaxLength=h,d.TYPED_ARRAY_SUPPORT=a(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const l=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(l,i),l.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function p(l){if(l>h)throw new RangeError('The value "'+l+'" is invalid for option "size"');const i=new Uint8Array(l);return Object.setPrototypeOf(i,d.prototype),i}function d(l,i,o){if(typeof l=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(l)}return x(l,i,o)}d.poolSize=8192;function x(l,i,o){if(typeof l=="string")return P(l,i);if(ArrayBuffer.isView(l))return N(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(ee(l,ArrayBuffer)||l&&ee(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(l,SharedArrayBuffer)||l&&ee(l.buffer,SharedArrayBuffer)))return U(l,i,o);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const m=l.valueOf&&l.valueOf();if(m!=null&&m!==l)return d.from(m,i,o);const E=O(l);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return d.from(l[Symbol.toPrimitive]("string"),i,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}d.from=function(l,i,o){return x(l,i,o)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function I(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function L(l,i,o){return I(l),l<=0?p(l):i!==void 0?typeof o=="string"?p(l).fill(i,o):p(l).fill(i):p(l)}d.alloc=function(l,i,o){return L(l,i,o)};function R(l){return I(l),p(l<0?0:Z(l)|0)}d.allocUnsafe=function(l){return R(l)},d.allocUnsafeSlow=function(l){return R(l)};function P(l,i){if((typeof i!="string"||i==="")&&(i="utf8"),!d.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const o=D(l,i)|0;let m=p(o);const E=m.write(l,i);return E!==o&&(m=m.slice(0,E)),m}function F(l){const i=l.length<0?0:Z(l.length)|0,o=p(i);for(let m=0;m<i;m+=1)o[m]=l[m]&255;return o}function N(l){if(ee(l,Uint8Array)){const i=new Uint8Array(l);return U(i.buffer,i.byteOffset,i.byteLength)}return F(l)}function U(l,i,o){if(i<0||l.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<i+(o||0))throw new RangeError('"length" is outside of buffer bounds');let m;return i===void 0&&o===void 0?m=new Uint8Array(l):o===void 0?m=new Uint8Array(l,i):m=new Uint8Array(l,i,o),Object.setPrototypeOf(m,d.prototype),m}function O(l){if(d.isBuffer(l)){const i=Z(l.length)|0,o=p(i);return o.length===0||l.copy(o,0,0,i),o}if(l.length!==void 0)return typeof l.length!="number"||vt(l.length)?p(0):F(l);if(l.type==="Buffer"&&Array.isArray(l.data))return F(l.data)}function Z(l){if(l>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return l|0}function W(l){return+l!=l&&(l=0),d.alloc(+l)}d.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==d.prototype},d.compare=function(i,o){if(ee(i,Uint8Array)&&(i=d.from(i,i.offset,i.byteLength)),ee(o,Uint8Array)&&(o=d.from(o,o.offset,o.byteLength)),!d.isBuffer(i)||!d.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;let m=i.length,E=o.length;for(let _=0,k=Math.min(m,E);_<k;++_)if(i[_]!==o[_]){m=i[_],E=o[_];break}return m<E?-1:E<m?1:0},d.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(i,o){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return d.alloc(0);let m;if(o===void 0)for(o=0,m=0;m<i.length;++m)o+=i[m].length;const E=d.allocUnsafe(o);let _=0;for(m=0;m<i.length;++m){let k=i[m];if(ee(k,Uint8Array))_+k.length>E.length?(d.isBuffer(k)||(k=d.from(k)),k.copy(E,_)):Uint8Array.prototype.set.call(E,k,_);else if(d.isBuffer(k))k.copy(E,_);else throw new TypeError('"list" argument must be an Array of Buffers');_+=k.length}return E};function D(l,i){if(d.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||ee(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const o=l.length,m=arguments.length>2&&arguments[2]===!0;if(!m&&o===0)return 0;let E=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return wt(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return Bt(l).length;default:if(E)return m?-1:wt(l).length;i=(""+i).toLowerCase(),E=!0}}d.byteLength=D;function ot(l,i,o){let m=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,i>>>=0,o<=i))return"";for(l||(l="utf8");;)switch(l){case"hex":return B(this,i,o);case"utf8":case"utf-8":return r(this,i,o);case"ascii":return w(this,i,o);case"latin1":case"binary":return b(this,i,o);case"base64":return v(this,i,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,i,o);default:if(m)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),m=!0}}d.prototype._isBuffer=!0;function K(l,i,o){const m=l[i];l[i]=l[o],l[o]=m}d.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<i;o+=2)K(this,o,o+1);return this},d.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<i;o+=4)K(this,o,o+3),K(this,o+1,o+2);return this},d.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<i;o+=8)K(this,o,o+7),K(this,o+1,o+6),K(this,o+2,o+5),K(this,o+3,o+4);return this},d.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?r(this,0,i):ot.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(i){if(!d.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:d.compare(this,i)===0},d.prototype.inspect=function(){let i="";const o=c.INSPECT_MAX_BYTES;return i=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(i+=" ... "),"<Buffer "+i+">"},n&&(d.prototype[n]=d.prototype.inspect),d.prototype.compare=function(i,o,m,E,_){if(ee(i,Uint8Array)&&(i=d.from(i,i.offset,i.byteLength)),!d.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(o===void 0&&(o=0),m===void 0&&(m=i?i.length:0),E===void 0&&(E=0),_===void 0&&(_=this.length),o<0||m>i.length||E<0||_>this.length)throw new RangeError("out of range index");if(E>=_&&o>=m)return 0;if(E>=_)return-1;if(o>=m)return 1;if(o>>>=0,m>>>=0,E>>>=0,_>>>=0,this===i)return 0;let k=_-E,it=m-o;const rt=Math.min(k,it),et=this.slice(E,_),yt=i.slice(o,m);for(let J=0;J<rt;++J)if(et[J]!==yt[J]){k=et[J],it=yt[J];break}return k<it?-1:it<k?1:0};function tt(l,i,o,m,E){if(l.length===0)return-1;if(typeof o=="string"?(m=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,vt(o)&&(o=E?0:l.length-1),o<0&&(o=l.length+o),o>=l.length){if(E)return-1;o=l.length-1}else if(o<0)if(E)o=0;else return-1;if(typeof i=="string"&&(i=d.from(i,m)),d.isBuffer(i))return i.length===0?-1:nt(l,i,o,m,E);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(l,i,o):Uint8Array.prototype.lastIndexOf.call(l,i,o):nt(l,[i],o,m,E);throw new TypeError("val must be string, number or Buffer")}function nt(l,i,o,m,E){let _=1,k=l.length,it=i.length;if(m!==void 0&&(m=String(m).toLowerCase(),m==="ucs2"||m==="ucs-2"||m==="utf16le"||m==="utf-16le")){if(l.length<2||i.length<2)return-1;_=2,k/=2,it/=2,o/=2}function rt(yt,J){return _===1?yt[J]:yt.readUInt16BE(J*_)}let et;if(E){let yt=-1;for(et=o;et<k;et++)if(rt(l,et)===rt(i,yt===-1?0:et-yt)){if(yt===-1&&(yt=et),et-yt+1===it)return yt*_}else yt!==-1&&(et-=et-yt),yt=-1}else for(o+it>k&&(o=k-it),et=o;et>=0;et--){let yt=!0;for(let J=0;J<it;J++)if(rt(l,et+J)!==rt(i,J)){yt=!1;break}if(yt)return et}return-1}d.prototype.includes=function(i,o,m){return this.indexOf(i,o,m)!==-1},d.prototype.indexOf=function(i,o,m){return tt(this,i,o,m,!0)},d.prototype.lastIndexOf=function(i,o,m){return tt(this,i,o,m,!1)};function ut(l,i,o,m){o=Number(o)||0;const E=l.length-o;m?(m=Number(m),m>E&&(m=E)):m=E;const _=i.length;m>_/2&&(m=_/2);let k;for(k=0;k<m;++k){const it=parseInt(i.substr(k*2,2),16);if(vt(it))return k;l[o+k]=it}return k}function j(l,i,o,m){return mt(wt(i,l.length-o),l,o,m)}function $(l,i,o,m){return mt(_t(i),l,o,m)}function z(l,i,o,m){return mt(Bt(i),l,o,m)}function V(l,i,o,m){return mt(Le(i,l.length-o),l,o,m)}d.prototype.write=function(i,o,m,E){if(o===void 0)E="utf8",m=this.length,o=0;else if(m===void 0&&typeof o=="string")E=o,m=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(m)?(m=m>>>0,E===void 0&&(E="utf8")):(E=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const _=this.length-o;if((m===void 0||m>_)&&(m=_),i.length>0&&(m<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let k=!1;for(;;)switch(E){case"hex":return ut(this,i,o,m);case"utf8":case"utf-8":return j(this,i,o,m);case"ascii":case"latin1":case"binary":return $(this,i,o,m);case"base64":return z(this,i,o,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,i,o,m);default:if(k)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),k=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function v(l,i,o){return i===0&&o===l.length?t.fromByteArray(l):t.fromByteArray(l.slice(i,o))}function r(l,i,o){o=Math.min(l.length,o);const m=[];let E=i;for(;E<o;){const _=l[E];let k=null,it=_>239?4:_>223?3:_>191?2:1;if(E+it<=o){let rt,et,yt,J;switch(it){case 1:_<128&&(k=_);break;case 2:rt=l[E+1],(rt&192)===128&&(J=(_&31)<<6|rt&63,J>127&&(k=J));break;case 3:rt=l[E+1],et=l[E+2],(rt&192)===128&&(et&192)===128&&(J=(_&15)<<12|(rt&63)<<6|et&63,J>2047&&(J<55296||J>57343)&&(k=J));break;case 4:rt=l[E+1],et=l[E+2],yt=l[E+3],(rt&192)===128&&(et&192)===128&&(yt&192)===128&&(J=(_&15)<<18|(rt&63)<<12|(et&63)<<6|yt&63,J>65535&&J<1114112&&(k=J))}}k===null?(k=65533,it=1):k>65535&&(k-=65536,m.push(k>>>10&1023|55296),k=56320|k&1023),m.push(k),E+=it}return g(m)}const u=4096;function g(l){const i=l.length;if(i<=u)return String.fromCharCode.apply(String,l);let o="",m=0;for(;m<i;)o+=String.fromCharCode.apply(String,l.slice(m,m+=u));return o}function w(l,i,o){let m="";o=Math.min(l.length,o);for(let E=i;E<o;++E)m+=String.fromCharCode(l[E]&127);return m}function b(l,i,o){let m="";o=Math.min(l.length,o);for(let E=i;E<o;++E)m+=String.fromCharCode(l[E]);return m}function B(l,i,o){const m=l.length;(!i||i<0)&&(i=0),(!o||o<0||o>m)&&(o=m);let E="";for(let _=i;_<o;++_)E+=St[l[_]];return E}function S(l,i,o){const m=l.slice(i,o);let E="";for(let _=0;_<m.length-1;_+=2)E+=String.fromCharCode(m[_]+m[_+1]*256);return E}d.prototype.slice=function(i,o){const m=this.length;i=~~i,o=o===void 0?m:~~o,i<0?(i+=m,i<0&&(i=0)):i>m&&(i=m),o<0?(o+=m,o<0&&(o=0)):o>m&&(o=m),o<i&&(o=i);const E=this.subarray(i,o);return Object.setPrototypeOf(E,d.prototype),E};function y(l,i,o){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+i>o)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(i,o,m){i=i>>>0,o=o>>>0,m||y(i,o,this.length);let E=this[i],_=1,k=0;for(;++k<o&&(_*=256);)E+=this[i+k]*_;return E},d.prototype.readUintBE=d.prototype.readUIntBE=function(i,o,m){i=i>>>0,o=o>>>0,m||y(i,o,this.length);let E=this[i+--o],_=1;for(;o>0&&(_*=256);)E+=this[i+--o]*_;return E},d.prototype.readUint8=d.prototype.readUInt8=function(i,o){return i=i>>>0,o||y(i,1,this.length),this[i]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(i,o){return i=i>>>0,o||y(i,2,this.length),this[i]|this[i+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(i,o){return i=i>>>0,o||y(i,2,this.length),this[i]<<8|this[i+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(i,o){return i=i>>>0,o||y(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(i,o){return i=i>>>0,o||y(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},d.prototype.readBigUInt64LE=ne(function(i){i=i>>>0,de(i,"offset");const o=this[i],m=this[i+7];(o===void 0||m===void 0)&&pt(i,this.length-8);const E=o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,_=this[++i]+this[++i]*2**8+this[++i]*2**16+m*2**24;return BigInt(E)+(BigInt(_)<<BigInt(32))}),d.prototype.readBigUInt64BE=ne(function(i){i=i>>>0,de(i,"offset");const o=this[i],m=this[i+7];(o===void 0||m===void 0)&&pt(i,this.length-8);const E=o*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],_=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+m;return(BigInt(E)<<BigInt(32))+BigInt(_)}),d.prototype.readIntLE=function(i,o,m){i=i>>>0,o=o>>>0,m||y(i,o,this.length);let E=this[i],_=1,k=0;for(;++k<o&&(_*=256);)E+=this[i+k]*_;return _*=128,E>=_&&(E-=Math.pow(2,8*o)),E},d.prototype.readIntBE=function(i,o,m){i=i>>>0,o=o>>>0,m||y(i,o,this.length);let E=o,_=1,k=this[i+--E];for(;E>0&&(_*=256);)k+=this[i+--E]*_;return _*=128,k>=_&&(k-=Math.pow(2,8*o)),k},d.prototype.readInt8=function(i,o){return i=i>>>0,o||y(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},d.prototype.readInt16LE=function(i,o){i=i>>>0,o||y(i,2,this.length);const m=this[i]|this[i+1]<<8;return m&32768?m|4294901760:m},d.prototype.readInt16BE=function(i,o){i=i>>>0,o||y(i,2,this.length);const m=this[i+1]|this[i]<<8;return m&32768?m|4294901760:m},d.prototype.readInt32LE=function(i,o){return i=i>>>0,o||y(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},d.prototype.readInt32BE=function(i,o){return i=i>>>0,o||y(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},d.prototype.readBigInt64LE=ne(function(i){i=i>>>0,de(i,"offset");const o=this[i],m=this[i+7];(o===void 0||m===void 0)&&pt(i,this.length-8);const E=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(m<<24);return(BigInt(E)<<BigInt(32))+BigInt(o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),d.prototype.readBigInt64BE=ne(function(i){i=i>>>0,de(i,"offset");const o=this[i],m=this[i+7];(o===void 0||m===void 0)&&pt(i,this.length-8);const E=(o<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(E)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+m)}),d.prototype.readFloatLE=function(i,o){return i=i>>>0,o||y(i,4,this.length),e.read(this,i,!0,23,4)},d.prototype.readFloatBE=function(i,o){return i=i>>>0,o||y(i,4,this.length),e.read(this,i,!1,23,4)},d.prototype.readDoubleLE=function(i,o){return i=i>>>0,o||y(i,8,this.length),e.read(this,i,!0,52,8)},d.prototype.readDoubleBE=function(i,o){return i=i>>>0,o||y(i,8,this.length),e.read(this,i,!1,52,8)};function s(l,i,o,m,E,_){if(!d.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>E||i<_)throw new RangeError('"value" argument is out of bounds');if(o+m>l.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(i,o,m,E){if(i=+i,o=o>>>0,m=m>>>0,!E){const it=Math.pow(2,8*m)-1;s(this,i,o,m,it,0)}let _=1,k=0;for(this[o]=i&255;++k<m&&(_*=256);)this[o+k]=i/_&255;return o+m},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(i,o,m,E){if(i=+i,o=o>>>0,m=m>>>0,!E){const it=Math.pow(2,8*m)-1;s(this,i,o,m,it,0)}let _=m-1,k=1;for(this[o+_]=i&255;--_>=0&&(k*=256);)this[o+_]=i/k&255;return o+m},d.prototype.writeUint8=d.prototype.writeUInt8=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,1,255,0),this[o]=i&255,o+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,2,65535,0),this[o]=i&255,this[o+1]=i>>>8,o+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=i&255,o+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=i&255,o+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4};function f(l,i,o,m,E){Et(i,m,E,l,o,7);let _=Number(i&BigInt(4294967295));l[o++]=_,_=_>>8,l[o++]=_,_=_>>8,l[o++]=_,_=_>>8,l[o++]=_;let k=Number(i>>BigInt(32)&BigInt(4294967295));return l[o++]=k,k=k>>8,l[o++]=k,k=k>>8,l[o++]=k,k=k>>8,l[o++]=k,o}function M(l,i,o,m,E){Et(i,m,E,l,o,7);let _=Number(i&BigInt(4294967295));l[o+7]=_,_=_>>8,l[o+6]=_,_=_>>8,l[o+5]=_,_=_>>8,l[o+4]=_;let k=Number(i>>BigInt(32)&BigInt(4294967295));return l[o+3]=k,k=k>>8,l[o+2]=k,k=k>>8,l[o+1]=k,k=k>>8,l[o]=k,o+8}d.prototype.writeBigUInt64LE=ne(function(i,o=0){return f(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=ne(function(i,o=0){return M(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(i,o,m,E){if(i=+i,o=o>>>0,!E){const rt=Math.pow(2,8*m-1);s(this,i,o,m,rt-1,-rt)}let _=0,k=1,it=0;for(this[o]=i&255;++_<m&&(k*=256);)i<0&&it===0&&this[o+_-1]!==0&&(it=1),this[o+_]=(i/k>>0)-it&255;return o+m},d.prototype.writeIntBE=function(i,o,m,E){if(i=+i,o=o>>>0,!E){const rt=Math.pow(2,8*m-1);s(this,i,o,m,rt-1,-rt)}let _=m-1,k=1,it=0;for(this[o+_]=i&255;--_>=0&&(k*=256);)i<0&&it===0&&this[o+_+1]!==0&&(it=1),this[o+_]=(i/k>>0)-it&255;return o+m},d.prototype.writeInt8=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=i&255,o+1},d.prototype.writeInt16LE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,2,32767,-32768),this[o]=i&255,this[o+1]=i>>>8,o+2},d.prototype.writeInt16BE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=i&255,o+2},d.prototype.writeInt32LE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,4,2147483647,-2147483648),this[o]=i&255,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},d.prototype.writeInt32BE=function(i,o,m){return i=+i,o=o>>>0,m||s(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4},d.prototype.writeBigInt64LE=ne(function(i,o=0){return f(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=ne(function(i,o=0){return M(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function A(l,i,o,m,E,_){if(o+m>l.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function C(l,i,o,m,E){return i=+i,o=o>>>0,E||A(l,i,o,4),e.write(l,i,o,m,23,4),o+4}d.prototype.writeFloatLE=function(i,o,m){return C(this,i,o,!0,m)},d.prototype.writeFloatBE=function(i,o,m){return C(this,i,o,!1,m)};function G(l,i,o,m,E){return i=+i,o=o>>>0,E||A(l,i,o,8),e.write(l,i,o,m,52,8),o+8}d.prototype.writeDoubleLE=function(i,o,m){return G(this,i,o,!0,m)},d.prototype.writeDoubleBE=function(i,o,m){return G(this,i,o,!1,m)},d.prototype.copy=function(i,o,m,E){if(!d.isBuffer(i))throw new TypeError("argument should be a Buffer");if(m||(m=0),!E&&E!==0&&(E=this.length),o>=i.length&&(o=i.length),o||(o=0),E>0&&E<m&&(E=m),E===m||i.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),i.length-o<E-m&&(E=i.length-o+m);const _=E-m;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,m,E):Uint8Array.prototype.set.call(i,this.subarray(m,E),o),_},d.prototype.fill=function(i,o,m,E){if(typeof i=="string"){if(typeof o=="string"?(E=o,o=0,m=this.length):typeof m=="string"&&(E=m,m=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!d.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(i.length===1){const k=i.charCodeAt(0);(E==="utf8"&&k<128||E==="latin1")&&(i=k)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(o<0||this.length<o||this.length<m)throw new RangeError("Out of range index");if(m<=o)return this;o=o>>>0,m=m===void 0?this.length:m>>>0,i||(i=0);let _;if(typeof i=="number")for(_=o;_<m;++_)this[_]=i;else{const k=d.isBuffer(i)?i:d.from(i,E),it=k.length;if(it===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(_=0;_<m-o;++_)this[_+o]=k[_%it]}return this};const Q={};function ct(l,i,o){Q[l]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}ct("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ct("ERR_INVALID_ARG_TYPE",function(l,i){return`The "${l}" argument must be of type number. Received type ${typeof i}`},TypeError),ct("ERR_OUT_OF_RANGE",function(l,i,o){let m=`The value of "${l}" is out of range.`,E=o;return Number.isInteger(o)&&Math.abs(o)>2**32?E=ue(String(o)):typeof o=="bigint"&&(E=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(E=ue(E)),E+="n"),m+=` It must be ${i}. Received ${E}`,m},RangeError);function ue(l){let i="",o=l.length;const m=l[0]==="-"?1:0;for(;o>=m+4;o-=3)i=`_${l.slice(o-3,o)}${i}`;return`${l.slice(0,o)}${i}`}function xt(l,i,o){de(i,"offset"),(l[i]===void 0||l[i+o]===void 0)&&pt(i,l.length-(o+1))}function Et(l,i,o,m,E,_){if(l>o||l<i){const k=typeof i=="bigint"?"n":"";let it;throw _>3?i===0||i===BigInt(0)?it=`>= 0${k} and < 2${k} ** ${(_+1)*8}${k}`:it=`>= -(2${k} ** ${(_+1)*8-1}${k}) and < 2 ** ${(_+1)*8-1}${k}`:it=`>= ${i}${k} and <= ${o}${k}`,new Q.ERR_OUT_OF_RANGE("value",it,l)}xt(m,E,_)}function de(l,i){if(typeof l!="number")throw new Q.ERR_INVALID_ARG_TYPE(i,"number",l)}function pt(l,i,o){throw Math.floor(l)!==l?(de(l,o),new Q.ERR_OUT_OF_RANGE(o||"offset","an integer",l)):i<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${i}`,l)}const Mt=/[^+/0-9A-Za-z-_]/g;function Te(l){if(l=l.split("=")[0],l=l.trim().replace(Mt,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function wt(l,i){i=i||1/0;let o;const m=l.length;let E=null;const _=[];for(let k=0;k<m;++k){if(o=l.charCodeAt(k),o>55295&&o<57344){if(!E){if(o>56319){(i-=3)>-1&&_.push(239,191,189);continue}else if(k+1===m){(i-=3)>-1&&_.push(239,191,189);continue}E=o;continue}if(o<56320){(i-=3)>-1&&_.push(239,191,189),E=o;continue}o=(E-55296<<10|o-56320)+65536}else E&&(i-=3)>-1&&_.push(239,191,189);if(E=null,o<128){if((i-=1)<0)break;_.push(o)}else if(o<2048){if((i-=2)<0)break;_.push(o>>6|192,o&63|128)}else if(o<65536){if((i-=3)<0)break;_.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((i-=4)<0)break;_.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return _}function _t(l){const i=[];for(let o=0;o<l.length;++o)i.push(l.charCodeAt(o)&255);return i}function Le(l,i){let o,m,E;const _=[];for(let k=0;k<l.length&&!((i-=2)<0);++k)o=l.charCodeAt(k),m=o>>8,E=o%256,_.push(E),_.push(m);return _}function Bt(l){return t.toByteArray(Te(l))}function mt(l,i,o,m){let E;for(E=0;E<m&&!(E+o>=i.length||E>=l.length);++E)i[E+o]=l[E];return E}function ee(l,i){return l instanceof i||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===i.name}function vt(l){return l!==l}const St=function(){const l="0123456789abcdef",i=new Array(256);for(let o=0;o<16;++o){const m=o*16;for(let E=0;E<16;++E)i[m+E]=l[o]+l[E]}return i}();function ne(l){return typeof BigInt>"u"?At:l}function At(){throw new Error("BigInt not supported")}}(ni)),ni}var ds;function pc(){if(ds)return H;ds=1,Object.defineProperty(H,"__esModule",{value:!0}),H.s16=H.s8=H.nu64be=H.u48be=H.u40be=H.u32be=H.u24be=H.u16be=H.nu64=H.u48=H.u40=H.u32=H.u24=H.u16=H.u8=H.offset=H.greedy=H.Constant=H.UTF8=H.CString=H.Blob=H.Boolean=H.BitField=H.BitStructure=H.VariantLayout=H.Union=H.UnionLayoutDiscriminator=H.UnionDiscriminator=H.Structure=H.Sequence=H.DoubleBE=H.Double=H.FloatBE=H.Float=H.NearInt64BE=H.NearInt64=H.NearUInt64BE=H.NearUInt64=H.IntBE=H.Int=H.UIntBE=H.UInt=H.OffsetLayout=H.GreedyCount=H.ExternalLayout=H.bindConstructorLayout=H.nameWithProperty=H.Layout=H.uint8ArrayToBuffer=H.checkUint8Array=void 0,H.constant=H.utf8=H.cstr=H.blob=H.unionLayoutDiscriminator=H.union=H.seq=H.bits=H.struct=H.f64be=H.f64=H.f32be=H.f32=H.ns64be=H.s48be=H.s40be=H.s32be=H.s24be=H.s16be=H.ns64=H.s48=H.s40=H.s32=H.s24=void 0;const c=dc();function t(s){if(!(s instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}H.checkUint8Array=t;function e(s){return t(s),c.Buffer.from(s.buffer,s.byteOffset,s.length)}H.uint8ArrayToBuffer=e;let n=class{constructor(f,M){if(!Number.isInteger(f))throw new TypeError("span must be an integer");this.span=f,this.property=M}makeDestinationObject(){return{}}getSpan(f,M){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(f){const M=Object.create(this.constructor.prototype);return Object.assign(M,this),M.property=f,M}fromArray(f){}};H.Layout=n;function h(s,f){return f.property?s+"["+f.property+"]":s}H.nameWithProperty=h;function a(s,f){if(typeof s!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(s,"layout_"))throw new Error("Class is already bound to a layout");if(!(f&&f instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(f,"boundConstructor_"))throw new Error("layout is already bound to a constructor");s.layout_=f,f.boundConstructor_=s,f.makeDestinationObject=()=>new s,Object.defineProperty(s.prototype,"encode",{value(M,A){return f.encode(this,M,A)},writable:!0}),Object.defineProperty(s,"decode",{value(M,A){return f.decode(M,A)},writable:!0})}H.bindConstructorLayout=a;class p extends n{isCount(){throw new Error("ExternalLayout is abstract")}}H.ExternalLayout=p;class d extends p{constructor(f=1,M){if(!Number.isInteger(f)||0>=f)throw new TypeError("elementSpan must be a (positive) integer");super(-1,M),this.elementSpan=f}isCount(){return!0}decode(f,M=0){t(f);const A=f.length-M;return Math.floor(A/this.elementSpan)}encode(f,M,A){return 0}}H.GreedyCount=d;class x extends p{constructor(f,M=0,A){if(!(f instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(M))throw new TypeError("offset must be integer or undefined");super(f.span,A||f.property),this.layout=f,this.offset=M}isCount(){return this.layout instanceof I||this.layout instanceof L}decode(f,M=0){return this.layout.decode(f,M+this.offset)}encode(f,M,A=0){return this.layout.encode(f,M,A+this.offset)}}H.OffsetLayout=x;class I extends n{constructor(f,M){if(super(f,M),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,M=0){return e(f).readUIntLE(M,this.span)}encode(f,M,A=0){return e(M).writeUIntLE(f,A,this.span),this.span}}H.UInt=I;class L extends n{constructor(f,M){if(super(f,M),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,M=0){return e(f).readUIntBE(M,this.span)}encode(f,M,A=0){return e(M).writeUIntBE(f,A,this.span),this.span}}H.UIntBE=L;class R extends n{constructor(f,M){if(super(f,M),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,M=0){return e(f).readIntLE(M,this.span)}encode(f,M,A=0){return e(M).writeIntLE(f,A,this.span),this.span}}H.Int=R;class P extends n{constructor(f,M){if(super(f,M),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,M=0){return e(f).readIntBE(M,this.span)}encode(f,M,A=0){return e(M).writeIntBE(f,A,this.span),this.span}}H.IntBE=P;const F=Math.pow(2,32);function N(s){const f=Math.floor(s/F),M=s-f*F;return{hi32:f,lo32:M}}function U(s,f){return s*F+f}class O extends n{constructor(f){super(8,f)}decode(f,M=0){const A=e(f),C=A.readUInt32LE(M),G=A.readUInt32LE(M+4);return U(G,C)}encode(f,M,A=0){const C=N(f),G=e(M);return G.writeUInt32LE(C.lo32,A),G.writeUInt32LE(C.hi32,A+4),8}}H.NearUInt64=O;class Z extends n{constructor(f){super(8,f)}decode(f,M=0){const A=e(f),C=A.readUInt32BE(M),G=A.readUInt32BE(M+4);return U(C,G)}encode(f,M,A=0){const C=N(f),G=e(M);return G.writeUInt32BE(C.hi32,A),G.writeUInt32BE(C.lo32,A+4),8}}H.NearUInt64BE=Z;class W extends n{constructor(f){super(8,f)}decode(f,M=0){const A=e(f),C=A.readUInt32LE(M),G=A.readInt32LE(M+4);return U(G,C)}encode(f,M,A=0){const C=N(f),G=e(M);return G.writeUInt32LE(C.lo32,A),G.writeInt32LE(C.hi32,A+4),8}}H.NearInt64=W;class D extends n{constructor(f){super(8,f)}decode(f,M=0){const A=e(f),C=A.readInt32BE(M),G=A.readUInt32BE(M+4);return U(C,G)}encode(f,M,A=0){const C=N(f),G=e(M);return G.writeInt32BE(C.hi32,A),G.writeUInt32BE(C.lo32,A+4),8}}H.NearInt64BE=D;class ot extends n{constructor(f){super(4,f)}decode(f,M=0){return e(f).readFloatLE(M)}encode(f,M,A=0){return e(M).writeFloatLE(f,A),4}}H.Float=ot;class K extends n{constructor(f){super(4,f)}decode(f,M=0){return e(f).readFloatBE(M)}encode(f,M,A=0){return e(M).writeFloatBE(f,A),4}}H.FloatBE=K;class tt extends n{constructor(f){super(8,f)}decode(f,M=0){return e(f).readDoubleLE(M)}encode(f,M,A=0){return e(M).writeDoubleLE(f,A),8}}H.Double=tt;class nt extends n{constructor(f){super(8,f)}decode(f,M=0){return e(f).readDoubleBE(M)}encode(f,M,A=0){return e(M).writeDoubleBE(f,A),8}}H.DoubleBE=nt;class ut extends n{constructor(f,M,A){if(!(f instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(M instanceof p&&M.isCount()||Number.isInteger(M)&&0<=M))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let C=-1;!(M instanceof p)&&0<f.span&&(C=M*f.span),super(C,A),this.elementLayout=f,this.count=M}getSpan(f,M=0){if(0<=this.span)return this.span;let A=0,C=this.count;if(C instanceof p&&(C=C.decode(f,M)),0<this.elementLayout.span)A=C*this.elementLayout.span;else{let G=0;for(;G<C;)A+=this.elementLayout.getSpan(f,M+A),++G}return A}decode(f,M=0){const A=[];let C=0,G=this.count;for(G instanceof p&&(G=G.decode(f,M));C<G;)A.push(this.elementLayout.decode(f,M)),M+=this.elementLayout.getSpan(f,M),C+=1;return A}encode(f,M,A=0){const C=this.elementLayout,G=f.reduce((Q,ct)=>Q+C.encode(ct,M,A+Q),0);return this.count instanceof p&&this.count.encode(f.length,M,A),G}}H.Sequence=ut;class j extends n{constructor(f,M,A){if(!(Array.isArray(f)&&f.reduce((G,Q)=>G&&Q instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof M=="boolean"&&A===void 0&&(A=M,M=void 0);for(const G of f)if(0>G.span&&G.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let C=-1;try{C=f.reduce((G,Q)=>G+Q.getSpan(),0)}catch{}super(C,M),this.fields=f,this.decodePrefixes=!!A}getSpan(f,M=0){if(0<=this.span)return this.span;let A=0;try{A=this.fields.reduce((C,G)=>{const Q=G.getSpan(f,M);return M+=Q,C+Q},0)}catch{throw new RangeError("indeterminate span")}return A}decode(f,M=0){t(f);const A=this.makeDestinationObject();for(const C of this.fields)if(C.property!==void 0&&(A[C.property]=C.decode(f,M)),M+=C.getSpan(f,M),this.decodePrefixes&&f.length===M)break;return A}encode(f,M,A=0){const C=A;let G=0,Q=0;for(const ct of this.fields){let ue=ct.span;if(Q=0<ue?ue:0,ct.property!==void 0){const xt=f[ct.property];xt!==void 0&&(Q=ct.encode(xt,M,A),0>ue&&(ue=ct.getSpan(M,A)))}G=A,A+=ue}return G+Q-C}fromArray(f){const M=this.makeDestinationObject();for(const A of this.fields)A.property!==void 0&&0<f.length&&(M[A.property]=f.shift());return M}layoutFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const M of this.fields)if(M.property===f)return M}offsetOf(f){if(typeof f!="string")throw new TypeError("property must be string");let M=0;for(const A of this.fields){if(A.property===f)return M;0>A.span?M=-1:0<=M&&(M+=A.span)}}}H.Structure=j;class ${constructor(f){this.property=f}decode(f,M){throw new Error("UnionDiscriminator is abstract")}encode(f,M,A){throw new Error("UnionDiscriminator is abstract")}}H.UnionDiscriminator=$;class z extends ${constructor(f,M){if(!(f instanceof p&&f.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(M||f.property||"variant"),this.layout=f}decode(f,M){return this.layout.decode(f,M)}encode(f,M,A){return this.layout.encode(f,M,A)}}H.UnionLayoutDiscriminator=z;class V extends n{constructor(f,M,A){let C;if(f instanceof I||f instanceof L)C=new z(new x(f));else if(f instanceof p&&f.isCount())C=new z(f);else if(f instanceof $)C=f;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(M===void 0&&(M=null),!(M===null||M instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(M!==null){if(0>M.span)throw new Error("defaultLayout must have constant span");M.property===void 0&&(M=M.replicate("content"))}let G=-1;M&&(G=M.span,0<=G&&(f instanceof I||f instanceof L)&&(G+=C.layout.span)),super(G,A),this.discriminator=C,this.usesPrefixDiscriminator=f instanceof I||f instanceof L,this.defaultLayout=M,this.registry={};let Q=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ct){return Q(ct)},this.configGetSourceVariant=function(ct){Q=ct.bind(this)}}getSpan(f,M=0){if(0<=this.span)return this.span;const A=this.getVariant(f,M);if(!A)throw new Error("unable to determine span for unrecognized variant");return A.getSpan(f,M)}defaultGetSourceVariant(f){if(Object.prototype.hasOwnProperty.call(f,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(f,this.defaultLayout.property))return;const M=this.registry[f[this.discriminator.property]];if(M&&(!M.layout||M.property&&Object.prototype.hasOwnProperty.call(f,M.property)))return M}else for(const M in this.registry){const A=this.registry[M];if(A.property&&Object.prototype.hasOwnProperty.call(f,A.property))return A}throw new Error("unable to infer src variant")}decode(f,M=0){let A;const C=this.discriminator,G=C.decode(f,M),Q=this.registry[G];if(Q===void 0){const ct=this.defaultLayout;let ue=0;this.usesPrefixDiscriminator&&(ue=C.layout.span),A=this.makeDestinationObject(),A[C.property]=G,A[ct.property]=ct.decode(f,M+ue)}else A=Q.decode(f,M);return A}encode(f,M,A=0){const C=this.getSourceVariant(f);if(C===void 0){const G=this.discriminator,Q=this.defaultLayout;let ct=0;return this.usesPrefixDiscriminator&&(ct=G.layout.span),G.encode(f[G.property],M,A),ct+Q.encode(f[Q.property],M,A+ct)}return C.encode(f,M,A)}addVariant(f,M,A){const C=new v(this,f,M,A);return this.registry[f]=C,C}getVariant(f,M=0){let A;return f instanceof Uint8Array?A=this.discriminator.decode(f,M):A=f,this.registry[A]}}H.Union=V;class v extends n{constructor(f,M,A,C){if(!(f instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(M)||0>M)throw new TypeError("variant must be a (non-negative) integer");if(typeof A=="string"&&C===void 0&&(C=A,A=null),A){if(!(A instanceof n))throw new TypeError("layout must be a Layout");if(f.defaultLayout!==null&&0<=A.span&&A.span>f.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof C!="string")throw new TypeError("variant must have a String property")}let G=f.span;0>f.span&&(G=A?A.span:0,0<=G&&f.usesPrefixDiscriminator&&(G+=f.discriminator.layout.span)),super(G,C),this.union=f,this.variant=M,this.layout=A||null}getSpan(f,M=0){if(0<=this.span)return this.span;let A=0;this.union.usesPrefixDiscriminator&&(A=this.union.discriminator.layout.span);let C=0;return this.layout&&(C=this.layout.getSpan(f,M+A)),A+C}decode(f,M=0){const A=this.makeDestinationObject();if(this!==this.union.getVariant(f,M))throw new Error("variant mismatch");let C=0;return this.union.usesPrefixDiscriminator&&(C=this.union.discriminator.layout.span),this.layout?A[this.property]=this.layout.decode(f,M+C):this.property?A[this.property]=!0:this.union.usesPrefixDiscriminator&&(A[this.union.discriminator.property]=this.variant),A}encode(f,M,A=0){let C=0;if(this.union.usesPrefixDiscriminator&&(C=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(f,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,M,A);let G=C;if(this.layout&&(this.layout.encode(f[this.property],M,A+C),G+=this.layout.getSpan(M,A+C),0<=this.union.span&&G>this.union.span))throw new Error("encoded variant overruns containing union");return G}fromArray(f){if(this.layout)return this.layout.fromArray(f)}}H.VariantLayout=v;function r(s){return 0>s&&(s+=4294967296),s}class u extends n{constructor(f,M,A){if(!(f instanceof I||f instanceof L))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof M=="string"&&A===void 0&&(A=M,M=!1),4<f.span)throw new RangeError("word cannot exceed 32 bits");super(f.span,A),this.word=f,this.msb=!!M,this.fields=[];let C=0;this._packedSetValue=function(G){return C=r(G),this},this._packedGetValue=function(){return C}}decode(f,M=0){const A=this.makeDestinationObject(),C=this.word.decode(f,M);this._packedSetValue(C);for(const G of this.fields)G.property!==void 0&&(A[G.property]=G.decode(f));return A}encode(f,M,A=0){const C=this.word.decode(M,A);this._packedSetValue(C);for(const G of this.fields)if(G.property!==void 0){const Q=f[G.property];Q!==void 0&&G.encode(Q)}return this.word.encode(this._packedGetValue(),M,A)}addField(f,M){const A=new g(this,f,M);return this.fields.push(A),A}addBoolean(f){const M=new w(this,f);return this.fields.push(M),M}fieldFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const M of this.fields)if(M.property===f)return M}}H.BitStructure=u;class g{constructor(f,M,A){if(!(f instanceof u))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(M)||0>=M)throw new TypeError("bits must be positive integer");const C=8*f.span,G=f.fields.reduce((Q,ct)=>Q+ct.bits,0);if(M+G>C)throw new Error("bits too long for span remainder ("+(C-G)+" of "+C+" remain)");this.container=f,this.bits=M,this.valueMask=(1<<M)-1,M===32&&(this.valueMask=4294967295),this.start=G,this.container.msb&&(this.start=C-G-M),this.wordMask=r(this.valueMask<<this.start),this.property=A}decode(f,M){const A=this.container._packedGetValue();return r(A&this.wordMask)>>>this.start}encode(f){if(typeof f!="number"||!Number.isInteger(f)||f!==r(f&this.valueMask))throw new TypeError(h("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const M=this.container._packedGetValue(),A=r(f<<this.start);this.container._packedSetValue(r(M&~this.wordMask)|A)}}H.BitField=g;class w extends g{constructor(f,M){super(f,1,M)}decode(f,M){return!!super.decode(f,M)}encode(f){typeof f=="boolean"&&(f=+f),super.encode(f)}}H.Boolean=w;class b extends n{constructor(f,M){if(!(f instanceof p&&f.isCount()||Number.isInteger(f)&&0<=f))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let A=-1;f instanceof p||(A=f),super(A,M),this.length=f}getSpan(f,M){let A=this.span;return 0>A&&(A=this.length.decode(f,M)),A}decode(f,M=0){let A=this.span;return 0>A&&(A=this.length.decode(f,M)),e(f).slice(M,M+A)}encode(f,M,A){let C=this.length;if(this.length instanceof p&&(C=f.length),!(f instanceof Uint8Array&&C===f.length))throw new TypeError(h("Blob.encode",this)+" requires (length "+C+") Uint8Array as src");if(A+C>M.length)throw new RangeError("encoding overruns Uint8Array");const G=e(f);return e(M).write(G.toString("hex"),A,C,"hex"),this.length instanceof p&&this.length.encode(C,M,A),C}}H.Blob=b;class B extends n{constructor(f){super(-1,f)}getSpan(f,M=0){t(f);let A=M;for(;A<f.length&&f[A]!==0;)A+=1;return 1+A-M}decode(f,M=0){const A=this.getSpan(f,M);return e(f).slice(M,M+A-1).toString("utf-8")}encode(f,M,A=0){typeof f!="string"&&(f=String(f));const C=c.Buffer.from(f,"utf8"),G=C.length;if(A+G>M.length)throw new RangeError("encoding overruns Buffer");const Q=e(M);return C.copy(Q,A),Q[A+G]=0,G+1}}H.CString=B;class S extends n{constructor(f,M){if(typeof f=="string"&&M===void 0&&(M=f,f=void 0),f===void 0)f=-1;else if(!Number.isInteger(f))throw new TypeError("maxSpan must be an integer");super(-1,M),this.maxSpan=f}getSpan(f,M=0){return t(f),f.length-M}decode(f,M=0){const A=this.getSpan(f,M);if(0<=this.maxSpan&&this.maxSpan<A)throw new RangeError("text length exceeds maxSpan");return e(f).slice(M,M+A).toString("utf-8")}encode(f,M,A=0){typeof f!="string"&&(f=String(f));const C=c.Buffer.from(f,"utf8"),G=C.length;if(0<=this.maxSpan&&this.maxSpan<G)throw new RangeError("text length exceeds maxSpan");if(A+G>M.length)throw new RangeError("encoding overruns Buffer");return C.copy(e(M),A),G}}H.UTF8=S;class y extends n{constructor(f,M){super(0,M),this.value=f}decode(f,M){return this.value}encode(f,M,A){return 0}}return H.Constant=y,H.greedy=(s,f)=>new d(s,f),H.offset=(s,f,M)=>new x(s,f,M),H.u8=s=>new I(1,s),H.u16=s=>new I(2,s),H.u24=s=>new I(3,s),H.u32=s=>new I(4,s),H.u40=s=>new I(5,s),H.u48=s=>new I(6,s),H.nu64=s=>new O(s),H.u16be=s=>new L(2,s),H.u24be=s=>new L(3,s),H.u32be=s=>new L(4,s),H.u40be=s=>new L(5,s),H.u48be=s=>new L(6,s),H.nu64be=s=>new Z(s),H.s8=s=>new R(1,s),H.s16=s=>new R(2,s),H.s24=s=>new R(3,s),H.s32=s=>new R(4,s),H.s40=s=>new R(5,s),H.s48=s=>new R(6,s),H.ns64=s=>new W(s),H.s16be=s=>new P(2,s),H.s24be=s=>new P(3,s),H.s32be=s=>new P(4,s),H.s40be=s=>new P(5,s),H.s48be=s=>new P(6,s),H.ns64be=s=>new D(s),H.f32=s=>new ot(s),H.f32be=s=>new K(s),H.f64=s=>new tt(s),H.f64be=s=>new nt(s),H.struct=(s,f,M)=>new j(s,f,M),H.bits=(s,f,M)=>new u(s,f,M),H.seq=(s,f,M)=>new ut(s,f,M),H.union=(s,f,M)=>new V(s,f,M),H.unionLayoutDiscriminator=(s,f)=>new z(s,f),H.blob=(s,f)=>new b(s,f),H.cstr=s=>new B(s),H.utf8=(s,f)=>new S(s,f),H.constant=(s,f)=>new y(s,f),H}var T=pc(),pr={},ps;function gc(){if(ps)return pr;ps=1,Object.defineProperty(pr,"__esModule",{value:!0});function c(h){{const a=Buffer.from(h);a.reverse();const p=a.toString("hex");return p.length===0?BigInt(0):BigInt(`0x${p}`)}}pr.toBigIntLE=c;function t(h){{const a=h.toString("hex");return a.length===0?BigInt(0):BigInt(`0x${a}`)}}pr.toBigIntBE=t;function e(h,a){{const p=h.toString(16),d=Buffer.from(p.padStart(a*2,"0").slice(0,a*2),"hex");return d.reverse(),d}}pr.toBufferLE=e;function n(h,a){{const p=h.toString(16);return Buffer.from(p.padStart(a*2,"0").slice(0,a*2),"hex")}}return pr.toBufferBE=n,pr}var gs=gc();class mc extends TypeError{constructor(t,e){let n;const{message:h,...a}=t,{path:p}=t,d=p.length===0?h:"At path: "+p.join(".")+" -- "+h;super(d),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>{var x;return(x=n)!=null?x:n=[t,...e()]}}}function yc(c){return Ke(c)&&typeof c[Symbol.iterator]=="function"}function Ke(c){return typeof c=="object"&&c!=null}function _e(c){return typeof c=="string"?JSON.stringify(c):""+c}function wc(c){const{done:t,value:e}=c.next();return t?void 0:e}function vc(c,t,e,n){if(c===!0)return;c===!1?c={}:typeof c=="string"&&(c={message:c});const{path:h,branch:a}=t,{type:p}=e,{refinement:d,message:x="Expected a value of type `"+p+"`"+(d?" with refinement `"+d+"`":"")+", but received: `"+_e(n)+"`"}=c;return{value:n,type:p,refinement:d,key:h[h.length-1],path:h,branch:a,...c,message:x}}function*ms(c,t,e,n){yc(c)||(c=[c]);for(const h of c){const a=vc(h,t,e,n);a&&(yield a)}}function*qi(c,t,e={}){const{path:n=[],branch:h=[c],coerce:a=!1,mask:p=!1}=e,d={path:n,branch:h};if(a&&(c=t.coercer(c,d),p&&t.type!=="type"&&Ke(t.schema)&&Ke(c)&&!Array.isArray(c)))for(const I in c)t.schema[I]===void 0&&delete c[I];let x=!0;for(const I of t.validator(c,d))x=!1,yield[I,void 0];for(let[I,L,R]of t.entries(c,d)){const P=qi(L,R,{path:I===void 0?n:[...n,I],branch:I===void 0?h:[...h,L],coerce:a,mask:p});for(const F of P)F[0]?(x=!1,yield[F[0],void 0]):a&&(L=F[1],I===void 0?c=L:c instanceof Map?c.set(I,L):c instanceof Set?c.add(L):Ke(c)&&(c[I]=L))}if(x)for(const I of t.refiner(c,d))x=!1,yield[I,void 0];x&&(yield[void 0,c])}let Re=class{constructor(t){const{type:e,schema:n,validator:h,refiner:a,coercer:p=x=>x,entries:d=function*(){}}=t;this.type=e,this.schema=n,this.entries=d,this.coercer=p,h?this.validator=(x,I)=>{const L=h(x,I);return ms(L,I,this,x)}:this.validator=()=>[],a?this.refiner=(x,I)=>{const L=a(x,I);return ms(L,I,this,x)}:this.refiner=()=>[]}assert(t){return bc(t,this)}create(t){return at(t,this)}is(t){return po(t,this)}mask(t){return xc(t,this)}validate(t,e={}){return hn(t,this,e)}};function bc(c,t){const e=hn(c,t);if(e[0])throw e[0]}function at(c,t){const e=hn(c,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function xc(c,t){const e=hn(c,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function po(c,t){return!hn(c,t)[0]}function hn(c,t,e={}){const n=qi(c,t,e),h=wc(n);return h[0]?[new mc(h[0],function*(){for(const p of n)p[0]&&(yield p[0])}),void 0]:[void 0,h[1]]}function xr(c,t){return new Re({type:c,schema:null,validator:t})}function Ec(){return xr("any",()=>!0)}function ft(c){return new Re({type:"array",schema:c,*entries(t){if(c&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,c]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+_e(t)}})}function Fe(){return xr("boolean",c=>typeof c=="boolean")}function Di(c){return xr("instance",t=>t instanceof c||"Expected a `"+c.name+"` instance, but received: "+_e(t))}function oe(c){const t=_e(c),e=typeof c;return new Re({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?c:null,validator(n){return n===c||"Expected the literal `"+t+"`, but received: "+_e(n)}})}function Bc(){return xr("never",()=>!1)}function ht(c){return new Re({...c,validator:(t,e)=>t===null||c.validator(t,e),refiner:(t,e)=>t===null||c.refiner(t,e)})}function q(){return xr("number",c=>typeof c=="number"&&!isNaN(c)||"Expected a number, but received: "+_e(c))}function bt(c){return new Re({...c,validator:(t,e)=>t===void 0||c.validator(t,e),refiner:(t,e)=>t===void 0||c.refiner(t,e)})}function go(c,t){return new Re({type:"record",schema:null,*entries(e){if(Ke(e))for(const n in e){const h=e[n];yield[n,n,c],yield[n,h,t]}},validator(e){return Ke(e)||"Expected an object, but received: "+_e(e)}})}function st(){return xr("string",c=>typeof c=="string"||"Expected a string, but received: "+_e(c))}function Hi(c){const t=Bc();return new Re({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(c.length,e.length);for(let h=0;h<n;h++)yield[h,e[h],c[h]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+_e(e)}})}function Y(c){const t=Object.keys(c);return new Re({type:"type",schema:c,*entries(e){if(Ke(e))for(const n of t)yield[n,e[n],c[n]]},validator(e){return Ke(e)||"Expected an object, but received: "+_e(e)}})}function ye(c){const t=c.map(e=>e.type).join(" | ");return new Re({type:"union",schema:null,validator(e,n){const h=[];for(const a of c){const[...p]=qi(e,a,n),[d]=p;if(d[0])for(const[x]of p)x&&h.push(x);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+_e(e),...h]}})}function fn(){return xr("unknown",()=>!0)}function ln(c,t,e){return new Re({...c,coercer:(n,h)=>po(n,t)?c.coercer(e(n,h),h):c.coercer(n,h)})}var Wr={};const $i=Ze(Ho),zi=Ze($o),Ki=Ze(zo),Wi=Ze(Ko),Gi=Ze(Wo);var ii={},Ln={},Mc={get exports(){return Ln},set exports(c){Ln=c}},ys;function mo(){return ys||(ys=1,function(c){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function h(x,I,L){this.fn=x,this.context=I,this.once=L||!1}function a(x,I,L,R,P){if(typeof L!="function")throw new TypeError("The listener must be a function");var F=new h(L,R||x,P),N=e?e+I:I;return x._events[N]?x._events[N].fn?x._events[N]=[x._events[N],F]:x._events[N].push(F):(x._events[N]=F,x._eventsCount++),x}function p(x,I){--x._eventsCount===0?x._events=new n:delete x._events[I]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var I=[],L,R;if(this._eventsCount===0)return I;for(R in L=this._events)t.call(L,R)&&I.push(e?R.slice(1):R);return Object.getOwnPropertySymbols?I.concat(Object.getOwnPropertySymbols(L)):I},d.prototype.listeners=function(I){var L=e?e+I:I,R=this._events[L];if(!R)return[];if(R.fn)return[R.fn];for(var P=0,F=R.length,N=new Array(F);P<F;P++)N[P]=R[P].fn;return N},d.prototype.listenerCount=function(I){var L=e?e+I:I,R=this._events[L];return R?R.fn?1:R.length:0},d.prototype.emit=function(I,L,R,P,F,N){var U=e?e+I:I;if(!this._events[U])return!1;var O=this._events[U],Z=arguments.length,W,D;if(O.fn){switch(O.once&&this.removeListener(I,O.fn,void 0,!0),Z){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,L),!0;case 3:return O.fn.call(O.context,L,R),!0;case 4:return O.fn.call(O.context,L,R,P),!0;case 5:return O.fn.call(O.context,L,R,P,F),!0;case 6:return O.fn.call(O.context,L,R,P,F,N),!0}for(D=1,W=new Array(Z-1);D<Z;D++)W[D-1]=arguments[D];O.fn.apply(O.context,W)}else{var ot=O.length,K;for(D=0;D<ot;D++)switch(O[D].once&&this.removeListener(I,O[D].fn,void 0,!0),Z){case 1:O[D].fn.call(O[D].context);break;case 2:O[D].fn.call(O[D].context,L);break;case 3:O[D].fn.call(O[D].context,L,R);break;case 4:O[D].fn.call(O[D].context,L,R,P);break;default:if(!W)for(K=1,W=new Array(Z-1);K<Z;K++)W[K-1]=arguments[K];O[D].fn.apply(O[D].context,W)}}return!0},d.prototype.on=function(I,L,R){return a(this,I,L,R,!1)},d.prototype.once=function(I,L,R){return a(this,I,L,R,!0)},d.prototype.removeListener=function(I,L,R,P){var F=e?e+I:I;if(!this._events[F])return this;if(!L)return p(this,F),this;var N=this._events[F];if(N.fn)N.fn===L&&(!P||N.once)&&(!R||N.context===R)&&p(this,F);else{for(var U=0,O=[],Z=N.length;U<Z;U++)(N[U].fn!==L||P&&!N[U].once||R&&N[U].context!==R)&&O.push(N[U]);O.length?this._events[F]=O.length===1?O[0]:O:p(this,F)}return this},d.prototype.removeAllListeners=function(I){var L;return I?(L=e?e+I:I,this._events[L]&&p(this,L)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=e,d.EventEmitter=d,c.exports=d}(Mc)),Ln}var ws;function _c(){return ws||(ws=1,function(c){var t=Li();Object.defineProperty(c,"__esModule",{value:!0}),c.default=R;var e=t(zi),n=t($i),h=t(Ki),a=t(Wi),p=t(Gi),d=mo();function x(P){var F=I();return function(){var U=(0,p.default)(P),O;if(F){var Z=(0,p.default)(this).constructor;O=Reflect.construct(U,arguments,Z)}else O=U.apply(this,arguments);return(0,a.default)(this,O)}}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var L=function(P){(0,h.default)(N,P);var F=x(N);function N(U,O,Z){var W;return(0,e.default)(this,N),W=F.call(this),W.socket=new window.WebSocket(U,Z),W.socket.onopen=function(){return W.emit("open")},W.socket.onmessage=function(D){return W.emit("message",D.data)},W.socket.onerror=function(D){return W.emit("error",D)},W.socket.onclose=function(D){W.emit("close",D.code,D.reason)},W}return(0,n.default)(N,[{key:"send",value:function(O,Z,W){var D=W||Z;try{this.socket.send(O),D()}catch(ot){D(ot)}}},{key:"close",value:function(O,Z){this.socket.close(O,Z)}},{key:"addEventListener",value:function(O,Z,W){this.socket.addEventListener(O,Z,W)}}]),N}(d.EventEmitter);function R(P,F){return new L(P,F)}}(ii)),ii}var si={};const Sc=Ze(Go),Ac=Ze(Zo);var vs;function Ic(){return vs||(vs=1,function(c){var t=Li();Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=t(jo()),n=t(Sc),h=t(Ac),a=t(zi),p=t($i),d=t(Ki),x=t(Wi),I=t(Gi),L=mo();function R(U){var O=P();return function(){var W=(0,I.default)(U),D;if(O){var ot=(0,I.default)(this).constructor;D=Reflect.construct(W,arguments,ot)}else D=W.apply(this,arguments);return(0,x.default)(this,D)}}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var F=function(U,O){var Z={};for(var W in U)Object.prototype.hasOwnProperty.call(U,W)&&O.indexOf(W)<0&&(Z[W]=U[W]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function")for(var D=0,W=Object.getOwnPropertySymbols(U);D<W.length;D++)O.indexOf(W[D])<0&&Object.prototype.propertyIsEnumerable.call(U,W[D])&&(Z[W[D]]=U[W[D]]);return Z},N=function(U){(0,d.default)(Z,U);var O=R(Z);function Z(W){var D,ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},tt=arguments.length>3?arguments[3]:void 0;(0,a.default)(this,Z);var nt=K.autoconnect,ut=nt===void 0?!0:nt,j=K.reconnect,$=j===void 0?!0:j,z=K.reconnect_interval,V=z===void 0?1e3:z,v=K.max_reconnects,r=v===void 0?5:v,u=F(K,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return D=O.call(this),D.webSocketFactory=W,D.queue={},D.rpc_id=0,D.address=ot,D.autoconnect=ut,D.ready=!1,D.reconnect=$,D.reconnect_interval=V,D.max_reconnects=r,D.rest_options=u,D.current_reconnects=0,D.generate_request_id=tt||function(){return++D.rpc_id},D.autoconnect&&D._connect(D.address,Object.assign({autoconnect:D.autoconnect,reconnect:D.reconnect,reconnect_interval:D.reconnect_interval,max_reconnects:D.max_reconnects},D.rest_options)),D}return(0,p.default)(Z,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(D,ot,K,tt){var nt=this;return!tt&&(0,h.default)(K)==="object"&&(tt=K,K=null),new Promise(function(ut,j){if(!nt.ready)return j(new Error("socket not ready"));var $=nt.generate_request_id(D,ot),z={jsonrpc:"2.0",method:D,params:ot||null,id:$};nt.socket.send(JSON.stringify(z),tt,function(V){if(V)return j(V);nt.queue[$]={promise:[ut,j]},K&&(nt.queue[$].timeout=setTimeout(function(){delete nt.queue[$],j(new Error("reply timeout"))},K))})})}},{key:"login",value:function(){var W=(0,n.default)(e.default.mark(function ot(K){var tt;return e.default.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return ut.next=2,this.call("rpc.login",K);case 2:if(tt=ut.sent,tt){ut.next=5;break}throw new Error("authentication failed");case 5:return ut.abrupt("return",tt);case 6:case"end":return ut.stop()}},ot,this)}));function D(ot){return W.apply(this,arguments)}return D}()},{key:"listMethods",value:function(){var W=(0,n.default)(e.default.mark(function ot(){return e.default.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.next=2,this.call("__listMethods");case 2:return tt.abrupt("return",tt.sent);case 3:case"end":return tt.stop()}},ot,this)}));function D(){return W.apply(this,arguments)}return D}()},{key:"notify",value:function(D,ot){var K=this;return new Promise(function(tt,nt){if(!K.ready)return nt(new Error("socket not ready"));var ut={jsonrpc:"2.0",method:D,params:ot||null};K.socket.send(JSON.stringify(ut),function(j){if(j)return nt(j);tt()})})}},{key:"subscribe",value:function(){var W=(0,n.default)(e.default.mark(function ot(K){var tt;return e.default.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return typeof K=="string"&&(K=[K]),ut.next=3,this.call("rpc.on",K);case 3:if(tt=ut.sent,!(typeof K=="string"&&tt[K]!=="ok")){ut.next=6;break}throw new Error("Failed subscribing to an event '"+K+"' with: "+tt[K]);case 6:return ut.abrupt("return",tt);case 7:case"end":return ut.stop()}},ot,this)}));function D(ot){return W.apply(this,arguments)}return D}()},{key:"unsubscribe",value:function(){var W=(0,n.default)(e.default.mark(function ot(K){var tt;return e.default.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return typeof K=="string"&&(K=[K]),ut.next=3,this.call("rpc.off",K);case 3:if(tt=ut.sent,!(typeof K=="string"&&tt[K]!=="ok")){ut.next=6;break}throw new Error("Failed unsubscribing from an event with: "+tt);case 6:return ut.abrupt("return",tt);case 7:case"end":return ut.stop()}},ot,this)}));function D(ot){return W.apply(this,arguments)}return D}()},{key:"close",value:function(D,ot){this.socket.close(D||1e3,ot)}},{key:"_connect",value:function(D,ot){var K=this;this.socket=this.webSocketFactory(D,ot),this.socket.addEventListener("open",function(){K.ready=!0,K.emit("open"),K.current_reconnects=0}),this.socket.addEventListener("message",function(tt){var nt=tt.data;nt instanceof ArrayBuffer&&(nt=Buffer.from(nt).toString());try{nt=JSON.parse(nt)}catch{return}if(nt.notification&&K.listeners(nt.notification).length){if(!Object.keys(nt.params).length)return K.emit(nt.notification);var ut=[nt.notification];if(nt.params.constructor===Object)ut.push(nt.params);else for(var j=0;j<nt.params.length;j++)ut.push(nt.params[j]);return Promise.resolve().then(function(){K.emit.apply(K,ut)})}if(!K.queue[nt.id])return nt.method&&nt.params?Promise.resolve().then(function(){K.emit(nt.method,nt.params)}):void 0;"error"in nt=="result"in nt&&K.queue[nt.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),K.queue[nt.id].timeout&&clearTimeout(K.queue[nt.id].timeout),nt.error?K.queue[nt.id].promise[1](nt.error):K.queue[nt.id].promise[0](nt.result),delete K.queue[nt.id]}),this.socket.addEventListener("error",function(tt){return K.emit("error",tt)}),this.socket.addEventListener("close",function(tt){var nt=tt.code,ut=tt.reason;K.ready&&setTimeout(function(){return K.emit("close",nt,ut)},0),K.ready=!1,K.socket=void 0,nt!==1e3&&(K.current_reconnects++,K.reconnect&&(K.max_reconnects>K.current_reconnects||K.max_reconnects===0)&&setTimeout(function(){return K._connect(D,ot)},K.reconnect_interval))})}}]),Z}(L.EventEmitter);c.default=N}(si)),si}var bs;function kc(){if(bs)return Wr;bs=1;var c=Li();Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.Client=void 0;var t=c($i),e=c(zi),n=c(Ki),h=c(Wi),a=c(Gi),p=c(_c()),d=c(Ic());function x(R){var P=I();return function(){var N=(0,a.default)(R),U;if(P){var O=(0,a.default)(this).constructor;U=Reflect.construct(N,arguments,O)}else U=N.apply(this,arguments);return(0,h.default)(this,U)}}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var L=function(R){(0,n.default)(F,R);var P=x(F);function F(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ws://localhost:8080",U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=U.autoconnect,Z=O===void 0?!0:O,W=U.reconnect,D=W===void 0?!0:W,ot=U.reconnect_interval,K=ot===void 0?1e3:ot,tt=U.max_reconnects,nt=tt===void 0?5:tt,ut=arguments.length>2?arguments[2]:void 0;return(0,e.default)(this,F),P.call(this,p.default,N,{autoconnect:Z,reconnect:D,reconnect_interval:K,max_reconnects:nt},ut)}return(0,t.default)(F)}(d.default);return Wr.Client=L,Wr}var Rc=kc(),oi,xs;function Tc(){if(xs)return oi;xs=1;const c=ro.v4;return oi=function(e,n,h,a){if(typeof e!="string")throw new TypeError(e+" must be a string");a=a||{};const p=typeof a.version=="number"?a.version:2;if(p!==1&&p!==2)throw new TypeError(p+" must be 1 or 2");const d={method:e};if(p===2&&(d.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");d.params=n}if(typeof h>"u"){const x=typeof a.generator=="function"?a.generator:function(){return c()};d.id=x(d,a)}else p===2&&h===null?a.notificationIdNull&&(d.id=null):d.id=h;return d},oi}var ai,Es;function Lc(){if(Es)return ai;Es=1;const c=ro.v4,t=Tc(),e=function(n,h){if(!(this instanceof e))return new e(n,h);h||(h={}),this.options={reviver:typeof h.reviver<"u"?h.reviver:null,replacer:typeof h.replacer<"u"?h.replacer:null,generator:typeof h.generator<"u"?h.generator:function(){return c()},version:typeof h.version<"u"?h.version:2,notificationIdNull:typeof h.notificationIdNull=="boolean"?h.notificationIdNull:!1},this.callServer=n};return ai=e,e.prototype.request=function(n,h,a,p){const d=this;let x=null;const I=Array.isArray(n)&&typeof h=="function";if(this.options.version===1&&I)throw new TypeError("JSON-RPC 1.0 does not support batching");if(I||!I&&n&&typeof n=="object"&&typeof h=="function")p=h,x=n;else{typeof a=="function"&&(p=a,a=void 0);const P=typeof p=="function";try{x=t(n,h,a,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(F){if(P)return p(F);throw F}if(!P)return x}let R;try{R=JSON.stringify(x,this.options.replacer)}catch(P){return p(P)}return this.callServer(R,function(P,F){d._parseResponse(P,F,p)}),x},e.prototype._parseResponse=function(n,h,a){if(n){a(n);return}if(!h)return a();let p;try{p=JSON.parse(h,this.options.reviver)}catch(d){return a(d)}if(a.length===3)if(Array.isArray(p)){const d=function(I){return typeof I.error<"u"},x=function(I){return!d(I)};return a(null,p.filter(d),p.filter(x))}else return a(null,p.error,p.result);a(null,p)},ai}var Uc=Lc();const Cc=Ai(Uc),[yo,wo,vo]=[[],[],[]],Fc=BigInt(0),Gr=BigInt(1),Pc=BigInt(2),Oc=BigInt(7),Nc=BigInt(256),qc=BigInt(113);for(let c=0,t=Gr,e=1,n=0;c<24;c++){[e,n]=[n,(2*e+3*n)%5],yo.push(2*(5*n+e)),wo.push((c+1)*(c+2)/2%64);let h=Fc;for(let a=0;a<7;a++)t=(t<<Gr^(t>>Oc)*qc)%Nc,t&Pc&&(h^=Gr<<(Gr<<BigInt(a))-Gr);vo.push(h)}const[Dc,Hc]=It.split(vo,!0),Bs=(c,t,e)=>e>32?It.rotlBH(c,t,e):It.rotlSH(c,t,e),Ms=(c,t,e)=>e>32?It.rotlBL(c,t,e):It.rotlSL(c,t,e);function $c(c,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let p=0;p<10;p++)e[p]=c[p]^c[p+10]^c[p+20]^c[p+30]^c[p+40];for(let p=0;p<10;p+=2){const d=(p+8)%10,x=(p+2)%10,I=e[x],L=e[x+1],R=Bs(I,L,1)^e[d],P=Ms(I,L,1)^e[d+1];for(let F=0;F<50;F+=10)c[p+F]^=R,c[p+F+1]^=P}let h=c[2],a=c[3];for(let p=0;p<24;p++){const d=wo[p],x=Bs(h,a,d),I=Ms(h,a,d),L=yo[p];h=c[L],a=c[L+1],c[L]=x,c[L+1]=I}for(let p=0;p<50;p+=10){for(let d=0;d<10;d++)e[d]=c[p+d];for(let d=0;d<10;d++)c[p+d]^=~e[(d+2)%10]&e[(d+4)%10]}c[0]^=Dc[n],c[1]^=Hc[n]}e.fill(0)}class $n extends Ui{constructor(t,e,n,h=!1,a=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=h,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ve.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ra(this.state)}keccak(){$c(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){ve.exists(this);const{blockLen:e,state:n}=this;t=an(t);const h=t.length;for(let a=0;a<h;){const p=Math.min(e-this.pos,h-a);for(let d=0;d<p;d++)n[this.pos++]^=t[a++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:h}=this;t[n]^=e,e&128&&n===h-1&&this.keccak(),t[h-1]^=128,this.keccak()}writeInto(t){ve.exists(this,!1),ve.bytes(t),this.finish();const e=this.state,{blockLen:n}=this;for(let h=0,a=t.length;h<a;){this.posOut>=n&&this.keccak();const p=Math.min(n-this.posOut,a-h);t.set(e.subarray(this.posOut,this.posOut+p),h),this.posOut+=p,h+=p}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ve.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ve.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:h,rounds:a,enableXOF:p}=this;return t||(t=new $n(e,n,h,p,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=n,t.outputLen=h,t.enableXOF=p,t.destroyed=this.destroyed,t}}const je=(c,t,e)=>br(()=>new $n(t,c,e));je(6,144,224/8);je(6,136,256/8);je(6,104,384/8);je(6,72,512/8);je(1,144,224/8);je(1,136,256/8);je(1,104,384/8);je(1,72,512/8);const bo=(c,t,e)=>sa((n={})=>new $n(t,c,n.dkLen===void 0?e:n.dkLen,!0));bo(31,168,128/8);bo(31,136,256/8);class xo extends Ui{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,ve.hash(t);const n=an(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const h=this.blockLen,a=new Uint8Array(h);a.set(n.length>h?t.create().update(n).digest():n);for(let p=0;p<a.length;p++)a[p]^=54;this.iHash.update(a),this.oHash=t.create();for(let p=0;p<a.length;p++)a[p]^=106;this.oHash.update(a),a.fill(0)}update(t){return ve.exists(this),this.iHash.update(t),this}digestInto(t){ve.exists(this),ve.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:h,destroyed:a,blockLen:p,outputLen:d}=this;return t=t,t.finished=h,t.destroyed=a,t.blockLen=p,t.outputLen=d,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Eo=(c,t,e)=>new xo(c,t).update(e).digest();Eo.create=(c,t)=>new xo(c,t);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const Qt=BigInt(0),se=BigInt(1),ze=BigInt(2),tn=BigInt(3),_s=BigInt(8),ge=Object.freeze({a:Qt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:se,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Ss=(c,t)=>(c+t/ze)/t,pn={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(c){const{n:t}=ge,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-se*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),h=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=e,p=BigInt("0x100000000000000000000000000000000"),d=Ss(a*c,t),x=Ss(-n*c,t);let I=lt(c-d*e-x*h,t),L=lt(-d*n-x*a,t);const R=I>p,P=L>p;if(R&&(I=t-I),P&&(L=t-L),I>p||L>p)throw new Error("splitScalarEndo: Endomorphism failed, k="+c);return{k1neg:R,k1:I,k2neg:P,k2:L}}},_r=32,nn=32,As=_r+1,Is=2*_r+1;function ks(c){const{a:t,b:e}=ge,n=lt(c*c),h=lt(n*c);return lt(h+t*c+e)}const gn=ge.a===Qt;class zc extends Error{constructor(t){super(t)}}function Rs(c){if(!(c instanceof Jt))throw new TypeError("JacobianPoint expected")}class Jt{constructor(t,e,n){this.x=t,this.y=e,this.z=n}static fromAffine(t){if(!(t instanceof ae))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(ae.ZERO)?Jt.ZERO:new Jt(t.x,t.y,se)}static toAffineBatch(t){const e=jc(t.map(n=>n.z));return t.map((n,h)=>n.toAffine(e[h]))}static normalizeZ(t){return Jt.toAffineBatch(t).map(Jt.fromAffine)}equals(t){Rs(t);const{x:e,y:n,z:h}=this,{x:a,y:p,z:d}=t,x=lt(h*h),I=lt(d*d),L=lt(e*I),R=lt(a*x),P=lt(lt(n*d)*I),F=lt(lt(p*h)*x);return L===R&&P===F}negate(){return new Jt(this.x,lt(-this.y),this.z)}double(){const{x:t,y:e,z:n}=this,h=lt(t*t),a=lt(e*e),p=lt(a*a),d=t+a,x=lt(ze*(lt(d*d)-h-p)),I=lt(tn*h),L=lt(I*I),R=lt(L-ze*x),P=lt(I*(x-R)-_s*p),F=lt(ze*e*n);return new Jt(R,P,F)}add(t){Rs(t);const{x:e,y:n,z:h}=this,{x:a,y:p,z:d}=t;if(a===Qt||p===Qt)return this;if(e===Qt||n===Qt)return t;const x=lt(h*h),I=lt(d*d),L=lt(e*I),R=lt(a*x),P=lt(lt(n*d)*I),F=lt(lt(p*h)*x),N=lt(R-L),U=lt(F-P);if(N===Qt)return U===Qt?this.double():Jt.ZERO;const O=lt(N*N),Z=lt(N*O),W=lt(L*O),D=lt(U*U-Z-ze*W),ot=lt(U*(W-D)-P*Z),K=lt(h*d*N);return new Jt(D,ot,K)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=Jt.ZERO;if(typeof t=="bigint"&&t===Qt)return e;let n=Cs(t);if(n===se)return this;if(!gn){let R=e,P=this;for(;n>Qt;)n&se&&(R=R.add(P)),P=P.double(),n>>=se;return R}let{k1neg:h,k1:a,k2neg:p,k2:d}=pn.splitScalar(n),x=e,I=e,L=this;for(;a>Qt||d>Qt;)a&se&&(x=x.add(L)),d&se&&(I=I.add(L)),L=L.double(),a>>=se,d>>=se;return h&&(x=x.negate()),p&&(I=I.negate()),I=new Jt(lt(I.x*pn.beta),I.y,I.z),x.add(I)}precomputeWindow(t){const e=gn?128/t+1:256/t+1,n=[];let h=this,a=h;for(let p=0;p<e;p++){a=h,n.push(a);for(let d=1;d<2**(t-1);d++)a=a.add(h),n.push(a);h=a.double()}return n}wNAF(t,e){!e&&this.equals(Jt.BASE)&&(e=ae.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let h=e&&wi.get(e);h||(h=this.precomputeWindow(n),e&&n!==1&&(h=Jt.normalizeZ(h),wi.set(e,h)));let a=Jt.ZERO,p=Jt.BASE;const d=1+(gn?128/n:256/n),x=2**(n-1),I=BigInt(2**n-1),L=2**n,R=BigInt(n);for(let P=0;P<d;P++){const F=P*x;let N=Number(t&I);t>>=R,N>x&&(N-=L,t+=se);const U=F,O=F+Math.abs(N)-1,Z=P%2!==0,W=N<0;N===0?p=p.add(mn(Z,h[U])):a=a.add(mn(W,h[O]))}return{p:a,f:p}}multiply(t,e){let n=Cs(t),h,a;if(gn){const{k1neg:p,k1:d,k2neg:x,k2:I}=pn.splitScalar(n);let{p:L,f:R}=this.wNAF(d,e),{p:P,f:F}=this.wNAF(I,e);L=mn(p,L),P=mn(x,P),P=new Jt(lt(P.x*pn.beta),P.y,P.z),h=L.add(P),a=R.add(F)}else{const{p,f:d}=this.wNAF(n,e);h=p,a=d}return Jt.normalizeZ([h,a])[0]}toAffine(t){const{x:e,y:n,z:h}=this,a=this.equals(Jt.ZERO);t==null&&(t=a?_s:zn(h));const p=t,d=lt(p*p),x=lt(d*p),I=lt(e*d),L=lt(n*x),R=lt(h*p);if(a)return ae.ZERO;if(R!==se)throw new Error("invZ was invalid");return new ae(I,L)}}Jt.BASE=new Jt(ge.Gx,ge.Gy,se);Jt.ZERO=new Jt(Qt,se,Qt);function mn(c,t){const e=t.negate();return c?e:t}const wi=new WeakMap;class ae{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,wi.delete(this)}hasEvenY(){return this.y%ze===Qt}static fromCompressedHex(t){const e=t.length===32,n=wr(e?t:t.subarray(1));if(!ui(n))throw new Error("Point is not on curve");const h=ks(n);let a=Zc(h);const p=(a&se)===se;e?p&&(a=lt(-a)):(t[0]&1)===1!==p&&(a=lt(-a));const d=new ae(n,a);return d.assertValidity(),d}static fromUncompressedHex(t){const e=wr(t.subarray(1,_r+1)),n=wr(t.subarray(_r+1,_r*2+1)),h=new ae(e,n);return h.assertValidity(),h}static fromHex(t){const e=vi(t),n=e.length,h=e[0];if(n===_r)return this.fromCompressedHex(e);if(n===As&&(h===2||h===3))return this.fromCompressedHex(e);if(n===Is&&h===4)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${As} compressed bytes or ${Is} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return ae.BASE.multiply(bi(t))}static fromSignature(t,e,n){const{r:h,s:a}=Yc(e);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const p=Xc(vi(t)),{n:d}=ge,x=n===2||n===3?h+d:h,I=zn(x,d),L=lt(-p*I,d),R=lt(a*I,d),P=n&1?"03":"02",F=ae.fromHex(P+Ir(x)),N=ae.BASE.multiplyAndAddUnsafe(F,L,R);if(!N)throw new Error("Cannot recover signature: point at infinify");return N.assertValidity(),N}toRawBytes(t=!1){return yr(this.toHex(t))}toHex(t=!1){const e=Ir(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${Ir(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:n}=this;if(!ui(e)||!ui(n))throw new Error(t);const h=lt(n*n),a=ks(e);if(lt(h-a)!==Qt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new ae(this.x,lt(-this.y))}double(){return Jt.fromAffine(this).double().toAffine()}add(t){return Jt.fromAffine(this).add(Jt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Jt.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,n){const h=Jt.fromAffine(this),a=e===Qt||e===se||this!==ae.BASE?h.multiplyUnsafe(e):h.multiply(e),p=Jt.fromAffine(t).multiplyUnsafe(n),d=a.add(p);return d.equals(Jt.ZERO)?void 0:d.toAffine()}}ae.BASE=new ae(ge.Gx,ge.Gy);ae.ZERO=new ae(Qt,Qt);function Ts(c){return Number.parseInt(c[0],16)>=8?"00"+c:c}function Ls(c){if(c.length<2||c[0]!==2)throw new Error(`Invalid signature integer tag: ${Lr(c)}`);const t=c[1],e=c.subarray(2,t+2);if(!t||e.length!==t)throw new Error("Invalid signature integer: wrong length");if(e[0]===0&&e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:wr(e),left:c.subarray(t+2)}}function Kc(c){if(c.length<2||c[0]!=48)throw new Error(`Invalid signature tag: ${Lr(c)}`);if(c[1]!==c.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:e}=Ls(c.subarray(2)),{data:n,left:h}=Ls(e);if(h.length)throw new Error(`Invalid signature: left bytes after parsing: ${Lr(h)}`);return{r:t,s:n}}class mr{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!e)throw new TypeError(`${n}: Expected string or Uint8Array`);const h=e?Lr(t):t;if(h.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new mr(Un(h.slice(0,64)),Un(h.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if(typeof t!="string"&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:h}=Kc(e?t:yr(t));return new mr(n,h)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!Cn(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Cn(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=ge.n>>se;return this.s>t}normalizeS(){return this.hasHighS()?new mr(this.r,lt(-this.s,ge.n)):this}toDERRawBytes(){return yr(this.toDERHex())}toDERHex(){const t=Ts(jr(this.s)),e=Ts(jr(this.r)),n=t.length/2,h=e.length/2,a=jr(n),p=jr(h);return`30${jr(h+n+4)}02${p}${e}02${a}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return yr(this.toCompactHex())}toCompactHex(){return Ir(this.r)+Ir(this.s)}}function Zr(...c){if(!c.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(c.length===1)return c[0];const t=c.reduce((n,h)=>n+h.length,0),e=new Uint8Array(t);for(let n=0,h=0;n<c.length;n++){const a=c[n];e.set(a,h),h+=a.length}return e}const Wc=Array.from({length:256},(c,t)=>t.toString(16).padStart(2,"0"));function Lr(c){if(!(c instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let e=0;e<c.length;e++)t+=Wc[c[e]];return t}const Gc=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Ir(c){if(typeof c!="bigint")throw new Error("Expected bigint");if(!(Qt<=c&&c<Gc))throw new Error("Expected number 0 <= n < 2^256");return c.toString(16).padStart(64,"0")}function Us(c){const t=yr(Ir(c));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function jr(c){const t=c.toString(16);return t.length&1?`0${t}`:t}function Un(c){if(typeof c!="string")throw new TypeError("hexToNumber: expected string, got "+typeof c);return BigInt(`0x${c}`)}function yr(c){if(typeof c!="string")throw new TypeError("hexToBytes: expected string, got "+typeof c);if(c.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+c.length);const t=new Uint8Array(c.length/2);for(let e=0;e<t.length;e++){const n=e*2,h=c.slice(n,n+2),a=Number.parseInt(h,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");t[e]=a}return t}function wr(c){return Un(Lr(c))}function vi(c){return c instanceof Uint8Array?Uint8Array.from(c):yr(c)}function Cs(c){if(typeof c=="number"&&Number.isSafeInteger(c)&&c>0)return BigInt(c);if(typeof c=="bigint"&&Cn(c))return c;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function lt(c,t=ge.P){const e=c%t;return e>=Qt?e:t+e}function be(c,t){const{P:e}=ge;let n=c;for(;t-- >Qt;)n*=n,n%=e;return n}function Zc(c){const{P:t}=ge,e=BigInt(6),n=BigInt(11),h=BigInt(22),a=BigInt(23),p=BigInt(44),d=BigInt(88),x=c*c*c%t,I=x*x*c%t,L=be(I,tn)*I%t,R=be(L,tn)*I%t,P=be(R,ze)*x%t,F=be(P,n)*P%t,N=be(F,h)*F%t,U=be(N,p)*N%t,O=be(U,d)*U%t,Z=be(O,p)*N%t,W=be(Z,tn)*I%t,D=be(W,a)*F%t,ot=be(D,e)*x%t,K=be(ot,ze);if(K*K%t!==c)throw new Error("Cannot find square root");return K}function zn(c,t=ge.P){if(c===Qt||t<=Qt)throw new Error(`invert: expected positive integers, got n=${c} mod=${t}`);let e=lt(c,t),n=t,h=Qt,a=se;for(;e!==Qt;){const d=n/e,x=n%e,I=h-a*d;n=e,e=x,h=a,a=I}if(n!==se)throw new Error("invert: does not exist");return lt(h,t)}function jc(c,t=ge.P){const e=new Array(c.length),n=c.reduce((a,p,d)=>p===Qt?a:(e[d]=a,lt(a*p,t)),se),h=zn(n,t);return c.reduceRight((a,p,d)=>p===Qt?a:(e[d]=lt(a*e[d],t),lt(a*p,t)),h),e}function Vc(c){const t=c.length*8-nn*8,e=wr(c);return t>0?e>>BigInt(t):e}function Xc(c,t=!1){const e=Vc(c);if(t)return e;const{n}=ge;return e>=n?e-n:e}let kr,ci;function Cn(c){return Qt<c&&c<ge.n}function ui(c){return Qt<c&&c<ge.P}function bi(c){let t;if(typeof c=="bigint")t=c;else if(typeof c=="number"&&Number.isSafeInteger(c)&&c>0)t=BigInt(c);else if(typeof c=="string"){if(c.length!==2*nn)throw new Error("Expected 32 bytes of private key");t=Un(c)}else if(c instanceof Uint8Array){if(c.length!==nn)throw new Error("Expected 32 bytes of private key");t=wr(c)}else throw new TypeError("Expected valid private key");if(!Cn(t))throw new Error("Expected private key: 0 < key < n");return t}function Yc(c){if(c instanceof mr)return c.assertValidity(),c;try{return mr.fromDER(c)}catch{return mr.fromCompact(c)}}ae.BASE._setWindowSize(8);const we={node:to,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},yn={},gr={bytesToHex:Lr,hexToBytes:yr,concatBytes:Zr,mod:lt,invert:zn,isValidPrivateKey(c){try{return bi(c),!0}catch{return!1}},_bigintTo32Bytes:Us,_normalizePrivateKey:bi,hashToPrivateKey:c=>{c=vi(c);const t=nn+8;if(c.length<t||c.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const e=lt(wr(c),ge.n-se)+se;return Us(e)},randomBytes:(c=32)=>{if(we.web)return we.web.getRandomValues(new Uint8Array(c));if(we.node){const{randomBytes:t}=we.node;return Uint8Array.from(t(c))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>gr.hashToPrivateKey(gr.randomBytes(nn+8)),precompute(c=8,t=ae.BASE){const e=t===ae.BASE?t:new ae(t.x,t.y);return e._setWindowSize(c),e.multiply(tn),e},sha256:async(...c)=>{if(we.web){const t=await we.web.subtle.digest("SHA-256",Zr(...c));return new Uint8Array(t)}else if(we.node){const{createHash:t}=we.node,e=t("sha256");return c.forEach(n=>e.update(n)),Uint8Array.from(e.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(c,...t)=>{if(we.web){const e=await we.web.subtle.importKey("raw",c,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Zr(...t),h=await we.web.subtle.sign("HMAC",e,n);return new Uint8Array(h)}else if(we.node){const{createHmac:e}=we.node,n=e("sha256",c);return t.forEach(h=>n.update(h)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(c,...t)=>{let e=yn[c];if(e===void 0){const n=await gr.sha256(Uint8Array.from(c,h=>h.charCodeAt(0)));e=Zr(n,n),yn[c]=e}return gr.sha256(e,...t)},taggedHashSync:(c,...t)=>{if(typeof kr!="function")throw new zc("sha256Sync is undefined, you need to set it");let e=yn[c];if(e===void 0){const n=kr(Uint8Array.from(c,h=>h.charCodeAt(0)));e=Zr(n,n),yn[c]=e}return kr(e,...t)},_JacobianPoint:Jt};Object.defineProperties(gr,{sha256Sync:{configurable:!1,get(){return kr},set(c){kr||(kr=c)}},hmacSha256Sync:{configurable:!1,get(){return ci},set(c){ci||(ci=c)}}});vr.sha512Sync=(...c)=>Ua(vr.concatBytes(...c));vr.randomPrivateKey;const Fs=()=>{const c=vr.randomPrivateKey(),t=xi(c),e=new Uint8Array(64);return e.set(c),e.set(t,32),{publicKey:t,secretKey:e}},xi=Oi.getPublicKey;function Ps(c){try{return ce.fromHex(c,!0),!0}catch{return!1}}const Jc=(c,t)=>Oi.sign(c,t.slice(0,32)),Qc=Oi.verify,Ur=c=>Zt.Buffer.isBuffer(c)?c:c instanceof Uint8Array?Zt.Buffer.from(c.buffer,c.byteOffset,c.byteLength):Zt.Buffer.from(c);class tu{constructor(t){Object.assign(this,t)}encode(){return Zt.Buffer.from(ri.serialize(bn,this))}static decode(t){return ri.deserialize(bn,this,t)}static decodeUnchecked(t){return ri.deserializeUnchecked(bn,this,t)}}const bn=new Map;let Bo;const eu=32,ke=32;function ru(c){return c._bn!==void 0}let Os=1;Bo=Symbol.toStringTag;class gt extends tu{constructor(t){if(super({}),this._bn=void 0,ru(t))this._bn=t._bn;else{if(typeof t=="string"){const e=te.decode(t);if(e.length!=ke)throw new Error("Invalid public key input");this._bn=new as(e)}else this._bn=new as(t);if(this._bn.byteLength()>ke)throw new Error("Invalid public key input")}}static unique(){const t=new gt(Os);return Os+=1,new gt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return te.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Zt.Buffer);if(t.length===ke)return t;const e=Zt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Bo](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const h=Zt.Buffer.concat([t.toBuffer(),Zt.Buffer.from(e),n.toBuffer()]),a=yi(h);return new gt(a)}static createProgramAddressSync(t,e){let n=Zt.Buffer.alloc(0);t.forEach(function(a){if(a.length>eu)throw new TypeError("Max seed length exceeded");n=Zt.Buffer.concat([n,Ur(a)])}),n=Zt.Buffer.concat([n,e.toBuffer(),Zt.Buffer.from("ProgramDerivedAddress")]);const h=yi(n);if(Ps(h))throw new Error("Invalid seeds, address must fall off the curve");return new gt(h)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,h;for(;n!=0;){try{const a=t.concat(Zt.Buffer.from([n]));h=this.createProgramAddressSync(a,e)}catch(a){if(a instanceof TypeError)throw a;n--;continue}return[h,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new gt(t);return Ps(e.toBytes())}}gt.default=new gt("11111111111111111111111111111111");bn.set(gt,{kind:"struct",fields:[["_bn","u256"]]});new gt("BPFLoader1111111111111111111111111111111111");const Rr=1280-40-8,Mo=127,Ei=64;class _o extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(_o.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class So extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(So.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Xr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Xr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Fn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((a,p)=>{n.set(a.toBase58(),p)});const h=a=>{const p=n.get(a.toBase58());if(p===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return p};return t.map(a=>({programIdIndex:h(a.programId),accountKeyIndexes:a.keys.map(p=>h(p.pubkey)),data:a.data}))}}const jt=(c="publicKey")=>T.blob(32,c),Sr=(c="string")=>{const t=T.struct([T.u32("length"),T.u32("lengthPadding"),T.blob(T.offset(T.u32(),-8),"chars")],c),e=t.decode.bind(t),n=t.encode.bind(t),h=t;return h.decode=(a,p)=>e(a,p).chars.toString(),h.encode=(a,p,d)=>{const x={chars:Zt.Buffer.from(a,"utf8")};return n(x,p,d)},h.alloc=a=>T.u32().span+T.u32().span+Zt.Buffer.from(a,"utf8").length,h},nu=(c="authorized")=>T.struct([jt("staker"),jt("withdrawer")],c),iu=(c="lockup")=>T.struct([T.ns64("unixTimestamp"),T.ns64("epoch"),jt("custodian")],c),su=(c="voteInit")=>T.struct([jt("nodePubkey"),jt("authorizedVoter"),jt("authorizedWithdrawer"),T.u8("commission")],c),ou=(c="voteAuthorizeWithSeedArgs")=>T.struct([T.u32("voteAuthorizationType"),jt("currentAuthorityDerivedKeyOwnerPubkey"),Sr("currentAuthorityDerivedKeySeed"),jt("newAuthorized")],c);function Ee(c){let t=0,e=0;for(;;){let n=c.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function Be(c,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){c.push(n);break}else n|=128,c.push(n)}}function he(c,t){if(!c)throw new Error(t||"Assertion failed")}class Kn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,h=p=>{const d=p.toBase58();let x=n.get(d);return x===void 0&&(x={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(d,x)),x},a=h(e);a.isSigner=!0,a.isWritable=!0;for(const p of t){h(p.programId).isInvoked=!0;for(const d of p.keys){const x=h(d.pubkey);x.isSigner||(x.isSigner=d.isSigner),x.isWritable||(x.isWritable=d.isWritable)}}return new Kn(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];he(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,x])=>x.isSigner&&x.isWritable),n=t.filter(([,x])=>x.isSigner&&!x.isWritable),h=t.filter(([,x])=>!x.isSigner&&x.isWritable),a=t.filter(([,x])=>!x.isSigner&&!x.isWritable),p={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:a.length};{he(e.length>0,"Expected at least one writable signer key");const[x]=e[0];he(x===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const d=[...e.map(([x])=>new gt(x)),...n.map(([x])=>new gt(x)),...h.map(([x])=>new gt(x)),...a.map(([x])=>new gt(x))];return[p,d]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,p=>!p.isSigner&&!p.isInvoked&&p.isWritable),[h,a]=this.drainKeysFoundInLookupTable(t.state.addresses,p=>!p.isSigner&&!p.isInvoked&&!p.isWritable);if(!(e.length===0&&h.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:h},{writable:n,readonly:a}]}drainKeysFoundInLookupTable(t,e){const n=new Array,h=new Array;for(const[a,p]of this.keyMetaMap.entries())if(e(p)){const d=new gt(a),x=t.findIndex(I=>I.equals(d));x>=0&&(he(x<256,"Max lookup table index exceeded"),n.push(x),h.push(d),this.keyMetaMap.delete(a))}return[n,h]}}class Ge{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new gt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:te.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Fn(this.staticAccountKeys)}static compile(t){const e=Kn.compile(t.instructions,t.payerKey),[n,h]=e.getMessageComponents(),p=new Fn(h).compileInstructions(t.instructions).map(d=>({programIdIndex:d.programIdIndex,accounts:d.accountKeyIndexes,data:te.encode(d.data)}));return new Ge({header:n,accountKeys:h,recentBlockhash:t.recentBlockhash,instructions:p})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,a=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<a}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Be(e,t);const n=this.instructions.map(R=>{const{accounts:P,programIdIndex:F}=R,N=Array.from(te.decode(R.data));let U=[];Be(U,P.length);let O=[];return Be(O,N.length),{programIdIndex:F,keyIndicesCount:Zt.Buffer.from(U),keyIndices:P,dataLength:Zt.Buffer.from(O),data:N}});let h=[];Be(h,n.length);let a=Zt.Buffer.alloc(Rr);Zt.Buffer.from(h).copy(a);let p=h.length;n.forEach(R=>{const F=T.struct([T.u8("programIdIndex"),T.blob(R.keyIndicesCount.length,"keyIndicesCount"),T.seq(T.u8("keyIndex"),R.keyIndices.length,"keyIndices"),T.blob(R.dataLength.length,"dataLength"),T.seq(T.u8("userdatum"),R.data.length,"data")]).encode(R,a,p);p+=F}),a=a.slice(0,p);const d=T.struct([T.blob(1,"numRequiredSignatures"),T.blob(1,"numReadonlySignedAccounts"),T.blob(1,"numReadonlyUnsignedAccounts"),T.blob(e.length,"keyCount"),T.seq(jt("key"),t,"keys"),jt("recentBlockhash")]),x={numRequiredSignatures:Zt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Zt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Zt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Zt.Buffer.from(e),keys:this.accountKeys.map(R=>Ur(R.toBytes())),recentBlockhash:te.decode(this.recentBlockhash)};let I=Zt.Buffer.alloc(2048);const L=d.encode(x,I);return a.copy(I,L),I.slice(0,L+a.length)}static from(t){let e=[...t];const n=e.shift();if(n!==(n&Mo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const h=e.shift(),a=e.shift(),p=Ee(e);let d=[];for(let P=0;P<p;P++){const F=e.slice(0,ke);e=e.slice(ke),d.push(new gt(Zt.Buffer.from(F)))}const x=e.slice(0,ke);e=e.slice(ke);const I=Ee(e);let L=[];for(let P=0;P<I;P++){const F=e.shift(),N=Ee(e),U=e.slice(0,N);e=e.slice(N);const O=Ee(e),Z=e.slice(0,O),W=te.encode(Zt.Buffer.from(Z));e=e.slice(O),L.push({programIdIndex:F,accounts:U,data:W})}const R={header:{numRequiredSignatures:n,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:a},recentBlockhash:te.encode(Zt.Buffer.from(x)),accountKeys:d,instructions:L};return new Ge(R)}}class Pn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Fn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const h=t-n,a=this.addressTableLookups.reduce((p,d)=>p+d.writableIndexes.length,0);return h<a}else if(t>=this.header.numRequiredSignatures){const h=t-e,p=n-e-this.header.numReadonlyUnsignedAccounts;return h<p}else{const h=e-this.header.numReadonlySignedAccounts;return t<h}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const h=t.find(a=>a.key.equals(n.accountKey));if(!h)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const a of n.writableIndexes)if(a<h.state.addresses.length)e.writable.push(h.state.addresses[a]);else throw new Error(`Failed to find address for index ${a} in address lookup table ${n.accountKey.toBase58()}`);for(const a of n.readonlyIndexes)if(a<h.state.addresses.length)e.readonly.push(h.state.addresses[a]);else throw new Error(`Failed to find address for index ${a} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Kn.compile(t.instructions,t.payerKey),n=new Array,h={writable:new Array,readonly:new Array},a=t.addressLookupTableAccounts||[];for(const L of a){const R=e.extractTableLookup(L);if(R!==void 0){const[P,{writable:F,readonly:N}]=R;n.push(P),h.writable.push(...F),h.readonly.push(...N)}}const[p,d]=e.getMessageComponents(),I=new Fn(d,h).compileInstructions(t.instructions);return new Pn({header:p,staticAccountKeys:d,recentBlockhash:t.recentBlockhash,compiledInstructions:I,addressTableLookups:n})}serialize(){const t=Array();Be(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Be(n,this.compiledInstructions.length);const h=this.serializeAddressTableLookups(),a=Array();Be(a,this.addressTableLookups.length);const p=T.struct([T.u8("prefix"),T.struct([T.u8("numRequiredSignatures"),T.u8("numReadonlySignedAccounts"),T.u8("numReadonlyUnsignedAccounts")],"header"),T.blob(t.length,"staticAccountKeysLength"),T.seq(jt(),this.staticAccountKeys.length,"staticAccountKeys"),jt("recentBlockhash"),T.blob(n.length,"instructionsLength"),T.blob(e.length,"serializedInstructions"),T.blob(a.length,"addressTableLookupsLength"),T.blob(h.length,"serializedAddressTableLookups")]),d=new Uint8Array(Rr),x=1<<7,I=p.encode({prefix:x,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(L=>L.toBytes()),recentBlockhash:te.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(a),serializedAddressTableLookups:h},d);return d.slice(0,I)}serializeInstructions(){let t=0;const e=new Uint8Array(Rr);for(const n of this.compiledInstructions){const h=Array();Be(h,n.accountKeyIndexes.length);const a=Array();Be(a,n.data.length);const p=T.struct([T.u8("programIdIndex"),T.blob(h.length,"encodedAccountKeyIndexesLength"),T.seq(T.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),T.blob(a.length,"encodedDataLength"),T.blob(n.data.length,"data")]);t+=p.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(h),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(a),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Rr);for(const n of this.addressTableLookups){const h=Array();Be(h,n.writableIndexes.length);const a=Array();Be(a,n.readonlyIndexes.length);const p=T.struct([jt("accountKey"),T.blob(h.length,"encodedWritableIndexesLength"),T.seq(T.u8(),n.writableIndexes.length,"writableIndexes"),T.blob(a.length,"encodedReadonlyIndexesLength"),T.seq(T.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=p.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(h),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(a),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=e.shift(),h=n&Mo;he(n!==h,"Expected versioned message but received legacy message");const a=h;he(a===0,`Expected versioned message with version 0 but found version ${a}`);const p={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},d=[],x=Ee(e);for(let N=0;N<x;N++)d.push(new gt(e.splice(0,ke)));const I=te.encode(e.splice(0,ke)),L=Ee(e),R=[];for(let N=0;N<L;N++){const U=e.shift(),O=Ee(e),Z=e.splice(0,O),W=Ee(e),D=new Uint8Array(e.splice(0,W));R.push({programIdIndex:U,accountKeyIndexes:Z,data:D})}const P=Ee(e),F=[];for(let N=0;N<P;N++){const U=new gt(e.splice(0,ke)),O=Ee(e),Z=e.splice(0,O),W=Ee(e),D=e.splice(0,W);F.push({accountKey:U,writableIndexes:Z,readonlyIndexes:D})}return new Pn({header:p,staticAccountKeys:d,recentBlockhash:I,compiledInstructions:R,addressTableLookups:F})}}let Ie;(function(c){c[c.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",c[c.PROCESSED=1]="PROCESSED",c[c.TIMED_OUT=2]="TIMED_OUT",c[c.NONCE_INVALID=3]="NONCE_INVALID"})(Ie||(Ie={}));const au=Zt.Buffer.alloc(Ei).fill(0);class Ns{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Zt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class $e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ns(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let U=0;U<e.length;U++)if(e[U].programId===void 0)throw new Error(`Transaction instruction index ${U} has undefined program id`);const h=[],a=[];e.forEach(U=>{U.keys.forEach(Z=>{a.push({...Z})});const O=U.programId.toString();h.includes(O)||h.push(O)}),h.forEach(U=>{a.push({pubkey:new gt(U),isSigner:!1,isWritable:!1})});const p=[];a.forEach(U=>{const O=U.pubkey.toString(),Z=p.findIndex(W=>W.pubkey.toString()===O);Z>-1?(p[Z].isWritable=p[Z].isWritable||U.isWritable,p[Z].isSigner=p[Z].isSigner||U.isSigner):p.push(U)}),p.sort(function(U,O){return U.isSigner!==O.isSigner?U.isSigner?-1:1:U.isWritable!==O.isWritable?U.isWritable?-1:1:U.pubkey.toBase58().localeCompare(O.pubkey.toBase58())});const d=p.findIndex(U=>U.pubkey.equals(n));if(d>-1){const[U]=p.splice(d,1);U.isSigner=!0,U.isWritable=!0,p.unshift(U)}else p.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const U of this.signatures){const O=p.findIndex(Z=>Z.pubkey.equals(U.publicKey));if(O>-1)p[O].isSigner||(p[O].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${U.publicKey.toString()}`)}let x=0,I=0,L=0;const R=[],P=[];p.forEach(({pubkey:U,isSigner:O,isWritable:Z})=>{O?(R.push(U.toString()),x+=1,Z||(I+=1)):(P.push(U.toString()),Z||(L+=1))});const F=R.concat(P),N=e.map(U=>{const{data:O,programId:Z}=U;return{programIdIndex:F.indexOf(Z.toString()),accounts:U.keys.map(W=>F.indexOf(W.pubkey.toString())),data:te.encode(O)}});return N.forEach(U=>{he(U.programIdIndex>=0),U.accounts.forEach(O=>he(O>=0))}),new Ge({header:{numRequiredSignatures:x,numReadonlySignedAccounts:I,numReadonlyUnsignedAccounts:L},accountKeys:F,recentBlockhash:t,instructions:N})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((h,a)=>e[a].equals(h.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const h=n.toString();return e.has(h)?!1:(e.add(h),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const a of t){const p=a.publicKey.toString();e.has(p)||(e.add(p),n.push(a))}this.signatures=n.map(a=>({signature:null,publicKey:a.publicKey}));const h=this._compile();this._partialSign(h,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const a of t){const p=a.publicKey.toString();e.has(p)||(e.add(p),n.push(a))}const h=this._compile();this._partialSign(h,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(h=>{const a=Jc(n,h.secretKey);this._addSignature(h.publicKey,Ur(a))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){he(e.length===64);const n=this.signatures.findIndex(h=>t.equals(h.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=Zt.Buffer.from(e)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),t===void 0?!0:t)}_verifySignatures(t,e){for(const{signature:n,publicKey:h}of this.signatures)if(n===null){if(e)return!1}else if(!Qc(n,t,h.toBytes()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),h=this.serializeMessage();if(n&&!this._verifySignatures(h,e))throw new Error("Signature verification failed");return this._serialize(h)}_serialize(t){const{signatures:e}=this,n=[];Be(n,e.length);const h=n.length+e.length*64+t.length,a=Zt.Buffer.alloc(h);return he(e.length<256),Zt.Buffer.from(n).copy(a,0),e.forEach(({signature:p},d)=>{p!==null&&(he(p.length===64,"signature has invalid length"),Zt.Buffer.from(p).copy(a,n.length+d*64))}),t.copy(a,n.length+e.length*64),he(a.length<=Rr,`Transaction too large: ${a.length} > ${Rr}`),a}get keys(){return he(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return he(this.instructions.length===1),this.instructions[0].programId}get data(){return he(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=Ee(e);let h=[];for(let a=0;a<n;a++){const p=e.slice(0,Ei);e=e.slice(Ei),h.push(te.encode(Zt.Buffer.from(p)))}return $e.populate(Ge.from(e),h)}static populate(t,e=[]){const n=new $e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((h,a)=>{const p={signature:h==te.encode(au)?null:te.decode(h),publicKey:t.accountKeys[a]};n.signatures.push(p)}),t.instructions.forEach(h=>{const a=h.accounts.map(p=>{const d=t.accountKeys[p];return{pubkey:d,isSigner:n.signatures.some(x=>x.publicKey.toString()===d.toString())||t.isAccountSigner(p),isWritable:t.isAccountWritable(p)}});n.instructions.push(new Ns({keys:a,programId:t.accountKeys[h.programIdIndex],data:te.decode(h.data)}))}),n._message=t,n._json=n.toJSON(),n}}new gt("SysvarC1ock11111111111111111111111111111111");new gt("SysvarEpochSchedu1e111111111111111111111111");new gt("Sysvar1nstructions1111111111111111111111111");new gt("SysvarRecentB1ockHashes11111111111111111111");new gt("SysvarRent111111111111111111111111111111111");new gt("SysvarRewards111111111111111111111111111111");new gt("SysvarS1otHashes111111111111111111111111111");new gt("SysvarS1otHistory11111111111111111111111111");new gt("SysvarStakeHistory1111111111111111111111111");function Mr(c){return new Promise(t=>setTimeout(t,c))}const cu=T.nu64("lamportsPerSignature"),Ao=T.struct([T.u32("version"),T.u32("state"),jt("authorizedPubkey"),jt("nonce"),T.struct([cu],"feeCalculator")]);Ao.span;class Zi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ao.decode(Ur(t),0);return new Zi({authorizedPubkey:new gt(e.authorizedPubkey),nonce:new gt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const uu=c=>{const t=c.decode.bind(c),e=c.encode.bind(c);return{decode:t,encode:e}},hu=c=>t=>{const e=T.blob(c,t),{encode:n,decode:h}=uu(e),a=e;return a.decode=(p,d)=>{const x=h(p,d);return gs.toBigIntLE(Zt.Buffer.from(x))},a.encode=(p,d,x)=>{const I=gs.toBufferLE(p,c);return n(I,d,x)},a},Cr=hu(8);Object.freeze({Create:{index:0,layout:T.struct([T.u32("instruction"),T.ns64("lamports"),T.ns64("space"),jt("programId")])},Assign:{index:1,layout:T.struct([T.u32("instruction"),jt("programId")])},Transfer:{index:2,layout:T.struct([T.u32("instruction"),Cr("lamports")])},CreateWithSeed:{index:3,layout:T.struct([T.u32("instruction"),jt("base"),Sr("seed"),T.ns64("lamports"),T.ns64("space"),jt("programId")])},AdvanceNonceAccount:{index:4,layout:T.struct([T.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:T.struct([T.u32("instruction"),jt("authorized")])},AuthorizeNonceAccount:{index:7,layout:T.struct([T.u32("instruction"),jt("authorized")])},Allocate:{index:8,layout:T.struct([T.u32("instruction"),T.ns64("space")])},AllocateWithSeed:{index:9,layout:T.struct([T.u32("instruction"),jt("base"),Sr("seed"),T.ns64("space"),jt("programId")])},AssignWithSeed:{index:10,layout:T.struct([T.u32("instruction"),jt("base"),Sr("seed"),jt("programId")])},TransferWithSeed:{index:11,layout:T.struct([T.u32("instruction"),Cr("lamports"),Sr("seed"),jt("programId")])},UpgradeNonceAccount:{index:12,layout:T.struct([T.u32("instruction")])}});new gt("11111111111111111111111111111111");new gt("BPFLoader2111111111111111111111111111111111");var fu=Object.prototype.toString,lu=Object.keys||function(c){var t=[];for(var e in c)t.push(e);return t};function Yr(c,t){var e,n,h,a,p,d,x;if(c===!0)return"true";if(c===!1)return"false";switch(typeof c){case"object":if(c===null)return null;if(c.toJSON&&typeof c.toJSON=="function")return Yr(c.toJSON(),t);if(x=fu.call(c),x==="[object Array]"){for(h="[",n=c.length-1,e=0;e<n;e++)h+=Yr(c[e],!0)+",";return n>-1&&(h+=Yr(c[e],!0)),h+"]"}else if(x==="[object Object]"){for(a=lu(c).sort(),n=a.length,h="",e=0;e<n;)p=a[e],d=Yr(c[p],!1),d!==void 0&&(h&&(h+=","),h+=JSON.stringify(p)+":"+d),e++;return"{"+h+"}"}else return JSON.stringify(c);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(c);default:return isFinite(c)?c:null}}var du=function(c){var t=Yr(c,!1);if(t!==void 0)return""+t},pu=du;const Vr=32;function hi(c){let t=0;for(;c>1;)c/=2,t++;return t}function gu(c){return c===0?1:(c--,c|=c>>1,c|=c>>2,c|=c>>4,c|=c>>8,c|=c>>16,c|=c>>32,c+1)}class mu{constructor(t,e,n,h,a){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=h,this.firstNormalSlot=a}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=hi(gu(t+Vr+1))-hi(Vr)-1,n=this.getSlotsInEpoch(e),h=t-(n-Vr);return[e,h]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),h=this.firstNormalEpoch+n,a=e%this.slotsPerEpoch;return[h,a]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Vr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+hi(Vr)):this.slotsPerEpoch}}class qs extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class dt extends Error{constructor({code:t,message:e,data:n},h){super(h!=null?`${h}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}var yu=globalThis.fetch;const wu=160,vu=64,bu=wu/vu,xu=1e3/bu;function Eu(c,t){let e;try{e=c.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==c.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${c.index}`);return e}const Ds=56;class Hs{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Eu(Bu,t),n=t.length-Ds;he(n>=0,"lookup table is invalid"),he(n%32===0,"lookup table is invalid");const h=n/32,{addresses:a}=T.struct([T.seq(jt(),h,"addresses")]).decode(t.slice(Ds));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new gt(e.authority[0]):void 0,addresses:a.map(p=>new gt(p))}}}const Bu={index:1,layout:T.struct([T.u32("typeIndex"),Cr("deactivationSlot"),T.nu64("lastExtendedSlot"),T.u8("lastExtendedStartIndex"),T.u8(),T.seq(jt(),T.offset(T.u8(),-1),"authority")])},Mu=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function _u(c){const t=c.match(Mu);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${c}\``);const[e,n,h,a]=t,p=c.startsWith("https:")?"wss:":"ws:",d=h==null?null:parseInt(h.slice(1),10),x=d==null?"":`:${d+1}`;return`${p}//${n}${x}${a}`}var fi;const le=ln(Di(gt),st(),c=>new gt(c)),Io=Hi([st(),oe("base64")]),ji=ln(Di(Zt.Buffer),Io,c=>Zt.Buffer.from(c[0],"base64")),Su=30*1e3;function Au(c){if(/^https?:/.test(c)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return c}function ie(c){let t,e;if(typeof c=="string")t=c;else if(c){const{commitment:n,...h}=c;t=n,e=h}return{commitment:t,config:e}}function ko(c){return ye([Y({jsonrpc:oe("2.0"),id:st(),result:c}),Y({jsonrpc:oe("2.0"),id:st(),error:Y({code:fn(),message:st(),data:bt(Ec())})})])}const Iu=ko(fn());function Gt(c){return ln(ko(c),Iu,t=>"error"in t?t:{...t,result:at(t.result,c)})}function fe(c){return Gt(Y({context:Y({slot:q()}),value:c}))}function Wn(c){return Y({context:Y({slot:q()}),value:c})}function li(c,t){return c===0?new Pn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new gt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:te.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ge(t)}const ku=Y({foundation:q(),foundationTerm:q(),initial:q(),taper:q(),terminal:q()}),Ru=Gt(ft(ht(Y({epoch:q(),effectiveSlot:q(),amount:q(),postBalance:q(),commission:bt(ht(q()))})))),Tu=Y({total:q(),validator:q(),foundation:q(),epoch:q()}),Lu=Y({epoch:q(),slotIndex:q(),slotsInEpoch:q(),absoluteSlot:q(),blockHeight:bt(q()),transactionCount:bt(q())}),Uu=Y({slotsPerEpoch:q(),leaderScheduleSlotOffset:q(),warmup:Fe(),firstNormalEpoch:q(),firstNormalSlot:q()}),Cu=go(st(),ft(q())),Er=ht(ye([Y({}),st()])),Fu=Y({err:Er}),Pu=oe("receivedSignature"),Ou=Y({"solana-core":st(),"feature-set":bt(q())}),$s=fe(Y({err:ht(ye([Y({}),st()])),logs:ht(ft(st())),accounts:bt(ht(ft(ht(Y({executable:Fe(),owner:st(),lamports:q(),data:ft(st()),rentEpoch:bt(q())}))))),unitsConsumed:bt(q()),returnData:bt(ht(Y({programId:st(),data:Hi([st(),oe("base64")])})))})),Nu=fe(Y({byIdentity:go(st(),ft(q())),range:Y({firstSlot:q(),lastSlot:q()})}));function qu(c,t,e,n,h,a){const p=e||yu;let d;a!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let x;return n&&(x=async(L,R)=>{const P=await new Promise((F,N)=>{try{n(L,R,(U,O)=>F([U,O]))}catch(U){N(U)}});return await p(...P)}),new Cc(async(L,R)=>{const P={method:"POST",body:L,agent:d,headers:Object.assign({"Content-Type":"application/json"},t||{},Nh)};try{let F=5,N,U=500;for(;x?N=await x(c,P):N=await p(c,P),!(N.status!==429||h===!0||(F-=1,F===0));)console.log(`Server responded with ${N.status} ${N.statusText}.  Retrying after ${U}ms delay...`),await Mr(U),U*=2;const O=await N.text();N.ok?R(null,O):R(new Error(`${N.status} ${N.statusText}: ${O}`))}catch(F){F instanceof Error&&R(F)}},{})}function Du(c){return(t,e)=>new Promise((n,h)=>{c.request(t,e,(a,p)=>{if(a){h(a);return}n(p)})})}function Hu(c){return t=>new Promise((e,n)=>{t.length===0&&e([]);const h=t.map(a=>c.request(a.methodName,a.args));c.request(h,(a,p)=>{if(a){n(a);return}e(p)})})}const $u=Gt(ku),zu=Gt(Tu),Ku=Gt(Lu),Wu=Gt(Uu),Gu=Gt(Cu),Zu=Gt(q()),ju=fe(Y({total:q(),circulating:q(),nonCirculating:q(),nonCirculatingAccounts:ft(le)})),Bi=Y({amount:st(),uiAmount:ht(q()),decimals:q(),uiAmountString:bt(st())}),Vu=fe(ft(Y({address:le,amount:st(),uiAmount:ht(q()),decimals:q(),uiAmountString:bt(st())}))),Xu=fe(ft(Y({pubkey:le,account:Y({executable:Fe(),owner:le,lamports:q(),data:ji,rentEpoch:q()})}))),Mi=Y({program:st(),parsed:fn(),space:q()}),Yu=fe(ft(Y({pubkey:le,account:Y({executable:Fe(),owner:le,lamports:q(),data:Mi,rentEpoch:q()})}))),Ju=fe(ft(Y({lamports:q(),address:le}))),sn=Y({executable:Fe(),owner:le,lamports:q(),data:ji,rentEpoch:q()}),Qu=Y({pubkey:le,account:sn}),th=ln(ye([Di(Zt.Buffer),Mi]),ye([Io,Mi]),c=>Array.isArray(c)?at(c,ji):c),_i=Y({executable:Fe(),owner:le,lamports:q(),data:th,rentEpoch:q()}),eh=Y({pubkey:le,account:_i}),rh=Y({state:ye([oe("active"),oe("inactive"),oe("activating"),oe("deactivating")]),active:q(),inactive:q()}),nh=Gt(ft(Y({signature:st(),slot:q(),err:Er,memo:ht(st()),blockTime:bt(ht(q()))}))),ih=Gt(ft(Y({signature:st(),slot:q(),err:Er,memo:ht(st()),blockTime:bt(ht(q()))}))),sh=Y({subscription:q(),result:Wn(sn)}),oh=Y({pubkey:le,account:sn}),ah=Y({subscription:q(),result:Wn(oh)}),ch=Y({parent:q(),slot:q(),root:q()}),uh=Y({subscription:q(),result:ch}),hh=ye([Y({type:ye([oe("firstShredReceived"),oe("completed"),oe("optimisticConfirmation"),oe("root")]),slot:q(),timestamp:q()}),Y({type:oe("createdBank"),parent:q(),slot:q(),timestamp:q()}),Y({type:oe("frozen"),slot:q(),timestamp:q(),stats:Y({numTransactionEntries:q(),numSuccessfulTransactions:q(),numFailedTransactions:q(),maxTransactionsPerEntry:q()})}),Y({type:oe("dead"),slot:q(),timestamp:q(),err:st()})]),fh=Y({subscription:q(),result:hh}),lh=Y({subscription:q(),result:Wn(ye([Fu,Pu]))}),dh=Y({subscription:q(),result:q()}),ph=Y({pubkey:st(),gossip:ht(st()),tpu:ht(st()),rpc:ht(st()),version:ht(st())}),zs=Y({votePubkey:st(),nodePubkey:st(),activatedStake:q(),epochVoteAccount:Fe(),epochCredits:ft(Hi([q(),q(),q()])),commission:q(),lastVote:q(),rootSlot:ht(q())}),gh=Gt(Y({current:ft(zs),delinquent:ft(zs)})),mh=ye([oe("processed"),oe("confirmed"),oe("finalized")]),yh=Y({slot:q(),confirmations:ht(q()),err:Er,confirmationStatus:bt(mh)}),wh=fe(ft(ht(yh))),vh=Gt(q()),Ro=Y({accountKey:le,writableIndexes:ft(q()),readonlyIndexes:ft(q())}),Vi=Y({signatures:ft(st()),message:Y({accountKeys:ft(st()),header:Y({numRequiredSignatures:q(),numReadonlySignedAccounts:q(),numReadonlyUnsignedAccounts:q()}),instructions:ft(Y({accounts:ft(q()),data:st(),programIdIndex:q()})),recentBlockhash:st(),addressTableLookups:bt(ft(Ro))})}),To=Y({pubkey:le,signer:Fe(),writable:Fe(),source:bt(ye([oe("transaction"),oe("lookupTable")]))}),Lo=Y({accountKeys:ft(To),signatures:ft(st())}),Uo=Y({parsed:fn(),program:st(),programId:le}),Co=Y({accounts:ft(le),data:st(),programId:le}),bh=ye([Co,Uo]),xh=ye([Y({parsed:fn(),program:st(),programId:st()}),Y({accounts:ft(st()),data:st(),programId:st()})]),Fo=ln(bh,xh,c=>"accounts"in c?at(c,Co):at(c,Uo)),Po=Y({signatures:ft(st()),message:Y({accountKeys:ft(To),instructions:ft(Fo),recentBlockhash:st(),addressTableLookups:bt(ht(ft(Ro)))})}),On=Y({accountIndex:q(),mint:st(),owner:bt(st()),uiTokenAmount:Bi}),Oo=Y({writable:ft(le),readonly:ft(le)}),Gn=Y({err:Er,fee:q(),innerInstructions:bt(ht(ft(Y({index:q(),instructions:ft(Y({accounts:ft(q()),data:st(),programIdIndex:q()}))})))),preBalances:ft(q()),postBalances:ft(q()),logMessages:bt(ht(ft(st()))),preTokenBalances:bt(ht(ft(On))),postTokenBalances:bt(ht(ft(On))),loadedAddresses:bt(Oo),computeUnitsConsumed:bt(q())}),Xi=Y({err:Er,fee:q(),innerInstructions:bt(ht(ft(Y({index:q(),instructions:ft(Fo)})))),preBalances:ft(q()),postBalances:ft(q()),logMessages:bt(ht(ft(st()))),preTokenBalances:bt(ht(ft(On))),postTokenBalances:bt(ht(ft(On))),loadedAddresses:bt(Oo),computeUnitsConsumed:bt(q())}),Pr=ye([oe(0),oe("legacy")]),Br=Y({pubkey:st(),lamports:q(),postBalance:ht(q()),rewardType:ht(st()),commission:bt(ht(q()))}),Eh=Gt(ht(Y({blockhash:st(),previousBlockhash:st(),parentSlot:q(),transactions:ft(Y({transaction:Vi,meta:ht(Gn),version:bt(Pr)})),rewards:bt(ft(Br)),blockTime:ht(q()),blockHeight:ht(q())}))),Bh=Gt(ht(Y({blockhash:st(),previousBlockhash:st(),parentSlot:q(),rewards:bt(ft(Br)),blockTime:ht(q()),blockHeight:ht(q())}))),Mh=Gt(ht(Y({blockhash:st(),previousBlockhash:st(),parentSlot:q(),transactions:ft(Y({transaction:Lo,meta:ht(Gn),version:bt(Pr)})),rewards:bt(ft(Br)),blockTime:ht(q()),blockHeight:ht(q())}))),_h=Gt(ht(Y({blockhash:st(),previousBlockhash:st(),parentSlot:q(),transactions:ft(Y({transaction:Po,meta:ht(Xi),version:bt(Pr)})),rewards:bt(ft(Br)),blockTime:ht(q()),blockHeight:ht(q())}))),Sh=Gt(ht(Y({blockhash:st(),previousBlockhash:st(),parentSlot:q(),transactions:ft(Y({transaction:Lo,meta:ht(Xi),version:bt(Pr)})),rewards:bt(ft(Br)),blockTime:ht(q()),blockHeight:ht(q())}))),Ah=Gt(ht(Y({blockhash:st(),previousBlockhash:st(),parentSlot:q(),rewards:bt(ft(Br)),blockTime:ht(q()),blockHeight:ht(q())}))),Ih=Gt(ht(Y({blockhash:st(),previousBlockhash:st(),parentSlot:q(),transactions:ft(Y({transaction:Vi,meta:ht(Gn)})),rewards:bt(ft(Br)),blockTime:ht(q())}))),Ks=Gt(ht(Y({blockhash:st(),previousBlockhash:st(),parentSlot:q(),signatures:ft(st()),blockTime:ht(q())}))),di=Gt(ht(Y({slot:q(),meta:Gn,blockTime:bt(ht(q())),transaction:Vi,version:bt(Pr)}))),wn=Gt(ht(Y({slot:q(),transaction:Po,meta:ht(Xi),blockTime:bt(ht(q())),version:bt(Pr)}))),kh=fe(Y({blockhash:st(),feeCalculator:Y({lamportsPerSignature:q()})})),Rh=fe(Y({blockhash:st(),lastValidBlockHeight:q()})),Th=Y({slot:q(),numTransactions:q(),numSlots:q(),samplePeriodSecs:q()}),Lh=Gt(ft(Th)),Uh=fe(ht(Y({feeCalculator:Y({lamportsPerSignature:q()})}))),Ch=Gt(st()),Fh=Gt(st()),Ph=Y({err:Er,logs:ft(st()),signature:st()}),Oh=Y({result:Wn(Ph),subscription:q()}),Nh={"solana-client":`js/${(fi="0.0.0-development")!==null&&fi!==void 0?fi:"UNKNOWN"}`};class Yi{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let n,h,a,p,d,x;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,h=e.httpHeaders,a=e.fetch,p=e.fetchMiddleware,d=e.disableRetryOnRateLimit,x=e.httpAgent),this._rpcEndpoint=Au(t),this._rpcWsEndpoint=n||_u(t),this._rpcClient=qu(t,h,a,p,d,x),this._rpcRequest=Du(this._rpcClient),this._rpcBatchRequest=Hu(this._rpcClient),this._rpcWebSocket=new Rc.Client(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:h}=ie(e),a=this._buildArgs([t.toBase58()],n,void 0,h),p=await this._rpcRequest("getBalance",a),d=at(p,fe(q()));if("error"in d)throw new dt(d.error,`failed to get balance for ${t.toBase58()}`);return d.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=at(e,Gt(ht(q())));if("error"in n)throw new dt(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=at(t,Gt(q()));if("error"in e)throw new dt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=at(t,Zu);if("error"in e)throw new dt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),h=at(n,ju);if("error"in h)throw new dt(h.error,"failed to get supply");return h.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),h=await this._rpcRequest("getTokenSupply",n),a=at(h,fe(Bi));if("error"in a)throw new dt(a.error,"failed to get token supply");return a.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),h=await this._rpcRequest("getTokenAccountBalance",n),a=at(h,fe(Bi));if("error"in a)throw new dt(a.error,"failed to get token account balance");return a.result}async getTokenAccountsByOwner(t,e,n){const{commitment:h,config:a}=ie(n);let p=[t.toBase58()];"mint"in e?p.push({mint:e.mint.toBase58()}):p.push({programId:e.programId.toBase58()});const d=this._buildArgs(p,h,"base64",a),x=await this._rpcRequest("getTokenAccountsByOwner",d),I=at(x,Xu);if("error"in I)throw new dt(I.error,`failed to get token accounts owned by account ${t.toBase58()}`);return I.result}async getParsedTokenAccountsByOwner(t,e,n){let h=[t.toBase58()];"mint"in e?h.push({mint:e.mint.toBase58()}):h.push({programId:e.programId.toBase58()});const a=this._buildArgs(h,n,"jsonParsed"),p=await this._rpcRequest("getTokenAccountsByOwner",a),d=at(p,Yu);if("error"in d)throw new dt(d.error,`failed to get token accounts owned by account ${t.toBase58()}`);return d.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],h=await this._rpcRequest("getLargestAccounts",n),a=at(h,Ju);if("error"in a)throw new dt(a.error,"failed to get largest accounts");return a.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),h=await this._rpcRequest("getTokenLargestAccounts",n),a=at(h,Vu);if("error"in a)throw new dt(a.error,"failed to get token largest accounts");return a.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:h}=ie(e),a=this._buildArgs([t.toBase58()],n,"base64",h),p=await this._rpcRequest("getAccountInfo",a),d=at(p,fe(ht(sn)));if("error"in d)throw new dt(d.error,`failed to get info about account ${t.toBase58()}`);return d.result}async getParsedAccountInfo(t,e){const{commitment:n,config:h}=ie(e),a=this._buildArgs([t.toBase58()],n,"jsonParsed",h),p=await this._rpcRequest("getAccountInfo",a),d=at(p,fe(ht(_i)));if("error"in d)throw new dt(d.error,`failed to get info about account ${t.toBase58()}`);return d.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:h}=ie(e),a=t.map(I=>I.toBase58()),p=this._buildArgs([a],n,"jsonParsed",h),d=await this._rpcRequest("getMultipleAccounts",p),x=at(d,fe(ft(ht(_i))));if("error"in x)throw new dt(x.error,`failed to get info for accounts ${a}`);return x.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:h}=ie(e),a=t.map(I=>I.toBase58()),p=this._buildArgs([a],n,"base64",h),d=await this._rpcRequest("getMultipleAccounts",p),x=at(d,fe(ft(ht(sn))));if("error"in x)throw new dt(x.error,`failed to get info for accounts ${a}`);return x.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:h,config:a}=ie(e),p=this._buildArgs([t.toBase58()],h,void 0,{...a,epoch:n??(a==null?void 0:a.epoch)}),d=await this._rpcRequest("getStakeActivation",p),x=at(d,Gt(rh));if("error"in x)throw new dt(x.error,`failed to get Stake Activation ${t.toBase58()}`);return x.result}async getProgramAccounts(t,e){const{commitment:n,config:h}=ie(e),{encoding:a,...p}=h||{},d=this._buildArgs([t.toBase58()],n,a||"base64",p),x=await this._rpcRequest("getProgramAccounts",d),I=at(x,Gt(ft(Qu)));if("error"in I)throw new dt(I.error,`failed to get accounts owned by program ${t.toBase58()}`);return I.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:h}=ie(e),a=this._buildArgs([t.toBase58()],n,"jsonParsed",h),p=await this._rpcRequest("getProgramAccounts",a),d=at(p,Gt(ft(eh)));if("error"in d)throw new dt(d.error,`failed to get accounts owned by program ${t.toBase58()}`);return d.result}async confirmTransaction(t,e){let n;if(typeof t=="string")n=t;else{var h;const p=t;if((h=p.abortSignal)!==null&&h!==void 0&&h.aborted)return Promise.reject(p.abortSignal.reason);n=p.signature}let a;try{a=te.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return he(a.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,h,a=!1;const p=new Promise((x,I)=>{try{n=this.onSignature(e,(R,P)=>{n=void 0;const F={context:P,value:R};x({__type:Ie.PROCESSED,response:F})},t);const L=new Promise(R=>{n==null?R():h=this._onSubscriptionStateChange(n,P=>{P==="subscribed"&&R()})});(async()=>{if(await L,a)return;const R=await this.getSignatureStatus(e);if(a||R==null)return;const{context:P,value:F}=R;if(F!=null)if(F!=null&&F.err)I(F.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(F.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(F.confirmationStatus==="processed"||F.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}a=!0,x({__type:Ie.PROCESSED,response:{context:P,value:F}})}})()}catch(L){I(L)}});return{abortConfirmation:()=>{h&&(h(),h=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:p}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:h}}){let a=!1;const p=new Promise(R=>{const P=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let F=await P();if(!a){for(;F<=n;)if(await Mr(1e3),a||(F=await P(),a))return;R({__type:Ie.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:d,confirmationPromise:x}=this.getTransactionConfirmationPromise({commitment:t,signature:h}),I=this.getCancellationPromise(e);let L;try{const R=await Promise.race([I,x,p]);if(R.__type===Ie.PROCESSED)L=R.response;else throw new _o(h)}finally{a=!0,d()}return L}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:h,nonceValue:a,signature:p}}){let d=!1;const x=new Promise(U=>{let O=a,Z=null;const W=async()=>{try{const{context:D,value:ot}=await this.getNonceAndContext(h,{commitment:t,minContextSlot:n});return Z=D.slot,ot==null?void 0:ot.nonce}catch{return O}};(async()=>{if(O=await W(),!d)for(;;){if(a!==O){U({__type:Ie.NONCE_INVALID,slotInWhichNonceDidAdvance:Z});return}if(await Mr(2e3),d||(O=await W(),d))return}})()}),{abortConfirmation:I,confirmationPromise:L}=this.getTransactionConfirmationPromise({commitment:t,signature:p}),R=this.getCancellationPromise(e);let P;try{const U=await Promise.race([R,L,x]);if(U.__type===Ie.PROCESSED)P=U.response;else{var F;let O;for(;;){var N;const Z=await this.getSignatureStatus(p);if(Z==null)break;if(Z.context.slot<((N=U.slotInWhichNonceDidAdvance)!==null&&N!==void 0?N:n)){await Mr(400);continue}O=Z;break}if((F=O)!==null&&F!==void 0&&F.value){const Z=t||"finalized",{confirmationStatus:W}=O.value;switch(Z){case"processed":case"recent":if(W!=="processed"&&W!=="confirmed"&&W!=="finalized")throw new Xr(p);break;case"confirmed":case"single":case"singleGossip":if(W!=="confirmed"&&W!=="finalized")throw new Xr(p);break;case"finalized":case"max":case"root":if(W!=="finalized")throw new Xr(p);break;default:(D=>{})(Z)}P={context:O.context,value:{err:O.value.err}}}else throw new Xr(p)}}finally{d=!0,I()}return P}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const h=new Promise(x=>{let I=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{I=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>x({__type:Ie.TIMED_OUT,timeoutMs:I}),I)}),{abortConfirmation:a,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let d;try{const x=await Promise.race([p,h]);if(x.__type===Ie.PROCESSED)d=x.response;else throw new So(e,x.timeoutMs/1e3)}finally{clearTimeout(n),a()}return d}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=at(t,Gt(ft(ph)));if("error"in e)throw new dt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),h=at(n,gh);if("error"in h)throw new dt(h.error,"failed to get vote accounts");return h.result}async getSlot(t){const{commitment:e,config:n}=ie(t),h=this._buildArgs([],e,void 0,n),a=await this._rpcRequest("getSlot",h),p=at(a,Gt(q()));if("error"in p)throw new dt(p.error,"failed to get slot");return p.result}async getSlotLeader(t){const{commitment:e,config:n}=ie(t),h=this._buildArgs([],e,void 0,n),a=await this._rpcRequest("getSlotLeader",h),p=at(a,Gt(st()));if("error"in p)throw new dt(p.error,"failed to get slot leader");return p.result}async getSlotLeaders(t,e){const n=[t,e],h=await this._rpcRequest("getSlotLeaders",n),a=at(h,Gt(ft(le)));if("error"in a)throw new dt(a.error,"failed to get slot leaders");return a.result}async getSignatureStatus(t,e){const{context:n,value:h}=await this.getSignatureStatuses([t],e);he(h.length===1);const a=h[0];return{context:n,value:a}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const h=await this._rpcRequest("getSignatureStatuses",n),a=at(h,wh);if("error"in a)throw new dt(a.error,"failed to get signature status");return a.result}async getTransactionCount(t){const{commitment:e,config:n}=ie(t),h=this._buildArgs([],e,void 0,n),a=await this._rpcRequest("getTransactionCount",h),p=at(a,Gt(q()));if("error"in p)throw new dt(p.error,"failed to get transaction count");return p.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),h=at(n,$u);if("error"in h)throw new dt(h.error,"failed to get inflation");return h.result}async getInflationReward(t,e,n){const{commitment:h,config:a}=ie(n),p=this._buildArgs([t.map(I=>I.toBase58())],h,void 0,{...a,epoch:e??(a==null?void 0:a.epoch)}),d=await this._rpcRequest("getInflationReward",p),x=at(d,Ru);if("error"in x)throw new dt(x.error,"failed to get inflation reward");return x.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=at(t,zu);if("error"in e)throw new dt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=ie(t),h=this._buildArgs([],e,void 0,n),a=await this._rpcRequest("getEpochInfo",h),p=at(a,Ku);if("error"in p)throw new dt(p.error,"failed to get epoch info");return p.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=at(t,Wu);if("error"in e)throw new dt(e.error,"failed to get epoch schedule");const n=e.result;return new mu(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=at(t,Gu);if("error"in e)throw new dt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),h=await this._rpcRequest("getMinimumBalanceForRentExemption",n),a=at(h,vh);return"error"in a?(console.warn("Unable to fetch minimum balance for rent exemption"),0):a.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",e),h=at(n,kh);if("error"in h)throw new dt(h.error,"failed to get recent blockhash");return h.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=at(e,Lh);if("error"in n)throw new dt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),h=await this._rpcRequest("getFeeCalculatorForBlockhash",n),a=at(h,Uh);if("error"in a)throw new dt(a.error,"failed to get fee calculator");const{context:p,value:d}=a.result;return{context:p,value:d!==null?d.feeCalculator:null}}async getFeeForMessage(t,e){const n=Ur(t.serialize()).toString("base64"),h=this._buildArgs([n],e),a=await this._rpcRequest("getFeeForMessage",h),p=at(a,fe(ht(q())));if("error"in p)throw new dt(p.error,"failed to get fee for message");if(p.result===null)throw new Error("invalid blockhash");return p.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=ie(t),h=this._buildArgs([],e,void 0,n),a=await this._rpcRequest("getLatestBlockhash",h),p=at(a,Rh);if("error"in p)throw new dt(p.error,"failed to get latest blockhash");return p.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=at(t,Gt(Ou));if("error"in e)throw new dt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=at(t,Gt(st()));if("error"in e)throw new dt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:h}=ie(e),a=this._buildArgsAtLeastConfirmed([t],n,void 0,h),p=await this._rpcRequest("getBlock",a);try{switch(h==null?void 0:h.transactionDetails){case"accounts":{const d=at(p,Mh);if("error"in d)throw d.error;return d.result}case"none":{const d=at(p,Bh);if("error"in d)throw d.error;return d.result}default:{const d=at(p,Eh);if("error"in d)throw d.error;const{result:x}=d;return x?{...x,transactions:x.transactions.map(({transaction:I,meta:L,version:R})=>({meta:L,transaction:{...I,message:li(R,I.message)},version:R}))}:null}}}catch(d){throw new dt(d,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:h}=ie(e),a=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",h),p=await this._rpcRequest("getBlock",a);try{switch(h==null?void 0:h.transactionDetails){case"accounts":{const d=at(p,Sh);if("error"in d)throw d.error;return d.result}case"none":{const d=at(p,Ah);if("error"in d)throw d.error;return d.result}default:{const d=at(p,_h);if("error"in d)throw d.error;return d.result}}}catch(d){throw new dt(d,"failed to get block")}}async getBlockHeight(t){const{commitment:e,config:n}=ie(t),h=this._buildArgs([],e,void 0,n),a=await this._rpcRequest("getBlockHeight",h),p=at(a,Gt(q()));if("error"in p)throw new dt(p.error,"failed to get block height information");return p.result}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:d,...x}=t;n=d,e=x}const h=this._buildArgs([],n,"base64",e),a=await this._rpcRequest("getBlockProduction",h),p=at(a,Nu);if("error"in p)throw new dt(p.error,"failed to get block production information");return p.result}async getTransaction(t,e){const{commitment:n,config:h}=ie(e),a=this._buildArgsAtLeastConfirmed([t],n,void 0,h),p=await this._rpcRequest("getTransaction",a),d=at(p,di);if("error"in d)throw new dt(d.error,"failed to get transaction");const x=d.result;return x&&{...x,transaction:{...x.transaction,message:li(x.version,x.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:h}=ie(e),a=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",h),p=await this._rpcRequest("getTransaction",a),d=at(p,wn);if("error"in d)throw new dt(d.error,"failed to get transaction");return d.result}async getParsedTransactions(t,e){const{commitment:n,config:h}=ie(e),a=t.map(x=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([x],n,"jsonParsed",h)}));return(await this._rpcBatchRequest(a)).map(x=>{const I=at(x,wn);if("error"in I)throw new dt(I.error,"failed to get transactions");return I.result})}async getTransactions(t,e){const{commitment:n,config:h}=ie(e),a=t.map(x=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([x],n,void 0,h)}));return(await this._rpcBatchRequest(a)).map(x=>{const I=at(x,di);if("error"in I)throw new dt(I.error,"failed to get transactions");const L=I.result;return L&&{...L,transaction:{...L.transaction,message:li(L.version,L.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),h=await this._rpcRequest("getConfirmedBlock",n),a=at(h,Ih);if("error"in a)throw new dt(a.error,"failed to get confirmed block");const p=a.result;if(!p)throw new Error("Confirmed block "+t+" not found");const d={...p,transactions:p.transactions.map(({transaction:x,meta:I})=>{const L=new Ge(x.message);return{meta:I,transaction:{...x,message:L}}})};return{...d,transactions:d.transactions.map(({transaction:x,meta:I})=>({meta:I,transaction:$e.populate(x.message,x.signatures)}))}}async getBlocks(t,e,n){const h=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),a=await this._rpcRequest("getBlocks",h),p=at(a,Gt(ft(q())));if("error"in p)throw new dt(p.error,"failed to get blocks");return p.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),h=await this._rpcRequest("getBlock",n),a=at(h,Ks);if("error"in a)throw new dt(a.error,"failed to get block");const p=a.result;if(!p)throw new Error("Block "+t+" not found");return p}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),h=await this._rpcRequest("getConfirmedBlock",n),a=at(h,Ks);if("error"in a)throw new dt(a.error,"failed to get confirmed block");const p=a.result;if(!p)throw new Error("Confirmed block "+t+" not found");return p}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),h=await this._rpcRequest("getConfirmedTransaction",n),a=at(h,di);if("error"in a)throw new dt(a.error,"failed to get transaction");const p=a.result;if(!p)return p;const d=new Ge(p.transaction.message),x=p.transaction.signatures;return{...p,transaction:$e.populate(d,x)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),h=await this._rpcRequest("getConfirmedTransaction",n),a=at(h,wn);if("error"in a)throw new dt(a.error,"failed to get confirmed transaction");return a.result}async getParsedConfirmedTransactions(t,e){const n=t.map(p=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([p],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(p=>{const d=at(p,wn);if("error"in d)throw new dt(d.error,"failed to get confirmed transactions");return d.result})}async getConfirmedSignaturesForAddress(t,e,n){let h={},a=await this.getFirstAvailableBlock();for(;!("until"in h)&&(e--,!(e<=0||e<a));)try{const x=await this.getConfirmedBlockSignatures(e,"finalized");x.signatures.length>0&&(h.until=x.signatures[x.signatures.length-1].toString())}catch(x){if(x instanceof Error&&x.message.includes("skipped"))continue;throw x}let p=await this.getSlot("finalized");for(;!("before"in h)&&(n++,!(n>p));)try{const x=await this.getConfirmedBlockSignatures(n);x.signatures.length>0&&(h.before=x.signatures[x.signatures.length-1].toString())}catch(x){if(x instanceof Error&&x.message.includes("skipped"))continue;throw x}return(await this.getConfirmedSignaturesForAddress2(t,h)).map(x=>x.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const h=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),a=await this._rpcRequest("getConfirmedSignaturesForAddress2",h),p=at(a,nh);if("error"in p)throw new dt(p.error,"failed to get confirmed signatures for address");return p.result}async getSignaturesForAddress(t,e,n){const h=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),a=await this._rpcRequest("getSignaturesForAddress",h),p=at(a,ih);if("error"in p)throw new dt(p.error,"failed to get signatures for address");return p.result}async getAddressLookupTable(t,e){const{context:n,value:h}=await this.getAccountInfoAndContext(t,e);let a=null;return h!==null&&(a=new Hs({key:t,state:Hs.deserialize(h.data)})),{context:n,value:a}}async getNonceAndContext(t,e){const{context:n,value:h}=await this.getAccountInfoAndContext(t,e);let a=null;return h!==null&&(a=Zi.fromAccountData(h.data)),{context:n,value:a}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),h=at(n,Ch);if("error"in h)throw new dt(h.error,`airdrop to ${t.toBase58()} failed`);return h.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Mr(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Su;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let h=0;h<50;h++){const a=await this.getLatestBlockhash("finalized");if(n!==a.blockhash)return this._blockhashInfo={latestBlockhash:a,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},a;await Mr(xu/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=ie(t),h=this._buildArgs([],e,"base64",n),a=await this._rpcRequest("getStakeMinimumDelegation",h),p=at(a,fe(q()));if("error"in p)throw new dt(p.error,"failed to get stake minimum delegation");return p.result}async simulateTransaction(t,e,n){if("message"in t){const U=t.serialize(),O=Zt.Buffer.from(U).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const Z=e||{};Z.encoding="base64","commitment"in Z||(Z.commitment=this.commitment);const W=[O,Z],D=await this._rpcRequest("simulateTransaction",W),ot=at(D,$s);if("error"in ot)throw new Error("failed to simulate transaction: "+ot.error.message);return ot.result}let h;if(t instanceof $e){let N=t;h=new $e,h.feePayer=N.feePayer,h.instructions=t.instructions,h.nonceInfo=N.nonceInfo,h.signatures=N.signatures}else h=$e.populate(t),h._message=h._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const a=e;if(h.nonceInfo&&a)h.sign(...a);else{let N=this._disableBlockhashCaching;for(;;){const U=await this._blockhashWithExpiryBlockHeight(N);if(h.lastValidBlockHeight=U.lastValidBlockHeight,h.recentBlockhash=U.blockhash,!a)break;if(h.sign(...a),!h.signature)throw new Error("!signature");const O=h.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(O)&&!this._blockhashInfo.transactionSignatures.includes(O)){this._blockhashInfo.simulatedSignatures.push(O);break}else N=!0}}const p=h._compile(),d=p.serialize(),I=h._serialize(d).toString("base64"),L={encoding:"base64",commitment:this.commitment};if(n){const N=(Array.isArray(n)?n:p.nonProgramIds()).map(U=>U.toBase58());L.accounts={encoding:"base64",addresses:N}}a&&(L.sigVerify=!0);const R=[I,L],P=await this._rpcRequest("simulateTransaction",R),F=at(P,$s);if("error"in F){let N;if("data"in F.error&&(N=F.error.data.logs,N&&Array.isArray(N))){const U=`
    `,O=U+N.join(U);console.error(F.error.message,O)}throw new qs("failed to simulate transaction: "+F.error.message,N)}return F.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const p=t.serialize();return await this.sendRawTransaction(p,n)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const h=e;if(t.nonceInfo)t.sign(...h);else{let p=this._disableBlockhashCaching;for(;;){const d=await this._blockhashWithExpiryBlockHeight(p);if(t.lastValidBlockHeight=d.lastValidBlockHeight,t.recentBlockhash=d.blockhash,t.sign(...h),!t.signature)throw new Error("!signature");const x=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(x))p=!0;else{this._blockhashInfo.transactionSignatures.push(x);break}}}const a=t.serialize();return await this.sendRawTransaction(a,n)}async sendRawTransaction(t,e){const n=Ur(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},h=e&&e.skipPreflight,a=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),h&&(n.skipPreflight=h),a&&(n.preflightCommitment=a);const p=[t,n],d=await this._rpcRequest("sendTransaction",p),x=at(d,Fh);if("error"in x){let I;throw"data"in x.error&&(I=x.error.data.logs),new qs("failed to send transaction: "+x.error.message,I)}return x.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var n;const h=(n=this._subscriptionsByHash[t])===null||n===void 0?void 0:n.state;if(this._subscriptionsByHash[t]=e,h!==e.state){const a=this._subscriptionStateChangeCallbacksByHash[t];a&&a.forEach(p=>{try{p(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var n;const h=this._subscriptionHashByClientSubscriptionId[t];if(h==null)return()=>{};const a=(n=this._subscriptionStateChangeCallbacksByHash)[h]||(n[h]=new Set);return a.add(e),()=>{a.delete(e),a.size===0&&delete this._subscriptionStateChangeCallbacksByHash[h]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const h=this._subscriptionsByHash[n];if(h!==void 0)switch(h.state){case"pending":case"unsubscribed":if(h.callbacks.size===0){delete this._subscriptionsByHash[n],h.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[h.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:a,method:p}=h;try{this._setSubscription(n,{...h,state:"subscribing"});const d=await this._rpcWebSocket.call(p,a);this._setSubscription(n,{...h,serverSubscriptionId:d,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[d]=h.callbacks,await this._updateSubscriptions()}catch(d){if(d instanceof Error&&console.error(`${p} error for argument`,a,d.message),!e())return;this._setSubscription(n,{...h,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":h.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:a,unsubscribeMethod:p}=h;if(this._subscriptionsAutoDisposedByRpc.has(a))this._subscriptionsAutoDisposedByRpc.delete(a);else{this._setSubscription(n,{...h,state:"unsubscribing"}),this._setSubscription(n,{...h,state:"unsubscribing"});try{await this._rpcWebSocket.call(p,[a])}catch(d){if(d instanceof Error&&console.error(`${p} error:`,d.message),!e())return;this._setSubscription(n,{...h,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...h,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(h=>{try{h(...e)}catch(a){console.error(a)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=at(t,sh);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,h=pu([t.method,e]),a=this._subscriptionsByHash[h];return a===void 0?this._subscriptionsByHash[h]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:a.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=h,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const p=this._subscriptionsByHash[h];he(p!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),p.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const h=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},h)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=at(t,ah);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,h){const a=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",h?{filters:h}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const h=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},h)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=at(t,Oh);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=at(t,uh);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=at(t,fh);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,h){const a=e||this._commitment;if(a||n||h){let p={};n&&(p.encoding=n),a&&(p.commitment=a),h&&(p=Object.assign(p,h)),t.push(p)}return t}_buildArgsAtLeastConfirmed(t,e,n,h){const a=e||this._commitment;if(a&&!["confirmed","finalized"].includes(a))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,h)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=at(t,lh);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const h=this._buildArgs([t],n||this._commitment||"finalized"),a=this._makeSubscription({callback:(p,d)=>{if(p.type==="status"){e(p.result,d);try{this.removeSignatureListener(a)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},h);return a}onSignatureWithOptions(t,e,n){const{commitment:h,...a}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},p=this._buildArgs([t],h,void 0,a),d=this._makeSubscription({callback:(x,I)=>{e(x,I);try{this.removeSignatureListener(d)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},p);return d}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=at(t,dh);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class en{constructor(t){this._keypair=void 0,this._keypair=t??Fs()}static generate(){return new en(Fs())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const n=t.slice(32,64);if(!e||!e.skipValidation){const h=t.slice(0,32),a=xi(h);for(let p=0;p<32;p++)if(n[p]!==a[p])throw new Error("provided secretKey is invalid")}return new en({publicKey:n,secretKey:t})}static fromSeed(t){const e=xi(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),new en({publicKey:e,secretKey:n})}get publicKey(){return new gt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:T.struct([T.u32("instruction"),Cr("recentSlot"),T.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:T.struct([T.u32("instruction")])},ExtendLookupTable:{index:2,layout:T.struct([T.u32("instruction"),Cr(),T.seq(jt(),T.offset(T.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:T.struct([T.u32("instruction")])},CloseLookupTable:{index:4,layout:T.struct([T.u32("instruction")])}});new gt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:T.struct([T.u8("instruction"),T.u32("units"),T.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:T.struct([T.u8("instruction"),T.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:T.struct([T.u8("instruction"),T.u32("units")])},SetComputeUnitPrice:{index:3,layout:T.struct([T.u8("instruction"),Cr("microLamports")])}});new gt("ComputeBudget111111111111111111111111111111");T.struct([T.u8("numSignatures"),T.u8("padding"),T.u16("signatureOffset"),T.u16("signatureInstructionIndex"),T.u16("publicKeyOffset"),T.u16("publicKeyInstructionIndex"),T.u16("messageDataOffset"),T.u16("messageDataSize"),T.u16("messageInstructionIndex")]);new gt("Ed25519SigVerify111111111111111111111111111");gr.hmacSha256Sync=(c,...t)=>{const e=Eo.create(yi,c);return t.forEach(n=>e.update(n)),e.digest()};gr.isValidPrivateKey;T.struct([T.u8("numSignatures"),T.u16("signatureOffset"),T.u8("signatureInstructionIndex"),T.u16("ethAddressOffset"),T.u8("ethAddressInstructionIndex"),T.u16("messageDataOffset"),T.u16("messageDataSize"),T.u8("messageInstructionIndex"),T.blob(20,"ethAddress"),T.blob(64,"signature"),T.u8("recoveryId")]);new gt("KeccakSecp256k11111111111111111111111111111");new gt("StakeConfig11111111111111111111111111111111");class Ws{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Ws.default=new Ws(0,0,gt.default);Object.freeze({Initialize:{index:0,layout:T.struct([T.u32("instruction"),nu(),iu()])},Authorize:{index:1,layout:T.struct([T.u32("instruction"),jt("newAuthorized"),T.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:T.struct([T.u32("instruction")])},Split:{index:3,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},Withdraw:{index:4,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},Deactivate:{index:5,layout:T.struct([T.u32("instruction")])},Merge:{index:7,layout:T.struct([T.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:T.struct([T.u32("instruction"),jt("newAuthorized"),T.u32("stakeAuthorizationType"),Sr("authoritySeed"),jt("authorityOwner")])}});new gt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:T.struct([T.u32("instruction"),su()])},Authorize:{index:1,layout:T.struct([T.u32("instruction"),jt("newAuthorized"),T.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:T.struct([T.u32("instruction"),ou()])}});new gt("Vote111111111111111111111111111111111111111");new gt("Va1idator1nfo111111111111111111111111111111");Y({name:st(),website:bt(st()),details:bt(st()),keybaseUsername:bt(st())});new gt("Vote111111111111111111111111111111111111111");T.struct([jt("nodePubkey"),jt("authorizedWithdrawer"),T.u8("commission"),T.nu64(),T.seq(T.struct([T.nu64("slot"),T.u32("confirmationCount")]),T.offset(T.u32(),-8),"votes"),T.u8("rootSlotValid"),T.nu64("rootSlot"),T.nu64(),T.seq(T.struct([T.nu64("epoch"),jt("authorizedVoter")]),T.offset(T.u32(),-8),"authorizedVoters"),T.struct([T.seq(T.struct([jt("authorizedPubkey"),T.nu64("epochOfLastAuthorizedSwitch"),T.nu64("targetEpoch")]),32,"buf"),T.nu64("idx"),T.u8("isEmpty")],"priorVoters"),T.nu64(),T.seq(T.struct([T.nu64("epoch"),T.nu64("credits"),T.nu64("prevCredits")]),T.offset(T.u32(),-8),"epochCredits"),T.struct([T.nu64("slot"),T.nu64("timestamp")],"lastTimestamp")]);function qh(c){return(t,e,n,h)=>t.method==="solana_chainId"?(e.result=c,h()):n()}function Dh(c){return(t,e,n,h)=>t.method==="solana_provider_config"?(e.result=c,h()):n()}function No(c){const{chainId:t}=c;return on([qh(t),Dh(c)])}function Hh(c){const{rpcTarget:t}=c,e=Vo({rpcTarget:t});return{networkMiddleware:on([No(c),e]),fetchMiddleware:e}}function $h(c){let{getAccounts:t}=c;return Nn(async(e,n,h)=>{const{method:a}=e;if(a!=="getAccounts")return h();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const p=await t(e);n.result=p})}function zh(c){let{requestAccounts:t}=c;return Nn(async(e,n,h)=>{const{method:a}=e;if(a!=="requestAccounts")return h();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const p=await t(e);n.result=p})}function Ue(c,t){return Nn(async(e,n,h)=>{const{method:a}=e;if(a!==c)return h();if(!t)throw new Error("WalletMiddleware - ".concat(c," not provided"));const p=await t(e);n.result=p})}function Ji(c){const{getAccounts:t,requestAccounts:e,signTransaction:n,signAndSendTransaction:h,signAllTransactions:a,signMessage:p,getPrivateKey:d,getSecretKey:x}=c;return on([zh({requestAccounts:e}),$h({getAccounts:t}),Ue("signTransaction",n),Ue("signAndSendTransaction",h),Ue("signAllTransactions",a),Ue("signMessage",p),Ue("solanaPrivateKey",d),Ue("solanaSecretKey",x)])}function Kh(c){let{addNewChainConfig:t,switchSolanaChain:e}=c;return on([Ue("addSolanaChain",t),Ue("switchSolanaChain",e)])}function Wh(c){let{updatePrivatekey:t}=c;return on([Ue("updateAccount",t)])}function Gs(c,t){var e=Object.keys(c);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(c);t&&(n=n.filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable})),e.push.apply(e,n)}return e}function Zs(c){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Gs(Object(e),!0).forEach(function(n){Fr(c,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(e)):Gs(Object(e)).forEach(function(n){Object.defineProperty(c,n,Object.getOwnPropertyDescriptor(e,n))})}return c}class Zn extends Ri{constructor(t){let{config:e,state:n}=t;super({config:{chainConfig:Zs(Zs({},e.chainConfig),{},{chainNamespace:xn.SOLANA})},state:n})}async switchChain(t){return Promise.resolve()}async setupProvider(t){const e=new ki,n=this.getProviderHandlers(t),h=Ji(n);e.push(h);const a=No(this.config.chainConfig);e.push(a);const p=this.getInjectedProviderProxy(t);p&&e.push(p);const d=Ti(e);this.updateProviderEngineProxy(d),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig:t}=this.config;return this.update({chainId:t.chainId}),t.chainId||""}getInjectedProviderProxy(t){}}const Qi=c=>({requestAccounts:async()=>c.publicKey?[te.encode(c.publicKey.toBytes())]:[],getAccounts:async()=>c.publicKey?[te.encode(c.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw Vt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Vt.ethErrors.rpc.methodNotSupported()},signTransaction:async e=>await c.signTransaction(e.params.message),signMessage:async e=>(await c.signMessage(e.params.message,e.params.display)).signature,signAllTransactions:async e=>{var n,h;if(!((n=e.params)!==null&&n!==void 0&&n.message)||!((h=e.params)!==null&&h!==void 0&&h.message.length))throw Vt.ethErrors.rpc.invalidParams("message");return await c.signAllTransactions(e.params.message)},signAndSendTransaction:async e=>({signature:(await c.signAndSendTransaction(e.params.message)).signature})});function js(c,t){var e=Object.keys(c);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(c);t&&(n=n.filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable})),e.push.apply(e,n)}return e}function Gh(c){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?js(Object(e),!0).forEach(function(n){Fr(c,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(e)):js(Object(e)).forEach(function(n){Object.defineProperty(c,n,Object.getOwnPropertyDescriptor(e,n))})}return c}function qo(c){return Nn(async(t,e,n)=>{const h=await c.request(Gh({},t));e.result=h})}class Zh extends Zn{getProviderHandlers(t){return Qi(t)}getInjectedProviderProxy(t){return qo(t)}}const jh=(c,t)=>({requestAccounts:async()=>{const{data:n}=await c.connect();return[n.publicKey]},getAccounts:async()=>{const{data:n}=await c.connect();return[n.publicKey]},getPrivateKey:async()=>{throw Vt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Vt.ethErrors.rpc.methodNotSupported()},signTransaction:async n=>{const h=n.params.message;if(!h)throw Vt.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:a}=await c.signTransaction(te.encode(h.serializeMessage()));if(!a.publicKey||!a.signature)throw new Error("Invalid signature from slope wallet");const p=new gt(a.publicKey),d=te.decode(a.signature);return h.addSignature(p,d),h},signMessage:async n=>{const h=await c.signMessage(n.params.message);return te.decode(h.data.signature)},signAndSendTransaction:async n=>{const h=t();if(!h)throw Vt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const a=n.params.message;if(!a)throw Vt.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:p}=await c.signTransaction(te.encode(a.serializeMessage()));if(!p.publicKey||!p.signature)throw new Error("Invalid signature from slope wallet");const d=new gt(p.publicKey),x=te.decode(p.signature);a.addSignature(d,x);const I=await h.request({method:"solana_provider_config",params:[]});return{signature:await new Yi(I.rpcTarget).sendRawTransaction(a.serialize())}},signAllTransactions:async n=>{var h,a,p;if(!((h=n.params)!==null&&h!==void 0&&h.message)||!((a=n.params)!==null&&a!==void 0&&a.message.length))throw Vt.ethErrors.rpc.invalidParams("message");const d=n.params.message,{length:x}=d,I=[];for(let F=0;F<x;F++)I.push(te.encode(n.params.message[F].serializeMessage()));const{msg:L,data:R}=await c.signAllTransactions(I);if(!R.publicKey||((p=R.signatures)===null||p===void 0?void 0:p.length)!==x)throw new Error(L);const P=new gt(R.publicKey);for(let F=0;F<x;F++){const N=te.decode(R.signatures[F]);d[F].addSignature(P,N)}return d}});class Vh extends Zn{getProviderHandlers(t){return jh(t,this.getProviderEngineProxy.bind(this))}}const Xh=(c,t)=>{const e=Qi(c);return e.signAndSendTransaction=async n=>{const h=t();if(!h)throw Vt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const a=await c.signTransaction(n.params.message),p=await h.request({method:"solana_provider_config",params:[]});return{signature:await new Yi(p.rpcTarget).sendRawTransaction(a.serialize())}},e};class Yh extends Zn{getProviderHandlers(t){return Xh(t,this.getProviderEngineProxy.bind(this))}}const Jh=(c,t)=>{const e=Qi(c);return e.signMessage=async n=>{const{signature:h}=await c.sign(n.params.message,"utf8");return h},e.signAndSendTransaction=async n=>{const h=t();if(!h)throw Vt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const a=await c.signTransaction(n.params.message),p=await h.request({method:"solana_provider_config",params:[]});return{signature:await new Yi(p.rpcTarget).sendRawTransaction(a.serialize())}},e};class Qh extends Zn{getProviderHandlers(t){return Jh(t,this.getProviderEngineProxy.bind(this))}}const tf=c=>({requestAccounts:async()=>await c.request({method:"solana_requestAccounts",params:{}}),getAccounts:async()=>await c.request({method:"solana_requestAccounts",params:{}}),getPrivateKey:async()=>{throw Vt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Vt.ethErrors.rpc.methodNotSupported()},signMessage:async e=>{var n;if(!((n=e.params)!==null&&n!==void 0&&n.message))throw Vt.ethErrors.rpc.invalidParams("message");return await c.signMessage(e.params.message)},signTransaction:async e=>{var n;if(!((n=e.params)!==null&&n!==void 0&&n.message))throw Vt.ethErrors.rpc.invalidParams("message");const h=e.params.message;return await c.signTransaction(h)},signAndSendTransaction:async e=>{var n;if(!((n=e.params)!==null&&n!==void 0&&n.message))throw Vt.ethErrors.rpc.invalidParams("message");const h=e.params.message;return{signature:await c.sendTransaction(h)}},signAllTransactions:async e=>{var n,h;if(!((n=e.params)!==null&&n!==void 0&&n.message)||!((h=e.params)!==null&&h!==void 0&&h.message.length))throw Vt.ethErrors.rpc.invalidParams("message");const a=e.params.message;return await c.signAllTransactions(a)}});function Vs(c,t){var e=Object.keys(c);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(c);t&&(n=n.filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable})),e.push.apply(e,n)}return e}function vn(c){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Vs(Object(e),!0).forEach(function(n){Fr(c,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(e)):Vs(Object(e)).forEach(function(n){Object.defineProperty(c,n,Object.getOwnPropertyDescriptor(e,n))})}return c}class ef extends Ri{constructor(t){let{config:e,state:n}=t;super({config:{chainConfig:vn(vn({},e.chainConfig),{},{chainNamespace:xn.SOLANA})},state:n})}async switchChain(t){return Promise.resolve()}async setupProvider(t){this.handleInjectedProviderUpdate(t),await this.setupEngine(t)}async lookupNetwork(){if(!this.provider)throw Vt.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});const{chainId:t}=this.config.chainConfig,e=await this.provider.request({method:"solana_chainId"}),n=ts(e.toString())?e:"0x".concat(parseInt(e,10).toString(16));if(t!==n)throw Ii.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(t));return this.update({chainId:n}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),this.state.chainId}async setupEngine(t){const e=tf(t),n=Ji(e),h=qo(t),a=new ki;a.push(n),a.push(h);const p=Ti(a);this.updateProviderEngineProxy(p),await this.lookupNetwork()}async handleInjectedProviderUpdate(t){t.on("accountsChanged",async e=>{this.provider.emit("accountsChanged",e)}),t.on("chainChanged",async e=>{const n=ts(e)?e:"0x".concat(parseInt(e,10).toString(16));this.configure({chainConfig:vn(vn({},this.config.chainConfig),{},{chainId:n})}),await this.setupProvider(t)})}}async function rf(c){let{privKey:t,getProviderEngineProxy:e}=c;const n=()=>en.fromSecretKey(Buffer.from(t,"hex"));if(typeof t!="string")throw Ii.invalidParams("privKey must be a string");const h=n();return{requestAccounts:async()=>[h.publicKey.toBase58()],getAccounts:async()=>[h.publicKey.toBase58()],getPrivateKey:async()=>t,getSecretKey:async()=>te.encode(h.secretKey),signTransaction:async p=>{var d;if(!((d=p.params)!==null&&d!==void 0&&d.message))throw Vt.ethErrors.rpc.invalidParams("message");const x=p.params.message;return x.partialSign(h),x},signMessage:async p=>{var d;if(!((d=p.params)!==null&&d!==void 0&&d.message))throw Vt.ethErrors.rpc.invalidParams("message");return Xo.sign.detached(p.params.message,h.secretKey)},signAndSendTransaction:async p=>{var d;if(!((d=p.params)!==null&&d!==void 0&&d.message))throw Vt.ethErrors.rpc.invalidParams("message");const x=e();if(!x)throw Vt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const I=p.params.message;return I.sign(h),{signature:await x.request({method:"sendTransaction",params:[te.encode(I.serialize())]})}},signAllTransactions:async p=>{var d,x,I;if(!((d=p.params)!==null&&d!==void 0&&d.message)||!((x=p.params)!==null&&x!==void 0&&x.message.length))throw Vt.ethErrors.rpc.invalidParams("message");const L=(I=p.params)===null||I===void 0?void 0:I.message;for(const R of L||[])R.partialSign(h);return L}}}function Xs(c,t){var e=Object.keys(c);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(c);t&&(n=n.filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable})),e.push.apply(e,n)}return e}function Ys(c){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Xs(Object(e),!0).forEach(function(n){Fr(c,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(e)):Xs(Object(e)).forEach(function(n){Object.defineProperty(c,n,Object.getOwnPropertyDescriptor(e,n))})}return c}class Si extends Ri{constructor(t){let{config:e,state:n}=t;super({config:{chainConfig:Ys(Ys({},e.chainConfig),{},{chainNamespace:xn.SOLANA})},state:n})}async enable(){if(!this.state.privateKey)throw Vt.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(t){const e=await rf({privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),n=Ji(e),h=new ki,{networkMiddleware:a}=Hh(this.config.chainConfig);h.push(this.getChainSwitchMiddleware()),h.push(this.getAccountMiddleware()),h.push(n),h.push(a);const p=Ti(h);this.updateProviderEngineProxy(p),await this.lookupNetwork()}async updateAccount(t){if(!this._providerEngineProxy)throw Vt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==t.privateKey&&(await this.setupProvider(t.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(t){if(!this._providerEngineProxy)throw Vt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const e=this.getChainConfig(t.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:e});const n=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(n)}async lookupNetwork(){if(!this._providerEngineProxy)throw Vt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const t=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:e}=this.config;if(t!=="ok")throw Ii.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(e.rpcTarget));return this.update({chainId:e.chainId}),this.state.chainId!==e.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return Kh({addNewChainConfig:async n=>{if(!n.params)throw Vt.ethErrors.rpc.invalidParams("Missing request params");const{chainId:h,chainName:a,rpcUrls:p,blockExplorerUrls:d,nativeCurrency:x}=n.params;if(!h)throw Vt.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!p||p.length===0)throw Vt.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!x)throw Vt.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:xn.SOLANA,chainId:h,ticker:(x==null?void 0:x.symbol)||"SOL",tickerName:(x==null?void 0:x.name)||"Solana",displayName:a,rpcTarget:p[0],blockExplorer:(d==null?void 0:d[0])||""})},switchSolanaChain:async n=>{if(!n.params)throw Vt.ethErrors.rpc.invalidParams("Missing request params");if(!n.params.chainId)throw Vt.ethErrors.rpc.invalidParams("Missing chainId");await this.switchChain(n.params)}})}getAccountMiddleware(){return Wh({updatePrivatekey:async e=>{if(!e.params)throw Vt.ethErrors.rpc.invalidParams("Missing request params");if(!e.params.privateKey)throw Vt.ethErrors.rpc.invalidParams("Missing privateKey");const{privateKey:n}=e.params;await this.updateAccount({privateKey:n})}})}}Fr(Si,"getProviderInstance",async c=>{const t=new Si({config:{chainConfig:c.chainConfig}});return await t.setupProvider(c.privKey),t});class nf{constructor(t){Fr(this,"provider",void 0),this.provider=t}async requestAccounts(){return await this.provider.request({method:"requestAccounts",params:{}})}async signAndSendTransaction(t){const{signature:e}=await this.provider.request({method:"signAndSendTransaction",params:{message:t}});return{signature:e}}async signTransaction(t){return await this.provider.request({method:"signTransaction",params:{message:t}})}async signAllTransactions(t){return await this.provider.request({method:"signAllTransactions",params:{message:t}})}async signMessage(t){return await this.provider.request({method:"signMessage",params:{message:t}})}async request(t){return await this.provider.request(t)}}const mf=Object.freeze(Object.defineProperty({__proto__:null,PhantomInjectedProvider:Zh,SlopeInjectedProxyProvider:Vh,SolanaPrivateKeyProvider:Si,SolanaWallet:nf,SolflareInjectedProvider:Yh,SolletInjectedProvider:Qh,TorusInjectedProvider:ef},Symbol.toStringTag,{value:"Module"}));export{gt as P,ef as T,Zh as a,mf as s};

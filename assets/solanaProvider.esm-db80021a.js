import{a9 as yo,aa as wo,ab as vo,r as bo,a7 as Ra,g as ur,ac as Ta,ad as Ua,ae as La,af as Ca,ag as Fa,ah as Pa,ai as Oa,H as Na,e as rn,C as Gn,V as Zt,aj as Ts,W as Xi,J as Yi,ak as kn,al as ui}from"./base.esm-a6e8b20d.js";import{B as Ji,p as Qi,d as Da}from"./baseProvider.esm-44285fe5.js";import{i as ts}from"./interopRequireDefault-a67edd7c.js";import{r as xo}from"./index-66434860.js";import{n as qa}from"./nacl-fast-4317c610.js";var zt={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const t=yo,e=wo,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=l,o.SlowBuffer=q,o.INSPECT_MAX_BYTES=50;const u=2147483647;o.kMaxLength=u,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function d(f){if(f>u)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,l.prototype),s}function l(f,s,a){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(f)}return x(f,s,a)}l.poolSize=8192;function x(f,s,a){if(typeof f=="string")return U(f,s);if(ArrayBuffer.isView(f))return L(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(ie(f,ArrayBuffer)||f&&ie(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ie(f,SharedArrayBuffer)||f&&ie(f.buffer,SharedArrayBuffer)))return T(f,s,a);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=f.valueOf&&f.valueOf();if(g!=null&&g!==f)return l.from(g,s,a);const E=C(f);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return l.from(f[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}l.from=function(f,s,a){return x(f,s,a)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function A(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function k(f,s,a){return A(f),f<=0?d(f):s!==void 0?typeof a=="string"?d(f).fill(s,a):d(f).fill(s):d(f)}l.alloc=function(f,s,a){return k(f,s,a)};function I(f){return A(f),d(f<0?0:D(f)|0)}l.allocUnsafe=function(f){return I(f)},l.allocUnsafeSlow=function(f){return I(f)};function U(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!l.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const a=P(f,s)|0;let g=d(a);const E=g.write(f,s);return E!==a&&(g=g.slice(0,E)),g}function R(f){const s=f.length<0?0:D(f.length)|0,a=d(s);for(let g=0;g<s;g+=1)a[g]=f[g]&255;return a}function L(f){if(ie(f,Uint8Array)){const s=new Uint8Array(f);return T(s.buffer,s.byteOffset,s.byteLength)}return R(f)}function T(f,s,a){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');let g;return s===void 0&&a===void 0?g=new Uint8Array(f):a===void 0?g=new Uint8Array(f,s):g=new Uint8Array(f,s,a),Object.setPrototypeOf(g,l.prototype),g}function C(f){if(l.isBuffer(f)){const s=D(f.length)|0,a=d(s);return a.length===0||f.copy(a,0,0,s),a}if(f.length!==void 0)return typeof f.length!="number"||mt(f.length)?d(0):R(f);if(f.type==="Buffer"&&Array.isArray(f.data))return R(f.data)}function D(f){if(f>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return f|0}function q(f){return+f!=f&&(f=0),l.alloc(+f)}l.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==l.prototype},l.compare=function(s,a){if(ie(s,Uint8Array)&&(s=l.from(s,s.offset,s.byteLength)),ie(a,Uint8Array)&&(a=l.from(a,a.offset,a.byteLength)),!l.isBuffer(s)||!l.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;let g=s.length,E=a.length;for(let M=0,S=Math.min(g,E);M<S;++M)if(s[M]!==a[M]){g=s[M],E=a[M];break}return g<E?-1:E<g?1:0},l.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return l.alloc(0);let g;if(a===void 0)for(a=0,g=0;g<s.length;++g)a+=s[g].length;const E=l.allocUnsafe(a);let M=0;for(g=0;g<s.length;++g){let S=s[g];if(ie(S,Uint8Array))M+S.length>E.length?(l.isBuffer(S)||(S=l.from(S)),S.copy(E,M)):Uint8Array.prototype.set.call(E,S,M);else if(l.isBuffer(S))S.copy(E,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=S.length}return E};function P(f,s){if(l.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||ie(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const a=f.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&a===0)return 0;let E=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return gt(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return vt(f).length;default:if(E)return g?-1:gt(f).length;s=(""+s).toLowerCase(),E=!0}}l.byteLength=P;function tt(f,s,a){let g=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,s>>>=0,a<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return B(this,s,a);case"utf8":case"utf-8":return n(this,s,a);case"ascii":return y(this,s,a);case"latin1":case"binary":return v(this,s,a);case"base64":return b(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,s,a);default:if(g)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),g=!0}}l.prototype._isBuffer=!0;function N(f,s,a){const g=f[s];f[s]=f[a],f[a]=g}l.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<s;a+=2)N(this,a,a+1);return this},l.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<s;a+=4)N(this,a,a+3),N(this,a+1,a+2);return this},l.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<s;a+=8)N(this,a,a+7),N(this,a+1,a+6),N(this,a+2,a+5),N(this,a+3,a+4);return this},l.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?n(this,0,s):tt.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(s){if(!l.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:l.compare(this,s)===0},l.prototype.inspect=function(){let s="";const a=o.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(s,a,g,E,M){if(ie(s,Uint8Array)&&(s=l.from(s,s.offset,s.byteLength)),!l.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(a===void 0&&(a=0),g===void 0&&(g=s?s.length:0),E===void 0&&(E=0),M===void 0&&(M=this.length),a<0||g>s.length||E<0||M>this.length)throw new RangeError("out of range index");if(E>=M&&a>=g)return 0;if(E>=M)return-1;if(a>=g)return 1;if(a>>>=0,g>>>=0,E>>>=0,M>>>=0,this===s)return 0;let S=M-E,X=g-a;const j=Math.min(S,X),Z=this.slice(E,M),pt=s.slice(a,g);for(let W=0;W<j;++W)if(Z[W]!==pt[W]){S=Z[W],X=pt[W];break}return S<X?-1:X<S?1:0};function V(f,s,a,g,E){if(f.length===0)return-1;if(typeof a=="string"?(g=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,mt(a)&&(a=E?0:f.length-1),a<0&&(a=f.length+a),a>=f.length){if(E)return-1;a=f.length-1}else if(a<0)if(E)a=0;else return-1;if(typeof s=="string"&&(s=l.from(s,g)),l.isBuffer(s))return s.length===0?-1:J(f,s,a,g,E);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(f,s,a):Uint8Array.prototype.lastIndexOf.call(f,s,a):J(f,[s],a,g,E);throw new TypeError("val must be string, number or Buffer")}function J(f,s,a,g,E){let M=1,S=f.length,X=s.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(f.length<2||s.length<2)return-1;M=2,S/=2,X/=2,a/=2}function j(pt,W){return M===1?pt[W]:pt.readUInt16BE(W*M)}let Z;if(E){let pt=-1;for(Z=a;Z<S;Z++)if(j(f,Z)===j(s,pt===-1?0:Z-pt)){if(pt===-1&&(pt=Z),Z-pt+1===X)return pt*M}else pt!==-1&&(Z-=Z-pt),pt=-1}else for(a+X>S&&(a=S-X),Z=a;Z>=0;Z--){let pt=!0;for(let W=0;W<X;W++)if(j(f,Z+W)!==j(s,W)){pt=!1;break}if(pt)return Z}return-1}l.prototype.includes=function(s,a,g){return this.indexOf(s,a,g)!==-1},l.prototype.indexOf=function(s,a,g){return V(this,s,a,g,!0)},l.prototype.lastIndexOf=function(s,a,g){return V(this,s,a,g,!1)};function st(f,s,a,g){a=Number(a)||0;const E=f.length-a;g?(g=Number(g),g>E&&(g=E)):g=E;const M=s.length;g>M/2&&(g=M/2);let S;for(S=0;S<g;++S){const X=parseInt(s.substr(S*2,2),16);if(mt(X))return S;f[a+S]=X}return S}function jt(f,s,a,g){return dt(gt(s,f.length-a),f,a,g)}function se(f,s,a,g){return dt(Et(s),f,a,g)}function ct(f,s,a,g){return dt(vt(s),f,a,g)}function ee(f,s,a,g){return dt(Ze(s,f.length-a),f,a,g)}l.prototype.write=function(s,a,g,E){if(a===void 0)E="utf8",g=this.length,a=0;else if(g===void 0&&typeof a=="string")E=a,g=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(g)?(g=g>>>0,E===void 0&&(E="utf8")):(E=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-a;if((g===void 0||g>M)&&(g=M),s.length>0&&(g<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let S=!1;for(;;)switch(E){case"hex":return st(this,s,a,g);case"utf8":case"utf-8":return jt(this,s,a,g);case"ascii":case"latin1":case"binary":return se(this,s,a,g);case"base64":return ct(this,s,a,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,s,a,g);default:if(S)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),S=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(f,s,a){return s===0&&a===f.length?t.fromByteArray(f):t.fromByteArray(f.slice(s,a))}function n(f,s,a){a=Math.min(f.length,a);const g=[];let E=s;for(;E<a;){const M=f[E];let S=null,X=M>239?4:M>223?3:M>191?2:1;if(E+X<=a){let j,Z,pt,W;switch(X){case 1:M<128&&(S=M);break;case 2:j=f[E+1],(j&192)===128&&(W=(M&31)<<6|j&63,W>127&&(S=W));break;case 3:j=f[E+1],Z=f[E+2],(j&192)===128&&(Z&192)===128&&(W=(M&15)<<12|(j&63)<<6|Z&63,W>2047&&(W<55296||W>57343)&&(S=W));break;case 4:j=f[E+1],Z=f[E+2],pt=f[E+3],(j&192)===128&&(Z&192)===128&&(pt&192)===128&&(W=(M&15)<<18|(j&63)<<12|(Z&63)<<6|pt&63,W>65535&&W<1114112&&(S=W))}}S===null?(S=65533,X=1):S>65535&&(S-=65536,g.push(S>>>10&1023|55296),S=56320|S&1023),g.push(S),E+=X}return p(g)}const h=4096;function p(f){const s=f.length;if(s<=h)return String.fromCharCode.apply(String,f);let a="",g=0;for(;g<s;)a+=String.fromCharCode.apply(String,f.slice(g,g+=h));return a}function y(f,s,a){let g="";a=Math.min(f.length,a);for(let E=s;E<a;++E)g+=String.fromCharCode(f[E]&127);return g}function v(f,s,a){let g="";a=Math.min(f.length,a);for(let E=s;E<a;++E)g+=String.fromCharCode(f[E]);return g}function B(f,s,a){const g=f.length;(!s||s<0)&&(s=0),(!a||a<0||a>g)&&(a=g);let E="";for(let M=s;M<a;++M)E+=Bt[f[M]];return E}function _(f,s,a){const g=f.slice(s,a);let E="";for(let M=0;M<g.length-1;M+=2)E+=String.fromCharCode(g[M]+g[M+1]*256);return E}l.prototype.slice=function(s,a){const g=this.length;s=~~s,a=a===void 0?g:~~a,s<0?(s+=g,s<0&&(s=0)):s>g&&(s=g),a<0?(a+=g,a<0&&(a=0)):a>g&&(a=g),a<s&&(a=s);const E=this.subarray(s,a);return Object.setPrototypeOf(E,l.prototype),E};function m(f,s,a){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>a)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(s,a,g){s=s>>>0,a=a>>>0,g||m(s,a,this.length);let E=this[s],M=1,S=0;for(;++S<a&&(M*=256);)E+=this[s+S]*M;return E},l.prototype.readUintBE=l.prototype.readUIntBE=function(s,a,g){s=s>>>0,a=a>>>0,g||m(s,a,this.length);let E=this[s+--a],M=1;for(;a>0&&(M*=256);)E+=this[s+--a]*M;return E},l.prototype.readUint8=l.prototype.readUInt8=function(s,a){return s=s>>>0,a||m(s,1,this.length),this[s]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(s,a){return s=s>>>0,a||m(s,2,this.length),this[s]|this[s+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(s,a){return s=s>>>0,a||m(s,2,this.length),this[s]<<8|this[s+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(s,a){return s=s>>>0,a||m(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(s,a){return s=s>>>0,a||m(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},l.prototype.readBigUInt64LE=ae(function(s){s=s>>>0,ye(s,"offset");const a=this[s],g=this[s+7];(a===void 0||g===void 0)&&ht(s,this.length-8);const E=a+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,M=this[++s]+this[++s]*2**8+this[++s]*2**16+g*2**24;return BigInt(E)+(BigInt(M)<<BigInt(32))}),l.prototype.readBigUInt64BE=ae(function(s){s=s>>>0,ye(s,"offset");const a=this[s],g=this[s+7];(a===void 0||g===void 0)&&ht(s,this.length-8);const E=a*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],M=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g;return(BigInt(E)<<BigInt(32))+BigInt(M)}),l.prototype.readIntLE=function(s,a,g){s=s>>>0,a=a>>>0,g||m(s,a,this.length);let E=this[s],M=1,S=0;for(;++S<a&&(M*=256);)E+=this[s+S]*M;return M*=128,E>=M&&(E-=Math.pow(2,8*a)),E},l.prototype.readIntBE=function(s,a,g){s=s>>>0,a=a>>>0,g||m(s,a,this.length);let E=a,M=1,S=this[s+--E];for(;E>0&&(M*=256);)S+=this[s+--E]*M;return M*=128,S>=M&&(S-=Math.pow(2,8*a)),S},l.prototype.readInt8=function(s,a){return s=s>>>0,a||m(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},l.prototype.readInt16LE=function(s,a){s=s>>>0,a||m(s,2,this.length);const g=this[s]|this[s+1]<<8;return g&32768?g|4294901760:g},l.prototype.readInt16BE=function(s,a){s=s>>>0,a||m(s,2,this.length);const g=this[s+1]|this[s]<<8;return g&32768?g|4294901760:g},l.prototype.readInt32LE=function(s,a){return s=s>>>0,a||m(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},l.prototype.readInt32BE=function(s,a){return s=s>>>0,a||m(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},l.prototype.readBigInt64LE=ae(function(s){s=s>>>0,ye(s,"offset");const a=this[s],g=this[s+7];(a===void 0||g===void 0)&&ht(s,this.length-8);const E=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(g<<24);return(BigInt(E)<<BigInt(32))+BigInt(a+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),l.prototype.readBigInt64BE=ae(function(s){s=s>>>0,ye(s,"offset");const a=this[s],g=this[s+7];(a===void 0||g===void 0)&&ht(s,this.length-8);const E=(a<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(E)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g)}),l.prototype.readFloatLE=function(s,a){return s=s>>>0,a||m(s,4,this.length),e.read(this,s,!0,23,4)},l.prototype.readFloatBE=function(s,a){return s=s>>>0,a||m(s,4,this.length),e.read(this,s,!1,23,4)},l.prototype.readDoubleLE=function(s,a){return s=s>>>0,a||m(s,8,this.length),e.read(this,s,!0,52,8)},l.prototype.readDoubleBE=function(s,a){return s=s>>>0,a||m(s,8,this.length),e.read(this,s,!1,52,8)};function c(f,s,a,g,E,M){if(!l.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>E||s<M)throw new RangeError('"value" argument is out of bounds');if(a+g>f.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(s,a,g,E){if(s=+s,a=a>>>0,g=g>>>0,!E){const X=Math.pow(2,8*g)-1;c(this,s,a,g,X,0)}let M=1,S=0;for(this[a]=s&255;++S<g&&(M*=256);)this[a+S]=s/M&255;return a+g},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(s,a,g,E){if(s=+s,a=a>>>0,g=g>>>0,!E){const X=Math.pow(2,8*g)-1;c(this,s,a,g,X,0)}let M=g-1,S=1;for(this[a+M]=s&255;--M>=0&&(S*=256);)this[a+M]=s/S&255;return a+g},l.prototype.writeUint8=l.prototype.writeUInt8=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,1,255,0),this[a]=s&255,a+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,2,65535,0),this[a]=s&255,this[a+1]=s>>>8,a+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=s&255,a+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=s&255,a+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4};function w(f,s,a,g,E){wt(s,g,E,f,a,7);let M=Number(s&BigInt(4294967295));f[a++]=M,M=M>>8,f[a++]=M,M=M>>8,f[a++]=M,M=M>>8,f[a++]=M;let S=Number(s>>BigInt(32)&BigInt(4294967295));return f[a++]=S,S=S>>8,f[a++]=S,S=S>>8,f[a++]=S,S=S>>8,f[a++]=S,a}function K(f,s,a,g,E){wt(s,g,E,f,a,7);let M=Number(s&BigInt(4294967295));f[a+7]=M,M=M>>8,f[a+6]=M,M=M>>8,f[a+5]=M,M=M>>8,f[a+4]=M;let S=Number(s>>BigInt(32)&BigInt(4294967295));return f[a+3]=S,S=S>>8,f[a+2]=S,S=S>>8,f[a+1]=S,S=S>>8,f[a]=S,a+8}l.prototype.writeBigUInt64LE=ae(function(s,a=0){return w(this,s,a,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=ae(function(s,a=0){return K(this,s,a,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(s,a,g,E){if(s=+s,a=a>>>0,!E){const j=Math.pow(2,8*g-1);c(this,s,a,g,j-1,-j)}let M=0,S=1,X=0;for(this[a]=s&255;++M<g&&(S*=256);)s<0&&X===0&&this[a+M-1]!==0&&(X=1),this[a+M]=(s/S>>0)-X&255;return a+g},l.prototype.writeIntBE=function(s,a,g,E){if(s=+s,a=a>>>0,!E){const j=Math.pow(2,8*g-1);c(this,s,a,g,j-1,-j)}let M=g-1,S=1,X=0;for(this[a+M]=s&255;--M>=0&&(S*=256);)s<0&&X===0&&this[a+M+1]!==0&&(X=1),this[a+M]=(s/S>>0)-X&255;return a+g},l.prototype.writeInt8=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=s&255,a+1},l.prototype.writeInt16LE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,2,32767,-32768),this[a]=s&255,this[a+1]=s>>>8,a+2},l.prototype.writeInt16BE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=s&255,a+2},l.prototype.writeInt32LE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,4,2147483647,-2147483648),this[a]=s&255,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},l.prototype.writeInt32BE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4},l.prototype.writeBigInt64LE=ae(function(s,a=0){return w(this,s,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=ae(function(s,a=0){return K(this,s,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $(f,s,a,g,E,M){if(a+g>f.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function G(f,s,a,g,E){return s=+s,a=a>>>0,E||$(f,s,a,4),e.write(f,s,a,g,23,4),a+4}l.prototype.writeFloatLE=function(s,a,g){return G(this,s,a,!0,g)},l.prototype.writeFloatBE=function(s,a,g){return G(this,s,a,!1,g)};function Kt(f,s,a,g,E){return s=+s,a=a>>>0,E||$(f,s,a,8),e.write(f,s,a,g,52,8),a+8}l.prototype.writeDoubleLE=function(s,a,g){return Kt(this,s,a,!0,g)},l.prototype.writeDoubleBE=function(s,a,g){return Kt(this,s,a,!1,g)},l.prototype.copy=function(s,a,g,E){if(!l.isBuffer(s))throw new TypeError("argument should be a Buffer");if(g||(g=0),!E&&E!==0&&(E=this.length),a>=s.length&&(a=s.length),a||(a=0),E>0&&E<g&&(E=g),E===g||s.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),s.length-a<E-g&&(E=s.length-a+g);const M=E-g;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,g,E):Uint8Array.prototype.set.call(s,this.subarray(g,E),a),M},l.prototype.fill=function(s,a,g,E){if(typeof s=="string"){if(typeof a=="string"?(E=a,a=0,g=this.length):typeof g=="string"&&(E=g,g=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!l.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(s.length===1){const S=s.charCodeAt(0);(E==="utf8"&&S<128||E==="latin1")&&(s=S)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(a<0||this.length<a||this.length<g)throw new RangeError("Out of range index");if(g<=a)return this;a=a>>>0,g=g===void 0?this.length:g>>>0,s||(s=0);let M;if(typeof s=="number")for(M=a;M<g;++M)this[M]=s;else{const S=l.isBuffer(s)?s:l.from(s,E),X=S.length;if(X===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(M=0;M<g-a;++M)this[M+a]=S[M%X]}return this};const nt={};function ut(f,s,a){nt[f]=class extends a{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}ut("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ut("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),ut("ERR_OUT_OF_RANGE",function(f,s,a){let g=`The value of "${f}" is out of range.`,E=a;return Number.isInteger(a)&&Math.abs(a)>2**32?E=Pe(String(a)):typeof a=="bigint"&&(E=String(a),(a>BigInt(2)**BigInt(32)||a<-(BigInt(2)**BigInt(32)))&&(E=Pe(E)),E+="n"),g+=` It must be ${s}. Received ${E}`,g},RangeError);function Pe(f){let s="",a=f.length;const g=f[0]==="-"?1:0;for(;a>=g+4;a-=3)s=`_${f.slice(a-3,a)}${s}`;return`${f.slice(0,a)}${s}`}function bt(f,s,a){ye(s,"offset"),(f[s]===void 0||f[s+a]===void 0)&&ht(s,f.length-(a+1))}function wt(f,s,a,g,E,M){if(f>a||f<s){const S=typeof s=="bigint"?"n":"";let X;throw M>3?s===0||s===BigInt(0)?X=`>= 0${S} and < 2${S} ** ${(M+1)*8}${S}`:X=`>= -(2${S} ** ${(M+1)*8-1}${S}) and < 2 ** ${(M+1)*8-1}${S}`:X=`>= ${s}${S} and <= ${a}${S}`,new nt.ERR_OUT_OF_RANGE("value",X,f)}bt(g,E,M)}function ye(f,s){if(typeof f!="number")throw new nt.ERR_INVALID_ARG_TYPE(s,"number",f)}function ht(f,s,a){throw Math.floor(f)!==f?(ye(f,a),new nt.ERR_OUT_OF_RANGE(a||"offset","an integer",f)):s<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE(a||"offset",`>= ${a?1:0} and <= ${s}`,f)}const xt=/[^+/0-9A-Za-z-_]/g;function Ge(f){if(f=f.split("=")[0],f=f.trim().replace(xt,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function gt(f,s){s=s||1/0;let a;const g=f.length;let E=null;const M=[];for(let S=0;S<g;++S){if(a=f.charCodeAt(S),a>55295&&a<57344){if(!E){if(a>56319){(s-=3)>-1&&M.push(239,191,189);continue}else if(S+1===g){(s-=3)>-1&&M.push(239,191,189);continue}E=a;continue}if(a<56320){(s-=3)>-1&&M.push(239,191,189),E=a;continue}a=(E-55296<<10|a-56320)+65536}else E&&(s-=3)>-1&&M.push(239,191,189);if(E=null,a<128){if((s-=1)<0)break;M.push(a)}else if(a<2048){if((s-=2)<0)break;M.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;M.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;M.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return M}function Et(f){const s=[];for(let a=0;a<f.length;++a)s.push(f.charCodeAt(a)&255);return s}function Ze(f,s){let a,g,E;const M=[];for(let S=0;S<f.length&&!((s-=2)<0);++S)a=f.charCodeAt(S),g=a>>8,E=a%256,M.push(E),M.push(g);return M}function vt(f){return t.toByteArray(Ge(f))}function dt(f,s,a,g){let E;for(E=0;E<g&&!(E+a>=s.length||E>=f.length);++E)s[E+a]=f[E];return E}function ie(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function mt(f){return f!==f}const Bt=function(){const f="0123456789abcdef",s=new Array(256);for(let a=0;a<16;++a){const g=a*16;for(let E=0;E<16;++E)s[g+E]=f[a]+f[E]}return s}();function ae(f){return typeof BigInt>"u"?Mt:f}function Mt(){throw new Error("BigInt not supported")}})(zt);function Fi(o){if(!Number.isSafeInteger(o)||o<0)throw new Error(`Wrong positive integer: ${o}`)}function Ha(o){if(typeof o!="boolean")throw new Error(`Expected boolean, not ${o}`)}function Eo(o,...t){if(!(o instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(o.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${o.length}`)}function $a(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Fi(o.outputLen),Fi(o.blockLen)}function za(o,t=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(t&&o.finished)throw new Error("Hash#digest() has already been called")}function Ka(o,t){Eo(o);const e=t.outputLen;if(o.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Ie={number:Fi,bool:Ha,bytes:Eo,hash:$a,exists:za,output:Ka};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wa=o=>new Uint32Array(o.buffer,o.byteOffset,Math.floor(o.byteLength/4)),xi=o=>new DataView(o.buffer,o.byteOffset,o.byteLength),De=(o,t)=>o<<32-t|o>>>t,Ga=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ga)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(o,t)=>t.toString(16).padStart(2,"0"));function Za(o){if(typeof o!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof o}`);return new TextEncoder().encode(o)}function Rn(o){if(typeof o=="string"&&(o=Za(o)),!(o instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof o})`);return o}class es{clone(){return this._cloneInto()}}function Nr(o){const t=r=>o().update(Rn(r)).digest(),e=o();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>o(),t}function ja(o){const t=(r,u)=>o(u).update(Rn(r)).digest(),e=o({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=r=>o(r),t}function Va(o,t,e,r){if(typeof o.setBigUint64=="function")return o.setBigUint64(t,e,r);const u=BigInt(32),i=BigInt(4294967295),d=Number(e>>u&i),l=Number(e&i),x=r?4:0,A=r?0:4;o.setUint32(t+x,d,r),o.setUint32(t+A,l,r)}class Bo extends es{constructor(t,e,r,u){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=u,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=xi(this.buffer)}update(t){Ie.exists(this);const{view:e,buffer:r,blockLen:u}=this;t=Rn(t);const i=t.length;for(let d=0;d<i;){const l=Math.min(u-this.pos,i-d);if(l===u){const x=xi(t);for(;u<=i-d;d+=u)this.process(x,d);continue}r.set(t.subarray(d,d+l),this.pos),this.pos+=l,d+=l,this.pos===u&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ie.exists(this),Ie.output(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:u,isLE:i}=this;let{pos:d}=this;e[d++]=128,this.buffer.subarray(d).fill(0),this.padOffset>u-d&&(this.process(r,0),d=0);for(let I=d;I<u;I++)e[I]=0;Va(r,u-8,BigInt(this.length*8),i),this.process(r,0);const l=xi(t),x=this.outputLen;if(x%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=x/4,k=this.get();if(A>k.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<A;I++)l.setUint32(4*I,k[I],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:u,finished:i,destroyed:d,pos:l}=this;return t.length=u,t.pos=l,t.finished=i,t.destroyed=d,u%e&&t.buffer.set(r),t}}const On=BigInt(2**32-1),Pi=BigInt(32);function Mo(o,t=!1){return t?{h:Number(o&On),l:Number(o>>Pi&On)}:{h:Number(o>>Pi&On)|0,l:Number(o&On)|0}}function Xa(o,t=!1){let e=new Uint32Array(o.length),r=new Uint32Array(o.length);for(let u=0;u<o.length;u++){const{h:i,l:d}=Mo(o[u],t);[e[u],r[u]]=[i,d]}return[e,r]}const Ya=(o,t)=>BigInt(o>>>0)<<Pi|BigInt(t>>>0),Ja=(o,t,e)=>o>>>e,Qa=(o,t,e)=>o<<32-e|t>>>e,tc=(o,t,e)=>o>>>e|t<<32-e,ec=(o,t,e)=>o<<32-e|t>>>e,rc=(o,t,e)=>o<<64-e|t>>>e-32,nc=(o,t,e)=>o>>>e-32|t<<64-e,ic=(o,t)=>t,sc=(o,t)=>o,oc=(o,t,e)=>o<<e|t>>>32-e,ac=(o,t,e)=>t<<e|o>>>32-e,cc=(o,t,e)=>t<<e-32|o>>>64-e,uc=(o,t,e)=>o<<e-32|t>>>64-e;function hc(o,t,e,r){const u=(t>>>0)+(r>>>0);return{h:o+e+(u/2**32|0)|0,l:u|0}}const fc=(o,t,e)=>(o>>>0)+(t>>>0)+(e>>>0),lc=(o,t,e,r)=>t+e+r+(o/2**32|0)|0,dc=(o,t,e,r)=>(o>>>0)+(t>>>0)+(e>>>0)+(r>>>0),pc=(o,t,e,r,u)=>t+e+r+u+(o/2**32|0)|0,gc=(o,t,e,r,u)=>(o>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(u>>>0),mc=(o,t,e,r,u,i)=>t+e+r+u+i+(o/2**32|0)|0,_t={fromBig:Mo,split:Xa,toBig:Ya,shrSH:Ja,shrSL:Qa,rotrSH:tc,rotrSL:ec,rotrBH:rc,rotrBL:nc,rotr32H:ic,rotr32L:sc,rotlSH:oc,rotlSL:ac,rotlBH:cc,rotlBL:uc,add:hc,add3L:fc,add3H:lc,add4L:dc,add4H:pc,add5H:mc,add5L:gc},[yc,wc]=_t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(o=>BigInt(o))),Ye=new Uint32Array(80),Je=new Uint32Array(80);class hi extends Bo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:u,Ch:i,Cl:d,Dh:l,Dl:x,Eh:A,El:k,Fh:I,Fl:U,Gh:R,Gl:L,Hh:T,Hl:C}=this;return[t,e,r,u,i,d,l,x,A,k,I,U,R,L,T,C]}set(t,e,r,u,i,d,l,x,A,k,I,U,R,L,T,C){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=u|0,this.Ch=i|0,this.Cl=d|0,this.Dh=l|0,this.Dl=x|0,this.Eh=A|0,this.El=k|0,this.Fh=I|0,this.Fl=U|0,this.Gh=R|0,this.Gl=L|0,this.Hh=T|0,this.Hl=C|0}process(t,e){for(let P=0;P<16;P++,e+=4)Ye[P]=t.getUint32(e),Je[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const tt=Ye[P-15]|0,N=Je[P-15]|0,V=_t.rotrSH(tt,N,1)^_t.rotrSH(tt,N,8)^_t.shrSH(tt,N,7),J=_t.rotrSL(tt,N,1)^_t.rotrSL(tt,N,8)^_t.shrSL(tt,N,7),st=Ye[P-2]|0,jt=Je[P-2]|0,se=_t.rotrSH(st,jt,19)^_t.rotrBH(st,jt,61)^_t.shrSH(st,jt,6),ct=_t.rotrSL(st,jt,19)^_t.rotrBL(st,jt,61)^_t.shrSL(st,jt,6),ee=_t.add4L(J,ct,Je[P-7],Je[P-16]),b=_t.add4H(ee,V,se,Ye[P-7],Ye[P-16]);Ye[P]=b|0,Je[P]=ee|0}let{Ah:r,Al:u,Bh:i,Bl:d,Ch:l,Cl:x,Dh:A,Dl:k,Eh:I,El:U,Fh:R,Fl:L,Gh:T,Gl:C,Hh:D,Hl:q}=this;for(let P=0;P<80;P++){const tt=_t.rotrSH(I,U,14)^_t.rotrSH(I,U,18)^_t.rotrBH(I,U,41),N=_t.rotrSL(I,U,14)^_t.rotrSL(I,U,18)^_t.rotrBL(I,U,41),V=I&R^~I&T,J=U&L^~U&C,st=_t.add5L(q,N,J,wc[P],Je[P]),jt=_t.add5H(st,D,tt,V,yc[P],Ye[P]),se=st|0,ct=_t.rotrSH(r,u,28)^_t.rotrBH(r,u,34)^_t.rotrBH(r,u,39),ee=_t.rotrSL(r,u,28)^_t.rotrBL(r,u,34)^_t.rotrBL(r,u,39),b=r&i^r&l^i&l,n=u&d^u&x^d&x;D=T|0,q=C|0,T=R|0,C=L|0,R=I|0,L=U|0,{h:I,l:U}=_t.add(A|0,k|0,jt|0,se|0),A=l|0,k=x|0,l=i|0,x=d|0,i=r|0,d=u|0;const h=_t.add3L(se,ee,n);r=_t.add3H(h,jt,ct,b),u=h|0}({h:r,l:u}=_t.add(this.Ah|0,this.Al|0,r|0,u|0)),{h:i,l:d}=_t.add(this.Bh|0,this.Bl|0,i|0,d|0),{h:l,l:x}=_t.add(this.Ch|0,this.Cl|0,l|0,x|0),{h:A,l:k}=_t.add(this.Dh|0,this.Dl|0,A|0,k|0),{h:I,l:U}=_t.add(this.Eh|0,this.El|0,I|0,U|0),{h:R,l:L}=_t.add(this.Fh|0,this.Fl|0,R|0,L|0),{h:T,l:C}=_t.add(this.Gh|0,this.Gl|0,T|0,C|0),{h:D,l:q}=_t.add(this.Hh|0,this.Hl|0,D|0,q|0),this.set(r,u,i,d,l,x,A,k,I,U,R,L,T,C,D,q)}roundClean(){Ye.fill(0),Je.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class vc extends hi{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class bc extends hi{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class xc extends hi{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Ec=Nr(()=>new hi);Nr(()=>new vc);Nr(()=>new bc);Nr(()=>new xc);/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const xe=BigInt(0),Vt=BigInt(1),jr=BigInt(2),Us=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),oe=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Us,n:Us,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),_o=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),xn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const Bc=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Mc=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),_c=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Sc=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class Xt{constructor(t,e,r,u){this.x=t,this.y=e,this.z=r,this.t=u}static fromAffine(t){if(!(t instanceof de))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(de.ZERO)?Xt.ZERO:new Xt(t.x,t.y,Vt,H(t.x*t.y))}static toAffineBatch(t){const e=kc(t.map(r=>r.z));return t.map((r,u)=>r.toAffine(e[u]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){Ls(t);const{x:e,y:r,z:u}=this,{x:i,y:d,z:l}=t,x=H(e*l),A=H(i*u),k=H(r*l),I=H(d*u);return x===A&&k===I}negate(){return new Xt(H(-this.x),this.y,this.z,H(-this.t))}double(){const{x:t,y:e,z:r}=this,{a:u}=oe,i=H(t*t),d=H(e*e),l=H(jr*H(r*r)),x=H(u*i),A=t+e,k=H(H(A*A)-i-d),I=x+d,U=I-l,R=x-d,L=H(k*U),T=H(I*R),C=H(k*R),D=H(U*I);return new Xt(L,T,D,C)}add(t){Ls(t);const{x:e,y:r,z:u,t:i}=this,{x:d,y:l,z:x,t:A}=t,k=H((r-e)*(l+d)),I=H((r+e)*(l-d)),U=H(I-k);if(U===xe)return this.double();const R=H(u*jr*A),L=H(i*jr*x),T=L+R,C=I+k,D=L-R,q=H(T*U),P=H(C*D),tt=H(T*D),N=H(U*C);return new Xt(q,P,N,tt)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,r=[];let u=this,i=u;for(let d=0;d<e;d++){i=u,r.push(i);for(let l=1;l<2**(t-1);l++)i=i.add(u),r.push(i);u=i.double()}return r}wNAF(t,e){!e&&this.equals(Xt.BASE)&&(e=de.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let u=e&&Oi.get(e);u||(u=this.precomputeWindow(r),e&&r!==1&&(u=Xt.normalizeZ(u),Oi.set(e,u)));let i=Xt.ZERO,d=Xt.ZERO;const l=1+256/r,x=2**(r-1),A=BigInt(2**r-1),k=2**r,I=BigInt(r);for(let U=0;U<l;U++){const R=U*x;let L=Number(t&A);if(t>>=I,L>x&&(L-=k,t+=Vt),L===0){let T=u[R];U%2&&(T=T.negate()),d=d.add(T)}else{let T=u[R+Math.abs(L)-1];L<0&&(T=T.negate()),i=i.add(T)}}return Xt.normalizeZ([i,d])[0]}multiply(t,e){return this.wNAF(Vn(t,oe.l),e)}multiplyUnsafe(t){let e=Vn(t,oe.l,!1);const r=Xt.BASE,u=Xt.ZERO;if(e===xe)return u;if(this.equals(u)||e===Vt)return this;if(this.equals(r))return this.wNAF(e);let i=u,d=this;for(;e>xe;)e&Vt&&(i=i.add(d)),d=d.double(),e>>=Vt;return i}isSmallOrder(){return this.multiplyUnsafe(oe.h).equals(Xt.ZERO)}isTorsionFree(){return this.multiplyUnsafe(oe.l).equals(Xt.ZERO)}toAffine(t=fi(this.z)){const{x:e,y:r,z:u}=this,i=H(e*t),d=H(r*t);if(H(u*t)!==Vt)throw new Error("invZ was invalid");return new de(i,d)}fromRistrettoBytes(){Bi()}toRistrettoBytes(){Bi()}fromRistrettoHash(){Bi()}}Xt.BASE=new Xt(oe.Gx,oe.Gy,Vt,H(oe.Gx*oe.Gy));Xt.ZERO=new Xt(xe,Vt,Vt,xe);function Ls(o){if(!(o instanceof Xt))throw new TypeError("ExtendedPoint expected")}function Ei(o){if(!(o instanceof Ce))throw new TypeError("RistrettoPoint expected")}function Bi(){throw new Error("Legacy method: switch to RistrettoPoint")}class Ce{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=oe,r=H(xn*t*t),u=H((r+Vt)*_c);let i=BigInt(-1);const d=H((i-e*r)*H(r+e));let{isValid:l,value:x}=ns(u,d),A=H(x*t);rr(A)||(A=H(-A)),l||(x=A),l||(i=r);const k=H(i*(r-Vt)*Sc-d),I=x*x,U=H((x+x)*d),R=H(k*Bc),L=H(Vt-I),T=H(Vt+I);return new Xt(H(U*T),H(L*R),H(R*T),H(U*L))}static hashToCurve(t){t=ar(t,64);const e=Mi(t.slice(0,32)),r=this.calcElligatorRistrettoMap(e),u=Mi(t.slice(32,64)),i=this.calcElligatorRistrettoMap(u);return new Ce(r.add(i))}static fromHex(t){t=ar(t,32);const{a:e,d:r}=oe,u="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=Mi(t);if(!Tc(_n(i),t)||rr(i))throw new Error(u);const d=H(i*i),l=H(Vt+e*d),x=H(Vt-e*d),A=H(l*l),k=H(x*x),I=H(e*r*A-k),{isValid:U,value:R}=Fs(H(I*k)),L=H(R*x),T=H(R*L*I);let C=H((i+i)*L);rr(C)&&(C=H(-C));const D=H(l*T),q=H(C*D);if(!U||rr(q)||D===xe)throw new Error(u);return new Ce(new Xt(C,D,Vt,q))}toRawBytes(){let{x:t,y:e,z:r,t:u}=this.ep;const i=H(H(r+e)*H(r-e)),d=H(t*e),l=H(d*d),{value:x}=Fs(H(i*l)),A=H(x*i),k=H(x*d),I=H(A*k*u);let U;if(rr(u*I)){let L=H(e*xn),T=H(t*xn);t=L,e=T,U=H(A*Mc)}else U=k;rr(t*I)&&(e=H(-e));let R=H((r-e)*U);return rr(R)&&(R=H(-R)),_n(R)}toHex(){return Tn(this.toRawBytes())}toString(){return this.toHex()}equals(t){Ei(t);const e=this.ep,r=t.ep,u=H(e.x*r.y)===H(e.y*r.x),i=H(e.y*r.y)===H(e.x*r.x);return u||i}add(t){return Ei(t),new Ce(this.ep.add(t.ep))}subtract(t){return Ei(t),new Ce(this.ep.subtract(t.ep))}multiply(t){return new Ce(this.ep.multiply(t))}multiplyUnsafe(t){return new Ce(this.ep.multiplyUnsafe(t))}}Ce.BASE=new Ce(Xt.BASE);Ce.ZERO=new Ce(Xt.ZERO);const Oi=new WeakMap;let de=class{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Oi.delete(this)}static fromHex(t,e=!0){const{d:r,P:u}=oe;t=ar(t,32);const i=t.slice();i[31]=t[31]&-129;const d=Un(i);if(e&&d>=u)throw new Error("Expected 0 < hex < P");if(!e&&d>=_o)throw new Error("Expected 0 < hex < 2**256");const l=H(d*d),x=H(l-Vt),A=H(r*l+Vt);let{isValid:k,value:I}=ns(x,A);if(!k)throw new Error("Point.fromHex: invalid y coordinate");const U=(I&Vt)===Vt;return(t[31]&128)!==0!==U&&(I=H(-I)),new de(I,d)}static async fromPrivateKey(t){return(await ko(t)).point}toRawBytes(){const t=_n(this.y);return t[31]|=this.x&Vt?128:0,t}toHex(){return Tn(this.toRawBytes())}toX25519(){const{y:t}=this,e=H((Vt+t)*fi(Vt-t));return _n(e)}isTorsionFree(){return Xt.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new de(H(-this.x),this.y)}add(t){return Xt.fromAffine(this).add(Xt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Xt.fromAffine(this).multiply(t,this).toAffine()}};de.BASE=new de(oe.Gx,oe.Gy);de.ZERO=new de(xe,Vt);let Zn=class{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=ar(t,64),r=de.fromHex(e.slice(0,32),!1),u=Un(e.slice(32,64));return new Zn(r,u)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof de))throw new Error("Expected Point instance");return Vn(e,oe.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(_n(this.s),32),t}toHex(){return Tn(this.toRawBytes())}};function Cs(...o){if(!o.every(r=>r instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(o.length===1)return o[0];const t=o.reduce((r,u)=>r+u.length,0),e=new Uint8Array(t);for(let r=0,u=0;r<o.length;r++){const i=o[r];e.set(i,u),u+=i.length}return e}const Ac=Array.from({length:256},(o,t)=>t.toString(16).padStart(2,"0"));function Tn(o){if(!(o instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let e=0;e<o.length;e++)t+=Ac[o[e]];return t}function rs(o){if(typeof o!="string")throw new TypeError("hexToBytes: expected string, got "+typeof o);if(o.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(o.length/2);for(let e=0;e<t.length;e++){const r=e*2,u=o.slice(r,r+2),i=Number.parseInt(u,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function So(o){const e=o.toString(16).padStart(64,"0");return rs(e)}function _n(o){return So(o).reverse()}function rr(o){return(H(o)&Vt)===Vt}function Un(o){if(!(o instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Tn(Uint8Array.from(o).reverse()))}const Ic=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Mi(o){return H(Un(o)&Ic)}function H(o,t=oe.P){const e=o%t;return e>=xe?e:t+e}function fi(o,t=oe.P){if(o===xe||t<=xe)throw new Error(`invert: expected positive integers, got n=${o} mod=${t}`);let e=H(o,t),r=t,u=xe,i=Vt;for(;e!==xe;){const l=r/e,x=r%e,A=u-i*l;r=e,e=x,u=i,i=A}if(r!==Vt)throw new Error("invert: does not exist");return H(u,t)}function kc(o,t=oe.P){const e=new Array(o.length),r=o.reduce((i,d,l)=>d===xe?i:(e[l]=i,H(i*d,t)),Vt),u=fi(r,t);return o.reduceRight((i,d,l)=>d===xe?i:(e[l]=H(i*e[l],t),H(i*d,t)),u),e}function qe(o,t){const{P:e}=oe;let r=o;for(;t-- >xe;)r*=r,r%=e;return r}function Rc(o){const{P:t}=oe,e=BigInt(5),r=BigInt(10),u=BigInt(20),i=BigInt(40),d=BigInt(80),x=o*o%t*o%t,A=qe(x,jr)*x%t,k=qe(A,Vt)*o%t,I=qe(k,e)*k%t,U=qe(I,r)*I%t,R=qe(U,u)*U%t,L=qe(R,i)*R%t,T=qe(L,d)*L%t,C=qe(T,d)*L%t,D=qe(C,r)*I%t;return{pow_p_5_8:qe(D,jr)*o%t,b2:x}}function ns(o,t){const e=H(t*t*t),r=H(e*e*t),u=Rc(o*r).pow_p_5_8;let i=H(o*e*u);const d=H(t*i*i),l=i,x=H(i*xn),A=d===o,k=d===H(-o),I=d===H(-o*xn);return A&&(i=l),(k||I)&&(i=x),rr(i)&&(i=H(-i)),{isValid:A||k,value:i}}function Fs(o){return ns(Vt,o)}function jn(o){return H(Un(o),oe.l)}function Tc(o,t){if(o.length!==t.length)return!1;for(let e=0;e<o.length;e++)if(o[e]!==t[e])return!1;return!0}function ar(o,t){const e=o instanceof Uint8Array?Uint8Array.from(o):rs(o);if(typeof t=="number"&&e.length!==t)throw new Error(`Expected ${t} bytes`);return e}function Vn(o,t,e=!0){if(!t)throw new TypeError("Specify max value");if(typeof o=="number"&&Number.isSafeInteger(o)&&(o=BigInt(o)),typeof o=="bigint"&&o<t){if(e){if(xe<o)return o}else if(xe<=o)return o}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Uc(o){return o[0]&=248,o[31]&=127,o[31]|=64,o}function Ao(o){if(o=typeof o=="bigint"||typeof o=="number"?So(Vn(o,_o)):ar(o),o.length!==32)throw new Error("Expected 32 bytes");return o}function Io(o){const t=Uc(o.slice(0,32)),e=o.slice(32,64),r=jn(t),u=de.BASE.multiply(r),i=u.toRawBytes();return{head:t,prefix:e,scalar:r,point:u,pointBytes:i}}let En;function Xn(...o){if(typeof En!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return En(...o)}async function ko(o){return Io(await Or.sha512(Ao(o)))}function is(o){return Io(Xn(Ao(o)))}function Lc(o){return is(o).pointBytes}function Cc(o,t){o=ar(o);const{prefix:e,scalar:r,pointBytes:u}=is(t),i=jn(Xn(e,o)),d=de.BASE.multiply(i),l=jn(Xn(d.toRawBytes(),u,o)),x=H(i+l*r,oe.l);return new Zn(d,x).toRawBytes()}function Fc(o,t,e){t=ar(t),e instanceof de||(e=de.fromHex(e,!1));const{r,s:u}=o instanceof Zn?o.assertValidity():Zn.fromHex(o),i=Xt.BASE.multiplyUnsafe(u);return{r,s:u,SB:i,pub:e,msg:t}}function Pc(o,t,e,r){const u=jn(r),i=Xt.fromAffine(o).multiplyUnsafe(u);return Xt.fromAffine(t).add(i).subtract(e).multiplyUnsafe(oe.h).equals(Xt.ZERO)}function Oc(o,t,e){const{r,SB:u,msg:i,pub:d}=Fc(o,t,e),l=Xn(r.toRawBytes(),d.toRawBytes(),i);return Pc(d,r,u,l)}const ss={getExtendedPublicKey:is,getPublicKey:Lc,sign:Cc,verify:Oc};de.BASE._setWindowSize(8);const Qe={node:vo,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Or={bytesToHex:Tn,hexToBytes:rs,concatBytes:Cs,getExtendedPublicKey:ko,mod:H,invert:fi,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:o=>{if(o=ar(o),o.length<40||o.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return H(Un(o),oe.l-Vt)+Vt},randomBytes:(o=32)=>{if(Qe.web)return Qe.web.getRandomValues(new Uint8Array(o));if(Qe.node){const{randomBytes:t}=Qe.node;return new Uint8Array(t(o).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Or.randomBytes(32),sha512:async(...o)=>{const t=Cs(...o);if(Qe.web){const e=await Qe.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Qe.node)return Uint8Array.from(Qe.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(o=8,t=de.BASE){const e=t.equals(de.BASE)?t:new de(t.x,t.y);return e._setWindowSize(o),e.multiply(jr),e},sha512Sync:void 0};Object.defineProperties(Or,{sha512Sync:{configurable:!1,get(){return En},set(o){En||(En=o)}}});var Yn={},Nc={get exports(){return Yn},set exports(o){Yn=o}};(function(o){(function(t,e){function r(b,n){if(!b)throw new Error(n||"Assertion failed")}function u(b,n){b.super_=n;var h=function(){};h.prototype=n.prototype,b.prototype=new h,b.prototype.constructor=b}function i(b,n,h){if(i.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((n==="le"||n==="be")&&(h=n,n=10),this._init(b||0,n||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=bo.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,h){return n.cmp(h)>0?n:h},i.min=function(n,h){return n.cmp(h)<0?n:h},i.prototype._init=function(n,h,p){if(typeof n=="number")return this._initNumber(n,h,p);if(typeof n=="object")return this._initArray(n,h,p);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),n=n.toString().replace(/\s+/g,"");var y=0;n[0]==="-"&&(y++,this.negative=1),y<n.length&&(h===16?this._parseHex(n,y,p):(this._parseBase(n,h,y),p==="le"&&this._initArray(this.toArray(),h,p)))},i.prototype._initNumber=function(n,h,p){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),h,p)},i.prototype._initArray=function(n,h,p){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,B,_=0;if(p==="be")for(y=n.length-1,v=0;y>=0;y-=3)B=n[y]|n[y-1]<<8|n[y-2]<<16,this.words[v]|=B<<_&67108863,this.words[v+1]=B>>>26-_&67108863,_+=24,_>=26&&(_-=26,v++);else if(p==="le")for(y=0,v=0;y<n.length;y+=3)B=n[y]|n[y+1]<<8|n[y+2]<<16,this.words[v]|=B<<_&67108863,this.words[v+1]=B>>>26-_&67108863,_+=24,_>=26&&(_-=26,v++);return this._strip()};function l(b,n){var h=b.charCodeAt(n);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+b)}function x(b,n,h){var p=l(b,h);return h-1>=n&&(p|=l(b,h-1)<<4),p}i.prototype._parseHex=function(n,h,p){this.length=Math.ceil((n.length-h)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,B=0,_;if(p==="be")for(y=n.length-1;y>=h;y-=2)_=x(n,h,y)<<v,this.words[B]|=_&67108863,v>=18?(v-=18,B+=1,this.words[B]|=_>>>26):v+=8;else{var m=n.length-h;for(y=m%2===0?h+1:h;y<n.length;y+=2)_=x(n,h,y)<<v,this.words[B]|=_&67108863,v>=18?(v-=18,B+=1,this.words[B]|=_>>>26):v+=8}this._strip()};function A(b,n,h,p){for(var y=0,v=0,B=Math.min(b.length,h),_=n;_<B;_++){var m=b.charCodeAt(_)-48;y*=p,m>=49?v=m-49+10:m>=17?v=m-17+10:v=m,r(m>=0&&v<p,"Invalid character"),y+=v}return y}i.prototype._parseBase=function(n,h,p){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=h)y++;y--,v=v/h|0;for(var B=n.length-p,_=B%y,m=Math.min(B,B-_)+p,c=0,w=p;w<m;w+=y)c=A(n,w,w+y,h),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(_!==0){var K=1;for(c=A(n,w,n.length,h),w=0;w<_;w++)K*=h;this.imuln(K),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var h=0;h<this.length;h++)n.words[h]=this.words[h];n.length=this.length,n.negative=this.negative,n.red=this.red};function k(b,n){b.words=n.words,b.length=n.length,b.negative=n.negative,b.red=n.red}if(i.prototype._move=function(n){k(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{i.prototype.inspect=I}else i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,h){n=n||10,h=h|0||1;var p;if(n===16||n==="hex"){p="";for(var y=0,v=0,B=0;B<this.length;B++){var _=this.words[B],m=((_<<y|v)&16777215).toString(16);v=_>>>24-y&16777215,y+=2,y>=26&&(y-=26,B--),v!==0||B!==this.length-1?p=U[6-m.length]+m+p:p=m+p}for(v!==0&&(p=v.toString(16)+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(n===(n|0)&&n>=2&&n<=36){var c=R[n],w=L[n];p="";var K=this.clone();for(K.negative=0;!K.isZero();){var $=K.modrn(w).toString(n);K=K.idivn(w),K.isZero()?p=$+p:p=U[c-$.length]+$+p}for(this.isZero()&&(p="0"+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},d&&(i.prototype.toBuffer=function(n,h){return this.toArrayLike(d,n,h)}),i.prototype.toArray=function(n,h){return this.toArrayLike(Array,n,h)};var T=function(n,h){return n.allocUnsafe?n.allocUnsafe(h):new n(h)};i.prototype.toArrayLike=function(n,h,p){this._strip();var y=this.byteLength(),v=p||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0");var B=T(n,v),_=h==="le"?"LE":"BE";return this["_toArrayLike"+_](B,y),B},i.prototype._toArrayLikeLE=function(n,h){for(var p=0,y=0,v=0,B=0;v<this.length;v++){var _=this.words[v]<<B|y;n[p++]=_&255,p<n.length&&(n[p++]=_>>8&255),p<n.length&&(n[p++]=_>>16&255),B===6?(p<n.length&&(n[p++]=_>>24&255),y=0,B=0):(y=_>>>24,B+=2)}if(p<n.length)for(n[p++]=y;p<n.length;)n[p++]=0},i.prototype._toArrayLikeBE=function(n,h){for(var p=n.length-1,y=0,v=0,B=0;v<this.length;v++){var _=this.words[v]<<B|y;n[p--]=_&255,p>=0&&(n[p--]=_>>8&255),p>=0&&(n[p--]=_>>16&255),B===6?(p>=0&&(n[p--]=_>>24&255),y=0,B=0):(y=_>>>24,B+=2)}if(p>=0)for(n[p--]=y;p>=0;)n[p--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var h=n,p=0;return h>=4096&&(p+=13,h>>>=13),h>=64&&(p+=7,h>>>=7),h>=8&&(p+=4,h>>>=4),h>=2&&(p+=2,h>>>=2),p+h},i.prototype._zeroBits=function(n){if(n===0)return 26;var h=n,p=0;return h&8191||(p+=13,h>>>=13),h&127||(p+=7,h>>>=7),h&15||(p+=4,h>>>=4),h&3||(p+=2,h>>>=2),h&1||p++,p},i.prototype.bitLength=function(){var n=this.words[this.length-1],h=this._countBits(n);return(this.length-1)*26+h};function C(b){for(var n=new Array(b.bitLength()),h=0;h<n.length;h++){var p=h/26|0,y=h%26;n[h]=b.words[p]>>>y&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,h=0;h<this.length;h++){var p=this._zeroBits(this.words[h]);if(n+=p,p!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var h=0;h<n.length;h++)this.words[h]=this.words[h]|n.words[h];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var h;this.length>n.length?h=n:h=this;for(var p=0;p<h.length;p++)this.words[p]=this.words[p]&n.words[p];return this.length=h.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var h,p;this.length>n.length?(h=this,p=n):(h=n,p=this);for(var y=0;y<p.length;y++)this.words[y]=h.words[y]^p.words[y];if(this!==h)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=h.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var h=Math.ceil(n/26)|0,p=n%26;this._expand(h),p>0&&h--;for(var y=0;y<h;y++)this.words[y]=~this.words[y]&67108863;return p>0&&(this.words[y]=~this.words[y]&67108863>>26-p),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,h){r(typeof n=="number"&&n>=0);var p=n/26|0,y=n%26;return this._expand(p+1),h?this.words[p]=this.words[p]|1<<y:this.words[p]=this.words[p]&~(1<<y),this._strip()},i.prototype.iadd=function(n){var h;if(this.negative!==0&&n.negative===0)return this.negative=0,h=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,h=this.isub(n),n.negative=1,h._normSign();var p,y;this.length>n.length?(p=this,y=n):(p=n,y=this);for(var v=0,B=0;B<y.length;B++)h=(p.words[B]|0)+(y.words[B]|0)+v,this.words[B]=h&67108863,v=h>>>26;for(;v!==0&&B<p.length;B++)h=(p.words[B]|0)+v,this.words[B]=h&67108863,v=h>>>26;if(this.length=p.length,v!==0)this.words[this.length]=v,this.length++;else if(p!==this)for(;B<p.length;B++)this.words[B]=p.words[B];return this},i.prototype.add=function(n){var h;return n.negative!==0&&this.negative===0?(n.negative=0,h=this.sub(n),n.negative^=1,h):n.negative===0&&this.negative!==0?(this.negative=0,h=n.sub(this),this.negative=1,h):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var h=this.iadd(n);return n.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var p=this.cmp(n);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;p>0?(y=this,v=n):(y=n,v=this);for(var B=0,_=0;_<v.length;_++)h=(y.words[_]|0)-(v.words[_]|0)+B,B=h>>26,this.words[_]=h&67108863;for(;B!==0&&_<y.length;_++)h=(y.words[_]|0)+B,B=h>>26,this.words[_]=h&67108863;if(B===0&&_<y.length&&y!==this)for(;_<y.length;_++)this.words[_]=y.words[_];return this.length=Math.max(this.length,_),y!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function D(b,n,h){h.negative=n.negative^b.negative;var p=b.length+n.length|0;h.length=p,p=p-1|0;var y=b.words[0]|0,v=n.words[0]|0,B=y*v,_=B&67108863,m=B/67108864|0;h.words[0]=_;for(var c=1;c<p;c++){for(var w=m>>>26,K=m&67108863,$=Math.min(c,n.length-1),G=Math.max(0,c-b.length+1);G<=$;G++){var Kt=c-G|0;y=b.words[Kt]|0,v=n.words[G]|0,B=y*v+K,w+=B/67108864|0,K=B&67108863}h.words[c]=K|0,m=w|0}return m!==0?h.words[c]=m|0:h.length--,h._strip()}var q=function(n,h,p){var y=n.words,v=h.words,B=p.words,_=0,m,c,w,K=y[0]|0,$=K&8191,G=K>>>13,Kt=y[1]|0,nt=Kt&8191,ut=Kt>>>13,Pe=y[2]|0,bt=Pe&8191,wt=Pe>>>13,ye=y[3]|0,ht=ye&8191,xt=ye>>>13,Ge=y[4]|0,gt=Ge&8191,Et=Ge>>>13,Ze=y[5]|0,vt=Ze&8191,dt=Ze>>>13,ie=y[6]|0,mt=ie&8191,Bt=ie>>>13,ae=y[7]|0,Mt=ae&8191,f=ae>>>13,s=y[8]|0,a=s&8191,g=s>>>13,E=y[9]|0,M=E&8191,S=E>>>13,X=v[0]|0,j=X&8191,Z=X>>>13,pt=v[1]|0,W=pt&8191,St=pt>>>13,an=v[2]|0,At=an&8191,It=an>>>13,cn=v[3]|0,kt=cn&8191,Rt=cn>>>13,un=v[4]|0,Tt=un&8191,Ut=un>>>13,hn=v[5]|0,Lt=hn&8191,Ct=hn>>>13,fn=v[6]|0,Ft=fn&8191,Pt=fn>>>13,ln=v[7]|0,Ot=ln&8191,Nt=ln>>>13,dn=v[8]|0,Dt=dn&8191,qt=dn>>>13,pn=v[9]|0,Ht=pn&8191,$t=pn>>>13;p.negative=n.negative^h.negative,p.length=19,m=Math.imul($,j),c=Math.imul($,Z),c=c+Math.imul(G,j)|0,w=Math.imul(G,Z);var fr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(fr>>>26)|0,fr&=67108863,m=Math.imul(nt,j),c=Math.imul(nt,Z),c=c+Math.imul(ut,j)|0,w=Math.imul(ut,Z),m=m+Math.imul($,W)|0,c=c+Math.imul($,St)|0,c=c+Math.imul(G,W)|0,w=w+Math.imul(G,St)|0;var lr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(lr>>>26)|0,lr&=67108863,m=Math.imul(bt,j),c=Math.imul(bt,Z),c=c+Math.imul(wt,j)|0,w=Math.imul(wt,Z),m=m+Math.imul(nt,W)|0,c=c+Math.imul(nt,St)|0,c=c+Math.imul(ut,W)|0,w=w+Math.imul(ut,St)|0,m=m+Math.imul($,At)|0,c=c+Math.imul($,It)|0,c=c+Math.imul(G,At)|0,w=w+Math.imul(G,It)|0;var dr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(dr>>>26)|0,dr&=67108863,m=Math.imul(ht,j),c=Math.imul(ht,Z),c=c+Math.imul(xt,j)|0,w=Math.imul(xt,Z),m=m+Math.imul(bt,W)|0,c=c+Math.imul(bt,St)|0,c=c+Math.imul(wt,W)|0,w=w+Math.imul(wt,St)|0,m=m+Math.imul(nt,At)|0,c=c+Math.imul(nt,It)|0,c=c+Math.imul(ut,At)|0,w=w+Math.imul(ut,It)|0,m=m+Math.imul($,kt)|0,c=c+Math.imul($,Rt)|0,c=c+Math.imul(G,kt)|0,w=w+Math.imul(G,Rt)|0;var pr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(pr>>>26)|0,pr&=67108863,m=Math.imul(gt,j),c=Math.imul(gt,Z),c=c+Math.imul(Et,j)|0,w=Math.imul(Et,Z),m=m+Math.imul(ht,W)|0,c=c+Math.imul(ht,St)|0,c=c+Math.imul(xt,W)|0,w=w+Math.imul(xt,St)|0,m=m+Math.imul(bt,At)|0,c=c+Math.imul(bt,It)|0,c=c+Math.imul(wt,At)|0,w=w+Math.imul(wt,It)|0,m=m+Math.imul(nt,kt)|0,c=c+Math.imul(nt,Rt)|0,c=c+Math.imul(ut,kt)|0,w=w+Math.imul(ut,Rt)|0,m=m+Math.imul($,Tt)|0,c=c+Math.imul($,Ut)|0,c=c+Math.imul(G,Tt)|0,w=w+Math.imul(G,Ut)|0;var gr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(gr>>>26)|0,gr&=67108863,m=Math.imul(vt,j),c=Math.imul(vt,Z),c=c+Math.imul(dt,j)|0,w=Math.imul(dt,Z),m=m+Math.imul(gt,W)|0,c=c+Math.imul(gt,St)|0,c=c+Math.imul(Et,W)|0,w=w+Math.imul(Et,St)|0,m=m+Math.imul(ht,At)|0,c=c+Math.imul(ht,It)|0,c=c+Math.imul(xt,At)|0,w=w+Math.imul(xt,It)|0,m=m+Math.imul(bt,kt)|0,c=c+Math.imul(bt,Rt)|0,c=c+Math.imul(wt,kt)|0,w=w+Math.imul(wt,Rt)|0,m=m+Math.imul(nt,Tt)|0,c=c+Math.imul(nt,Ut)|0,c=c+Math.imul(ut,Tt)|0,w=w+Math.imul(ut,Ut)|0,m=m+Math.imul($,Lt)|0,c=c+Math.imul($,Ct)|0,c=c+Math.imul(G,Lt)|0,w=w+Math.imul(G,Ct)|0;var mr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(mr>>>26)|0,mr&=67108863,m=Math.imul(mt,j),c=Math.imul(mt,Z),c=c+Math.imul(Bt,j)|0,w=Math.imul(Bt,Z),m=m+Math.imul(vt,W)|0,c=c+Math.imul(vt,St)|0,c=c+Math.imul(dt,W)|0,w=w+Math.imul(dt,St)|0,m=m+Math.imul(gt,At)|0,c=c+Math.imul(gt,It)|0,c=c+Math.imul(Et,At)|0,w=w+Math.imul(Et,It)|0,m=m+Math.imul(ht,kt)|0,c=c+Math.imul(ht,Rt)|0,c=c+Math.imul(xt,kt)|0,w=w+Math.imul(xt,Rt)|0,m=m+Math.imul(bt,Tt)|0,c=c+Math.imul(bt,Ut)|0,c=c+Math.imul(wt,Tt)|0,w=w+Math.imul(wt,Ut)|0,m=m+Math.imul(nt,Lt)|0,c=c+Math.imul(nt,Ct)|0,c=c+Math.imul(ut,Lt)|0,w=w+Math.imul(ut,Ct)|0,m=m+Math.imul($,Ft)|0,c=c+Math.imul($,Pt)|0,c=c+Math.imul(G,Ft)|0,w=w+Math.imul(G,Pt)|0;var yr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(yr>>>26)|0,yr&=67108863,m=Math.imul(Mt,j),c=Math.imul(Mt,Z),c=c+Math.imul(f,j)|0,w=Math.imul(f,Z),m=m+Math.imul(mt,W)|0,c=c+Math.imul(mt,St)|0,c=c+Math.imul(Bt,W)|0,w=w+Math.imul(Bt,St)|0,m=m+Math.imul(vt,At)|0,c=c+Math.imul(vt,It)|0,c=c+Math.imul(dt,At)|0,w=w+Math.imul(dt,It)|0,m=m+Math.imul(gt,kt)|0,c=c+Math.imul(gt,Rt)|0,c=c+Math.imul(Et,kt)|0,w=w+Math.imul(Et,Rt)|0,m=m+Math.imul(ht,Tt)|0,c=c+Math.imul(ht,Ut)|0,c=c+Math.imul(xt,Tt)|0,w=w+Math.imul(xt,Ut)|0,m=m+Math.imul(bt,Lt)|0,c=c+Math.imul(bt,Ct)|0,c=c+Math.imul(wt,Lt)|0,w=w+Math.imul(wt,Ct)|0,m=m+Math.imul(nt,Ft)|0,c=c+Math.imul(nt,Pt)|0,c=c+Math.imul(ut,Ft)|0,w=w+Math.imul(ut,Pt)|0,m=m+Math.imul($,Ot)|0,c=c+Math.imul($,Nt)|0,c=c+Math.imul(G,Ot)|0,w=w+Math.imul(G,Nt)|0;var wr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(wr>>>26)|0,wr&=67108863,m=Math.imul(a,j),c=Math.imul(a,Z),c=c+Math.imul(g,j)|0,w=Math.imul(g,Z),m=m+Math.imul(Mt,W)|0,c=c+Math.imul(Mt,St)|0,c=c+Math.imul(f,W)|0,w=w+Math.imul(f,St)|0,m=m+Math.imul(mt,At)|0,c=c+Math.imul(mt,It)|0,c=c+Math.imul(Bt,At)|0,w=w+Math.imul(Bt,It)|0,m=m+Math.imul(vt,kt)|0,c=c+Math.imul(vt,Rt)|0,c=c+Math.imul(dt,kt)|0,w=w+Math.imul(dt,Rt)|0,m=m+Math.imul(gt,Tt)|0,c=c+Math.imul(gt,Ut)|0,c=c+Math.imul(Et,Tt)|0,w=w+Math.imul(Et,Ut)|0,m=m+Math.imul(ht,Lt)|0,c=c+Math.imul(ht,Ct)|0,c=c+Math.imul(xt,Lt)|0,w=w+Math.imul(xt,Ct)|0,m=m+Math.imul(bt,Ft)|0,c=c+Math.imul(bt,Pt)|0,c=c+Math.imul(wt,Ft)|0,w=w+Math.imul(wt,Pt)|0,m=m+Math.imul(nt,Ot)|0,c=c+Math.imul(nt,Nt)|0,c=c+Math.imul(ut,Ot)|0,w=w+Math.imul(ut,Nt)|0,m=m+Math.imul($,Dt)|0,c=c+Math.imul($,qt)|0,c=c+Math.imul(G,Dt)|0,w=w+Math.imul(G,qt)|0;var vr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(vr>>>26)|0,vr&=67108863,m=Math.imul(M,j),c=Math.imul(M,Z),c=c+Math.imul(S,j)|0,w=Math.imul(S,Z),m=m+Math.imul(a,W)|0,c=c+Math.imul(a,St)|0,c=c+Math.imul(g,W)|0,w=w+Math.imul(g,St)|0,m=m+Math.imul(Mt,At)|0,c=c+Math.imul(Mt,It)|0,c=c+Math.imul(f,At)|0,w=w+Math.imul(f,It)|0,m=m+Math.imul(mt,kt)|0,c=c+Math.imul(mt,Rt)|0,c=c+Math.imul(Bt,kt)|0,w=w+Math.imul(Bt,Rt)|0,m=m+Math.imul(vt,Tt)|0,c=c+Math.imul(vt,Ut)|0,c=c+Math.imul(dt,Tt)|0,w=w+Math.imul(dt,Ut)|0,m=m+Math.imul(gt,Lt)|0,c=c+Math.imul(gt,Ct)|0,c=c+Math.imul(Et,Lt)|0,w=w+Math.imul(Et,Ct)|0,m=m+Math.imul(ht,Ft)|0,c=c+Math.imul(ht,Pt)|0,c=c+Math.imul(xt,Ft)|0,w=w+Math.imul(xt,Pt)|0,m=m+Math.imul(bt,Ot)|0,c=c+Math.imul(bt,Nt)|0,c=c+Math.imul(wt,Ot)|0,w=w+Math.imul(wt,Nt)|0,m=m+Math.imul(nt,Dt)|0,c=c+Math.imul(nt,qt)|0,c=c+Math.imul(ut,Dt)|0,w=w+Math.imul(ut,qt)|0,m=m+Math.imul($,Ht)|0,c=c+Math.imul($,$t)|0,c=c+Math.imul(G,Ht)|0,w=w+Math.imul(G,$t)|0;var br=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(br>>>26)|0,br&=67108863,m=Math.imul(M,W),c=Math.imul(M,St),c=c+Math.imul(S,W)|0,w=Math.imul(S,St),m=m+Math.imul(a,At)|0,c=c+Math.imul(a,It)|0,c=c+Math.imul(g,At)|0,w=w+Math.imul(g,It)|0,m=m+Math.imul(Mt,kt)|0,c=c+Math.imul(Mt,Rt)|0,c=c+Math.imul(f,kt)|0,w=w+Math.imul(f,Rt)|0,m=m+Math.imul(mt,Tt)|0,c=c+Math.imul(mt,Ut)|0,c=c+Math.imul(Bt,Tt)|0,w=w+Math.imul(Bt,Ut)|0,m=m+Math.imul(vt,Lt)|0,c=c+Math.imul(vt,Ct)|0,c=c+Math.imul(dt,Lt)|0,w=w+Math.imul(dt,Ct)|0,m=m+Math.imul(gt,Ft)|0,c=c+Math.imul(gt,Pt)|0,c=c+Math.imul(Et,Ft)|0,w=w+Math.imul(Et,Pt)|0,m=m+Math.imul(ht,Ot)|0,c=c+Math.imul(ht,Nt)|0,c=c+Math.imul(xt,Ot)|0,w=w+Math.imul(xt,Nt)|0,m=m+Math.imul(bt,Dt)|0,c=c+Math.imul(bt,qt)|0,c=c+Math.imul(wt,Dt)|0,w=w+Math.imul(wt,qt)|0,m=m+Math.imul(nt,Ht)|0,c=c+Math.imul(nt,$t)|0,c=c+Math.imul(ut,Ht)|0,w=w+Math.imul(ut,$t)|0;var xr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(xr>>>26)|0,xr&=67108863,m=Math.imul(M,At),c=Math.imul(M,It),c=c+Math.imul(S,At)|0,w=Math.imul(S,It),m=m+Math.imul(a,kt)|0,c=c+Math.imul(a,Rt)|0,c=c+Math.imul(g,kt)|0,w=w+Math.imul(g,Rt)|0,m=m+Math.imul(Mt,Tt)|0,c=c+Math.imul(Mt,Ut)|0,c=c+Math.imul(f,Tt)|0,w=w+Math.imul(f,Ut)|0,m=m+Math.imul(mt,Lt)|0,c=c+Math.imul(mt,Ct)|0,c=c+Math.imul(Bt,Lt)|0,w=w+Math.imul(Bt,Ct)|0,m=m+Math.imul(vt,Ft)|0,c=c+Math.imul(vt,Pt)|0,c=c+Math.imul(dt,Ft)|0,w=w+Math.imul(dt,Pt)|0,m=m+Math.imul(gt,Ot)|0,c=c+Math.imul(gt,Nt)|0,c=c+Math.imul(Et,Ot)|0,w=w+Math.imul(Et,Nt)|0,m=m+Math.imul(ht,Dt)|0,c=c+Math.imul(ht,qt)|0,c=c+Math.imul(xt,Dt)|0,w=w+Math.imul(xt,qt)|0,m=m+Math.imul(bt,Ht)|0,c=c+Math.imul(bt,$t)|0,c=c+Math.imul(wt,Ht)|0,w=w+Math.imul(wt,$t)|0;var Er=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Er>>>26)|0,Er&=67108863,m=Math.imul(M,kt),c=Math.imul(M,Rt),c=c+Math.imul(S,kt)|0,w=Math.imul(S,Rt),m=m+Math.imul(a,Tt)|0,c=c+Math.imul(a,Ut)|0,c=c+Math.imul(g,Tt)|0,w=w+Math.imul(g,Ut)|0,m=m+Math.imul(Mt,Lt)|0,c=c+Math.imul(Mt,Ct)|0,c=c+Math.imul(f,Lt)|0,w=w+Math.imul(f,Ct)|0,m=m+Math.imul(mt,Ft)|0,c=c+Math.imul(mt,Pt)|0,c=c+Math.imul(Bt,Ft)|0,w=w+Math.imul(Bt,Pt)|0,m=m+Math.imul(vt,Ot)|0,c=c+Math.imul(vt,Nt)|0,c=c+Math.imul(dt,Ot)|0,w=w+Math.imul(dt,Nt)|0,m=m+Math.imul(gt,Dt)|0,c=c+Math.imul(gt,qt)|0,c=c+Math.imul(Et,Dt)|0,w=w+Math.imul(Et,qt)|0,m=m+Math.imul(ht,Ht)|0,c=c+Math.imul(ht,$t)|0,c=c+Math.imul(xt,Ht)|0,w=w+Math.imul(xt,$t)|0;var Br=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Br>>>26)|0,Br&=67108863,m=Math.imul(M,Tt),c=Math.imul(M,Ut),c=c+Math.imul(S,Tt)|0,w=Math.imul(S,Ut),m=m+Math.imul(a,Lt)|0,c=c+Math.imul(a,Ct)|0,c=c+Math.imul(g,Lt)|0,w=w+Math.imul(g,Ct)|0,m=m+Math.imul(Mt,Ft)|0,c=c+Math.imul(Mt,Pt)|0,c=c+Math.imul(f,Ft)|0,w=w+Math.imul(f,Pt)|0,m=m+Math.imul(mt,Ot)|0,c=c+Math.imul(mt,Nt)|0,c=c+Math.imul(Bt,Ot)|0,w=w+Math.imul(Bt,Nt)|0,m=m+Math.imul(vt,Dt)|0,c=c+Math.imul(vt,qt)|0,c=c+Math.imul(dt,Dt)|0,w=w+Math.imul(dt,qt)|0,m=m+Math.imul(gt,Ht)|0,c=c+Math.imul(gt,$t)|0,c=c+Math.imul(Et,Ht)|0,w=w+Math.imul(Et,$t)|0;var Mr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,m=Math.imul(M,Lt),c=Math.imul(M,Ct),c=c+Math.imul(S,Lt)|0,w=Math.imul(S,Ct),m=m+Math.imul(a,Ft)|0,c=c+Math.imul(a,Pt)|0,c=c+Math.imul(g,Ft)|0,w=w+Math.imul(g,Pt)|0,m=m+Math.imul(Mt,Ot)|0,c=c+Math.imul(Mt,Nt)|0,c=c+Math.imul(f,Ot)|0,w=w+Math.imul(f,Nt)|0,m=m+Math.imul(mt,Dt)|0,c=c+Math.imul(mt,qt)|0,c=c+Math.imul(Bt,Dt)|0,w=w+Math.imul(Bt,qt)|0,m=m+Math.imul(vt,Ht)|0,c=c+Math.imul(vt,$t)|0,c=c+Math.imul(dt,Ht)|0,w=w+Math.imul(dt,$t)|0;var _r=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(_r>>>26)|0,_r&=67108863,m=Math.imul(M,Ft),c=Math.imul(M,Pt),c=c+Math.imul(S,Ft)|0,w=Math.imul(S,Pt),m=m+Math.imul(a,Ot)|0,c=c+Math.imul(a,Nt)|0,c=c+Math.imul(g,Ot)|0,w=w+Math.imul(g,Nt)|0,m=m+Math.imul(Mt,Dt)|0,c=c+Math.imul(Mt,qt)|0,c=c+Math.imul(f,Dt)|0,w=w+Math.imul(f,qt)|0,m=m+Math.imul(mt,Ht)|0,c=c+Math.imul(mt,$t)|0,c=c+Math.imul(Bt,Ht)|0,w=w+Math.imul(Bt,$t)|0;var Sr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,m=Math.imul(M,Ot),c=Math.imul(M,Nt),c=c+Math.imul(S,Ot)|0,w=Math.imul(S,Nt),m=m+Math.imul(a,Dt)|0,c=c+Math.imul(a,qt)|0,c=c+Math.imul(g,Dt)|0,w=w+Math.imul(g,qt)|0,m=m+Math.imul(Mt,Ht)|0,c=c+Math.imul(Mt,$t)|0,c=c+Math.imul(f,Ht)|0,w=w+Math.imul(f,$t)|0;var Ar=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,m=Math.imul(M,Dt),c=Math.imul(M,qt),c=c+Math.imul(S,Dt)|0,w=Math.imul(S,qt),m=m+Math.imul(a,Ht)|0,c=c+Math.imul(a,$t)|0,c=c+Math.imul(g,Ht)|0,w=w+Math.imul(g,$t)|0;var Ir=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,m=Math.imul(M,Ht),c=Math.imul(M,$t),c=c+Math.imul(S,Ht)|0,w=Math.imul(S,$t);var kr=(_+m|0)+((c&8191)<<13)|0;return _=(w+(c>>>13)|0)+(kr>>>26)|0,kr&=67108863,B[0]=fr,B[1]=lr,B[2]=dr,B[3]=pr,B[4]=gr,B[5]=mr,B[6]=yr,B[7]=wr,B[8]=vr,B[9]=br,B[10]=xr,B[11]=Er,B[12]=Br,B[13]=Mr,B[14]=_r,B[15]=Sr,B[16]=Ar,B[17]=Ir,B[18]=kr,_!==0&&(B[19]=_,p.length++),p};Math.imul||(q=D);function P(b,n,h){h.negative=n.negative^b.negative,h.length=b.length+n.length;for(var p=0,y=0,v=0;v<h.length-1;v++){var B=y;y=0;for(var _=p&67108863,m=Math.min(v,n.length-1),c=Math.max(0,v-b.length+1);c<=m;c++){var w=v-c,K=b.words[w]|0,$=n.words[c]|0,G=K*$,Kt=G&67108863;B=B+(G/67108864|0)|0,Kt=Kt+_|0,_=Kt&67108863,B=B+(Kt>>>26)|0,y+=B>>>26,B&=67108863}h.words[v]=_,p=B,B=y}return p!==0?h.words[v]=p:h.length--,h._strip()}function tt(b,n,h){return P(b,n,h)}i.prototype.mulTo=function(n,h){var p,y=this.length+n.length;return this.length===10&&n.length===10?p=q(this,n,h):y<63?p=D(this,n,h):y<1024?p=P(this,n,h):p=tt(this,n,h),p},i.prototype.mul=function(n){var h=new i(null);return h.words=new Array(this.length+n.length),this.mulTo(n,h)},i.prototype.mulf=function(n){var h=new i(null);return h.words=new Array(this.length+n.length),tt(this,n,h)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var h=n<0;h&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var p=0,y=0;y<this.length;y++){var v=(this.words[y]|0)*n,B=(v&67108863)+(p&67108863);p>>=26,p+=v/67108864|0,p+=B>>>26,this.words[y]=B&67108863}return p!==0&&(this.words[y]=p,this.length++),h?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var h=C(n);if(h.length===0)return new i(1);for(var p=this,y=0;y<h.length&&h[y]===0;y++,p=p.sqr());if(++y<h.length)for(var v=p.sqr();y<h.length;y++,v=v.sqr())h[y]!==0&&(p=p.mul(v));return p},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var h=n%26,p=(n-h)/26,y=67108863>>>26-h<<26-h,v;if(h!==0){var B=0;for(v=0;v<this.length;v++){var _=this.words[v]&y,m=(this.words[v]|0)-_<<h;this.words[v]=m|B,B=_>>>26-h}B&&(this.words[v]=B,this.length++)}if(p!==0){for(v=this.length-1;v>=0;v--)this.words[v+p]=this.words[v];for(v=0;v<p;v++)this.words[v]=0;this.length+=p}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,h,p){r(typeof n=="number"&&n>=0);var y;h?y=(h-h%26)/26:y=0;var v=n%26,B=Math.min((n-v)/26,this.length),_=67108863^67108863>>>v<<v,m=p;if(y-=B,y=Math.max(0,y),m){for(var c=0;c<B;c++)m.words[c]=this.words[c];m.length=B}if(B!==0)if(this.length>B)for(this.length-=B,c=0;c<this.length;c++)this.words[c]=this.words[c+B];else this.words[0]=0,this.length=1;var w=0;for(c=this.length-1;c>=0&&(w!==0||c>=y);c--){var K=this.words[c]|0;this.words[c]=w<<26-v|K>>>v,w=K&_}return m&&w!==0&&(m.words[m.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,h,p){return r(this.negative===0),this.iushrn(n,h,p)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var h=n%26,p=(n-h)/26,y=1<<h;if(this.length<=p)return!1;var v=this.words[p];return!!(v&y)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var h=n%26,p=(n-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(h!==0&&p++,this.length=Math.min(p,this.length),h!==0){var y=67108863^67108863>>>h<<h;this.words[this.length-1]&=y}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,h,p){var y=n.length+p,v;this._expand(y);var B,_=0;for(v=0;v<n.length;v++){B=(this.words[v+p]|0)+_;var m=(n.words[v]|0)*h;B-=m&67108863,_=(B>>26)-(m/67108864|0),this.words[v+p]=B&67108863}for(;v<this.length-p;v++)B=(this.words[v+p]|0)+_,_=B>>26,this.words[v+p]=B&67108863;if(_===0)return this._strip();for(r(_===-1),_=0,v=0;v<this.length;v++)B=-(this.words[v]|0)+_,_=B>>26,this.words[v]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,h){var p=this.length-n.length,y=this.clone(),v=n,B=v.words[v.length-1]|0,_=this._countBits(B);p=26-_,p!==0&&(v=v.ushln(p),y.iushln(p),B=v.words[v.length-1]|0);var m=y.length-v.length,c;if(h!=="mod"){c=new i(null),c.length=m+1,c.words=new Array(c.length);for(var w=0;w<c.length;w++)c.words[w]=0}var K=y.clone()._ishlnsubmul(v,1,m);K.negative===0&&(y=K,c&&(c.words[m]=1));for(var $=m-1;$>=0;$--){var G=(y.words[v.length+$]|0)*67108864+(y.words[v.length+$-1]|0);for(G=Math.min(G/B|0,67108863),y._ishlnsubmul(v,G,$);y.negative!==0;)G--,y.negative=0,y._ishlnsubmul(v,1,$),y.isZero()||(y.negative^=1);c&&(c.words[$]=G)}return c&&c._strip(),y._strip(),h!=="div"&&p!==0&&y.iushrn(p),{div:c||null,mod:y}},i.prototype.divmod=function(n,h,p){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,v,B;return this.negative!==0&&n.negative===0?(B=this.neg().divmod(n,h),h!=="mod"&&(y=B.div.neg()),h!=="div"&&(v=B.mod.neg(),p&&v.negative!==0&&v.iadd(n)),{div:y,mod:v}):this.negative===0&&n.negative!==0?(B=this.divmod(n.neg(),h),h!=="mod"&&(y=B.div.neg()),{div:y,mod:B.mod}):this.negative&n.negative?(B=this.neg().divmod(n.neg(),h),h!=="div"&&(v=B.mod.neg(),p&&v.negative!==0&&v.isub(n)),{div:B.div,mod:v}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?h==="div"?{div:this.divn(n.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,h)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var h=this.divmod(n);if(h.mod.isZero())return h.div;var p=h.div.negative!==0?h.mod.isub(n):h.mod,y=n.ushrn(1),v=n.andln(1),B=p.cmp(y);return B<0||v===1&&B===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(n){var h=n<0;h&&(n=-n),r(n<=67108863);for(var p=(1<<26)%n,y=0,v=this.length-1;v>=0;v--)y=(p*y+(this.words[v]|0))%n;return h?-y:y},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var h=n<0;h&&(n=-n),r(n<=67108863);for(var p=0,y=this.length-1;y>=0;y--){var v=(this.words[y]|0)+p*67108864;this.words[y]=v/n|0,p=v%n}return this._strip(),h?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var h=this,p=n.clone();h.negative!==0?h=h.umod(n):h=h.clone();for(var y=new i(1),v=new i(0),B=new i(0),_=new i(1),m=0;h.isEven()&&p.isEven();)h.iushrn(1),p.iushrn(1),++m;for(var c=p.clone(),w=h.clone();!h.isZero();){for(var K=0,$=1;!(h.words[0]&$)&&K<26;++K,$<<=1);if(K>0)for(h.iushrn(K);K-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(w)),y.iushrn(1),v.iushrn(1);for(var G=0,Kt=1;!(p.words[0]&Kt)&&G<26;++G,Kt<<=1);if(G>0)for(p.iushrn(G);G-- >0;)(B.isOdd()||_.isOdd())&&(B.iadd(c),_.isub(w)),B.iushrn(1),_.iushrn(1);h.cmp(p)>=0?(h.isub(p),y.isub(B),v.isub(_)):(p.isub(h),B.isub(y),_.isub(v))}return{a:B,b:_,gcd:p.iushln(m)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var h=this,p=n.clone();h.negative!==0?h=h.umod(n):h=h.clone();for(var y=new i(1),v=new i(0),B=p.clone();h.cmpn(1)>0&&p.cmpn(1)>0;){for(var _=0,m=1;!(h.words[0]&m)&&_<26;++_,m<<=1);if(_>0)for(h.iushrn(_);_-- >0;)y.isOdd()&&y.iadd(B),y.iushrn(1);for(var c=0,w=1;!(p.words[0]&w)&&c<26;++c,w<<=1);if(c>0)for(p.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(B),v.iushrn(1);h.cmp(p)>=0?(h.isub(p),y.isub(v)):(p.isub(h),v.isub(y))}var K;return h.cmpn(1)===0?K=y:K=v,K.cmpn(0)<0&&K.iadd(n),K},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var h=this.clone(),p=n.clone();h.negative=0,p.negative=0;for(var y=0;h.isEven()&&p.isEven();y++)h.iushrn(1),p.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;p.isEven();)p.iushrn(1);var v=h.cmp(p);if(v<0){var B=h;h=p,p=B}else if(v===0||p.cmpn(1)===0)break;h.isub(p)}while(!0);return p.iushln(y)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var h=n%26,p=(n-h)/26,y=1<<h;if(this.length<=p)return this._expand(p+1),this.words[p]|=y,this;for(var v=y,B=p;v!==0&&B<this.length;B++){var _=this.words[B]|0;_+=v,v=_>>>26,_&=67108863,this.words[B]=_}return v!==0&&(this.words[B]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var h=n<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var p;if(this.length>1)p=1;else{h&&(n=-n),r(n<=67108863,"Number is too big");var y=this.words[0]|0;p=y===n?0:y<n?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var h=this.ucmp(n);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var h=0,p=this.length-1;p>=0;p--){var y=this.words[p]|0,v=n.words[p]|0;if(y!==v){y<v?h=-1:y>v&&(h=1);break}}return h},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new ct(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var N={k256:null,p224:null,p192:null,p25519:null};function V(b,n){this.name=b,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},V.prototype.ireduce=function(n){var h=n,p;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),p=h.bitLength();while(p>this.n);var y=p<this.n?-1:h.ucmp(this.p);return y===0?(h.words[0]=0,h.length=1):y>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},V.prototype.split=function(n,h){n.iushrn(this.n,0,h)},V.prototype.imulK=function(n){return n.imul(this.k)};function J(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}u(J,V),J.prototype.split=function(n,h){for(var p=4194303,y=Math.min(n.length,9),v=0;v<y;v++)h.words[v]=n.words[v];if(h.length=y,n.length<=9){n.words[0]=0,n.length=1;return}var B=n.words[9];for(h.words[h.length++]=B&p,v=10;v<n.length;v++){var _=n.words[v]|0;n.words[v-10]=(_&p)<<4|B>>>22,B=_}B>>>=22,n.words[v-10]=B,B===0&&n.length>10?n.length-=10:n.length-=9},J.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var h=0,p=0;p<n.length;p++){var y=n.words[p]|0;h+=y*977,n.words[p]=h&67108863,h=y*64+(h/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function st(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}u(st,V);function jt(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}u(jt,V);function se(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}u(se,V),se.prototype.imulK=function(n){for(var h=0,p=0;p<n.length;p++){var y=(n.words[p]|0)*19+h,v=y&67108863;y>>>=26,n.words[p]=v,h=y}return h!==0&&(n.words[n.length++]=h),n},i._prime=function(n){if(N[n])return N[n];var h;if(n==="k256")h=new J;else if(n==="p224")h=new st;else if(n==="p192")h=new jt;else if(n==="p25519")h=new se;else throw new Error("Unknown prime "+n);return N[n]=h,h};function ct(b){if(typeof b=="string"){var n=i._prime(b);this.m=n.p,this.prime=n}else r(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}ct.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},ct.prototype._verify2=function(n,h){r((n.negative|h.negative)===0,"red works only with positives"),r(n.red&&n.red===h.red,"red works only with red numbers")},ct.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(k(n,n.umod(this.m)._forceRed(this)),n)},ct.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},ct.prototype.add=function(n,h){this._verify2(n,h);var p=n.add(h);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},ct.prototype.iadd=function(n,h){this._verify2(n,h);var p=n.iadd(h);return p.cmp(this.m)>=0&&p.isub(this.m),p},ct.prototype.sub=function(n,h){this._verify2(n,h);var p=n.sub(h);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},ct.prototype.isub=function(n,h){this._verify2(n,h);var p=n.isub(h);return p.cmpn(0)<0&&p.iadd(this.m),p},ct.prototype.shl=function(n,h){return this._verify1(n),this.imod(n.ushln(h))},ct.prototype.imul=function(n,h){return this._verify2(n,h),this.imod(n.imul(h))},ct.prototype.mul=function(n,h){return this._verify2(n,h),this.imod(n.mul(h))},ct.prototype.isqr=function(n){return this.imul(n,n.clone())},ct.prototype.sqr=function(n){return this.mul(n,n)},ct.prototype.sqrt=function(n){if(n.isZero())return n.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(n,p)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var B=new i(1).toRed(this),_=B.redNeg(),m=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,m).cmp(_)!==0;)c.redIAdd(_);for(var w=this.pow(c,y),K=this.pow(n,y.addn(1).iushrn(1)),$=this.pow(n,y),G=v;$.cmp(B)!==0;){for(var Kt=$,nt=0;Kt.cmp(B)!==0;nt++)Kt=Kt.redSqr();r(nt<G);var ut=this.pow(w,new i(1).iushln(G-nt-1));K=K.redMul(ut),w=ut.redSqr(),$=$.redMul(w),G=nt}return K},ct.prototype.invm=function(n){var h=n._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},ct.prototype.pow=function(n,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return n.clone();var p=4,y=new Array(1<<p);y[0]=new i(1).toRed(this),y[1]=n;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],n);var B=y[0],_=0,m=0,c=h.bitLength()%26;for(c===0&&(c=26),v=h.length-1;v>=0;v--){for(var w=h.words[v],K=c-1;K>=0;K--){var $=w>>K&1;if(B!==y[0]&&(B=this.sqr(B)),$===0&&_===0){m=0;continue}_<<=1,_|=$,m++,!(m!==p&&(v!==0||K!==0))&&(B=this.mul(B,y[_]),m=0,_=0)}c=26}return B},ct.prototype.convertTo=function(n){var h=n.umod(this.m);return h===n?h.clone():h},ct.prototype.convertFrom=function(n){var h=n.clone();return h.red=null,h},i.mont=function(n){return new ee(n)};function ee(b){ct.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}u(ee,ct),ee.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},ee.prototype.convertFrom=function(n){var h=this.imod(n.mul(this.rinv));return h.red=null,h},ee.prototype.imul=function(n,h){if(n.isZero()||h.isZero())return n.words[0]=0,n.length=1,n;var p=n.imul(h),y=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=p.isub(y).iushrn(this.shift),B=v;return v.cmp(this.m)>=0?B=v.isub(this.m):v.cmpn(0)<0&&(B=v.iadd(this.m)),B._forceRed(this)},ee.prototype.mul=function(n,h){if(n.isZero()||h.isZero())return new i(0)._forceRed(this);var p=n.mul(h),y=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=p.isub(y).iushrn(this.shift),B=v;return v.cmp(this.m)>=0?B=v.isub(this.m):v.cmpn(0)<0&&(B=v.iadd(this.m)),B._forceRed(this)},ee.prototype.invm=function(n){var h=this.imod(n._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(o,this)})(Nc);var Nn=Ra.Buffer;function Dc(o){if(o.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<o.length;r++){var u=o.charAt(r),i=u.charCodeAt(0);if(t[i]!==255)throw new TypeError(u+" is ambiguous");t[i]=r}var d=o.length,l=o.charAt(0),x=Math.log(d)/Math.log(256),A=Math.log(256)/Math.log(d);function k(R){if((Array.isArray(R)||R instanceof Uint8Array)&&(R=Nn.from(R)),!Nn.isBuffer(R))throw new TypeError("Expected Buffer");if(R.length===0)return"";for(var L=0,T=0,C=0,D=R.length;C!==D&&R[C]===0;)C++,L++;for(var q=(D-C)*A+1>>>0,P=new Uint8Array(q);C!==D;){for(var tt=R[C],N=0,V=q-1;(tt!==0||N<T)&&V!==-1;V--,N++)tt+=256*P[V]>>>0,P[V]=tt%d>>>0,tt=tt/d>>>0;if(tt!==0)throw new Error("Non-zero carry");T=N,C++}for(var J=q-T;J!==q&&P[J]===0;)J++;for(var st=l.repeat(L);J<q;++J)st+=o.charAt(P[J]);return st}function I(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return Nn.alloc(0);for(var L=0,T=0,C=0;R[L]===l;)T++,L++;for(var D=(R.length-L)*x+1>>>0,q=new Uint8Array(D);R[L];){var P=t[R.charCodeAt(L)];if(P===255)return;for(var tt=0,N=D-1;(P!==0||tt<C)&&N!==-1;N--,tt++)P+=d*q[N]>>>0,q[N]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");C=tt,L++}for(var V=D-C;V!==D&&q[V]===0;)V++;var J=Nn.allocUnsafe(T+(D-V));J.fill(0,0,T);for(var st=T;V!==D;)J[st++]=q[V++];return J}function U(R){var L=I(R);if(L)return L;throw new Error("Non-base"+d+" character")}return{encode:k,decodeUnsafe:I,decode:U}}var qc=Dc,Hc=qc,$c="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",re=Hc($c);const zc=(o,t,e)=>o&t^~o&e,Kc=(o,t,e)=>o&t^o&e^t&e,Wc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),er=new Uint32Array(64);class Ro extends Bo{constructor(){super(64,32,8,!1),this.A=tr[0]|0,this.B=tr[1]|0,this.C=tr[2]|0,this.D=tr[3]|0,this.E=tr[4]|0,this.F=tr[5]|0,this.G=tr[6]|0,this.H=tr[7]|0}get(){const{A:t,B:e,C:r,D:u,E:i,F:d,G:l,H:x}=this;return[t,e,r,u,i,d,l,x]}set(t,e,r,u,i,d,l,x){this.A=t|0,this.B=e|0,this.C=r|0,this.D=u|0,this.E=i|0,this.F=d|0,this.G=l|0,this.H=x|0}process(t,e){for(let I=0;I<16;I++,e+=4)er[I]=t.getUint32(e,!1);for(let I=16;I<64;I++){const U=er[I-15],R=er[I-2],L=De(U,7)^De(U,18)^U>>>3,T=De(R,17)^De(R,19)^R>>>10;er[I]=T+er[I-7]+L+er[I-16]|0}let{A:r,B:u,C:i,D:d,E:l,F:x,G:A,H:k}=this;for(let I=0;I<64;I++){const U=De(l,6)^De(l,11)^De(l,25),R=k+U+zc(l,x,A)+Wc[I]+er[I]|0,T=(De(r,2)^De(r,13)^De(r,22))+Kc(r,u,i)|0;k=A,A=x,x=l,l=d+R|0,d=i,i=u,u=r,r=R+T|0}r=r+this.A|0,u=u+this.B|0,i=i+this.C|0,d=d+this.D|0,l=l+this.E|0,x=x+this.F|0,A=A+this.G|0,k=k+this.H|0,this.set(r,u,i,d,l,x,A,k)}roundClean(){er.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Gc extends Ro{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Ni=Nr(()=>new Ro);Nr(()=>new Gc);var be={},Di={},Zc={get exports(){return Di},set exports(o){Di=o}};(function(o){(function(t,e){function r(b,n){if(!b)throw new Error(n||"Assertion failed")}function u(b,n){b.super_=n;var h=function(){};h.prototype=n.prototype,b.prototype=new h,b.prototype.constructor=b}function i(b,n,h){if(i.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((n==="le"||n==="be")&&(h=n,n=10),this._init(b||0,n||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=bo.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,h){return n.cmp(h)>0?n:h},i.min=function(n,h){return n.cmp(h)<0?n:h},i.prototype._init=function(n,h,p){if(typeof n=="number")return this._initNumber(n,h,p);if(typeof n=="object")return this._initArray(n,h,p);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),n=n.toString().replace(/\s+/g,"");var y=0;n[0]==="-"&&(y++,this.negative=1),y<n.length&&(h===16?this._parseHex(n,y,p):(this._parseBase(n,h,y),p==="le"&&this._initArray(this.toArray(),h,p)))},i.prototype._initNumber=function(n,h,p){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),h,p)},i.prototype._initArray=function(n,h,p){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,B,_=0;if(p==="be")for(y=n.length-1,v=0;y>=0;y-=3)B=n[y]|n[y-1]<<8|n[y-2]<<16,this.words[v]|=B<<_&67108863,this.words[v+1]=B>>>26-_&67108863,_+=24,_>=26&&(_-=26,v++);else if(p==="le")for(y=0,v=0;y<n.length;y+=3)B=n[y]|n[y+1]<<8|n[y+2]<<16,this.words[v]|=B<<_&67108863,this.words[v+1]=B>>>26-_&67108863,_+=24,_>=26&&(_-=26,v++);return this._strip()};function l(b,n){var h=b.charCodeAt(n);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+b)}function x(b,n,h){var p=l(b,h);return h-1>=n&&(p|=l(b,h-1)<<4),p}i.prototype._parseHex=function(n,h,p){this.length=Math.ceil((n.length-h)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,B=0,_;if(p==="be")for(y=n.length-1;y>=h;y-=2)_=x(n,h,y)<<v,this.words[B]|=_&67108863,v>=18?(v-=18,B+=1,this.words[B]|=_>>>26):v+=8;else{var m=n.length-h;for(y=m%2===0?h+1:h;y<n.length;y+=2)_=x(n,h,y)<<v,this.words[B]|=_&67108863,v>=18?(v-=18,B+=1,this.words[B]|=_>>>26):v+=8}this._strip()};function A(b,n,h,p){for(var y=0,v=0,B=Math.min(b.length,h),_=n;_<B;_++){var m=b.charCodeAt(_)-48;y*=p,m>=49?v=m-49+10:m>=17?v=m-17+10:v=m,r(m>=0&&v<p,"Invalid character"),y+=v}return y}i.prototype._parseBase=function(n,h,p){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=h)y++;y--,v=v/h|0;for(var B=n.length-p,_=B%y,m=Math.min(B,B-_)+p,c=0,w=p;w<m;w+=y)c=A(n,w,w+y,h),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(_!==0){var K=1;for(c=A(n,w,n.length,h),w=0;w<_;w++)K*=h;this.imuln(K),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var h=0;h<this.length;h++)n.words[h]=this.words[h];n.length=this.length,n.negative=this.negative,n.red=this.red};function k(b,n){b.words=n.words,b.length=n.length,b.negative=n.negative,b.red=n.red}if(i.prototype._move=function(n){k(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{i.prototype.inspect=I}else i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,h){n=n||10,h=h|0||1;var p;if(n===16||n==="hex"){p="";for(var y=0,v=0,B=0;B<this.length;B++){var _=this.words[B],m=((_<<y|v)&16777215).toString(16);v=_>>>24-y&16777215,y+=2,y>=26&&(y-=26,B--),v!==0||B!==this.length-1?p=U[6-m.length]+m+p:p=m+p}for(v!==0&&(p=v.toString(16)+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(n===(n|0)&&n>=2&&n<=36){var c=R[n],w=L[n];p="";var K=this.clone();for(K.negative=0;!K.isZero();){var $=K.modrn(w).toString(n);K=K.idivn(w),K.isZero()?p=$+p:p=U[c-$.length]+$+p}for(this.isZero()&&(p="0"+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},d&&(i.prototype.toBuffer=function(n,h){return this.toArrayLike(d,n,h)}),i.prototype.toArray=function(n,h){return this.toArrayLike(Array,n,h)};var T=function(n,h){return n.allocUnsafe?n.allocUnsafe(h):new n(h)};i.prototype.toArrayLike=function(n,h,p){this._strip();var y=this.byteLength(),v=p||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0");var B=T(n,v),_=h==="le"?"LE":"BE";return this["_toArrayLike"+_](B,y),B},i.prototype._toArrayLikeLE=function(n,h){for(var p=0,y=0,v=0,B=0;v<this.length;v++){var _=this.words[v]<<B|y;n[p++]=_&255,p<n.length&&(n[p++]=_>>8&255),p<n.length&&(n[p++]=_>>16&255),B===6?(p<n.length&&(n[p++]=_>>24&255),y=0,B=0):(y=_>>>24,B+=2)}if(p<n.length)for(n[p++]=y;p<n.length;)n[p++]=0},i.prototype._toArrayLikeBE=function(n,h){for(var p=n.length-1,y=0,v=0,B=0;v<this.length;v++){var _=this.words[v]<<B|y;n[p--]=_&255,p>=0&&(n[p--]=_>>8&255),p>=0&&(n[p--]=_>>16&255),B===6?(p>=0&&(n[p--]=_>>24&255),y=0,B=0):(y=_>>>24,B+=2)}if(p>=0)for(n[p--]=y;p>=0;)n[p--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var h=n,p=0;return h>=4096&&(p+=13,h>>>=13),h>=64&&(p+=7,h>>>=7),h>=8&&(p+=4,h>>>=4),h>=2&&(p+=2,h>>>=2),p+h},i.prototype._zeroBits=function(n){if(n===0)return 26;var h=n,p=0;return h&8191||(p+=13,h>>>=13),h&127||(p+=7,h>>>=7),h&15||(p+=4,h>>>=4),h&3||(p+=2,h>>>=2),h&1||p++,p},i.prototype.bitLength=function(){var n=this.words[this.length-1],h=this._countBits(n);return(this.length-1)*26+h};function C(b){for(var n=new Array(b.bitLength()),h=0;h<n.length;h++){var p=h/26|0,y=h%26;n[h]=b.words[p]>>>y&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,h=0;h<this.length;h++){var p=this._zeroBits(this.words[h]);if(n+=p,p!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var h=0;h<n.length;h++)this.words[h]=this.words[h]|n.words[h];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var h;this.length>n.length?h=n:h=this;for(var p=0;p<h.length;p++)this.words[p]=this.words[p]&n.words[p];return this.length=h.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var h,p;this.length>n.length?(h=this,p=n):(h=n,p=this);for(var y=0;y<p.length;y++)this.words[y]=h.words[y]^p.words[y];if(this!==h)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=h.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var h=Math.ceil(n/26)|0,p=n%26;this._expand(h),p>0&&h--;for(var y=0;y<h;y++)this.words[y]=~this.words[y]&67108863;return p>0&&(this.words[y]=~this.words[y]&67108863>>26-p),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,h){r(typeof n=="number"&&n>=0);var p=n/26|0,y=n%26;return this._expand(p+1),h?this.words[p]=this.words[p]|1<<y:this.words[p]=this.words[p]&~(1<<y),this._strip()},i.prototype.iadd=function(n){var h;if(this.negative!==0&&n.negative===0)return this.negative=0,h=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,h=this.isub(n),n.negative=1,h._normSign();var p,y;this.length>n.length?(p=this,y=n):(p=n,y=this);for(var v=0,B=0;B<y.length;B++)h=(p.words[B]|0)+(y.words[B]|0)+v,this.words[B]=h&67108863,v=h>>>26;for(;v!==0&&B<p.length;B++)h=(p.words[B]|0)+v,this.words[B]=h&67108863,v=h>>>26;if(this.length=p.length,v!==0)this.words[this.length]=v,this.length++;else if(p!==this)for(;B<p.length;B++)this.words[B]=p.words[B];return this},i.prototype.add=function(n){var h;return n.negative!==0&&this.negative===0?(n.negative=0,h=this.sub(n),n.negative^=1,h):n.negative===0&&this.negative!==0?(this.negative=0,h=n.sub(this),this.negative=1,h):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var h=this.iadd(n);return n.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var p=this.cmp(n);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;p>0?(y=this,v=n):(y=n,v=this);for(var B=0,_=0;_<v.length;_++)h=(y.words[_]|0)-(v.words[_]|0)+B,B=h>>26,this.words[_]=h&67108863;for(;B!==0&&_<y.length;_++)h=(y.words[_]|0)+B,B=h>>26,this.words[_]=h&67108863;if(B===0&&_<y.length&&y!==this)for(;_<y.length;_++)this.words[_]=y.words[_];return this.length=Math.max(this.length,_),y!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function D(b,n,h){h.negative=n.negative^b.negative;var p=b.length+n.length|0;h.length=p,p=p-1|0;var y=b.words[0]|0,v=n.words[0]|0,B=y*v,_=B&67108863,m=B/67108864|0;h.words[0]=_;for(var c=1;c<p;c++){for(var w=m>>>26,K=m&67108863,$=Math.min(c,n.length-1),G=Math.max(0,c-b.length+1);G<=$;G++){var Kt=c-G|0;y=b.words[Kt]|0,v=n.words[G]|0,B=y*v+K,w+=B/67108864|0,K=B&67108863}h.words[c]=K|0,m=w|0}return m!==0?h.words[c]=m|0:h.length--,h._strip()}var q=function(n,h,p){var y=n.words,v=h.words,B=p.words,_=0,m,c,w,K=y[0]|0,$=K&8191,G=K>>>13,Kt=y[1]|0,nt=Kt&8191,ut=Kt>>>13,Pe=y[2]|0,bt=Pe&8191,wt=Pe>>>13,ye=y[3]|0,ht=ye&8191,xt=ye>>>13,Ge=y[4]|0,gt=Ge&8191,Et=Ge>>>13,Ze=y[5]|0,vt=Ze&8191,dt=Ze>>>13,ie=y[6]|0,mt=ie&8191,Bt=ie>>>13,ae=y[7]|0,Mt=ae&8191,f=ae>>>13,s=y[8]|0,a=s&8191,g=s>>>13,E=y[9]|0,M=E&8191,S=E>>>13,X=v[0]|0,j=X&8191,Z=X>>>13,pt=v[1]|0,W=pt&8191,St=pt>>>13,an=v[2]|0,At=an&8191,It=an>>>13,cn=v[3]|0,kt=cn&8191,Rt=cn>>>13,un=v[4]|0,Tt=un&8191,Ut=un>>>13,hn=v[5]|0,Lt=hn&8191,Ct=hn>>>13,fn=v[6]|0,Ft=fn&8191,Pt=fn>>>13,ln=v[7]|0,Ot=ln&8191,Nt=ln>>>13,dn=v[8]|0,Dt=dn&8191,qt=dn>>>13,pn=v[9]|0,Ht=pn&8191,$t=pn>>>13;p.negative=n.negative^h.negative,p.length=19,m=Math.imul($,j),c=Math.imul($,Z),c=c+Math.imul(G,j)|0,w=Math.imul(G,Z);var fr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(fr>>>26)|0,fr&=67108863,m=Math.imul(nt,j),c=Math.imul(nt,Z),c=c+Math.imul(ut,j)|0,w=Math.imul(ut,Z),m=m+Math.imul($,W)|0,c=c+Math.imul($,St)|0,c=c+Math.imul(G,W)|0,w=w+Math.imul(G,St)|0;var lr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(lr>>>26)|0,lr&=67108863,m=Math.imul(bt,j),c=Math.imul(bt,Z),c=c+Math.imul(wt,j)|0,w=Math.imul(wt,Z),m=m+Math.imul(nt,W)|0,c=c+Math.imul(nt,St)|0,c=c+Math.imul(ut,W)|0,w=w+Math.imul(ut,St)|0,m=m+Math.imul($,At)|0,c=c+Math.imul($,It)|0,c=c+Math.imul(G,At)|0,w=w+Math.imul(G,It)|0;var dr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(dr>>>26)|0,dr&=67108863,m=Math.imul(ht,j),c=Math.imul(ht,Z),c=c+Math.imul(xt,j)|0,w=Math.imul(xt,Z),m=m+Math.imul(bt,W)|0,c=c+Math.imul(bt,St)|0,c=c+Math.imul(wt,W)|0,w=w+Math.imul(wt,St)|0,m=m+Math.imul(nt,At)|0,c=c+Math.imul(nt,It)|0,c=c+Math.imul(ut,At)|0,w=w+Math.imul(ut,It)|0,m=m+Math.imul($,kt)|0,c=c+Math.imul($,Rt)|0,c=c+Math.imul(G,kt)|0,w=w+Math.imul(G,Rt)|0;var pr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(pr>>>26)|0,pr&=67108863,m=Math.imul(gt,j),c=Math.imul(gt,Z),c=c+Math.imul(Et,j)|0,w=Math.imul(Et,Z),m=m+Math.imul(ht,W)|0,c=c+Math.imul(ht,St)|0,c=c+Math.imul(xt,W)|0,w=w+Math.imul(xt,St)|0,m=m+Math.imul(bt,At)|0,c=c+Math.imul(bt,It)|0,c=c+Math.imul(wt,At)|0,w=w+Math.imul(wt,It)|0,m=m+Math.imul(nt,kt)|0,c=c+Math.imul(nt,Rt)|0,c=c+Math.imul(ut,kt)|0,w=w+Math.imul(ut,Rt)|0,m=m+Math.imul($,Tt)|0,c=c+Math.imul($,Ut)|0,c=c+Math.imul(G,Tt)|0,w=w+Math.imul(G,Ut)|0;var gr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(gr>>>26)|0,gr&=67108863,m=Math.imul(vt,j),c=Math.imul(vt,Z),c=c+Math.imul(dt,j)|0,w=Math.imul(dt,Z),m=m+Math.imul(gt,W)|0,c=c+Math.imul(gt,St)|0,c=c+Math.imul(Et,W)|0,w=w+Math.imul(Et,St)|0,m=m+Math.imul(ht,At)|0,c=c+Math.imul(ht,It)|0,c=c+Math.imul(xt,At)|0,w=w+Math.imul(xt,It)|0,m=m+Math.imul(bt,kt)|0,c=c+Math.imul(bt,Rt)|0,c=c+Math.imul(wt,kt)|0,w=w+Math.imul(wt,Rt)|0,m=m+Math.imul(nt,Tt)|0,c=c+Math.imul(nt,Ut)|0,c=c+Math.imul(ut,Tt)|0,w=w+Math.imul(ut,Ut)|0,m=m+Math.imul($,Lt)|0,c=c+Math.imul($,Ct)|0,c=c+Math.imul(G,Lt)|0,w=w+Math.imul(G,Ct)|0;var mr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(mr>>>26)|0,mr&=67108863,m=Math.imul(mt,j),c=Math.imul(mt,Z),c=c+Math.imul(Bt,j)|0,w=Math.imul(Bt,Z),m=m+Math.imul(vt,W)|0,c=c+Math.imul(vt,St)|0,c=c+Math.imul(dt,W)|0,w=w+Math.imul(dt,St)|0,m=m+Math.imul(gt,At)|0,c=c+Math.imul(gt,It)|0,c=c+Math.imul(Et,At)|0,w=w+Math.imul(Et,It)|0,m=m+Math.imul(ht,kt)|0,c=c+Math.imul(ht,Rt)|0,c=c+Math.imul(xt,kt)|0,w=w+Math.imul(xt,Rt)|0,m=m+Math.imul(bt,Tt)|0,c=c+Math.imul(bt,Ut)|0,c=c+Math.imul(wt,Tt)|0,w=w+Math.imul(wt,Ut)|0,m=m+Math.imul(nt,Lt)|0,c=c+Math.imul(nt,Ct)|0,c=c+Math.imul(ut,Lt)|0,w=w+Math.imul(ut,Ct)|0,m=m+Math.imul($,Ft)|0,c=c+Math.imul($,Pt)|0,c=c+Math.imul(G,Ft)|0,w=w+Math.imul(G,Pt)|0;var yr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(yr>>>26)|0,yr&=67108863,m=Math.imul(Mt,j),c=Math.imul(Mt,Z),c=c+Math.imul(f,j)|0,w=Math.imul(f,Z),m=m+Math.imul(mt,W)|0,c=c+Math.imul(mt,St)|0,c=c+Math.imul(Bt,W)|0,w=w+Math.imul(Bt,St)|0,m=m+Math.imul(vt,At)|0,c=c+Math.imul(vt,It)|0,c=c+Math.imul(dt,At)|0,w=w+Math.imul(dt,It)|0,m=m+Math.imul(gt,kt)|0,c=c+Math.imul(gt,Rt)|0,c=c+Math.imul(Et,kt)|0,w=w+Math.imul(Et,Rt)|0,m=m+Math.imul(ht,Tt)|0,c=c+Math.imul(ht,Ut)|0,c=c+Math.imul(xt,Tt)|0,w=w+Math.imul(xt,Ut)|0,m=m+Math.imul(bt,Lt)|0,c=c+Math.imul(bt,Ct)|0,c=c+Math.imul(wt,Lt)|0,w=w+Math.imul(wt,Ct)|0,m=m+Math.imul(nt,Ft)|0,c=c+Math.imul(nt,Pt)|0,c=c+Math.imul(ut,Ft)|0,w=w+Math.imul(ut,Pt)|0,m=m+Math.imul($,Ot)|0,c=c+Math.imul($,Nt)|0,c=c+Math.imul(G,Ot)|0,w=w+Math.imul(G,Nt)|0;var wr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(wr>>>26)|0,wr&=67108863,m=Math.imul(a,j),c=Math.imul(a,Z),c=c+Math.imul(g,j)|0,w=Math.imul(g,Z),m=m+Math.imul(Mt,W)|0,c=c+Math.imul(Mt,St)|0,c=c+Math.imul(f,W)|0,w=w+Math.imul(f,St)|0,m=m+Math.imul(mt,At)|0,c=c+Math.imul(mt,It)|0,c=c+Math.imul(Bt,At)|0,w=w+Math.imul(Bt,It)|0,m=m+Math.imul(vt,kt)|0,c=c+Math.imul(vt,Rt)|0,c=c+Math.imul(dt,kt)|0,w=w+Math.imul(dt,Rt)|0,m=m+Math.imul(gt,Tt)|0,c=c+Math.imul(gt,Ut)|0,c=c+Math.imul(Et,Tt)|0,w=w+Math.imul(Et,Ut)|0,m=m+Math.imul(ht,Lt)|0,c=c+Math.imul(ht,Ct)|0,c=c+Math.imul(xt,Lt)|0,w=w+Math.imul(xt,Ct)|0,m=m+Math.imul(bt,Ft)|0,c=c+Math.imul(bt,Pt)|0,c=c+Math.imul(wt,Ft)|0,w=w+Math.imul(wt,Pt)|0,m=m+Math.imul(nt,Ot)|0,c=c+Math.imul(nt,Nt)|0,c=c+Math.imul(ut,Ot)|0,w=w+Math.imul(ut,Nt)|0,m=m+Math.imul($,Dt)|0,c=c+Math.imul($,qt)|0,c=c+Math.imul(G,Dt)|0,w=w+Math.imul(G,qt)|0;var vr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(vr>>>26)|0,vr&=67108863,m=Math.imul(M,j),c=Math.imul(M,Z),c=c+Math.imul(S,j)|0,w=Math.imul(S,Z),m=m+Math.imul(a,W)|0,c=c+Math.imul(a,St)|0,c=c+Math.imul(g,W)|0,w=w+Math.imul(g,St)|0,m=m+Math.imul(Mt,At)|0,c=c+Math.imul(Mt,It)|0,c=c+Math.imul(f,At)|0,w=w+Math.imul(f,It)|0,m=m+Math.imul(mt,kt)|0,c=c+Math.imul(mt,Rt)|0,c=c+Math.imul(Bt,kt)|0,w=w+Math.imul(Bt,Rt)|0,m=m+Math.imul(vt,Tt)|0,c=c+Math.imul(vt,Ut)|0,c=c+Math.imul(dt,Tt)|0,w=w+Math.imul(dt,Ut)|0,m=m+Math.imul(gt,Lt)|0,c=c+Math.imul(gt,Ct)|0,c=c+Math.imul(Et,Lt)|0,w=w+Math.imul(Et,Ct)|0,m=m+Math.imul(ht,Ft)|0,c=c+Math.imul(ht,Pt)|0,c=c+Math.imul(xt,Ft)|0,w=w+Math.imul(xt,Pt)|0,m=m+Math.imul(bt,Ot)|0,c=c+Math.imul(bt,Nt)|0,c=c+Math.imul(wt,Ot)|0,w=w+Math.imul(wt,Nt)|0,m=m+Math.imul(nt,Dt)|0,c=c+Math.imul(nt,qt)|0,c=c+Math.imul(ut,Dt)|0,w=w+Math.imul(ut,qt)|0,m=m+Math.imul($,Ht)|0,c=c+Math.imul($,$t)|0,c=c+Math.imul(G,Ht)|0,w=w+Math.imul(G,$t)|0;var br=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(br>>>26)|0,br&=67108863,m=Math.imul(M,W),c=Math.imul(M,St),c=c+Math.imul(S,W)|0,w=Math.imul(S,St),m=m+Math.imul(a,At)|0,c=c+Math.imul(a,It)|0,c=c+Math.imul(g,At)|0,w=w+Math.imul(g,It)|0,m=m+Math.imul(Mt,kt)|0,c=c+Math.imul(Mt,Rt)|0,c=c+Math.imul(f,kt)|0,w=w+Math.imul(f,Rt)|0,m=m+Math.imul(mt,Tt)|0,c=c+Math.imul(mt,Ut)|0,c=c+Math.imul(Bt,Tt)|0,w=w+Math.imul(Bt,Ut)|0,m=m+Math.imul(vt,Lt)|0,c=c+Math.imul(vt,Ct)|0,c=c+Math.imul(dt,Lt)|0,w=w+Math.imul(dt,Ct)|0,m=m+Math.imul(gt,Ft)|0,c=c+Math.imul(gt,Pt)|0,c=c+Math.imul(Et,Ft)|0,w=w+Math.imul(Et,Pt)|0,m=m+Math.imul(ht,Ot)|0,c=c+Math.imul(ht,Nt)|0,c=c+Math.imul(xt,Ot)|0,w=w+Math.imul(xt,Nt)|0,m=m+Math.imul(bt,Dt)|0,c=c+Math.imul(bt,qt)|0,c=c+Math.imul(wt,Dt)|0,w=w+Math.imul(wt,qt)|0,m=m+Math.imul(nt,Ht)|0,c=c+Math.imul(nt,$t)|0,c=c+Math.imul(ut,Ht)|0,w=w+Math.imul(ut,$t)|0;var xr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(xr>>>26)|0,xr&=67108863,m=Math.imul(M,At),c=Math.imul(M,It),c=c+Math.imul(S,At)|0,w=Math.imul(S,It),m=m+Math.imul(a,kt)|0,c=c+Math.imul(a,Rt)|0,c=c+Math.imul(g,kt)|0,w=w+Math.imul(g,Rt)|0,m=m+Math.imul(Mt,Tt)|0,c=c+Math.imul(Mt,Ut)|0,c=c+Math.imul(f,Tt)|0,w=w+Math.imul(f,Ut)|0,m=m+Math.imul(mt,Lt)|0,c=c+Math.imul(mt,Ct)|0,c=c+Math.imul(Bt,Lt)|0,w=w+Math.imul(Bt,Ct)|0,m=m+Math.imul(vt,Ft)|0,c=c+Math.imul(vt,Pt)|0,c=c+Math.imul(dt,Ft)|0,w=w+Math.imul(dt,Pt)|0,m=m+Math.imul(gt,Ot)|0,c=c+Math.imul(gt,Nt)|0,c=c+Math.imul(Et,Ot)|0,w=w+Math.imul(Et,Nt)|0,m=m+Math.imul(ht,Dt)|0,c=c+Math.imul(ht,qt)|0,c=c+Math.imul(xt,Dt)|0,w=w+Math.imul(xt,qt)|0,m=m+Math.imul(bt,Ht)|0,c=c+Math.imul(bt,$t)|0,c=c+Math.imul(wt,Ht)|0,w=w+Math.imul(wt,$t)|0;var Er=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Er>>>26)|0,Er&=67108863,m=Math.imul(M,kt),c=Math.imul(M,Rt),c=c+Math.imul(S,kt)|0,w=Math.imul(S,Rt),m=m+Math.imul(a,Tt)|0,c=c+Math.imul(a,Ut)|0,c=c+Math.imul(g,Tt)|0,w=w+Math.imul(g,Ut)|0,m=m+Math.imul(Mt,Lt)|0,c=c+Math.imul(Mt,Ct)|0,c=c+Math.imul(f,Lt)|0,w=w+Math.imul(f,Ct)|0,m=m+Math.imul(mt,Ft)|0,c=c+Math.imul(mt,Pt)|0,c=c+Math.imul(Bt,Ft)|0,w=w+Math.imul(Bt,Pt)|0,m=m+Math.imul(vt,Ot)|0,c=c+Math.imul(vt,Nt)|0,c=c+Math.imul(dt,Ot)|0,w=w+Math.imul(dt,Nt)|0,m=m+Math.imul(gt,Dt)|0,c=c+Math.imul(gt,qt)|0,c=c+Math.imul(Et,Dt)|0,w=w+Math.imul(Et,qt)|0,m=m+Math.imul(ht,Ht)|0,c=c+Math.imul(ht,$t)|0,c=c+Math.imul(xt,Ht)|0,w=w+Math.imul(xt,$t)|0;var Br=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Br>>>26)|0,Br&=67108863,m=Math.imul(M,Tt),c=Math.imul(M,Ut),c=c+Math.imul(S,Tt)|0,w=Math.imul(S,Ut),m=m+Math.imul(a,Lt)|0,c=c+Math.imul(a,Ct)|0,c=c+Math.imul(g,Lt)|0,w=w+Math.imul(g,Ct)|0,m=m+Math.imul(Mt,Ft)|0,c=c+Math.imul(Mt,Pt)|0,c=c+Math.imul(f,Ft)|0,w=w+Math.imul(f,Pt)|0,m=m+Math.imul(mt,Ot)|0,c=c+Math.imul(mt,Nt)|0,c=c+Math.imul(Bt,Ot)|0,w=w+Math.imul(Bt,Nt)|0,m=m+Math.imul(vt,Dt)|0,c=c+Math.imul(vt,qt)|0,c=c+Math.imul(dt,Dt)|0,w=w+Math.imul(dt,qt)|0,m=m+Math.imul(gt,Ht)|0,c=c+Math.imul(gt,$t)|0,c=c+Math.imul(Et,Ht)|0,w=w+Math.imul(Et,$t)|0;var Mr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,m=Math.imul(M,Lt),c=Math.imul(M,Ct),c=c+Math.imul(S,Lt)|0,w=Math.imul(S,Ct),m=m+Math.imul(a,Ft)|0,c=c+Math.imul(a,Pt)|0,c=c+Math.imul(g,Ft)|0,w=w+Math.imul(g,Pt)|0,m=m+Math.imul(Mt,Ot)|0,c=c+Math.imul(Mt,Nt)|0,c=c+Math.imul(f,Ot)|0,w=w+Math.imul(f,Nt)|0,m=m+Math.imul(mt,Dt)|0,c=c+Math.imul(mt,qt)|0,c=c+Math.imul(Bt,Dt)|0,w=w+Math.imul(Bt,qt)|0,m=m+Math.imul(vt,Ht)|0,c=c+Math.imul(vt,$t)|0,c=c+Math.imul(dt,Ht)|0,w=w+Math.imul(dt,$t)|0;var _r=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(_r>>>26)|0,_r&=67108863,m=Math.imul(M,Ft),c=Math.imul(M,Pt),c=c+Math.imul(S,Ft)|0,w=Math.imul(S,Pt),m=m+Math.imul(a,Ot)|0,c=c+Math.imul(a,Nt)|0,c=c+Math.imul(g,Ot)|0,w=w+Math.imul(g,Nt)|0,m=m+Math.imul(Mt,Dt)|0,c=c+Math.imul(Mt,qt)|0,c=c+Math.imul(f,Dt)|0,w=w+Math.imul(f,qt)|0,m=m+Math.imul(mt,Ht)|0,c=c+Math.imul(mt,$t)|0,c=c+Math.imul(Bt,Ht)|0,w=w+Math.imul(Bt,$t)|0;var Sr=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,m=Math.imul(M,Ot),c=Math.imul(M,Nt),c=c+Math.imul(S,Ot)|0,w=Math.imul(S,Nt),m=m+Math.imul(a,Dt)|0,c=c+Math.imul(a,qt)|0,c=c+Math.imul(g,Dt)|0,w=w+Math.imul(g,qt)|0,m=m+Math.imul(Mt,Ht)|0,c=c+Math.imul(Mt,$t)|0,c=c+Math.imul(f,Ht)|0,w=w+Math.imul(f,$t)|0;var Ar=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,m=Math.imul(M,Dt),c=Math.imul(M,qt),c=c+Math.imul(S,Dt)|0,w=Math.imul(S,qt),m=m+Math.imul(a,Ht)|0,c=c+Math.imul(a,$t)|0,c=c+Math.imul(g,Ht)|0,w=w+Math.imul(g,$t)|0;var Ir=(_+m|0)+((c&8191)<<13)|0;_=(w+(c>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,m=Math.imul(M,Ht),c=Math.imul(M,$t),c=c+Math.imul(S,Ht)|0,w=Math.imul(S,$t);var kr=(_+m|0)+((c&8191)<<13)|0;return _=(w+(c>>>13)|0)+(kr>>>26)|0,kr&=67108863,B[0]=fr,B[1]=lr,B[2]=dr,B[3]=pr,B[4]=gr,B[5]=mr,B[6]=yr,B[7]=wr,B[8]=vr,B[9]=br,B[10]=xr,B[11]=Er,B[12]=Br,B[13]=Mr,B[14]=_r,B[15]=Sr,B[16]=Ar,B[17]=Ir,B[18]=kr,_!==0&&(B[19]=_,p.length++),p};Math.imul||(q=D);function P(b,n,h){h.negative=n.negative^b.negative,h.length=b.length+n.length;for(var p=0,y=0,v=0;v<h.length-1;v++){var B=y;y=0;for(var _=p&67108863,m=Math.min(v,n.length-1),c=Math.max(0,v-b.length+1);c<=m;c++){var w=v-c,K=b.words[w]|0,$=n.words[c]|0,G=K*$,Kt=G&67108863;B=B+(G/67108864|0)|0,Kt=Kt+_|0,_=Kt&67108863,B=B+(Kt>>>26)|0,y+=B>>>26,B&=67108863}h.words[v]=_,p=B,B=y}return p!==0?h.words[v]=p:h.length--,h._strip()}function tt(b,n,h){return P(b,n,h)}i.prototype.mulTo=function(n,h){var p,y=this.length+n.length;return this.length===10&&n.length===10?p=q(this,n,h):y<63?p=D(this,n,h):y<1024?p=P(this,n,h):p=tt(this,n,h),p},i.prototype.mul=function(n){var h=new i(null);return h.words=new Array(this.length+n.length),this.mulTo(n,h)},i.prototype.mulf=function(n){var h=new i(null);return h.words=new Array(this.length+n.length),tt(this,n,h)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var h=n<0;h&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var p=0,y=0;y<this.length;y++){var v=(this.words[y]|0)*n,B=(v&67108863)+(p&67108863);p>>=26,p+=v/67108864|0,p+=B>>>26,this.words[y]=B&67108863}return p!==0&&(this.words[y]=p,this.length++),h?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var h=C(n);if(h.length===0)return new i(1);for(var p=this,y=0;y<h.length&&h[y]===0;y++,p=p.sqr());if(++y<h.length)for(var v=p.sqr();y<h.length;y++,v=v.sqr())h[y]!==0&&(p=p.mul(v));return p},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var h=n%26,p=(n-h)/26,y=67108863>>>26-h<<26-h,v;if(h!==0){var B=0;for(v=0;v<this.length;v++){var _=this.words[v]&y,m=(this.words[v]|0)-_<<h;this.words[v]=m|B,B=_>>>26-h}B&&(this.words[v]=B,this.length++)}if(p!==0){for(v=this.length-1;v>=0;v--)this.words[v+p]=this.words[v];for(v=0;v<p;v++)this.words[v]=0;this.length+=p}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,h,p){r(typeof n=="number"&&n>=0);var y;h?y=(h-h%26)/26:y=0;var v=n%26,B=Math.min((n-v)/26,this.length),_=67108863^67108863>>>v<<v,m=p;if(y-=B,y=Math.max(0,y),m){for(var c=0;c<B;c++)m.words[c]=this.words[c];m.length=B}if(B!==0)if(this.length>B)for(this.length-=B,c=0;c<this.length;c++)this.words[c]=this.words[c+B];else this.words[0]=0,this.length=1;var w=0;for(c=this.length-1;c>=0&&(w!==0||c>=y);c--){var K=this.words[c]|0;this.words[c]=w<<26-v|K>>>v,w=K&_}return m&&w!==0&&(m.words[m.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,h,p){return r(this.negative===0),this.iushrn(n,h,p)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var h=n%26,p=(n-h)/26,y=1<<h;if(this.length<=p)return!1;var v=this.words[p];return!!(v&y)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var h=n%26,p=(n-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(h!==0&&p++,this.length=Math.min(p,this.length),h!==0){var y=67108863^67108863>>>h<<h;this.words[this.length-1]&=y}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,h,p){var y=n.length+p,v;this._expand(y);var B,_=0;for(v=0;v<n.length;v++){B=(this.words[v+p]|0)+_;var m=(n.words[v]|0)*h;B-=m&67108863,_=(B>>26)-(m/67108864|0),this.words[v+p]=B&67108863}for(;v<this.length-p;v++)B=(this.words[v+p]|0)+_,_=B>>26,this.words[v+p]=B&67108863;if(_===0)return this._strip();for(r(_===-1),_=0,v=0;v<this.length;v++)B=-(this.words[v]|0)+_,_=B>>26,this.words[v]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,h){var p=this.length-n.length,y=this.clone(),v=n,B=v.words[v.length-1]|0,_=this._countBits(B);p=26-_,p!==0&&(v=v.ushln(p),y.iushln(p),B=v.words[v.length-1]|0);var m=y.length-v.length,c;if(h!=="mod"){c=new i(null),c.length=m+1,c.words=new Array(c.length);for(var w=0;w<c.length;w++)c.words[w]=0}var K=y.clone()._ishlnsubmul(v,1,m);K.negative===0&&(y=K,c&&(c.words[m]=1));for(var $=m-1;$>=0;$--){var G=(y.words[v.length+$]|0)*67108864+(y.words[v.length+$-1]|0);for(G=Math.min(G/B|0,67108863),y._ishlnsubmul(v,G,$);y.negative!==0;)G--,y.negative=0,y._ishlnsubmul(v,1,$),y.isZero()||(y.negative^=1);c&&(c.words[$]=G)}return c&&c._strip(),y._strip(),h!=="div"&&p!==0&&y.iushrn(p),{div:c||null,mod:y}},i.prototype.divmod=function(n,h,p){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,v,B;return this.negative!==0&&n.negative===0?(B=this.neg().divmod(n,h),h!=="mod"&&(y=B.div.neg()),h!=="div"&&(v=B.mod.neg(),p&&v.negative!==0&&v.iadd(n)),{div:y,mod:v}):this.negative===0&&n.negative!==0?(B=this.divmod(n.neg(),h),h!=="mod"&&(y=B.div.neg()),{div:y,mod:B.mod}):this.negative&n.negative?(B=this.neg().divmod(n.neg(),h),h!=="div"&&(v=B.mod.neg(),p&&v.negative!==0&&v.isub(n)),{div:B.div,mod:v}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?h==="div"?{div:this.divn(n.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,h)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var h=this.divmod(n);if(h.mod.isZero())return h.div;var p=h.div.negative!==0?h.mod.isub(n):h.mod,y=n.ushrn(1),v=n.andln(1),B=p.cmp(y);return B<0||v===1&&B===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(n){var h=n<0;h&&(n=-n),r(n<=67108863);for(var p=(1<<26)%n,y=0,v=this.length-1;v>=0;v--)y=(p*y+(this.words[v]|0))%n;return h?-y:y},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var h=n<0;h&&(n=-n),r(n<=67108863);for(var p=0,y=this.length-1;y>=0;y--){var v=(this.words[y]|0)+p*67108864;this.words[y]=v/n|0,p=v%n}return this._strip(),h?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var h=this,p=n.clone();h.negative!==0?h=h.umod(n):h=h.clone();for(var y=new i(1),v=new i(0),B=new i(0),_=new i(1),m=0;h.isEven()&&p.isEven();)h.iushrn(1),p.iushrn(1),++m;for(var c=p.clone(),w=h.clone();!h.isZero();){for(var K=0,$=1;!(h.words[0]&$)&&K<26;++K,$<<=1);if(K>0)for(h.iushrn(K);K-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(w)),y.iushrn(1),v.iushrn(1);for(var G=0,Kt=1;!(p.words[0]&Kt)&&G<26;++G,Kt<<=1);if(G>0)for(p.iushrn(G);G-- >0;)(B.isOdd()||_.isOdd())&&(B.iadd(c),_.isub(w)),B.iushrn(1),_.iushrn(1);h.cmp(p)>=0?(h.isub(p),y.isub(B),v.isub(_)):(p.isub(h),B.isub(y),_.isub(v))}return{a:B,b:_,gcd:p.iushln(m)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var h=this,p=n.clone();h.negative!==0?h=h.umod(n):h=h.clone();for(var y=new i(1),v=new i(0),B=p.clone();h.cmpn(1)>0&&p.cmpn(1)>0;){for(var _=0,m=1;!(h.words[0]&m)&&_<26;++_,m<<=1);if(_>0)for(h.iushrn(_);_-- >0;)y.isOdd()&&y.iadd(B),y.iushrn(1);for(var c=0,w=1;!(p.words[0]&w)&&c<26;++c,w<<=1);if(c>0)for(p.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(B),v.iushrn(1);h.cmp(p)>=0?(h.isub(p),y.isub(v)):(p.isub(h),v.isub(y))}var K;return h.cmpn(1)===0?K=y:K=v,K.cmpn(0)<0&&K.iadd(n),K},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var h=this.clone(),p=n.clone();h.negative=0,p.negative=0;for(var y=0;h.isEven()&&p.isEven();y++)h.iushrn(1),p.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;p.isEven();)p.iushrn(1);var v=h.cmp(p);if(v<0){var B=h;h=p,p=B}else if(v===0||p.cmpn(1)===0)break;h.isub(p)}while(!0);return p.iushln(y)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var h=n%26,p=(n-h)/26,y=1<<h;if(this.length<=p)return this._expand(p+1),this.words[p]|=y,this;for(var v=y,B=p;v!==0&&B<this.length;B++){var _=this.words[B]|0;_+=v,v=_>>>26,_&=67108863,this.words[B]=_}return v!==0&&(this.words[B]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var h=n<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var p;if(this.length>1)p=1;else{h&&(n=-n),r(n<=67108863,"Number is too big");var y=this.words[0]|0;p=y===n?0:y<n?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var h=this.ucmp(n);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var h=0,p=this.length-1;p>=0;p--){var y=this.words[p]|0,v=n.words[p]|0;if(y!==v){y<v?h=-1:y>v&&(h=1);break}}return h},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new ct(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var N={k256:null,p224:null,p192:null,p25519:null};function V(b,n){this.name=b,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},V.prototype.ireduce=function(n){var h=n,p;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),p=h.bitLength();while(p>this.n);var y=p<this.n?-1:h.ucmp(this.p);return y===0?(h.words[0]=0,h.length=1):y>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},V.prototype.split=function(n,h){n.iushrn(this.n,0,h)},V.prototype.imulK=function(n){return n.imul(this.k)};function J(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}u(J,V),J.prototype.split=function(n,h){for(var p=4194303,y=Math.min(n.length,9),v=0;v<y;v++)h.words[v]=n.words[v];if(h.length=y,n.length<=9){n.words[0]=0,n.length=1;return}var B=n.words[9];for(h.words[h.length++]=B&p,v=10;v<n.length;v++){var _=n.words[v]|0;n.words[v-10]=(_&p)<<4|B>>>22,B=_}B>>>=22,n.words[v-10]=B,B===0&&n.length>10?n.length-=10:n.length-=9},J.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var h=0,p=0;p<n.length;p++){var y=n.words[p]|0;h+=y*977,n.words[p]=h&67108863,h=y*64+(h/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function st(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}u(st,V);function jt(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}u(jt,V);function se(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}u(se,V),se.prototype.imulK=function(n){for(var h=0,p=0;p<n.length;p++){var y=(n.words[p]|0)*19+h,v=y&67108863;y>>>=26,n.words[p]=v,h=y}return h!==0&&(n.words[n.length++]=h),n},i._prime=function(n){if(N[n])return N[n];var h;if(n==="k256")h=new J;else if(n==="p224")h=new st;else if(n==="p192")h=new jt;else if(n==="p25519")h=new se;else throw new Error("Unknown prime "+n);return N[n]=h,h};function ct(b){if(typeof b=="string"){var n=i._prime(b);this.m=n.p,this.prime=n}else r(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}ct.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},ct.prototype._verify2=function(n,h){r((n.negative|h.negative)===0,"red works only with positives"),r(n.red&&n.red===h.red,"red works only with red numbers")},ct.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(k(n,n.umod(this.m)._forceRed(this)),n)},ct.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},ct.prototype.add=function(n,h){this._verify2(n,h);var p=n.add(h);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},ct.prototype.iadd=function(n,h){this._verify2(n,h);var p=n.iadd(h);return p.cmp(this.m)>=0&&p.isub(this.m),p},ct.prototype.sub=function(n,h){this._verify2(n,h);var p=n.sub(h);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},ct.prototype.isub=function(n,h){this._verify2(n,h);var p=n.isub(h);return p.cmpn(0)<0&&p.iadd(this.m),p},ct.prototype.shl=function(n,h){return this._verify1(n),this.imod(n.ushln(h))},ct.prototype.imul=function(n,h){return this._verify2(n,h),this.imod(n.imul(h))},ct.prototype.mul=function(n,h){return this._verify2(n,h),this.imod(n.mul(h))},ct.prototype.isqr=function(n){return this.imul(n,n.clone())},ct.prototype.sqr=function(n){return this.mul(n,n)},ct.prototype.sqrt=function(n){if(n.isZero())return n.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(n,p)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var B=new i(1).toRed(this),_=B.redNeg(),m=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,m).cmp(_)!==0;)c.redIAdd(_);for(var w=this.pow(c,y),K=this.pow(n,y.addn(1).iushrn(1)),$=this.pow(n,y),G=v;$.cmp(B)!==0;){for(var Kt=$,nt=0;Kt.cmp(B)!==0;nt++)Kt=Kt.redSqr();r(nt<G);var ut=this.pow(w,new i(1).iushln(G-nt-1));K=K.redMul(ut),w=ut.redSqr(),$=$.redMul(w),G=nt}return K},ct.prototype.invm=function(n){var h=n._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},ct.prototype.pow=function(n,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return n.clone();var p=4,y=new Array(1<<p);y[0]=new i(1).toRed(this),y[1]=n;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],n);var B=y[0],_=0,m=0,c=h.bitLength()%26;for(c===0&&(c=26),v=h.length-1;v>=0;v--){for(var w=h.words[v],K=c-1;K>=0;K--){var $=w>>K&1;if(B!==y[0]&&(B=this.sqr(B)),$===0&&_===0){m=0;continue}_<<=1,_|=$,m++,!(m!==p&&(v!==0||K!==0))&&(B=this.mul(B,y[_]),m=0,_=0)}c=26}return B},ct.prototype.convertTo=function(n){var h=n.umod(this.m);return h===n?h.clone():h},ct.prototype.convertFrom=function(n){var h=n.clone();return h.red=null,h},i.mont=function(n){return new ee(n)};function ee(b){ct.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}u(ee,ct),ee.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},ee.prototype.convertFrom=function(n){var h=this.imod(n.mul(this.rinv));return h.red=null,h},ee.prototype.imul=function(n,h){if(n.isZero()||h.isZero())return n.words[0]=0,n.length=1,n;var p=n.imul(h),y=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=p.isub(y).iushrn(this.shift),B=v;return v.cmp(this.m)>=0?B=v.isub(this.m):v.cmpn(0)<0&&(B=v.iadd(this.m)),B._forceRed(this)},ee.prototype.mul=function(n,h){if(n.isZero()||h.isZero())return new i(0)._forceRed(this);var p=n.mul(h),y=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=p.isub(y).iushrn(this.shift),B=v;return v.cmp(this.m)>=0?B=v.isub(this.m):v.cmpn(0)<0&&(B=v.iadd(this.m)),B._forceRed(this)},ee.prototype.invm=function(n){var h=this.imod(n._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(o,this)})(Zc);function Ve(o,t,e){return t<=o&&o<=e}function li(o){if(o===void 0)return{};if(o===Object(o))return o;throw TypeError("Could not convert argument to dictionary")}function jc(o){for(var t=String(o),e=t.length,r=0,u=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)u.push(i);else if(56320<=i&&i<=57343)u.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)u.push(65533);else{var d=o.charCodeAt(r+1);if(56320<=d&&d<=57343){var l=i&1023,x=d&1023;u.push(65536+(l<<10)+x),r+=1}else u.push(65533)}r+=1}return u}function Vc(o){for(var t="",e=0;e<o.length;++e){var r=o[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Jn=-1;function os(o){this.tokens=[].slice.call(o)}os.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Jn},prepend:function(o){if(Array.isArray(o))for(var t=o;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(o)},push:function(o){if(Array.isArray(o))for(var t=o;t.length;)this.tokens.push(t.shift());else this.tokens.push(o)}};var Jr=-1;function _i(o,t){if(o)throw TypeError("Decoder error");return t||65533}var Qn="utf-8";function ti(o,t){if(!(this instanceof ti))return new ti(o,t);if(o=o!==void 0?String(o).toLowerCase():Qn,o!==Qn)throw new Error("Encoding not supported. Only utf-8 is supported");t=li(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ti.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=li(e),this._streaming||(this._decoder=new Xc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var u=new os(r),i=[],d;!u.endOfStream()&&(d=this._decoder.handler(u,u.read()),d!==Jr);)d!==null&&(Array.isArray(d)?i.push.apply(i,d):i.push(d));if(!this._streaming){do{if(d=this._decoder.handler(u,u.read()),d===Jr)break;d!==null&&(Array.isArray(d)?i.push.apply(i,d):i.push(d))}while(!u.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Vc(i)}};function ei(o,t){if(!(this instanceof ei))return new ei(o,t);if(o=o!==void 0?String(o).toLowerCase():Qn,o!==Qn)throw new Error("Encoding not supported. Only utf-8 is supported");t=li(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}ei.prototype={encode:function(t,e){t=t?String(t):"",e=li(e),this._streaming||(this._encoder=new Yc(this._options)),this._streaming=Boolean(e.stream);for(var r=[],u=new os(jc(t)),i;!u.endOfStream()&&(i=this._encoder.handler(u,u.read()),i!==Jr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(u,u.read()),i!==Jr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Xc(o){var t=o.fatal,e=0,r=0,u=0,i=128,d=191;this.handler=function(l,x){if(x===Jn&&u!==0)return u=0,_i(t);if(x===Jn)return Jr;if(u===0){if(Ve(x,0,127))return x;if(Ve(x,194,223))u=1,e=x-192;else if(Ve(x,224,239))x===224&&(i=160),x===237&&(d=159),u=2,e=x-224;else if(Ve(x,240,244))x===240&&(i=144),x===244&&(d=143),u=3,e=x-240;else return _i(t);return e=e<<6*u,null}if(!Ve(x,i,d))return e=u=r=0,i=128,d=191,l.prepend(x),_i(t);if(i=128,d=191,r+=1,e+=x-128<<6*(u-r),r!==u)return null;var A=e;return e=u=r=0,A}}function Yc(o){o.fatal,this.handler=function(t,e){if(e===Jn)return Jr;if(Ve(e,0,127))return e;var r,u;Ve(e,128,2047)?(r=1,u=192):Ve(e,2048,65535)?(r=2,u=224):Ve(e,65536,1114111)&&(r=3,u=240);for(var i=[(e>>6*r)+u];r>0;){var d=e>>6*(r-1);i.push(128|d&63),r-=1}return i}}const Jc=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ti,TextEncoder:ei},Symbol.toStringTag,{value:"Module"})),Qc=ur(Jc);var tu=globalThis&&globalThis.__createBinding||(Object.create?function(o,t,e,r){r===void 0&&(r=e),Object.defineProperty(o,r,{enumerable:!0,get:function(){return t[e]}})}:function(o,t,e,r){r===void 0&&(r=e),o[r]=t[e]}),eu=globalThis&&globalThis.__setModuleDefault||(Object.create?function(o,t){Object.defineProperty(o,"default",{enumerable:!0,value:t})}:function(o,t){o.default=t}),ze=globalThis&&globalThis.__decorate||function(o,t,e,r){var u=arguments.length,i=u<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,t,e,r);else for(var l=o.length-1;l>=0;l--)(d=o[l])&&(i=(u<3?d(i):u>3?d(t,e,i):d(t,e))||i);return u>3&&i&&Object.defineProperty(t,e,i),i},ru=globalThis&&globalThis.__importStar||function(o){if(o&&o.__esModule)return o;var t={};if(o!=null)for(var e in o)e!=="default"&&Object.hasOwnProperty.call(o,e)&&tu(t,o,e);return eu(t,o),t},To=globalThis&&globalThis.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(be,"__esModule",{value:!0});var Uo=be.deserializeUnchecked=No=be.deserialize=Oo=be.serialize=be.BinaryReader=be.BinaryWriter=be.BorshError=be.baseDecode=be.baseEncode=void 0;const ir=To(Di),Lo=To(re),nu=ru(Qc),iu=typeof TextDecoder!="function"?nu.TextDecoder:TextDecoder,su=new iu("utf-8",{fatal:!0});function ou(o){return typeof o=="string"&&(o=Buffer.from(o,"utf8")),Lo.default.encode(Buffer.from(o))}be.baseEncode=ou;function au(o){return Buffer.from(Lo.default.decode(o))}be.baseDecode=au;const Si=1024;class Ee extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}be.BorshError=Ee;class Co{constructor(){this.buf=Buffer.alloc(Si),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Si)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new ir.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new ir.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new ir.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new ir.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Si)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}be.BinaryWriter=Co;function Ke(o,t,e){const r=e.value;e.value=function(...u){try{return r.apply(this,u)}catch(i){if(i instanceof RangeError){const d=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(d)>=0)throw new Ee("Reached the end of buffer when deserializing")}throw i}}}class ke{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new ir.default(t,"le")}readU128(){const t=this.readBuffer(16);return new ir.default(t,"le")}readU256(){const t=this.readBuffer(32);return new ir.default(t,"le")}readU512(){const t=this.readBuffer(64);return new ir.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Ee(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return su.decode(e)}catch(r){throw new Ee(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let u=0;u<e;++u)r.push(t());return r}}ze([Ke],ke.prototype,"readU8",null);ze([Ke],ke.prototype,"readU16",null);ze([Ke],ke.prototype,"readU32",null);ze([Ke],ke.prototype,"readU64",null);ze([Ke],ke.prototype,"readU128",null);ze([Ke],ke.prototype,"readU256",null);ze([Ke],ke.prototype,"readU512",null);ze([Ke],ke.prototype,"readString",null);ze([Ke],ke.prototype,"readFixedArray",null);ze([Ke],ke.prototype,"readArray",null);be.BinaryReader=ke;function Fo(o){return o.charAt(0).toUpperCase()+o.slice(1)}function Rr(o,t,e,r,u){try{if(typeof r=="string")u[`write${Fo(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Ee(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);u.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Ee(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)Rr(o,null,e[i],r[0],u)}else u.writeArray(e,i=>{Rr(o,t,i,r[0],u)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?u.writeU8(0):(u.writeU8(1),Rr(o,t,e,r.type,u));break}case"map":{u.writeU32(e.size),e.forEach((i,d)=>{Rr(o,t,d,r.key,u),Rr(o,t,i,r.value,u)});break}default:throw new Ee(`FieldType ${r} unrecognized`)}else Po(o,e,u)}catch(i){throw i instanceof Ee&&i.addToFieldPath(t),i}}function Po(o,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=o.get(t.constructor);if(!r)throw new Ee(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([u,i])=>{Rr(o,u,t[u],i,e)});else if(r.kind==="enum"){const u=t[r.field];for(let i=0;i<r.values.length;++i){const[d,l]=r.values[i];if(d===u){e.writeU8(i),Rr(o,d,t[d],l,e);break}}}else throw new Ee(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function cu(o,t,e=Co){const r=new e;return Po(o,t,r),r.toArray()}var Oo=be.serialize=cu;function Tr(o,t,e,r){try{if(typeof e=="string")return r[`read${Fo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const u=[];for(let i=0;i<e[1];i++)u.push(Tr(o,null,e[0],r));return u}else return r.readArray(()=>Tr(o,t,e[0],r))}if(e.kind==="option")return r.readU8()?Tr(o,t,e.type,r):void 0;if(e.kind==="map"){let u=new Map;const i=r.readU32();for(let d=0;d<i;d++){const l=Tr(o,t,e.key,r),x=Tr(o,t,e.value,r);u.set(l,x)}return u}return as(o,e,r)}catch(u){throw u instanceof Ee&&u.addToFieldPath(t),u}}function as(o,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=o.get(t);if(!r)throw new Ee(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const u={};for(const[i,d]of o.get(t).fields)u[i]=Tr(o,i,d,e);return new t(u)}if(r.kind==="enum"){const u=e.readU8();if(u>=r.values.length)throw new Ee(`Enum index: ${u} is out of range`);const[i,d]=r.values[u],l=Tr(o,i,d,e);return new t({[i]:l})}throw new Ee(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function uu(o,t,e,r=ke){const u=new r(e),i=as(o,t,u);if(u.offset<e.length)throw new Ee(`Unexpected ${e.length-u.offset} bytes after deserialized data`);return i}var No=be.deserialize=uu;function hu(o,t,e,r=ke){const u=new r(e);return as(o,t,u)}Uo=be.deserializeUnchecked=hu;var O={},Do={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const t=yo,e=wo,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=l,o.SlowBuffer=q,o.INSPECT_MAX_BYTES=50;const u=2147483647;o.kMaxLength=u,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function d(f){if(f>u)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,l.prototype),s}function l(f,s,a){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(f)}return x(f,s,a)}l.poolSize=8192;function x(f,s,a){if(typeof f=="string")return U(f,s);if(ArrayBuffer.isView(f))return L(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(ie(f,ArrayBuffer)||f&&ie(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ie(f,SharedArrayBuffer)||f&&ie(f.buffer,SharedArrayBuffer)))return T(f,s,a);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=f.valueOf&&f.valueOf();if(g!=null&&g!==f)return l.from(g,s,a);const E=C(f);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return l.from(f[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}l.from=function(f,s,a){return x(f,s,a)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function A(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function k(f,s,a){return A(f),f<=0?d(f):s!==void 0?typeof a=="string"?d(f).fill(s,a):d(f).fill(s):d(f)}l.alloc=function(f,s,a){return k(f,s,a)};function I(f){return A(f),d(f<0?0:D(f)|0)}l.allocUnsafe=function(f){return I(f)},l.allocUnsafeSlow=function(f){return I(f)};function U(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!l.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const a=P(f,s)|0;let g=d(a);const E=g.write(f,s);return E!==a&&(g=g.slice(0,E)),g}function R(f){const s=f.length<0?0:D(f.length)|0,a=d(s);for(let g=0;g<s;g+=1)a[g]=f[g]&255;return a}function L(f){if(ie(f,Uint8Array)){const s=new Uint8Array(f);return T(s.buffer,s.byteOffset,s.byteLength)}return R(f)}function T(f,s,a){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');let g;return s===void 0&&a===void 0?g=new Uint8Array(f):a===void 0?g=new Uint8Array(f,s):g=new Uint8Array(f,s,a),Object.setPrototypeOf(g,l.prototype),g}function C(f){if(l.isBuffer(f)){const s=D(f.length)|0,a=d(s);return a.length===0||f.copy(a,0,0,s),a}if(f.length!==void 0)return typeof f.length!="number"||mt(f.length)?d(0):R(f);if(f.type==="Buffer"&&Array.isArray(f.data))return R(f.data)}function D(f){if(f>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return f|0}function q(f){return+f!=f&&(f=0),l.alloc(+f)}l.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==l.prototype},l.compare=function(s,a){if(ie(s,Uint8Array)&&(s=l.from(s,s.offset,s.byteLength)),ie(a,Uint8Array)&&(a=l.from(a,a.offset,a.byteLength)),!l.isBuffer(s)||!l.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;let g=s.length,E=a.length;for(let M=0,S=Math.min(g,E);M<S;++M)if(s[M]!==a[M]){g=s[M],E=a[M];break}return g<E?-1:E<g?1:0},l.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return l.alloc(0);let g;if(a===void 0)for(a=0,g=0;g<s.length;++g)a+=s[g].length;const E=l.allocUnsafe(a);let M=0;for(g=0;g<s.length;++g){let S=s[g];if(ie(S,Uint8Array))M+S.length>E.length?(l.isBuffer(S)||(S=l.from(S)),S.copy(E,M)):Uint8Array.prototype.set.call(E,S,M);else if(l.isBuffer(S))S.copy(E,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=S.length}return E};function P(f,s){if(l.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||ie(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const a=f.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&a===0)return 0;let E=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return gt(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return vt(f).length;default:if(E)return g?-1:gt(f).length;s=(""+s).toLowerCase(),E=!0}}l.byteLength=P;function tt(f,s,a){let g=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,s>>>=0,a<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return B(this,s,a);case"utf8":case"utf-8":return n(this,s,a);case"ascii":return y(this,s,a);case"latin1":case"binary":return v(this,s,a);case"base64":return b(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,s,a);default:if(g)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),g=!0}}l.prototype._isBuffer=!0;function N(f,s,a){const g=f[s];f[s]=f[a],f[a]=g}l.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<s;a+=2)N(this,a,a+1);return this},l.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<s;a+=4)N(this,a,a+3),N(this,a+1,a+2);return this},l.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<s;a+=8)N(this,a,a+7),N(this,a+1,a+6),N(this,a+2,a+5),N(this,a+3,a+4);return this},l.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?n(this,0,s):tt.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(s){if(!l.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:l.compare(this,s)===0},l.prototype.inspect=function(){let s="";const a=o.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(s,a,g,E,M){if(ie(s,Uint8Array)&&(s=l.from(s,s.offset,s.byteLength)),!l.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(a===void 0&&(a=0),g===void 0&&(g=s?s.length:0),E===void 0&&(E=0),M===void 0&&(M=this.length),a<0||g>s.length||E<0||M>this.length)throw new RangeError("out of range index");if(E>=M&&a>=g)return 0;if(E>=M)return-1;if(a>=g)return 1;if(a>>>=0,g>>>=0,E>>>=0,M>>>=0,this===s)return 0;let S=M-E,X=g-a;const j=Math.min(S,X),Z=this.slice(E,M),pt=s.slice(a,g);for(let W=0;W<j;++W)if(Z[W]!==pt[W]){S=Z[W],X=pt[W];break}return S<X?-1:X<S?1:0};function V(f,s,a,g,E){if(f.length===0)return-1;if(typeof a=="string"?(g=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,mt(a)&&(a=E?0:f.length-1),a<0&&(a=f.length+a),a>=f.length){if(E)return-1;a=f.length-1}else if(a<0)if(E)a=0;else return-1;if(typeof s=="string"&&(s=l.from(s,g)),l.isBuffer(s))return s.length===0?-1:J(f,s,a,g,E);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(f,s,a):Uint8Array.prototype.lastIndexOf.call(f,s,a):J(f,[s],a,g,E);throw new TypeError("val must be string, number or Buffer")}function J(f,s,a,g,E){let M=1,S=f.length,X=s.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(f.length<2||s.length<2)return-1;M=2,S/=2,X/=2,a/=2}function j(pt,W){return M===1?pt[W]:pt.readUInt16BE(W*M)}let Z;if(E){let pt=-1;for(Z=a;Z<S;Z++)if(j(f,Z)===j(s,pt===-1?0:Z-pt)){if(pt===-1&&(pt=Z),Z-pt+1===X)return pt*M}else pt!==-1&&(Z-=Z-pt),pt=-1}else for(a+X>S&&(a=S-X),Z=a;Z>=0;Z--){let pt=!0;for(let W=0;W<X;W++)if(j(f,Z+W)!==j(s,W)){pt=!1;break}if(pt)return Z}return-1}l.prototype.includes=function(s,a,g){return this.indexOf(s,a,g)!==-1},l.prototype.indexOf=function(s,a,g){return V(this,s,a,g,!0)},l.prototype.lastIndexOf=function(s,a,g){return V(this,s,a,g,!1)};function st(f,s,a,g){a=Number(a)||0;const E=f.length-a;g?(g=Number(g),g>E&&(g=E)):g=E;const M=s.length;g>M/2&&(g=M/2);let S;for(S=0;S<g;++S){const X=parseInt(s.substr(S*2,2),16);if(mt(X))return S;f[a+S]=X}return S}function jt(f,s,a,g){return dt(gt(s,f.length-a),f,a,g)}function se(f,s,a,g){return dt(Et(s),f,a,g)}function ct(f,s,a,g){return dt(vt(s),f,a,g)}function ee(f,s,a,g){return dt(Ze(s,f.length-a),f,a,g)}l.prototype.write=function(s,a,g,E){if(a===void 0)E="utf8",g=this.length,a=0;else if(g===void 0&&typeof a=="string")E=a,g=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(g)?(g=g>>>0,E===void 0&&(E="utf8")):(E=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-a;if((g===void 0||g>M)&&(g=M),s.length>0&&(g<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let S=!1;for(;;)switch(E){case"hex":return st(this,s,a,g);case"utf8":case"utf-8":return jt(this,s,a,g);case"ascii":case"latin1":case"binary":return se(this,s,a,g);case"base64":return ct(this,s,a,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,s,a,g);default:if(S)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),S=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(f,s,a){return s===0&&a===f.length?t.fromByteArray(f):t.fromByteArray(f.slice(s,a))}function n(f,s,a){a=Math.min(f.length,a);const g=[];let E=s;for(;E<a;){const M=f[E];let S=null,X=M>239?4:M>223?3:M>191?2:1;if(E+X<=a){let j,Z,pt,W;switch(X){case 1:M<128&&(S=M);break;case 2:j=f[E+1],(j&192)===128&&(W=(M&31)<<6|j&63,W>127&&(S=W));break;case 3:j=f[E+1],Z=f[E+2],(j&192)===128&&(Z&192)===128&&(W=(M&15)<<12|(j&63)<<6|Z&63,W>2047&&(W<55296||W>57343)&&(S=W));break;case 4:j=f[E+1],Z=f[E+2],pt=f[E+3],(j&192)===128&&(Z&192)===128&&(pt&192)===128&&(W=(M&15)<<18|(j&63)<<12|(Z&63)<<6|pt&63,W>65535&&W<1114112&&(S=W))}}S===null?(S=65533,X=1):S>65535&&(S-=65536,g.push(S>>>10&1023|55296),S=56320|S&1023),g.push(S),E+=X}return p(g)}const h=4096;function p(f){const s=f.length;if(s<=h)return String.fromCharCode.apply(String,f);let a="",g=0;for(;g<s;)a+=String.fromCharCode.apply(String,f.slice(g,g+=h));return a}function y(f,s,a){let g="";a=Math.min(f.length,a);for(let E=s;E<a;++E)g+=String.fromCharCode(f[E]&127);return g}function v(f,s,a){let g="";a=Math.min(f.length,a);for(let E=s;E<a;++E)g+=String.fromCharCode(f[E]);return g}function B(f,s,a){const g=f.length;(!s||s<0)&&(s=0),(!a||a<0||a>g)&&(a=g);let E="";for(let M=s;M<a;++M)E+=Bt[f[M]];return E}function _(f,s,a){const g=f.slice(s,a);let E="";for(let M=0;M<g.length-1;M+=2)E+=String.fromCharCode(g[M]+g[M+1]*256);return E}l.prototype.slice=function(s,a){const g=this.length;s=~~s,a=a===void 0?g:~~a,s<0?(s+=g,s<0&&(s=0)):s>g&&(s=g),a<0?(a+=g,a<0&&(a=0)):a>g&&(a=g),a<s&&(a=s);const E=this.subarray(s,a);return Object.setPrototypeOf(E,l.prototype),E};function m(f,s,a){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>a)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(s,a,g){s=s>>>0,a=a>>>0,g||m(s,a,this.length);let E=this[s],M=1,S=0;for(;++S<a&&(M*=256);)E+=this[s+S]*M;return E},l.prototype.readUintBE=l.prototype.readUIntBE=function(s,a,g){s=s>>>0,a=a>>>0,g||m(s,a,this.length);let E=this[s+--a],M=1;for(;a>0&&(M*=256);)E+=this[s+--a]*M;return E},l.prototype.readUint8=l.prototype.readUInt8=function(s,a){return s=s>>>0,a||m(s,1,this.length),this[s]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(s,a){return s=s>>>0,a||m(s,2,this.length),this[s]|this[s+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(s,a){return s=s>>>0,a||m(s,2,this.length),this[s]<<8|this[s+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(s,a){return s=s>>>0,a||m(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(s,a){return s=s>>>0,a||m(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},l.prototype.readBigUInt64LE=ae(function(s){s=s>>>0,ye(s,"offset");const a=this[s],g=this[s+7];(a===void 0||g===void 0)&&ht(s,this.length-8);const E=a+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,M=this[++s]+this[++s]*2**8+this[++s]*2**16+g*2**24;return BigInt(E)+(BigInt(M)<<BigInt(32))}),l.prototype.readBigUInt64BE=ae(function(s){s=s>>>0,ye(s,"offset");const a=this[s],g=this[s+7];(a===void 0||g===void 0)&&ht(s,this.length-8);const E=a*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],M=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g;return(BigInt(E)<<BigInt(32))+BigInt(M)}),l.prototype.readIntLE=function(s,a,g){s=s>>>0,a=a>>>0,g||m(s,a,this.length);let E=this[s],M=1,S=0;for(;++S<a&&(M*=256);)E+=this[s+S]*M;return M*=128,E>=M&&(E-=Math.pow(2,8*a)),E},l.prototype.readIntBE=function(s,a,g){s=s>>>0,a=a>>>0,g||m(s,a,this.length);let E=a,M=1,S=this[s+--E];for(;E>0&&(M*=256);)S+=this[s+--E]*M;return M*=128,S>=M&&(S-=Math.pow(2,8*a)),S},l.prototype.readInt8=function(s,a){return s=s>>>0,a||m(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},l.prototype.readInt16LE=function(s,a){s=s>>>0,a||m(s,2,this.length);const g=this[s]|this[s+1]<<8;return g&32768?g|4294901760:g},l.prototype.readInt16BE=function(s,a){s=s>>>0,a||m(s,2,this.length);const g=this[s+1]|this[s]<<8;return g&32768?g|4294901760:g},l.prototype.readInt32LE=function(s,a){return s=s>>>0,a||m(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},l.prototype.readInt32BE=function(s,a){return s=s>>>0,a||m(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},l.prototype.readBigInt64LE=ae(function(s){s=s>>>0,ye(s,"offset");const a=this[s],g=this[s+7];(a===void 0||g===void 0)&&ht(s,this.length-8);const E=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(g<<24);return(BigInt(E)<<BigInt(32))+BigInt(a+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),l.prototype.readBigInt64BE=ae(function(s){s=s>>>0,ye(s,"offset");const a=this[s],g=this[s+7];(a===void 0||g===void 0)&&ht(s,this.length-8);const E=(a<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(E)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g)}),l.prototype.readFloatLE=function(s,a){return s=s>>>0,a||m(s,4,this.length),e.read(this,s,!0,23,4)},l.prototype.readFloatBE=function(s,a){return s=s>>>0,a||m(s,4,this.length),e.read(this,s,!1,23,4)},l.prototype.readDoubleLE=function(s,a){return s=s>>>0,a||m(s,8,this.length),e.read(this,s,!0,52,8)},l.prototype.readDoubleBE=function(s,a){return s=s>>>0,a||m(s,8,this.length),e.read(this,s,!1,52,8)};function c(f,s,a,g,E,M){if(!l.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>E||s<M)throw new RangeError('"value" argument is out of bounds');if(a+g>f.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(s,a,g,E){if(s=+s,a=a>>>0,g=g>>>0,!E){const X=Math.pow(2,8*g)-1;c(this,s,a,g,X,0)}let M=1,S=0;for(this[a]=s&255;++S<g&&(M*=256);)this[a+S]=s/M&255;return a+g},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(s,a,g,E){if(s=+s,a=a>>>0,g=g>>>0,!E){const X=Math.pow(2,8*g)-1;c(this,s,a,g,X,0)}let M=g-1,S=1;for(this[a+M]=s&255;--M>=0&&(S*=256);)this[a+M]=s/S&255;return a+g},l.prototype.writeUint8=l.prototype.writeUInt8=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,1,255,0),this[a]=s&255,a+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,2,65535,0),this[a]=s&255,this[a+1]=s>>>8,a+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=s&255,a+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=s&255,a+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4};function w(f,s,a,g,E){wt(s,g,E,f,a,7);let M=Number(s&BigInt(4294967295));f[a++]=M,M=M>>8,f[a++]=M,M=M>>8,f[a++]=M,M=M>>8,f[a++]=M;let S=Number(s>>BigInt(32)&BigInt(4294967295));return f[a++]=S,S=S>>8,f[a++]=S,S=S>>8,f[a++]=S,S=S>>8,f[a++]=S,a}function K(f,s,a,g,E){wt(s,g,E,f,a,7);let M=Number(s&BigInt(4294967295));f[a+7]=M,M=M>>8,f[a+6]=M,M=M>>8,f[a+5]=M,M=M>>8,f[a+4]=M;let S=Number(s>>BigInt(32)&BigInt(4294967295));return f[a+3]=S,S=S>>8,f[a+2]=S,S=S>>8,f[a+1]=S,S=S>>8,f[a]=S,a+8}l.prototype.writeBigUInt64LE=ae(function(s,a=0){return w(this,s,a,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=ae(function(s,a=0){return K(this,s,a,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(s,a,g,E){if(s=+s,a=a>>>0,!E){const j=Math.pow(2,8*g-1);c(this,s,a,g,j-1,-j)}let M=0,S=1,X=0;for(this[a]=s&255;++M<g&&(S*=256);)s<0&&X===0&&this[a+M-1]!==0&&(X=1),this[a+M]=(s/S>>0)-X&255;return a+g},l.prototype.writeIntBE=function(s,a,g,E){if(s=+s,a=a>>>0,!E){const j=Math.pow(2,8*g-1);c(this,s,a,g,j-1,-j)}let M=g-1,S=1,X=0;for(this[a+M]=s&255;--M>=0&&(S*=256);)s<0&&X===0&&this[a+M+1]!==0&&(X=1),this[a+M]=(s/S>>0)-X&255;return a+g},l.prototype.writeInt8=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=s&255,a+1},l.prototype.writeInt16LE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,2,32767,-32768),this[a]=s&255,this[a+1]=s>>>8,a+2},l.prototype.writeInt16BE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=s&255,a+2},l.prototype.writeInt32LE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,4,2147483647,-2147483648),this[a]=s&255,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},l.prototype.writeInt32BE=function(s,a,g){return s=+s,a=a>>>0,g||c(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4},l.prototype.writeBigInt64LE=ae(function(s,a=0){return w(this,s,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=ae(function(s,a=0){return K(this,s,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $(f,s,a,g,E,M){if(a+g>f.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function G(f,s,a,g,E){return s=+s,a=a>>>0,E||$(f,s,a,4),e.write(f,s,a,g,23,4),a+4}l.prototype.writeFloatLE=function(s,a,g){return G(this,s,a,!0,g)},l.prototype.writeFloatBE=function(s,a,g){return G(this,s,a,!1,g)};function Kt(f,s,a,g,E){return s=+s,a=a>>>0,E||$(f,s,a,8),e.write(f,s,a,g,52,8),a+8}l.prototype.writeDoubleLE=function(s,a,g){return Kt(this,s,a,!0,g)},l.prototype.writeDoubleBE=function(s,a,g){return Kt(this,s,a,!1,g)},l.prototype.copy=function(s,a,g,E){if(!l.isBuffer(s))throw new TypeError("argument should be a Buffer");if(g||(g=0),!E&&E!==0&&(E=this.length),a>=s.length&&(a=s.length),a||(a=0),E>0&&E<g&&(E=g),E===g||s.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),s.length-a<E-g&&(E=s.length-a+g);const M=E-g;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,g,E):Uint8Array.prototype.set.call(s,this.subarray(g,E),a),M},l.prototype.fill=function(s,a,g,E){if(typeof s=="string"){if(typeof a=="string"?(E=a,a=0,g=this.length):typeof g=="string"&&(E=g,g=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!l.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(s.length===1){const S=s.charCodeAt(0);(E==="utf8"&&S<128||E==="latin1")&&(s=S)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(a<0||this.length<a||this.length<g)throw new RangeError("Out of range index");if(g<=a)return this;a=a>>>0,g=g===void 0?this.length:g>>>0,s||(s=0);let M;if(typeof s=="number")for(M=a;M<g;++M)this[M]=s;else{const S=l.isBuffer(s)?s:l.from(s,E),X=S.length;if(X===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(M=0;M<g-a;++M)this[M+a]=S[M%X]}return this};const nt={};function ut(f,s,a){nt[f]=class extends a{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}ut("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ut("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),ut("ERR_OUT_OF_RANGE",function(f,s,a){let g=`The value of "${f}" is out of range.`,E=a;return Number.isInteger(a)&&Math.abs(a)>2**32?E=Pe(String(a)):typeof a=="bigint"&&(E=String(a),(a>BigInt(2)**BigInt(32)||a<-(BigInt(2)**BigInt(32)))&&(E=Pe(E)),E+="n"),g+=` It must be ${s}. Received ${E}`,g},RangeError);function Pe(f){let s="",a=f.length;const g=f[0]==="-"?1:0;for(;a>=g+4;a-=3)s=`_${f.slice(a-3,a)}${s}`;return`${f.slice(0,a)}${s}`}function bt(f,s,a){ye(s,"offset"),(f[s]===void 0||f[s+a]===void 0)&&ht(s,f.length-(a+1))}function wt(f,s,a,g,E,M){if(f>a||f<s){const S=typeof s=="bigint"?"n":"";let X;throw M>3?s===0||s===BigInt(0)?X=`>= 0${S} and < 2${S} ** ${(M+1)*8}${S}`:X=`>= -(2${S} ** ${(M+1)*8-1}${S}) and < 2 ** ${(M+1)*8-1}${S}`:X=`>= ${s}${S} and <= ${a}${S}`,new nt.ERR_OUT_OF_RANGE("value",X,f)}bt(g,E,M)}function ye(f,s){if(typeof f!="number")throw new nt.ERR_INVALID_ARG_TYPE(s,"number",f)}function ht(f,s,a){throw Math.floor(f)!==f?(ye(f,a),new nt.ERR_OUT_OF_RANGE(a||"offset","an integer",f)):s<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE(a||"offset",`>= ${a?1:0} and <= ${s}`,f)}const xt=/[^+/0-9A-Za-z-_]/g;function Ge(f){if(f=f.split("=")[0],f=f.trim().replace(xt,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function gt(f,s){s=s||1/0;let a;const g=f.length;let E=null;const M=[];for(let S=0;S<g;++S){if(a=f.charCodeAt(S),a>55295&&a<57344){if(!E){if(a>56319){(s-=3)>-1&&M.push(239,191,189);continue}else if(S+1===g){(s-=3)>-1&&M.push(239,191,189);continue}E=a;continue}if(a<56320){(s-=3)>-1&&M.push(239,191,189),E=a;continue}a=(E-55296<<10|a-56320)+65536}else E&&(s-=3)>-1&&M.push(239,191,189);if(E=null,a<128){if((s-=1)<0)break;M.push(a)}else if(a<2048){if((s-=2)<0)break;M.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;M.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;M.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return M}function Et(f){const s=[];for(let a=0;a<f.length;++a)s.push(f.charCodeAt(a)&255);return s}function Ze(f,s){let a,g,E;const M=[];for(let S=0;S<f.length&&!((s-=2)<0);++S)a=f.charCodeAt(S),g=a>>8,E=a%256,M.push(E),M.push(g);return M}function vt(f){return t.toByteArray(Ge(f))}function dt(f,s,a,g){let E;for(E=0;E<g&&!(E+a>=s.length||E>=f.length);++E)s[E+a]=f[E];return E}function ie(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function mt(f){return f!==f}const Bt=function(){const f="0123456789abcdef",s=new Array(256);for(let a=0;a<16;++a){const g=a*16;for(let E=0;E<16;++E)s[g+E]=f[a]+f[E]}return s}();function ae(f){return typeof BigInt>"u"?Mt:f}function Mt(){throw new Error("BigInt not supported")}})(Do);Object.defineProperty(O,"__esModule",{value:!0});O.s16=O.s8=O.nu64be=O.u48be=O.u40be=O.u32be=O.u24be=O.u16be=ve=O.nu64=O.u48=O.u40=ft=O.u32=O.u24=Te=O.u16=Qt=O.u8=Lr=O.offset=O.greedy=O.Constant=O.UTF8=O.CString=O.Blob=O.Boolean=O.BitField=O.BitStructure=O.VariantLayout=O.Union=O.UnionLayoutDiscriminator=O.UnionDiscriminator=O.Structure=O.Sequence=O.DoubleBE=O.Double=O.FloatBE=O.Float=O.NearInt64BE=O.NearInt64=O.NearUInt64BE=O.NearUInt64=O.IntBE=O.Int=O.UIntBE=O.UInt=O.OffsetLayout=O.GreedyCount=O.ExternalLayout=O.bindConstructorLayout=O.nameWithProperty=O.Layout=O.uint8ArrayToBuffer=O.checkUint8Array=void 0;O.constant=O.utf8=O.cstr=fe=O.blob=O.unionLayoutDiscriminator=O.union=Be=O.seq=O.bits=ot=O.struct=O.f64be=O.f64=O.f32be=O.f32=O.ns64be=O.s48be=O.s40be=O.s32be=O.s24be=O.s16be=Ae=O.ns64=O.s48=O.s40=O.s32=O.s24=void 0;const cs=Do;function nn(o){if(!(o instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}O.checkUint8Array=nn;function Yt(o){return nn(o),cs.Buffer.from(o.buffer,o.byteOffset,o.length)}O.uint8ArrayToBuffer=Yt;class ne{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}O.Layout=ne;function us(o,t){return t.property?o+"["+t.property+"]":o}O.nameWithProperty=us;function fu(o,t){if(typeof o!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(o,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof ne))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");o.layout_=t,t.boundConstructor_=o,t.makeDestinationObject=()=>new o,Object.defineProperty(o.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(o,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}O.bindConstructorLayout=fu;class Me extends ne{isCount(){throw new Error("ExternalLayout is abstract")}}O.ExternalLayout=Me;class qo extends Me{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){nn(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}O.GreedyCount=qo;class hs extends Me{constructor(t,e=0,r){if(!(t instanceof ne))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Fe||this.layout instanceof Oe}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}O.OffsetLayout=hs;class Fe extends ne{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Yt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Yt(e).writeUIntLE(t,r,this.span),this.span}}O.UInt=Fe;class Oe extends ne{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Yt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Yt(e).writeUIntBE(t,r,this.span),this.span}}O.UIntBE=Oe;class Dr extends ne{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Yt(t).readIntLE(e,this.span)}encode(t,e,r=0){return Yt(e).writeIntLE(t,r,this.span),this.span}}O.Int=Dr;class sn extends ne{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Yt(t).readIntBE(e,this.span)}encode(t,e,r=0){return Yt(e).writeIntBE(t,r,this.span),this.span}}O.IntBE=sn;const qi=Math.pow(2,32);function di(o){const t=Math.floor(o/qi),e=o-t*qi;return{hi32:t,lo32:e}}function pi(o,t){return o*qi+t}class Ho extends ne{constructor(t){super(8,t)}decode(t,e=0){const r=Yt(t),u=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return pi(i,u)}encode(t,e,r=0){const u=di(t),i=Yt(e);return i.writeUInt32LE(u.lo32,r),i.writeUInt32LE(u.hi32,r+4),8}}O.NearUInt64=Ho;class $o extends ne{constructor(t){super(8,t)}decode(t,e=0){const r=Yt(t),u=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return pi(u,i)}encode(t,e,r=0){const u=di(t),i=Yt(e);return i.writeUInt32BE(u.hi32,r),i.writeUInt32BE(u.lo32,r+4),8}}O.NearUInt64BE=$o;class zo extends ne{constructor(t){super(8,t)}decode(t,e=0){const r=Yt(t),u=r.readUInt32LE(e),i=r.readInt32LE(e+4);return pi(i,u)}encode(t,e,r=0){const u=di(t),i=Yt(e);return i.writeUInt32LE(u.lo32,r),i.writeInt32LE(u.hi32,r+4),8}}O.NearInt64=zo;class Ko extends ne{constructor(t){super(8,t)}decode(t,e=0){const r=Yt(t),u=r.readInt32BE(e),i=r.readUInt32BE(e+4);return pi(u,i)}encode(t,e,r=0){const u=di(t),i=Yt(e);return i.writeInt32BE(u.hi32,r),i.writeUInt32BE(u.lo32,r+4),8}}O.NearInt64BE=Ko;class Wo extends ne{constructor(t){super(4,t)}decode(t,e=0){return Yt(t).readFloatLE(e)}encode(t,e,r=0){return Yt(e).writeFloatLE(t,r),4}}O.Float=Wo;class Go extends ne{constructor(t){super(4,t)}decode(t,e=0){return Yt(t).readFloatBE(e)}encode(t,e,r=0){return Yt(e).writeFloatBE(t,r),4}}O.FloatBE=Go;class Zo extends ne{constructor(t){super(8,t)}decode(t,e=0){return Yt(t).readDoubleLE(e)}encode(t,e,r=0){return Yt(e).writeDoubleLE(t,r),8}}O.Double=Zo;class jo extends ne{constructor(t){super(8,t)}decode(t,e=0){return Yt(t).readDoubleBE(e)}encode(t,e,r=0){return Yt(e).writeDoubleBE(t,r),8}}O.DoubleBE=jo;class Vo extends ne{constructor(t,e,r){if(!(t instanceof ne))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Me&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let u=-1;!(e instanceof Me)&&0<t.span&&(u=e*t.span),super(u,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,u=this.count;if(u instanceof Me&&(u=u.decode(t,e)),0<this.elementLayout.span)r=u*this.elementLayout.span;else{let i=0;for(;i<u;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let u=0,i=this.count;for(i instanceof Me&&(i=i.decode(t,e));u<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),u+=1;return r}encode(t,e,r=0){const u=this.elementLayout,i=t.reduce((d,l)=>d+u.encode(l,e,r+d),0);return this.count instanceof Me&&this.count.encode(t.length,e,r),i}}O.Sequence=Vo;class Xo extends ne{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,d)=>i&&d instanceof ne,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let u=-1;try{u=t.reduce((i,d)=>i+d.getSpan(),0)}catch{}super(u,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((u,i)=>{const d=i.getSpan(t,e);return e+=d,u+d},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){nn(t);const r=this.makeDestinationObject();for(const u of this.fields)if(u.property!==void 0&&(r[u.property]=u.decode(t,e)),e+=u.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const u=r;let i=0,d=0;for(const l of this.fields){let x=l.span;if(d=0<x?x:0,l.property!==void 0){const A=t[l.property];A!==void 0&&(d=l.encode(A,e,r),0>x&&(x=l.getSpan(e,r)))}i=r,r+=x}return i+d-u}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}O.Structure=Xo;class fs{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}O.UnionDiscriminator=fs;class ri extends fs{constructor(t,e){if(!(t instanceof Me&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}O.UnionLayoutDiscriminator=ri;class ls extends ne{constructor(t,e,r){let u;if(t instanceof Fe||t instanceof Oe)u=new ri(new hs(t));else if(t instanceof Me&&t.isCount())u=new ri(t);else if(t instanceof fs)u=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ne))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Fe||t instanceof Oe)&&(i+=u.layout.span)),super(i,r),this.discriminator=u,this.usesPrefixDiscriminator=t instanceof Fe||t instanceof Oe,this.defaultLayout=e,this.registry={};let d=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(l){return d(l)},this.configGetSourceVariant=function(l){d=l.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const u=this.discriminator,i=u.decode(t,e),d=this.registry[i];if(d===void 0){const l=this.defaultLayout;let x=0;this.usesPrefixDiscriminator&&(x=u.layout.span),r=this.makeDestinationObject(),r[u.property]=i,r[l.property]=l.decode(t,e+x)}else r=d.decode(t,e);return r}encode(t,e,r=0){const u=this.getSourceVariant(t);if(u===void 0){const i=this.discriminator,d=this.defaultLayout;let l=0;return this.usesPrefixDiscriminator&&(l=i.layout.span),i.encode(t[i.property],e,r),l+d.encode(t[d.property],e,r+l)}return u.encode(t,e,r)}addVariant(t,e,r){const u=new Yo(this,t,e,r);return this.registry[t]=u,u}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}O.Union=ls;class Yo extends ne{constructor(t,e,r,u){if(!(t instanceof ls))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&u===void 0&&(u=r,r=null),r){if(!(r instanceof ne))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof u!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,u),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let u=0;return this.layout&&(u=this.layout.getSpan(t,e+r)),r+u}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let u=0;return this.union.usesPrefixDiscriminator&&(u=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+u):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let u=0;if(this.union.usesPrefixDiscriminator&&(u=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=u;if(this.layout&&(this.layout.encode(t[this.property],e,r+u),i+=this.layout.getSpan(e,r+u),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}O.VariantLayout=Yo;function Kr(o){return 0>o&&(o+=4294967296),o}class ds extends ne{constructor(t,e,r){if(!(t instanceof Fe||t instanceof Oe))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let u=0;this._packedSetValue=function(i){return u=Kr(i),this},this._packedGetValue=function(){return u}}decode(t,e=0){const r=this.makeDestinationObject(),u=this.word.decode(t,e);this._packedSetValue(u);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const u=this.word.decode(e,r);this._packedSetValue(u);for(const i of this.fields)if(i.property!==void 0){const d=t[i.property];d!==void 0&&i.encode(d)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new ps(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Jo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}O.BitStructure=ds;class ps{constructor(t,e,r){if(!(t instanceof ds))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const u=8*t.span,i=t.fields.reduce((d,l)=>d+l.bits,0);if(e+i>u)throw new Error("bits too long for span remainder ("+(u-i)+" of "+u+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=u-i-e),this.wordMask=Kr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Kr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Kr(t&this.valueMask))throw new TypeError(us("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Kr(t<<this.start);this.container._packedSetValue(Kr(e&~this.wordMask)|r)}}O.BitField=ps;let Jo=class extends ps{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};O.Boolean=Jo;class Qo extends ne{constructor(t,e){if(!(t instanceof Me&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Me||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Yt(t).slice(e,e+r)}encode(t,e,r){let u=this.length;if(this.length instanceof Me&&(u=t.length),!(t instanceof Uint8Array&&u===t.length))throw new TypeError(us("Blob.encode",this)+" requires (length "+u+") Uint8Array as src");if(r+u>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Yt(t);return Yt(e).write(i.toString("hex"),r,u,"hex"),this.length instanceof Me&&this.length.encode(u,e,r),u}}O.Blob=Qo;class ta extends ne{constructor(t){super(-1,t)}getSpan(t,e=0){nn(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Yt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const u=cs.Buffer.from(t,"utf8"),i=u.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const d=Yt(e);return u.copy(d,r),d[r+i]=0,i+1}}O.CString=ta;class ea extends ne{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return nn(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Yt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const u=cs.Buffer.from(t,"utf8"),i=u.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return u.copy(Yt(e),r),i}}O.UTF8=ea;class ra extends ne{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}O.Constant=ra;O.greedy=(o,t)=>new qo(o,t);var Lr=O.offset=(o,t,e)=>new hs(o,t,e),Qt=O.u8=o=>new Fe(1,o),Te=O.u16=o=>new Fe(2,o);O.u24=o=>new Fe(3,o);var ft=O.u32=o=>new Fe(4,o);O.u40=o=>new Fe(5,o);O.u48=o=>new Fe(6,o);var ve=O.nu64=o=>new Ho(o);O.u16be=o=>new Oe(2,o);O.u24be=o=>new Oe(3,o);O.u32be=o=>new Oe(4,o);O.u40be=o=>new Oe(5,o);O.u48be=o=>new Oe(6,o);O.nu64be=o=>new $o(o);O.s8=o=>new Dr(1,o);O.s16=o=>new Dr(2,o);O.s24=o=>new Dr(3,o);O.s32=o=>new Dr(4,o);O.s40=o=>new Dr(5,o);O.s48=o=>new Dr(6,o);var Ae=O.ns64=o=>new zo(o);O.s16be=o=>new sn(2,o);O.s24be=o=>new sn(3,o);O.s32be=o=>new sn(4,o);O.s40be=o=>new sn(5,o);O.s48be=o=>new sn(6,o);O.ns64be=o=>new Ko(o);O.f32=o=>new Wo(o);O.f32be=o=>new Go(o);O.f64=o=>new Zo(o);O.f64be=o=>new jo(o);var ot=O.struct=(o,t,e)=>new Xo(o,t,e);O.bits=(o,t,e)=>new ds(o,t,e);var Be=O.seq=(o,t,e)=>new Vo(o,t,e);O.union=(o,t,e)=>new ls(o,t,e);O.unionLayoutDiscriminator=(o,t)=>new ri(o,t);var fe=O.blob=(o,t)=>new Qo(o,t);O.cstr=o=>new ta(o);O.utf8=(o,t)=>new ea(o,t);O.constant=(o,t)=>new ra(o,t);var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});function lu(o){{const t=Buffer.from(o);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var du=Ln.toBigIntLE=lu;function pu(o){{const t=o.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Ln.toBigIntBE=pu;function gu(o,t){{const e=o.toString(16),r=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var mu=Ln.toBufferLE=gu;function yu(o,t){{const e=o.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Ln.toBufferBE=yu;class wu extends TypeError{constructor(t,e){let r;const{message:u,...i}=t,{path:d}=t,l=d.length===0?u:"At path: "+d.join(".")+" -- "+u;super(l),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var x;return(x=r)!=null?x:r=[t,...e()]}}}function vu(o){return or(o)&&typeof o[Symbol.iterator]=="function"}function or(o){return typeof o=="object"&&o!=null}function Ne(o){return typeof o=="string"?JSON.stringify(o):""+o}function bu(o){const{done:t,value:e}=o.next();return t?void 0:e}function xu(o,t,e,r){if(o===!0)return;o===!1?o={}:typeof o=="string"&&(o={message:o});const{path:u,branch:i}=t,{type:d}=e,{refinement:l,message:x="Expected a value of type `"+d+"`"+(l?" with refinement `"+l+"`":"")+", but received: `"+Ne(r)+"`"}=o;return{value:r,type:d,refinement:l,key:u[u.length-1],path:u,branch:i,...o,message:x}}function*Ps(o,t,e,r){vu(o)||(o=[o]);for(const u of o){const i=xu(u,t,e,r);i&&(yield i)}}function*gs(o,t,e={}){const{path:r=[],branch:u=[o],coerce:i=!1,mask:d=!1}=e,l={path:r,branch:u};if(i&&(o=t.coercer(o,l),d&&t.type!=="type"&&or(t.schema)&&or(o)&&!Array.isArray(o)))for(const A in o)t.schema[A]===void 0&&delete o[A];let x=!0;for(const A of t.validator(o,l))x=!1,yield[A,void 0];for(let[A,k,I]of t.entries(o,l)){const U=gs(k,I,{path:A===void 0?r:[...r,A],branch:A===void 0?u:[...u,k],coerce:i,mask:d});for(const R of U)R[0]?(x=!1,yield[R[0],void 0]):i&&(k=R[1],A===void 0?o=k:o instanceof Map?o.set(A,k):o instanceof Set?o.add(k):or(o)&&(o[A]=k))}if(x)for(const A of t.refiner(o,l))x=!1,yield[A,void 0];x&&(yield[void 0,o])}let We=class{constructor(t){const{type:e,schema:r,validator:u,refiner:i,coercer:d=x=>x,entries:l=function*(){}}=t;this.type=e,this.schema=r,this.entries=l,this.coercer=d,u?this.validator=(x,A)=>{const k=u(x,A);return Ps(k,A,this,x)}:this.validator=()=>[],i?this.refiner=(x,A)=>{const k=i(x,A);return Ps(k,A,this,x)}:this.refiner=()=>[]}assert(t){return Eu(t,this)}create(t){return Q(t,this)}is(t){return na(t,this)}mask(t){return Bu(t,this)}validate(t,e={}){return Cn(t,this,e)}};function Eu(o,t){const e=Cn(o,t);if(e[0])throw e[0]}function Q(o,t){const e=Cn(o,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Bu(o,t){const e=Cn(o,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function na(o,t){return!Cn(o,t)[0]}function Cn(o,t,e={}){const r=gs(o,t,e),u=bu(r);return u[0]?[new wu(u[0],function*(){for(const d of r)d[0]&&(yield d[0])}),void 0]:[void 0,u[1]]}function qr(o,t){return new We({type:o,schema:null,validator:t})}function Mu(){return qr("any",()=>!0)}function rt(o){return new We({type:"array",schema:o,*entries(t){if(o&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,o]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Ne(t)}})}function Xe(){return qr("boolean",o=>typeof o=="boolean")}function ms(o){return qr("instance",t=>t instanceof o||"Expected a `"+o.name+"` instance, but received: "+Ne(t))}function he(o){const t=Ne(o),e=typeof o;return new We({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?o:null,validator(r){return r===o||"Expected the literal `"+t+"`, but received: "+Ne(r)}})}function _u(){return qr("never",()=>!1)}function et(o){return new We({...o,validator:(t,e)=>t===null||o.validator(t,e),refiner:(t,e)=>t===null||o.refiner(t,e)})}function F(){return qr("number",o=>typeof o=="number"&&!isNaN(o)||"Expected a number, but received: "+Ne(o))}function yt(o){return new We({...o,validator:(t,e)=>t===void 0||o.validator(t,e),refiner:(t,e)=>t===void 0||o.refiner(t,e)})}function ia(o,t){return new We({type:"record",schema:null,*entries(e){if(or(e))for(const r in e){const u=e[r];yield[r,r,o],yield[r,u,t]}},validator(e){return or(e)||"Expected an object, but received: "+Ne(e)}})}function Y(){return qr("string",o=>typeof o=="string"||"Expected a string, but received: "+Ne(o))}function ys(o){const t=_u();return new We({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(o.length,e.length);for(let u=0;u<r;u++)yield[u,e[u],o[u]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+Ne(e)}})}function z(o){const t=Object.keys(o);return new We({type:"type",schema:o,*entries(e){if(or(e))for(const r of t)yield[r,e[r],o[r]]},validator(e){return or(e)||"Expected an object, but received: "+Ne(e)}})}function _e(o){const t=o.map(e=>e.type).join(" | ");return new We({type:"union",schema:null,validator(e,r){const u=[];for(const i of o){const[...d]=gs(e,i,r),[l]=d;if(l[0])for(const[x]of d)x&&u.push(x);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Ne(e),...u]}})}function Fn(){return qr("unknown",()=>!0)}function Pn(o,t,e){return new We({...o,coercer:(r,u)=>na(r,t)?o.coercer(e(r,u),u):o.coercer(r,u)})}var ws={};const vs=ur(Ta),bs=ur(Ua),xs=ur(La),Es=ur(Ca),Bs=ur(Fa);var Ai={},ni={},Su={get exports(){return ni},set exports(o){ni=o}},Os;function sa(){return Os||(Os=1,function(o){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function u(x,A,k){this.fn=x,this.context=A,this.once=k||!1}function i(x,A,k,I,U){if(typeof k!="function")throw new TypeError("The listener must be a function");var R=new u(k,I||x,U),L=e?e+A:A;return x._events[L]?x._events[L].fn?x._events[L]=[x._events[L],R]:x._events[L].push(R):(x._events[L]=R,x._eventsCount++),x}function d(x,A){--x._eventsCount===0?x._events=new r:delete x._events[A]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var A=[],k,I;if(this._eventsCount===0)return A;for(I in k=this._events)t.call(k,I)&&A.push(e?I.slice(1):I);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(k)):A},l.prototype.listeners=function(A){var k=e?e+A:A,I=this._events[k];if(!I)return[];if(I.fn)return[I.fn];for(var U=0,R=I.length,L=new Array(R);U<R;U++)L[U]=I[U].fn;return L},l.prototype.listenerCount=function(A){var k=e?e+A:A,I=this._events[k];return I?I.fn?1:I.length:0},l.prototype.emit=function(A,k,I,U,R,L){var T=e?e+A:A;if(!this._events[T])return!1;var C=this._events[T],D=arguments.length,q,P;if(C.fn){switch(C.once&&this.removeListener(A,C.fn,void 0,!0),D){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,k),!0;case 3:return C.fn.call(C.context,k,I),!0;case 4:return C.fn.call(C.context,k,I,U),!0;case 5:return C.fn.call(C.context,k,I,U,R),!0;case 6:return C.fn.call(C.context,k,I,U,R,L),!0}for(P=1,q=new Array(D-1);P<D;P++)q[P-1]=arguments[P];C.fn.apply(C.context,q)}else{var tt=C.length,N;for(P=0;P<tt;P++)switch(C[P].once&&this.removeListener(A,C[P].fn,void 0,!0),D){case 1:C[P].fn.call(C[P].context);break;case 2:C[P].fn.call(C[P].context,k);break;case 3:C[P].fn.call(C[P].context,k,I);break;case 4:C[P].fn.call(C[P].context,k,I,U);break;default:if(!q)for(N=1,q=new Array(D-1);N<D;N++)q[N-1]=arguments[N];C[P].fn.apply(C[P].context,q)}}return!0},l.prototype.on=function(A,k,I){return i(this,A,k,I,!1)},l.prototype.once=function(A,k,I){return i(this,A,k,I,!0)},l.prototype.removeListener=function(A,k,I,U){var R=e?e+A:A;if(!this._events[R])return this;if(!k)return d(this,R),this;var L=this._events[R];if(L.fn)L.fn===k&&(!U||L.once)&&(!I||L.context===I)&&d(this,R);else{for(var T=0,C=[],D=L.length;T<D;T++)(L[T].fn!==k||U&&!L[T].once||I&&L[T].context!==I)&&C.push(L[T]);C.length?this._events[R]=C.length===1?C[0]:C:d(this,R)}return this},l.prototype.removeAllListeners=function(A){var k;return A?(k=e?e+A:A,this._events[k]&&d(this,k)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,o.exports=l}(Su)),ni}var Ns;function Au(){return Ns||(Ns=1,function(o){var t=ts;Object.defineProperty(o,"__esModule",{value:!0}),o.default=I;var e=t(bs),r=t(vs),u=t(xs),i=t(Es),d=t(Bs),l=sa();function x(U){var R=A();return function(){var T=(0,d.default)(U),C;if(R){var D=(0,d.default)(this).constructor;C=Reflect.construct(T,arguments,D)}else C=T.apply(this,arguments);return(0,i.default)(this,C)}}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(U){(0,u.default)(L,U);var R=x(L);function L(T,C,D){var q;return(0,e.default)(this,L),q=R.call(this),q.socket=new window.WebSocket(T,D),q.socket.onopen=function(){return q.emit("open")},q.socket.onmessage=function(P){return q.emit("message",P.data)},q.socket.onerror=function(P){return q.emit("error",P)},q.socket.onclose=function(P){q.emit("close",P.code,P.reason)},q}return(0,r.default)(L,[{key:"send",value:function(C,D,q){var P=q||D;try{this.socket.send(C),P()}catch(tt){P(tt)}}},{key:"close",value:function(C,D){this.socket.close(C,D)}},{key:"addEventListener",value:function(C,D,q){this.socket.addEventListener(C,D,q)}}]),L}(l.EventEmitter);function I(U,R){return new k(U,R)}}(Ai)),Ai}var Ii={};const Iu=ur(Pa),ku=ur(Oa);var Ds;function Ru(){return Ds||(Ds=1,function(o){var t=ts;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=t(Na),r=t(Iu),u=t(ku),i=t(bs),d=t(vs),l=t(xs),x=t(Es),A=t(Bs),k=sa();function I(T){var C=U();return function(){var q=(0,A.default)(T),P;if(C){var tt=(0,A.default)(this).constructor;P=Reflect.construct(q,arguments,tt)}else P=q.apply(this,arguments);return(0,x.default)(this,P)}}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var R=function(T,C){var D={};for(var q in T)Object.prototype.hasOwnProperty.call(T,q)&&C.indexOf(q)<0&&(D[q]=T[q]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,q=Object.getOwnPropertySymbols(T);P<q.length;P++)C.indexOf(q[P])<0&&Object.prototype.propertyIsEnumerable.call(T,q[P])&&(D[q[P]]=T[q[P]]);return D},L=function(T){(0,l.default)(D,T);var C=I(D);function D(q){var P,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},V=arguments.length>3?arguments[3]:void 0;(0,i.default)(this,D);var J=N.autoconnect,st=J===void 0?!0:J,jt=N.reconnect,se=jt===void 0?!0:jt,ct=N.reconnect_interval,ee=ct===void 0?1e3:ct,b=N.max_reconnects,n=b===void 0?5:b,h=R(N,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return P=C.call(this),P.webSocketFactory=q,P.queue={},P.rpc_id=0,P.address=tt,P.autoconnect=st,P.ready=!1,P.reconnect=se,P.reconnect_interval=ee,P.max_reconnects=n,P.rest_options=h,P.current_reconnects=0,P.generate_request_id=V||function(){return++P.rpc_id},P.autoconnect&&P._connect(P.address,Object.assign({autoconnect:P.autoconnect,reconnect:P.reconnect,reconnect_interval:P.reconnect_interval,max_reconnects:P.max_reconnects},P.rest_options)),P}return(0,d.default)(D,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(P,tt,N,V){var J=this;return!V&&(0,u.default)(N)==="object"&&(V=N,N=null),new Promise(function(st,jt){if(!J.ready)return jt(new Error("socket not ready"));var se=J.generate_request_id(P,tt),ct={jsonrpc:"2.0",method:P,params:tt||null,id:se};J.socket.send(JSON.stringify(ct),V,function(ee){if(ee)return jt(ee);J.queue[se]={promise:[st,jt]},N&&(J.queue[se].timeout=setTimeout(function(){delete J.queue[se],jt(new Error("reply timeout"))},N))})})}},{key:"login",value:function(){var q=(0,r.default)(e.default.mark(function tt(N){var V;return e.default.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.next=2,this.call("rpc.login",N);case 2:if(V=st.sent,V){st.next=5;break}throw new Error("authentication failed");case 5:return st.abrupt("return",V);case 6:case"end":return st.stop()}},tt,this)}));function P(tt){return q.apply(this,arguments)}return P}()},{key:"listMethods",value:function(){var q=(0,r.default)(e.default.mark(function tt(){return e.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.call("__listMethods");case 2:return V.abrupt("return",V.sent);case 3:case"end":return V.stop()}},tt,this)}));function P(){return q.apply(this,arguments)}return P}()},{key:"notify",value:function(P,tt){var N=this;return new Promise(function(V,J){if(!N.ready)return J(new Error("socket not ready"));var st={jsonrpc:"2.0",method:P,params:tt||null};N.socket.send(JSON.stringify(st),function(jt){if(jt)return J(jt);V()})})}},{key:"subscribe",value:function(){var q=(0,r.default)(e.default.mark(function tt(N){var V;return e.default.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return typeof N=="string"&&(N=[N]),st.next=3,this.call("rpc.on",N);case 3:if(V=st.sent,!(typeof N=="string"&&V[N]!=="ok")){st.next=6;break}throw new Error("Failed subscribing to an event '"+N+"' with: "+V[N]);case 6:return st.abrupt("return",V);case 7:case"end":return st.stop()}},tt,this)}));function P(tt){return q.apply(this,arguments)}return P}()},{key:"unsubscribe",value:function(){var q=(0,r.default)(e.default.mark(function tt(N){var V;return e.default.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return typeof N=="string"&&(N=[N]),st.next=3,this.call("rpc.off",N);case 3:if(V=st.sent,!(typeof N=="string"&&V[N]!=="ok")){st.next=6;break}throw new Error("Failed unsubscribing from an event with: "+V);case 6:return st.abrupt("return",V);case 7:case"end":return st.stop()}},tt,this)}));function P(tt){return q.apply(this,arguments)}return P}()},{key:"close",value:function(P,tt){this.socket.close(P||1e3,tt)}},{key:"_connect",value:function(P,tt){var N=this;this.socket=this.webSocketFactory(P,tt),this.socket.addEventListener("open",function(){N.ready=!0,N.emit("open"),N.current_reconnects=0}),this.socket.addEventListener("message",function(V){var J=V.data;J instanceof ArrayBuffer&&(J=Buffer.from(J).toString());try{J=JSON.parse(J)}catch{return}if(J.notification&&N.listeners(J.notification).length){if(!Object.keys(J.params).length)return N.emit(J.notification);var st=[J.notification];if(J.params.constructor===Object)st.push(J.params);else for(var jt=0;jt<J.params.length;jt++)st.push(J.params[jt]);return Promise.resolve().then(function(){N.emit.apply(N,st)})}if(!N.queue[J.id])return J.method&&J.params?Promise.resolve().then(function(){N.emit(J.method,J.params)}):void 0;"error"in J=="result"in J&&N.queue[J.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),N.queue[J.id].timeout&&clearTimeout(N.queue[J.id].timeout),J.error?N.queue[J.id].promise[1](J.error):N.queue[J.id].promise[0](J.result),delete N.queue[J.id]}),this.socket.addEventListener("error",function(V){return N.emit("error",V)}),this.socket.addEventListener("close",function(V){var J=V.code,st=V.reason;N.ready&&setTimeout(function(){return N.emit("close",J,st)},0),N.ready=!1,N.socket=void 0,J!==1e3&&(N.current_reconnects++,N.reconnect&&(N.max_reconnects>N.current_reconnects||N.max_reconnects===0)&&setTimeout(function(){return N._connect(P,tt)},N.reconnect_interval))})}}]),D}(k.EventEmitter);o.default=L}(Ii)),Ii}var Hr=ts;Object.defineProperty(ws,"__esModule",{value:!0});var oa=ws.Client=void 0,Tu=Hr(vs),Uu=Hr(bs),Lu=Hr(xs),Cu=Hr(Es),qs=Hr(Bs),Fu=Hr(Au()),Pu=Hr(Ru());function Ou(o){var t=Nu();return function(){var r=(0,qs.default)(o),u;if(t){var i=(0,qs.default)(this).constructor;u=Reflect.construct(r,arguments,i)}else u=r.apply(this,arguments);return(0,Cu.default)(this,u)}}function Nu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Du=function(o){(0,Lu.default)(e,o);var t=Ou(e);function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ws://localhost:8080",u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=u.autoconnect,d=i===void 0?!0:i,l=u.reconnect,x=l===void 0?!0:l,A=u.reconnect_interval,k=A===void 0?1e3:A,I=u.max_reconnects,U=I===void 0?5:I,R=arguments.length>2?arguments[2]:void 0;return(0,Uu.default)(this,e),t.call(this,Fu.default,r,{autoconnect:d,reconnect:x,reconnect_interval:k,max_reconnects:U},R)}return(0,Tu.default)(e)}(Pu.default);oa=ws.Client=Du;const qu=xo.v4,Hu=function(o,t,e,r){if(typeof o!="string")throw new TypeError(o+" must be a string");r=r||{};const u=typeof r.version=="number"?r.version:2;if(u!==1&&u!==2)throw new TypeError(u+" must be 1 or 2");const i={method:o};if(u===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const d=typeof r.generator=="function"?r.generator:function(){return qu()};i.id=d(i,r)}else u===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var $u=Hu;const zu=xo.v4,Ku=$u,Sn=function(o,t){if(!(this instanceof Sn))return new Sn(o,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return zu()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=o};var Wu=Sn;Sn.prototype.request=function(o,t,e,r){const u=this;let i=null;const d=Array.isArray(o)&&typeof t=="function";if(this.options.version===1&&d)throw new TypeError("JSON-RPC 1.0 does not support batching");if(d||!d&&o&&typeof o=="object"&&typeof t=="function")r=t,i=o;else{typeof e=="function"&&(r=e,e=void 0);const A=typeof r=="function";try{i=Ku(o,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(k){if(A)return r(k);throw k}if(!A)return i}let x;try{x=JSON.stringify(i,this.options.replacer)}catch(A){return r(A)}return this.callServer(x,function(A,k){u._parseResponse(A,k,r)}),i};Sn.prototype._parseResponse=function(o,t,e){if(o){e(o);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(u){return e(u)}if(e.length===3)if(Array.isArray(r)){const u=function(d){return typeof d.error<"u"},i=function(d){return!u(d)};return e(null,r.filter(u),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const[aa,ca,ua]=[[],[],[]],Gu=BigInt(0),gn=BigInt(1),Zu=BigInt(2),ju=BigInt(7),Vu=BigInt(256),Xu=BigInt(113);for(let o=0,t=gn,e=1,r=0;o<24;o++){[e,r]=[r,(2*e+3*r)%5],aa.push(2*(5*r+e)),ca.push((o+1)*(o+2)/2%64);let u=Gu;for(let i=0;i<7;i++)t=(t<<gn^(t>>ju)*Xu)%Vu,t&Zu&&(u^=gn<<(gn<<BigInt(i))-gn);ua.push(u)}const[Yu,Ju]=_t.split(ua,!0),Hs=(o,t,e)=>e>32?_t.rotlBH(o,t,e):_t.rotlSH(o,t,e),$s=(o,t,e)=>e>32?_t.rotlBL(o,t,e):_t.rotlSL(o,t,e);function Qu(o,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let d=0;d<10;d++)e[d]=o[d]^o[d+10]^o[d+20]^o[d+30]^o[d+40];for(let d=0;d<10;d+=2){const l=(d+8)%10,x=(d+2)%10,A=e[x],k=e[x+1],I=Hs(A,k,1)^e[l],U=$s(A,k,1)^e[l+1];for(let R=0;R<50;R+=10)o[d+R]^=I,o[d+R+1]^=U}let u=o[2],i=o[3];for(let d=0;d<24;d++){const l=ca[d],x=Hs(u,i,l),A=$s(u,i,l),k=aa[d];u=o[k],i=o[k+1],o[k]=x,o[k+1]=A}for(let d=0;d<50;d+=10){for(let l=0;l<10;l++)e[l]=o[d+l];for(let l=0;l<10;l++)o[d+l]^=~e[(l+2)%10]&e[(l+4)%10]}o[0]^=Yu[r],o[1]^=Ju[r]}e.fill(0)}class gi extends es{constructor(t,e,r,u=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=u,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ie.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Wa(this.state)}keccak(){Qu(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Ie.exists(this);const{blockLen:e,state:r}=this;t=Rn(t);const u=t.length;for(let i=0;i<u;){const d=Math.min(e-this.pos,u-i);for(let l=0;l<d;l++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:u}=this;t[r]^=e,e&128&&r===u-1&&this.keccak(),t[u-1]^=128,this.keccak()}writeInto(t){Ie.exists(this,!1),Ie.bytes(t),this.finish();const e=this.state,{blockLen:r}=this;for(let u=0,i=t.length;u<i;){this.posOut>=r&&this.keccak();const d=Math.min(r-this.posOut,i-u);t.set(e.subarray(this.posOut,this.posOut+d),u),this.posOut+=d,u+=d}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ie.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ie.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:u,rounds:i,enableXOF:d}=this;return t||(t=new gi(e,r,u,d,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=u,t.enableXOF=d,t.destroyed=this.destroyed,t}}const hr=(o,t,e)=>Nr(()=>new gi(t,o,e));hr(6,144,224/8);hr(6,136,256/8);hr(6,104,384/8);hr(6,72,512/8);hr(1,144,224/8);hr(1,136,256/8);hr(1,104,384/8);hr(1,72,512/8);const ha=(o,t,e)=>ja((r={})=>new gi(t,o,r.dkLen===void 0?e:r.dkLen,!0));ha(31,168,128/8);ha(31,136,256/8);class fa extends es{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ie.hash(t);const r=Rn(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,i=new Uint8Array(u);i.set(r.length>u?t.create().update(r).digest():r);for(let d=0;d<i.length;d++)i[d]^=54;this.iHash.update(i),this.oHash=t.create();for(let d=0;d<i.length;d++)i[d]^=106;this.oHash.update(i),i.fill(0)}update(t){return Ie.exists(this),this.iHash.update(t),this}digestInto(t){Ie.exists(this),Ie.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:u,destroyed:i,blockLen:d,outputLen:l}=this;return t=t,t.finished=u,t.destroyed=i,t.blockLen=d,t.outputLen=l,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const la=(o,t,e)=>new fa(o,t).update(e).digest();la.create=(o,t)=>new fa(o,t);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const te=BigInt(0),ue=BigInt(1),sr=BigInt(2),Bn=BigInt(3),zs=BigInt(8),we=Object.freeze({a:te,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ue,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Ks=(o,t)=>(o+t/sr)/t,Dn={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(o){const{n:t}=we,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ue*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),u=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,d=BigInt("0x100000000000000000000000000000000"),l=Ks(i*o,t),x=Ks(-r*o,t);let A=it(o-l*e-x*u,t),k=it(-l*r-x*i,t);const I=A>d,U=k>d;if(I&&(A=t-A),U&&(k=t-k),A>d||k>d)throw new Error("splitScalarEndo: Endomorphism failed, k="+o);return{k1neg:I,k1:A,k2neg:U,k2:k}}},Gr=32,An=32,Ws=Gr+1,Gs=2*Gr+1;function Zs(o){const{a:t,b:e}=we,r=it(o*o),u=it(r*o);return it(u+t*o+e)}const qn=we.a===te;class th extends Error{constructor(t){super(t)}}function js(o){if(!(o instanceof Jt))throw new TypeError("JacobianPoint expected")}class Jt{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof le))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(le.ZERO)?Jt.ZERO:new Jt(t.x,t.y,ue)}static toAffineBatch(t){const e=sh(t.map(r=>r.z));return t.map((r,u)=>r.toAffine(e[u]))}static normalizeZ(t){return Jt.toAffineBatch(t).map(Jt.fromAffine)}equals(t){js(t);const{x:e,y:r,z:u}=this,{x:i,y:d,z:l}=t,x=it(u*u),A=it(l*l),k=it(e*A),I=it(i*x),U=it(it(r*l)*A),R=it(it(d*u)*x);return k===I&&U===R}negate(){return new Jt(this.x,it(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,u=it(t*t),i=it(e*e),d=it(i*i),l=t+i,x=it(sr*(it(l*l)-u-d)),A=it(Bn*u),k=it(A*A),I=it(k-sr*x),U=it(A*(x-I)-zs*d),R=it(sr*e*r);return new Jt(I,U,R)}add(t){js(t);const{x:e,y:r,z:u}=this,{x:i,y:d,z:l}=t;if(i===te||d===te)return this;if(e===te||r===te)return t;const x=it(u*u),A=it(l*l),k=it(e*A),I=it(i*x),U=it(it(r*l)*A),R=it(it(d*u)*x),L=it(I-k),T=it(R-U);if(L===te)return T===te?this.double():Jt.ZERO;const C=it(L*L),D=it(L*C),q=it(k*C),P=it(T*T-D-sr*q),tt=it(T*(q-P)-U*D),N=it(u*l*L);return new Jt(P,tt,N)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=Jt.ZERO;if(typeof t=="bigint"&&t===te)return e;let r=Js(t);if(r===ue)return this;if(!qn){let I=e,U=this;for(;r>te;)r&ue&&(I=I.add(U)),U=U.double(),r>>=ue;return I}let{k1neg:u,k1:i,k2neg:d,k2:l}=Dn.splitScalar(r),x=e,A=e,k=this;for(;i>te||l>te;)i&ue&&(x=x.add(k)),l&ue&&(A=A.add(k)),k=k.double(),i>>=ue,l>>=ue;return u&&(x=x.negate()),d&&(A=A.negate()),A=new Jt(it(A.x*Dn.beta),A.y,A.z),x.add(A)}precomputeWindow(t){const e=qn?128/t+1:256/t+1,r=[];let u=this,i=u;for(let d=0;d<e;d++){i=u,r.push(i);for(let l=1;l<2**(t-1);l++)i=i.add(u),r.push(i);u=i.double()}return r}wNAF(t,e){!e&&this.equals(Jt.BASE)&&(e=le.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let u=e&&Hi.get(e);u||(u=this.precomputeWindow(r),e&&r!==1&&(u=Jt.normalizeZ(u),Hi.set(e,u)));let i=Jt.ZERO,d=Jt.BASE;const l=1+(qn?128/r:256/r),x=2**(r-1),A=BigInt(2**r-1),k=2**r,I=BigInt(r);for(let U=0;U<l;U++){const R=U*x;let L=Number(t&A);t>>=I,L>x&&(L-=k,t+=ue);const T=R,C=R+Math.abs(L)-1,D=U%2!==0,q=L<0;L===0?d=d.add(Hn(D,u[T])):i=i.add(Hn(q,u[C]))}return{p:i,f:d}}multiply(t,e){let r=Js(t),u,i;if(qn){const{k1neg:d,k1:l,k2neg:x,k2:A}=Dn.splitScalar(r);let{p:k,f:I}=this.wNAF(l,e),{p:U,f:R}=this.wNAF(A,e);k=Hn(d,k),U=Hn(x,U),U=new Jt(it(U.x*Dn.beta),U.y,U.z),u=k.add(U),i=I.add(R)}else{const{p:d,f:l}=this.wNAF(r,e);u=d,i=l}return Jt.normalizeZ([u,i])[0]}toAffine(t){const{x:e,y:r,z:u}=this,i=this.equals(Jt.ZERO);t==null&&(t=i?zs:mi(u));const d=t,l=it(d*d),x=it(l*d),A=it(e*l),k=it(r*x),I=it(u*d);if(i)return le.ZERO;if(I!==ue)throw new Error("invZ was invalid");return new le(A,k)}}Jt.BASE=new Jt(we.Gx,we.Gy,ue);Jt.ZERO=new Jt(te,ue,te);function Hn(o,t){const e=t.negate();return o?e:t}const Hi=new WeakMap;class le{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Hi.delete(this)}hasEvenY(){return this.y%sr===te}static fromCompressedHex(t){const e=t.length===32,r=Pr(e?t:t.subarray(1));if(!Ri(r))throw new Error("Point is not on curve");const u=Zs(r);let i=ih(u);const d=(i&ue)===ue;e?d&&(i=it(-i)):(t[0]&1)===1!==d&&(i=it(-i));const l=new le(r,i);return l.assertValidity(),l}static fromUncompressedHex(t){const e=Pr(t.subarray(1,Gr+1)),r=Pr(t.subarray(Gr+1,Gr*2+1)),u=new le(e,r);return u.assertValidity(),u}static fromHex(t){const e=$i(t),r=e.length,u=e[0];if(r===Gr)return this.fromCompressedHex(e);if(r===Ws&&(u===2||u===3))return this.fromCompressedHex(e);if(r===Gs&&u===4)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Ws} compressed bytes or ${Gs} uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return le.BASE.multiply(zi(t))}static fromSignature(t,e,r){const{r:u,s:i}=ch(e);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const d=ah($i(t)),{n:l}=we,x=r===2||r===3?u+l:u,A=mi(x,l),k=it(-d*A,l),I=it(i*A,l),U=r&1?"03":"02",R=le.fromHex(U+Vr(x)),L=le.BASE.multiplyAndAddUnsafe(R,k,I);if(!L)throw new Error("Cannot recover signature: point at infinify");return L.assertValidity(),L}toRawBytes(t=!1){return Fr(this.toHex(t))}toHex(t=!1){const e=Vr(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${Vr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!Ri(e)||!Ri(r))throw new Error(t);const u=it(r*r),i=Zs(e);if(it(u-i)!==te)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new le(this.x,it(-this.y))}double(){return Jt.fromAffine(this).double().toAffine()}add(t){return Jt.fromAffine(this).add(Jt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Jt.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const u=Jt.fromAffine(this),i=e===te||e===ue||this!==le.BASE?u.multiplyUnsafe(e):u.multiply(e),d=Jt.fromAffine(t).multiplyUnsafe(r),l=i.add(d);return l.equals(Jt.ZERO)?void 0:l.toAffine()}}le.BASE=new le(we.Gx,we.Gy);le.ZERO=new le(te,te);function Vs(o){return Number.parseInt(o[0],16)>=8?"00"+o:o}function Xs(o){if(o.length<2||o[0]!==2)throw new Error(`Invalid signature integer tag: ${Qr(o)}`);const t=o[1],e=o.subarray(2,t+2);if(!t||e.length!==t)throw new Error("Invalid signature integer: wrong length");if(e[0]===0&&e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Pr(e),left:o.subarray(t+2)}}function eh(o){if(o.length<2||o[0]!=48)throw new Error(`Invalid signature tag: ${Qr(o)}`);if(o[1]!==o.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:e}=Xs(o.subarray(2)),{data:r,left:u}=Xs(e);if(u.length)throw new Error(`Invalid signature: left bytes after parsing: ${Qr(u)}`);return{r:t,s:r}}class Cr{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,r="Signature.fromCompact";if(typeof t!="string"&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const u=e?Qr(t):t;if(u.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new Cr(ii(u.slice(0,64)),ii(u.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if(typeof t!="string"&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s:u}=eh(e?t:Fr(t));return new Cr(r,u)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!si(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!si(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=we.n>>ue;return this.s>t}normalizeS(){return this.hasHighS()?new Cr(this.r,it(-this.s,we.n)):this}toDERRawBytes(){return Fr(this.toDERHex())}toDERHex(){const t=Vs(yn(this.s)),e=Vs(yn(this.r)),r=t.length/2,u=e.length/2,i=yn(r),d=yn(u);return`30${yn(u+r+4)}02${d}${e}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Fr(this.toCompactHex())}toCompactHex(){return Vr(this.r)+Vr(this.s)}}function mn(...o){if(!o.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(o.length===1)return o[0];const t=o.reduce((r,u)=>r+u.length,0),e=new Uint8Array(t);for(let r=0,u=0;r<o.length;r++){const i=o[r];e.set(i,u),u+=i.length}return e}const rh=Array.from({length:256},(o,t)=>t.toString(16).padStart(2,"0"));function Qr(o){if(!(o instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let e=0;e<o.length;e++)t+=rh[o[e]];return t}const nh=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Vr(o){if(typeof o!="bigint")throw new Error("Expected bigint");if(!(te<=o&&o<nh))throw new Error("Expected number 0 <= n < 2^256");return o.toString(16).padStart(64,"0")}function Ys(o){const t=Fr(Vr(o));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function yn(o){const t=o.toString(16);return t.length&1?`0${t}`:t}function ii(o){if(typeof o!="string")throw new TypeError("hexToNumber: expected string, got "+typeof o);return BigInt(`0x${o}`)}function Fr(o){if(typeof o!="string")throw new TypeError("hexToBytes: expected string, got "+typeof o);if(o.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+o.length);const t=new Uint8Array(o.length/2);for(let e=0;e<t.length;e++){const r=e*2,u=o.slice(r,r+2),i=Number.parseInt(u,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function Pr(o){return ii(Qr(o))}function $i(o){return o instanceof Uint8Array?Uint8Array.from(o):Fr(o)}function Js(o){if(typeof o=="number"&&Number.isSafeInteger(o)&&o>0)return BigInt(o);if(typeof o=="bigint"&&si(o))return o;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function it(o,t=we.P){const e=o%t;return e>=te?e:t+e}function Re(o,t){const{P:e}=we;let r=o;for(;t-- >te;)r*=r,r%=e;return r}function ih(o){const{P:t}=we,e=BigInt(6),r=BigInt(11),u=BigInt(22),i=BigInt(23),d=BigInt(44),l=BigInt(88),x=o*o*o%t,A=x*x*o%t,k=Re(A,Bn)*A%t,I=Re(k,Bn)*A%t,U=Re(I,sr)*x%t,R=Re(U,r)*U%t,L=Re(R,u)*R%t,T=Re(L,d)*L%t,C=Re(T,l)*T%t,D=Re(C,d)*L%t,q=Re(D,Bn)*A%t,P=Re(q,i)*R%t,tt=Re(P,e)*x%t,N=Re(tt,sr);if(N*N%t!==o)throw new Error("Cannot find square root");return N}function mi(o,t=we.P){if(o===te||t<=te)throw new Error(`invert: expected positive integers, got n=${o} mod=${t}`);let e=it(o,t),r=t,u=te,i=ue;for(;e!==te;){const l=r/e,x=r%e,A=u-i*l;r=e,e=x,u=i,i=A}if(r!==ue)throw new Error("invert: does not exist");return it(u,t)}function sh(o,t=we.P){const e=new Array(o.length),r=o.reduce((i,d,l)=>d===te?i:(e[l]=i,it(i*d,t)),ue),u=mi(r,t);return o.reduceRight((i,d,l)=>d===te?i:(e[l]=it(i*e[l],t),it(i*d,t)),u),e}function oh(o){const t=o.length*8-An*8,e=Pr(o);return t>0?e>>BigInt(t):e}function ah(o,t=!1){const e=oh(o);if(t)return e;const{n:r}=we;return e>=r?e-r:e}let Xr,ki;function si(o){return te<o&&o<we.n}function Ri(o){return te<o&&o<we.P}function zi(o){let t;if(typeof o=="bigint")t=o;else if(typeof o=="number"&&Number.isSafeInteger(o)&&o>0)t=BigInt(o);else if(typeof o=="string"){if(o.length!==2*An)throw new Error("Expected 32 bytes of private key");t=ii(o)}else if(o instanceof Uint8Array){if(o.length!==An)throw new Error("Expected 32 bytes of private key");t=Pr(o)}else throw new TypeError("Expected valid private key");if(!si(t))throw new Error("Expected private key: 0 < key < n");return t}function ch(o){if(o instanceof Cr)return o.assertValidity(),o;try{return Cr.fromDER(o)}catch{return Cr.fromCompact(o)}}le.BASE._setWindowSize(8);const Se={node:vo,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},$n={},Ur={bytesToHex:Qr,hexToBytes:Fr,concatBytes:mn,mod:it,invert:mi,isValidPrivateKey(o){try{return zi(o),!0}catch{return!1}},_bigintTo32Bytes:Ys,_normalizePrivateKey:zi,hashToPrivateKey:o=>{o=$i(o);const t=An+8;if(o.length<t||o.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const e=it(Pr(o),we.n-ue)+ue;return Ys(e)},randomBytes:(o=32)=>{if(Se.web)return Se.web.getRandomValues(new Uint8Array(o));if(Se.node){const{randomBytes:t}=Se.node;return Uint8Array.from(t(o))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ur.hashToPrivateKey(Ur.randomBytes(An+8)),precompute(o=8,t=le.BASE){const e=t===le.BASE?t:new le(t.x,t.y);return e._setWindowSize(o),e.multiply(Bn),e},sha256:async(...o)=>{if(Se.web){const t=await Se.web.subtle.digest("SHA-256",mn(...o));return new Uint8Array(t)}else if(Se.node){const{createHash:t}=Se.node,e=t("sha256");return o.forEach(r=>e.update(r)),Uint8Array.from(e.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(o,...t)=>{if(Se.web){const e=await Se.web.subtle.importKey("raw",o,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=mn(...t),u=await Se.web.subtle.sign("HMAC",e,r);return new Uint8Array(u)}else if(Se.node){const{createHmac:e}=Se.node,r=e("sha256",o);return t.forEach(u=>r.update(u)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(o,...t)=>{let e=$n[o];if(e===void 0){const r=await Ur.sha256(Uint8Array.from(o,u=>u.charCodeAt(0)));e=mn(r,r),$n[o]=e}return Ur.sha256(e,...t)},taggedHashSync:(o,...t)=>{if(typeof Xr!="function")throw new th("sha256Sync is undefined, you need to set it");let e=$n[o];if(e===void 0){const r=Xr(Uint8Array.from(o,u=>u.charCodeAt(0)));e=mn(r,r),$n[o]=e}return Xr(e,...t)},_JacobianPoint:Jt};Object.defineProperties(Ur,{sha256Sync:{configurable:!1,get(){return Xr},set(o){Xr||(Xr=o)}},hmacSha256Sync:{configurable:!1,get(){return ki},set(o){ki||(ki=o)}}});Or.sha512Sync=(...o)=>Ec(Or.concatBytes(...o));Or.randomPrivateKey;const Qs=()=>{const o=Or.randomPrivateKey(),t=Ki(o),e=new Uint8Array(64);return e.set(o),e.set(t,32),{publicKey:t,secretKey:e}},Ki=ss.getPublicKey;function to(o){try{return de.fromHex(o,!0),!0}catch{return!1}}const uh=(o,t)=>ss.sign(o,t.slice(0,32)),hh=ss.verify,tn=o=>zt.Buffer.isBuffer(o)?o:o instanceof Uint8Array?zt.Buffer.from(o.buffer,o.byteOffset,o.byteLength):zt.Buffer.from(o);class fh{constructor(t){Object.assign(this,t)}encode(){return zt.Buffer.from(Oo(Wn,this))}static decode(t){return No(Wn,this,t)}static decodeUnchecked(t){return Uo(Wn,this,t)}}const Wn=new Map;let da;const lh=32,$e=32;function dh(o){return o._bn!==void 0}let eo=1;da=Symbol.toStringTag;class lt extends fh{constructor(t){if(super({}),this._bn=void 0,dh(t))this._bn=t._bn;else{if(typeof t=="string"){const e=re.decode(t);if(e.length!=$e)throw new Error("Invalid public key input");this._bn=new Yn(e)}else this._bn=new Yn(t);if(this._bn.byteLength()>$e)throw new Error("Invalid public key input")}}static unique(){const t=new lt(eo);return eo+=1,new lt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return re.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(zt.Buffer);if(t.length===$e)return t;const e=zt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[da](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const u=zt.Buffer.concat([t.toBuffer(),zt.Buffer.from(e),r.toBuffer()]),i=Ni(u);return new lt(i)}static createProgramAddressSync(t,e){let r=zt.Buffer.alloc(0);t.forEach(function(i){if(i.length>lh)throw new TypeError("Max seed length exceeded");r=zt.Buffer.concat([r,tn(i)])}),r=zt.Buffer.concat([r,e.toBuffer(),zt.Buffer.from("ProgramDerivedAddress")]);const u=Ni(r);if(to(u))throw new Error("Invalid seeds, address must fall off the curve");return new lt(u)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,u;for(;r!=0;){try{const i=t.concat(zt.Buffer.from([r]));u=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[u,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new lt(t);return to(e.toBytes())}}lt.default=new lt("11111111111111111111111111111111");Wn.set(lt,{kind:"struct",fields:[["_bn","u256"]]});new lt("BPFLoader1111111111111111111111111111111111");const Yr=1280-40-8,pa=127,Wi=64;class ga extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ga.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ma extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ma.prototype,"name",{value:"TransactionExpiredTimeoutError"});class vn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(vn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class oi{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,d)=>{r.set(i.toBase58(),d)});const u=i=>{const d=r.get(i.toBase58());if(d===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return d};return t.map(i=>({programIdIndex:u(i.programId),accountKeyIndexes:i.keys.map(d=>u(d.pubkey)),data:i.data}))}}const Gt=(o="publicKey")=>fe(32,o),Zr=(o="string")=>{const t=ot([ft("length"),ft("lengthPadding"),fe(Lr(ft(),-8),"chars")],o),e=t.decode.bind(t),r=t.encode.bind(t),u=t;return u.decode=(i,d)=>e(i,d).chars.toString(),u.encode=(i,d,l)=>{const x={chars:zt.Buffer.from(i,"utf8")};return r(x,d,l)},u.alloc=i=>ft().span+ft().span+zt.Buffer.from(i,"utf8").length,u},ph=(o="authorized")=>ot([Gt("staker"),Gt("withdrawer")],o),gh=(o="lockup")=>ot([Ae("unixTimestamp"),Ae("epoch"),Gt("custodian")],o),mh=(o="voteInit")=>ot([Gt("nodePubkey"),Gt("authorizedVoter"),Gt("authorizedWithdrawer"),Qt("commission")],o),yh=(o="voteAuthorizeWithSeedArgs")=>ot([ft("voteAuthorizationType"),Gt("currentAuthorityDerivedKeyOwnerPubkey"),Zr("currentAuthorityDerivedKeySeed"),Gt("newAuthorized")],o);function Ue(o){let t=0,e=0;for(;;){let r=o.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Le(o,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){o.push(r);break}else r|=128,o.push(r)}}function pe(o,t){if(!o)throw new Error(t||"Assertion failed")}class yi{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,u=d=>{const l=d.toBase58();let x=r.get(l);return x===void 0&&(x={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(l,x)),x},i=u(e);i.isSigner=!0,i.isWritable=!0;for(const d of t){u(d.programId).isInvoked=!0;for(const l of d.keys){const x=u(l.pubkey);x.isSigner||(x.isSigner=l.isSigner),x.isWritable||(x.isWritable=l.isWritable)}}return new yi(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];pe(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,x])=>x.isSigner&&x.isWritable),r=t.filter(([,x])=>x.isSigner&&!x.isWritable),u=t.filter(([,x])=>!x.isSigner&&x.isWritable),i=t.filter(([,x])=>!x.isSigner&&!x.isWritable),d={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{pe(e.length>0,"Expected at least one writable signer key");const[x]=e[0];pe(x===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...e.map(([x])=>new lt(x)),...r.map(([x])=>new lt(x)),...u.map(([x])=>new lt(x)),...i.map(([x])=>new lt(x))];return[d,l]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,d=>!d.isSigner&&!d.isInvoked&&d.isWritable),[u,i]=this.drainKeysFoundInLookupTable(t.state.addresses,d=>!d.isSigner&&!d.isInvoked&&!d.isWritable);if(!(e.length===0&&u.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:u},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,u=new Array;for(const[i,d]of this.keyMetaMap.entries())if(e(d)){const l=new lt(i),x=t.findIndex(A=>A.equals(l));x>=0&&(pe(x<256,"Max lookup table index exceeded"),r.push(x),u.push(l),this.keyMetaMap.delete(i))}return[r,u]}}class cr{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new lt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:re.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new oi(this.staticAccountKeys)}static compile(t){const e=yi.compile(t.instructions,t.payerKey),[r,u]=e.getMessageComponents(),d=new oi(u).compileInstructions(t.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:re.encode(l.data)}));return new cr({header:r,accountKeys:u,recentBlockhash:t.recentBlockhash,instructions:d})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Le(e,t);const r=this.instructions.map(I=>{const{accounts:U,programIdIndex:R}=I,L=Array.from(re.decode(I.data));let T=[];Le(T,U.length);let C=[];return Le(C,L.length),{programIdIndex:R,keyIndicesCount:zt.Buffer.from(T),keyIndices:U,dataLength:zt.Buffer.from(C),data:L}});let u=[];Le(u,r.length);let i=zt.Buffer.alloc(Yr);zt.Buffer.from(u).copy(i);let d=u.length;r.forEach(I=>{const R=ot([Qt("programIdIndex"),fe(I.keyIndicesCount.length,"keyIndicesCount"),Be(Qt("keyIndex"),I.keyIndices.length,"keyIndices"),fe(I.dataLength.length,"dataLength"),Be(Qt("userdatum"),I.data.length,"data")]).encode(I,i,d);d+=R}),i=i.slice(0,d);const l=ot([fe(1,"numRequiredSignatures"),fe(1,"numReadonlySignedAccounts"),fe(1,"numReadonlyUnsignedAccounts"),fe(e.length,"keyCount"),Be(Gt("key"),t,"keys"),Gt("recentBlockhash")]),x={numRequiredSignatures:zt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:zt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:zt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:zt.Buffer.from(e),keys:this.accountKeys.map(I=>tn(I.toBytes())),recentBlockhash:re.decode(this.recentBlockhash)};let A=zt.Buffer.alloc(2048);const k=l.encode(x,A);return i.copy(A,k),A.slice(0,k+i.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&pa))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const u=e.shift(),i=e.shift(),d=Ue(e);let l=[];for(let U=0;U<d;U++){const R=e.slice(0,$e);e=e.slice($e),l.push(new lt(zt.Buffer.from(R)))}const x=e.slice(0,$e);e=e.slice($e);const A=Ue(e);let k=[];for(let U=0;U<A;U++){const R=e.shift(),L=Ue(e),T=e.slice(0,L);e=e.slice(L);const C=Ue(e),D=e.slice(0,C),q=re.encode(zt.Buffer.from(D));e=e.slice(C),k.push({programIdIndex:R,accounts:T,data:q})}const I={header:{numRequiredSignatures:r,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:i},recentBlockhash:re.encode(zt.Buffer.from(x)),accountKeys:l,instructions:k};return new cr(I)}}class ai{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new oi(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const u=t-r,i=this.addressTableLookups.reduce((d,l)=>d+l.writableIndexes.length,0);return u<i}else if(t>=this.header.numRequiredSignatures){const u=t-e,d=r-e-this.header.numReadonlyUnsignedAccounts;return u<d}else{const u=e-this.header.numReadonlySignedAccounts;return t<u}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const u=t.find(i=>i.key.equals(r.accountKey));if(!u)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<u.state.addresses.length)e.writable.push(u.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<u.state.addresses.length)e.readonly.push(u.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=yi.compile(t.instructions,t.payerKey),r=new Array,u={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const k of i){const I=e.extractTableLookup(k);if(I!==void 0){const[U,{writable:R,readonly:L}]=I;r.push(U),u.writable.push(...R),u.readonly.push(...L)}}const[d,l]=e.getMessageComponents(),A=new oi(l,u).compileInstructions(t.instructions);return new ai({header:d,staticAccountKeys:l,recentBlockhash:t.recentBlockhash,compiledInstructions:A,addressTableLookups:r})}serialize(){const t=Array();Le(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Le(r,this.compiledInstructions.length);const u=this.serializeAddressTableLookups(),i=Array();Le(i,this.addressTableLookups.length);const d=ot([Qt("prefix"),ot([Qt("numRequiredSignatures"),Qt("numReadonlySignedAccounts"),Qt("numReadonlyUnsignedAccounts")],"header"),fe(t.length,"staticAccountKeysLength"),Be(Gt(),this.staticAccountKeys.length,"staticAccountKeys"),Gt("recentBlockhash"),fe(r.length,"instructionsLength"),fe(e.length,"serializedInstructions"),fe(i.length,"addressTableLookupsLength"),fe(u.length,"serializedAddressTableLookups")]),l=new Uint8Array(Yr),x=1<<7,A=d.encode({prefix:x,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(k=>k.toBytes()),recentBlockhash:re.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:u},l);return l.slice(0,A)}serializeInstructions(){let t=0;const e=new Uint8Array(Yr);for(const r of this.compiledInstructions){const u=Array();Le(u,r.accountKeyIndexes.length);const i=Array();Le(i,r.data.length);const d=ot([Qt("programIdIndex"),fe(u.length,"encodedAccountKeyIndexesLength"),Be(Qt(),r.accountKeyIndexes.length,"accountKeyIndexes"),fe(i.length,"encodedDataLength"),fe(r.data.length,"data")]);t+=d.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(u),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Yr);for(const r of this.addressTableLookups){const u=Array();Le(u,r.writableIndexes.length);const i=Array();Le(i,r.readonlyIndexes.length);const d=ot([Gt("accountKey"),fe(u.length,"encodedWritableIndexesLength"),Be(Qt(),r.writableIndexes.length,"writableIndexes"),fe(i.length,"encodedReadonlyIndexesLength"),Be(Qt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=d.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(u),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),u=r&pa;pe(r!==u,"Expected versioned message but received legacy message");const i=u;pe(i===0,`Expected versioned message with version 0 but found version ${i}`);const d={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},l=[],x=Ue(e);for(let L=0;L<x;L++)l.push(new lt(e.splice(0,$e)));const A=re.encode(e.splice(0,$e)),k=Ue(e),I=[];for(let L=0;L<k;L++){const T=e.shift(),C=Ue(e),D=e.splice(0,C),q=Ue(e),P=new Uint8Array(e.splice(0,q));I.push({programIdIndex:T,accountKeyIndexes:D,data:P})}const U=Ue(e),R=[];for(let L=0;L<U;L++){const T=new lt(e.splice(0,$e)),C=Ue(e),D=e.splice(0,C),q=Ue(e),P=e.splice(0,q);R.push({accountKey:T,writableIndexes:D,readonlyIndexes:P})}return new ai({header:d,staticAccountKeys:l,recentBlockhash:A,compiledInstructions:I,addressTableLookups:R})}}let He;(function(o){o[o.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",o[o.PROCESSED=1]="PROCESSED",o[o.TIMED_OUT=2]="TIMED_OUT",o[o.NONCE_INVALID=3]="NONCE_INVALID"})(He||(He={}));const wh=zt.Buffer.alloc(Wi).fill(0);class ro{constructor(t){this.keys=void 0,this.programId=void 0,this.data=zt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class nr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new ro(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let T=0;T<e.length;T++)if(e[T].programId===void 0)throw new Error(`Transaction instruction index ${T} has undefined program id`);const u=[],i=[];e.forEach(T=>{T.keys.forEach(D=>{i.push({...D})});const C=T.programId.toString();u.includes(C)||u.push(C)}),u.forEach(T=>{i.push({pubkey:new lt(T),isSigner:!1,isWritable:!1})});const d=[];i.forEach(T=>{const C=T.pubkey.toString(),D=d.findIndex(q=>q.pubkey.toString()===C);D>-1?(d[D].isWritable=d[D].isWritable||T.isWritable,d[D].isSigner=d[D].isSigner||T.isSigner):d.push(T)}),d.sort(function(T,C){return T.isSigner!==C.isSigner?T.isSigner?-1:1:T.isWritable!==C.isWritable?T.isWritable?-1:1:T.pubkey.toBase58().localeCompare(C.pubkey.toBase58())});const l=d.findIndex(T=>T.pubkey.equals(r));if(l>-1){const[T]=d.splice(l,1);T.isSigner=!0,T.isWritable=!0,d.unshift(T)}else d.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const T of this.signatures){const C=d.findIndex(D=>D.pubkey.equals(T.publicKey));if(C>-1)d[C].isSigner||(d[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${T.publicKey.toString()}`)}let x=0,A=0,k=0;const I=[],U=[];d.forEach(({pubkey:T,isSigner:C,isWritable:D})=>{C?(I.push(T.toString()),x+=1,D||(A+=1)):(U.push(T.toString()),D||(k+=1))});const R=I.concat(U),L=e.map(T=>{const{data:C,programId:D}=T;return{programIdIndex:R.indexOf(D.toString()),accounts:T.keys.map(q=>R.indexOf(q.pubkey.toString())),data:re.encode(C)}});return L.forEach(T=>{pe(T.programIdIndex>=0),T.accounts.forEach(C=>pe(C>=0))}),new cr({header:{numRequiredSignatures:x,numReadonlySignedAccounts:A,numReadonlyUnsignedAccounts:k},accountKeys:R,recentBlockhash:t,instructions:L})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((u,i)=>e[i].equals(u.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const u=r.toString();return e.has(u)?!1:(e.add(u),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const d=i.publicKey.toString();e.has(d)||(e.add(d),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const u=this._compile();this._partialSign(u,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const d=i.publicKey.toString();e.has(d)||(e.add(d),r.push(i))}const u=this._compile();this._partialSign(u,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(u=>{const i=uh(r,u.secretKey);this._addSignature(u.publicKey,tn(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){pe(e.length===64);const r=this.signatures.findIndex(u=>t.equals(u.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=zt.Buffer.from(e)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),t===void 0?!0:t)}_verifySignatures(t,e){for(const{signature:r,publicKey:u}of this.signatures)if(r===null){if(e)return!1}else if(!hh(r,t,u.toBytes()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),u=this.serializeMessage();if(r&&!this._verifySignatures(u,e))throw new Error("Signature verification failed");return this._serialize(u)}_serialize(t){const{signatures:e}=this,r=[];Le(r,e.length);const u=r.length+e.length*64+t.length,i=zt.Buffer.alloc(u);return pe(e.length<256),zt.Buffer.from(r).copy(i,0),e.forEach(({signature:d},l)=>{d!==null&&(pe(d.length===64,"signature has invalid length"),zt.Buffer.from(d).copy(i,r.length+l*64))}),t.copy(i,r.length+e.length*64),pe(i.length<=Yr,`Transaction too large: ${i.length} > ${Yr}`),i}get keys(){return pe(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return pe(this.instructions.length===1),this.instructions[0].programId}get data(){return pe(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Ue(e);let u=[];for(let i=0;i<r;i++){const d=e.slice(0,Wi);e=e.slice(Wi),u.push(re.encode(zt.Buffer.from(d)))}return nr.populate(cr.from(e),u)}static populate(t,e=[]){const r=new nr;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((u,i)=>{const d={signature:u==re.encode(wh)?null:re.decode(u),publicKey:t.accountKeys[i]};r.signatures.push(d)}),t.instructions.forEach(u=>{const i=u.accounts.map(d=>{const l=t.accountKeys[d];return{pubkey:l,isSigner:r.signatures.some(x=>x.publicKey.toString()===l.toString())||t.isAccountSigner(d),isWritable:t.isAccountWritable(d)}});r.instructions.push(new ro({keys:i,programId:t.accountKeys[u.programIdIndex],data:re.decode(u.data)}))}),r._message=t,r._json=r.toJSON(),r}}new lt("SysvarC1ock11111111111111111111111111111111");new lt("SysvarEpochSchedu1e111111111111111111111111");new lt("Sysvar1nstructions1111111111111111111111111");new lt("SysvarRecentB1ockHashes11111111111111111111");new lt("SysvarRent111111111111111111111111111111111");new lt("SysvarRewards111111111111111111111111111111");new lt("SysvarS1otHashes111111111111111111111111111");new lt("SysvarS1otHistory11111111111111111111111111");new lt("SysvarStakeHistory1111111111111111111111111");function Wr(o){return new Promise(t=>setTimeout(t,o))}const vh=ve("lamportsPerSignature"),ya=ot([ft("version"),ft("state"),Gt("authorizedPubkey"),Gt("nonce"),ot([vh],"feeCalculator")]);ya.span;class Ms{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=ya.decode(tn(t),0);return new Ms({authorizedPubkey:new lt(e.authorizedPubkey),nonce:new lt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const bh=o=>{const t=o.decode.bind(o),e=o.encode.bind(o);return{decode:t,encode:e}},xh=o=>t=>{const e=fe(o,t),{encode:r,decode:u}=bh(e),i=e;return i.decode=(d,l)=>{const x=u(d,l);return du(zt.Buffer.from(x))},i.encode=(d,l,x)=>{const A=mu(d,o);return r(A,l,x)},i},en=xh(8);Object.freeze({Create:{index:0,layout:ot([ft("instruction"),Ae("lamports"),Ae("space"),Gt("programId")])},Assign:{index:1,layout:ot([ft("instruction"),Gt("programId")])},Transfer:{index:2,layout:ot([ft("instruction"),en("lamports")])},CreateWithSeed:{index:3,layout:ot([ft("instruction"),Gt("base"),Zr("seed"),Ae("lamports"),Ae("space"),Gt("programId")])},AdvanceNonceAccount:{index:4,layout:ot([ft("instruction")])},WithdrawNonceAccount:{index:5,layout:ot([ft("instruction"),Ae("lamports")])},InitializeNonceAccount:{index:6,layout:ot([ft("instruction"),Gt("authorized")])},AuthorizeNonceAccount:{index:7,layout:ot([ft("instruction"),Gt("authorized")])},Allocate:{index:8,layout:ot([ft("instruction"),Ae("space")])},AllocateWithSeed:{index:9,layout:ot([ft("instruction"),Gt("base"),Zr("seed"),Ae("space"),Gt("programId")])},AssignWithSeed:{index:10,layout:ot([ft("instruction"),Gt("base"),Zr("seed"),Gt("programId")])},TransferWithSeed:{index:11,layout:ot([ft("instruction"),en("lamports"),Zr("seed"),Gt("programId")])},UpgradeNonceAccount:{index:12,layout:ot([ft("instruction")])}});new lt("11111111111111111111111111111111");new lt("BPFLoader2111111111111111111111111111111111");var Eh=Object.prototype.toString,Bh=Object.keys||function(o){var t=[];for(var e in o)t.push(e);return t};function bn(o,t){var e,r,u,i,d,l,x;if(o===!0)return"true";if(o===!1)return"false";switch(typeof o){case"object":if(o===null)return null;if(o.toJSON&&typeof o.toJSON=="function")return bn(o.toJSON(),t);if(x=Eh.call(o),x==="[object Array]"){for(u="[",r=o.length-1,e=0;e<r;e++)u+=bn(o[e],!0)+",";return r>-1&&(u+=bn(o[e],!0)),u+"]"}else if(x==="[object Object]"){for(i=Bh(o).sort(),r=i.length,u="",e=0;e<r;)d=i[e],l=bn(o[d],!1),l!==void 0&&(u&&(u+=","),u+=JSON.stringify(d)+":"+l),e++;return"{"+u+"}"}else return JSON.stringify(o);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(o);default:return isFinite(o)?o:null}}var Mh=function(o){var t=bn(o,!1);if(t!==void 0)return""+t},_h=Mh;const wn=32;function Ti(o){let t=0;for(;o>1;)o/=2,t++;return t}function Sh(o){return o===0?1:(o--,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o|=o>>16,o|=o>>32,o+1)}class Ah{constructor(t,e,r,u,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=u,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ti(Sh(t+wn+1))-Ti(wn)-1,r=this.getSlotsInEpoch(e),u=t-(r-wn);return[e,u]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),u=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[u,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*wn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ti(wn)):this.slotsPerEpoch}}class no extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class at extends Error{constructor({code:t,message:e,data:r},u){super(u!=null?`${u}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Ih=globalThis.fetch;const kh=160,Rh=64,Th=kh/Rh,Uh=1e3/Th;function Lh(o,t){let e;try{e=o.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==o.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${o.index}`);return e}const io=56;class so{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Lh(Ch,t),r=t.length-io;pe(r>=0,"lookup table is invalid"),pe(r%32===0,"lookup table is invalid");const u=r/32,{addresses:i}=ot([Be(Gt(),u,"addresses")]).decode(t.slice(io));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new lt(e.authority[0]):void 0,addresses:i.map(d=>new lt(d))}}}const Ch={index:1,layout:ot([ft("typeIndex"),en("deactivationSlot"),ve("lastExtendedSlot"),Qt("lastExtendedStartIndex"),Qt(),Be(Gt(),Lr(Qt(),-1),"authority")])},Fh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Ph(o){const t=o.match(Fh);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${o}\``);const[e,r,u,i]=t,d=o.startsWith("https:")?"wss:":"ws:",l=u==null?null:parseInt(u.slice(1),10),x=l==null?"":`:${l+1}`;return`${d}//${r}${x}${i}`}var Ui;const me=Pn(ms(lt),Y(),o=>new lt(o)),wa=ys([Y(),he("base64")]),_s=Pn(ms(zt.Buffer),wa,o=>zt.Buffer.from(o[0],"base64")),Oh=30*1e3;function Nh(o){if(/^https?:/.test(o)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return o}function ce(o){let t,e;if(typeof o=="string")t=o;else if(o){const{commitment:r,...u}=o;t=r,e=u}return{commitment:t,config:e}}function va(o){return _e([z({jsonrpc:he("2.0"),id:Y(),result:o}),z({jsonrpc:he("2.0"),id:Y(),error:z({code:Fn(),message:Y(),data:yt(Mu())})})])}const Dh=va(Fn());function Wt(o){return Pn(va(o),Dh,t=>"error"in t?t:{...t,result:Q(t.result,o)})}function ge(o){return Wt(z({context:z({slot:F()}),value:o}))}function wi(o){return z({context:z({slot:F()}),value:o})}function Li(o,t){return o===0?new ai({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new lt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:re.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new cr(t)}const qh=z({foundation:F(),foundationTerm:F(),initial:F(),taper:F(),terminal:F()}),Hh=Wt(rt(et(z({epoch:F(),effectiveSlot:F(),amount:F(),postBalance:F(),commission:yt(et(F()))})))),$h=z({total:F(),validator:F(),foundation:F(),epoch:F()}),zh=z({epoch:F(),slotIndex:F(),slotsInEpoch:F(),absoluteSlot:F(),blockHeight:yt(F()),transactionCount:yt(F())}),Kh=z({slotsPerEpoch:F(),leaderScheduleSlotOffset:F(),warmup:Xe(),firstNormalEpoch:F(),firstNormalSlot:F()}),Wh=ia(Y(),rt(F())),$r=et(_e([z({}),Y()])),Gh=z({err:$r}),Zh=he("receivedSignature"),jh=z({"solana-core":Y(),"feature-set":yt(F())}),oo=ge(z({err:et(_e([z({}),Y()])),logs:et(rt(Y())),accounts:yt(et(rt(et(z({executable:Xe(),owner:Y(),lamports:F(),data:rt(Y()),rentEpoch:yt(F())}))))),unitsConsumed:yt(F()),returnData:yt(et(z({programId:Y(),data:ys([Y(),he("base64")])})))})),Vh=ge(z({byIdentity:ia(Y(),rt(F())),range:z({firstSlot:F(),lastSlot:F()})}));function Xh(o,t,e,r,u,i){const d=e||Ih;let l;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let x;return r&&(x=async(k,I)=>{const U=await new Promise((R,L)=>{try{r(k,I,(T,C)=>R([T,C]))}catch(T){L(T)}});return await d(...U)}),new Wu(async(k,I)=>{const U={method:"POST",body:k,agent:l,headers:Object.assign({"Content-Type":"application/json"},t||{},Xf)};try{let R=5,L,T=500;for(;x?L=await x(o,U):L=await d(o,U),!(L.status!==429||u===!0||(R-=1,R===0));)console.log(`Server responded with ${L.status} ${L.statusText}.  Retrying after ${T}ms delay...`),await Wr(T),T*=2;const C=await L.text();L.ok?I(null,C):I(new Error(`${L.status} ${L.statusText}: ${C}`))}catch(R){R instanceof Error&&I(R)}},{})}function Yh(o){return(t,e)=>new Promise((r,u)=>{o.request(t,e,(i,d)=>{if(i){u(i);return}r(d)})})}function Jh(o){return t=>new Promise((e,r)=>{t.length===0&&e([]);const u=t.map(i=>o.request(i.methodName,i.args));o.request(u,(i,d)=>{if(i){r(i);return}e(d)})})}const Qh=Wt(qh),tf=Wt($h),ef=Wt(zh),rf=Wt(Kh),nf=Wt(Wh),sf=Wt(F()),of=ge(z({total:F(),circulating:F(),nonCirculating:F(),nonCirculatingAccounts:rt(me)})),Gi=z({amount:Y(),uiAmount:et(F()),decimals:F(),uiAmountString:yt(Y())}),af=ge(rt(z({address:me,amount:Y(),uiAmount:et(F()),decimals:F(),uiAmountString:yt(Y())}))),cf=ge(rt(z({pubkey:me,account:z({executable:Xe(),owner:me,lamports:F(),data:_s,rentEpoch:F()})}))),Zi=z({program:Y(),parsed:Fn(),space:F()}),uf=ge(rt(z({pubkey:me,account:z({executable:Xe(),owner:me,lamports:F(),data:Zi,rentEpoch:F()})}))),hf=ge(rt(z({lamports:F(),address:me}))),In=z({executable:Xe(),owner:me,lamports:F(),data:_s,rentEpoch:F()}),ff=z({pubkey:me,account:In}),lf=Pn(_e([ms(zt.Buffer),Zi]),_e([wa,Zi]),o=>Array.isArray(o)?Q(o,_s):o),ji=z({executable:Xe(),owner:me,lamports:F(),data:lf,rentEpoch:F()}),df=z({pubkey:me,account:ji}),pf=z({state:_e([he("active"),he("inactive"),he("activating"),he("deactivating")]),active:F(),inactive:F()}),gf=Wt(rt(z({signature:Y(),slot:F(),err:$r,memo:et(Y()),blockTime:yt(et(F()))}))),mf=Wt(rt(z({signature:Y(),slot:F(),err:$r,memo:et(Y()),blockTime:yt(et(F()))}))),yf=z({subscription:F(),result:wi(In)}),wf=z({pubkey:me,account:In}),vf=z({subscription:F(),result:wi(wf)}),bf=z({parent:F(),slot:F(),root:F()}),xf=z({subscription:F(),result:bf}),Ef=_e([z({type:_e([he("firstShredReceived"),he("completed"),he("optimisticConfirmation"),he("root")]),slot:F(),timestamp:F()}),z({type:he("createdBank"),parent:F(),slot:F(),timestamp:F()}),z({type:he("frozen"),slot:F(),timestamp:F(),stats:z({numTransactionEntries:F(),numSuccessfulTransactions:F(),numFailedTransactions:F(),maxTransactionsPerEntry:F()})}),z({type:he("dead"),slot:F(),timestamp:F(),err:Y()})]),Bf=z({subscription:F(),result:Ef}),Mf=z({subscription:F(),result:wi(_e([Gh,Zh]))}),_f=z({subscription:F(),result:F()}),Sf=z({pubkey:Y(),gossip:et(Y()),tpu:et(Y()),rpc:et(Y()),version:et(Y())}),ao=z({votePubkey:Y(),nodePubkey:Y(),activatedStake:F(),epochVoteAccount:Xe(),epochCredits:rt(ys([F(),F(),F()])),commission:F(),lastVote:F(),rootSlot:et(F())}),Af=Wt(z({current:rt(ao),delinquent:rt(ao)})),If=_e([he("processed"),he("confirmed"),he("finalized")]),kf=z({slot:F(),confirmations:et(F()),err:$r,confirmationStatus:yt(If)}),Rf=ge(rt(et(kf))),Tf=Wt(F()),ba=z({accountKey:me,writableIndexes:rt(F()),readonlyIndexes:rt(F())}),Ss=z({signatures:rt(Y()),message:z({accountKeys:rt(Y()),header:z({numRequiredSignatures:F(),numReadonlySignedAccounts:F(),numReadonlyUnsignedAccounts:F()}),instructions:rt(z({accounts:rt(F()),data:Y(),programIdIndex:F()})),recentBlockhash:Y(),addressTableLookups:yt(rt(ba))})}),xa=z({pubkey:me,signer:Xe(),writable:Xe(),source:yt(_e([he("transaction"),he("lookupTable")]))}),Ea=z({accountKeys:rt(xa),signatures:rt(Y())}),Ba=z({parsed:Fn(),program:Y(),programId:me}),Ma=z({accounts:rt(me),data:Y(),programId:me}),Uf=_e([Ma,Ba]),Lf=_e([z({parsed:Fn(),program:Y(),programId:Y()}),z({accounts:rt(Y()),data:Y(),programId:Y()})]),_a=Pn(Uf,Lf,o=>"accounts"in o?Q(o,Ma):Q(o,Ba)),Sa=z({signatures:rt(Y()),message:z({accountKeys:rt(xa),instructions:rt(_a),recentBlockhash:Y(),addressTableLookups:yt(et(rt(ba)))})}),ci=z({accountIndex:F(),mint:Y(),owner:yt(Y()),uiTokenAmount:Gi}),Aa=z({writable:rt(me),readonly:rt(me)}),vi=z({err:$r,fee:F(),innerInstructions:yt(et(rt(z({index:F(),instructions:rt(z({accounts:rt(F()),data:Y(),programIdIndex:F()}))})))),preBalances:rt(F()),postBalances:rt(F()),logMessages:yt(et(rt(Y()))),preTokenBalances:yt(et(rt(ci))),postTokenBalances:yt(et(rt(ci))),loadedAddresses:yt(Aa),computeUnitsConsumed:yt(F())}),As=z({err:$r,fee:F(),innerInstructions:yt(et(rt(z({index:F(),instructions:rt(_a)})))),preBalances:rt(F()),postBalances:rt(F()),logMessages:yt(et(rt(Y()))),preTokenBalances:yt(et(rt(ci))),postTokenBalances:yt(et(rt(ci))),loadedAddresses:yt(Aa),computeUnitsConsumed:yt(F())}),on=_e([he(0),he("legacy")]),zr=z({pubkey:Y(),lamports:F(),postBalance:et(F()),rewardType:et(Y()),commission:yt(et(F()))}),Cf=Wt(et(z({blockhash:Y(),previousBlockhash:Y(),parentSlot:F(),transactions:rt(z({transaction:Ss,meta:et(vi),version:yt(on)})),rewards:yt(rt(zr)),blockTime:et(F()),blockHeight:et(F())}))),Ff=Wt(et(z({blockhash:Y(),previousBlockhash:Y(),parentSlot:F(),rewards:yt(rt(zr)),blockTime:et(F()),blockHeight:et(F())}))),Pf=Wt(et(z({blockhash:Y(),previousBlockhash:Y(),parentSlot:F(),transactions:rt(z({transaction:Ea,meta:et(vi),version:yt(on)})),rewards:yt(rt(zr)),blockTime:et(F()),blockHeight:et(F())}))),Of=Wt(et(z({blockhash:Y(),previousBlockhash:Y(),parentSlot:F(),transactions:rt(z({transaction:Sa,meta:et(As),version:yt(on)})),rewards:yt(rt(zr)),blockTime:et(F()),blockHeight:et(F())}))),Nf=Wt(et(z({blockhash:Y(),previousBlockhash:Y(),parentSlot:F(),transactions:rt(z({transaction:Ea,meta:et(As),version:yt(on)})),rewards:yt(rt(zr)),blockTime:et(F()),blockHeight:et(F())}))),Df=Wt(et(z({blockhash:Y(),previousBlockhash:Y(),parentSlot:F(),rewards:yt(rt(zr)),blockTime:et(F()),blockHeight:et(F())}))),qf=Wt(et(z({blockhash:Y(),previousBlockhash:Y(),parentSlot:F(),transactions:rt(z({transaction:Ss,meta:et(vi)})),rewards:yt(rt(zr)),blockTime:et(F())}))),co=Wt(et(z({blockhash:Y(),previousBlockhash:Y(),parentSlot:F(),signatures:rt(Y()),blockTime:et(F())}))),Ci=Wt(et(z({slot:F(),meta:vi,blockTime:yt(et(F())),transaction:Ss,version:yt(on)}))),zn=Wt(et(z({slot:F(),transaction:Sa,meta:et(As),blockTime:yt(et(F())),version:yt(on)}))),Hf=ge(z({blockhash:Y(),feeCalculator:z({lamportsPerSignature:F()})})),$f=ge(z({blockhash:Y(),lastValidBlockHeight:F()})),zf=z({slot:F(),numTransactions:F(),numSlots:F(),samplePeriodSecs:F()}),Kf=Wt(rt(zf)),Wf=ge(et(z({feeCalculator:z({lamportsPerSignature:F()})}))),Gf=Wt(Y()),Zf=Wt(Y()),jf=z({err:$r,logs:rt(Y()),signature:Y()}),Vf=z({result:wi(jf),subscription:F()}),Xf={"solana-client":`js/${(Ui="0.0.0-development")!==null&&Ui!==void 0?Ui:"UNKNOWN"}`};class Is{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let r,u,i,d,l,x;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,u=e.httpHeaders,i=e.fetch,d=e.fetchMiddleware,l=e.disableRetryOnRateLimit,x=e.httpAgent),this._rpcEndpoint=Nh(t),this._rpcWsEndpoint=r||Ph(t),this._rpcClient=Xh(t,u,i,d,l,x),this._rpcRequest=Yh(this._rpcClient),this._rpcBatchRequest=Jh(this._rpcClient),this._rpcWebSocket=new oa(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:u}=ce(e),i=this._buildArgs([t.toBase58()],r,void 0,u),d=await this._rpcRequest("getBalance",i),l=Q(d,ge(F()));if("error"in l)throw new at(l.error,`failed to get balance for ${t.toBase58()}`);return l.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Q(e,Wt(et(F())));if("error"in r)throw new at(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Q(t,Wt(F()));if("error"in e)throw new at(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Q(t,sf);if("error"in e)throw new at(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),u=Q(r,of);if("error"in u)throw new at(u.error,"failed to get supply");return u.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),u=await this._rpcRequest("getTokenSupply",r),i=Q(u,ge(Gi));if("error"in i)throw new at(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),u=await this._rpcRequest("getTokenAccountBalance",r),i=Q(u,ge(Gi));if("error"in i)throw new at(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:u,config:i}=ce(r);let d=[t.toBase58()];"mint"in e?d.push({mint:e.mint.toBase58()}):d.push({programId:e.programId.toBase58()});const l=this._buildArgs(d,u,"base64",i),x=await this._rpcRequest("getTokenAccountsByOwner",l),A=Q(x,cf);if("error"in A)throw new at(A.error,`failed to get token accounts owned by account ${t.toBase58()}`);return A.result}async getParsedTokenAccountsByOwner(t,e,r){let u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});const i=this._buildArgs(u,r,"jsonParsed"),d=await this._rpcRequest("getTokenAccountsByOwner",i),l=Q(d,uf);if("error"in l)throw new at(l.error,`failed to get token accounts owned by account ${t.toBase58()}`);return l.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],u=await this._rpcRequest("getLargestAccounts",r),i=Q(u,hf);if("error"in i)throw new at(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),u=await this._rpcRequest("getTokenLargestAccounts",r),i=Q(u,af);if("error"in i)throw new at(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:u}=ce(e),i=this._buildArgs([t.toBase58()],r,"base64",u),d=await this._rpcRequest("getAccountInfo",i),l=Q(d,ge(et(In)));if("error"in l)throw new at(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getParsedAccountInfo(t,e){const{commitment:r,config:u}=ce(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",u),d=await this._rpcRequest("getAccountInfo",i),l=Q(d,ge(et(ji)));if("error"in l)throw new at(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:u}=ce(e),i=t.map(A=>A.toBase58()),d=this._buildArgs([i],r,"jsonParsed",u),l=await this._rpcRequest("getMultipleAccounts",d),x=Q(l,ge(rt(et(ji))));if("error"in x)throw new at(x.error,`failed to get info for accounts ${i}`);return x.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:u}=ce(e),i=t.map(A=>A.toBase58()),d=this._buildArgs([i],r,"base64",u),l=await this._rpcRequest("getMultipleAccounts",d),x=Q(l,ge(rt(et(In))));if("error"in x)throw new at(x.error,`failed to get info for accounts ${i}`);return x.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:u,config:i}=ce(e),d=this._buildArgs([t.toBase58()],u,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),l=await this._rpcRequest("getStakeActivation",d),x=Q(l,Wt(pf));if("error"in x)throw new at(x.error,`failed to get Stake Activation ${t.toBase58()}`);return x.result}async getProgramAccounts(t,e){const{commitment:r,config:u}=ce(e),{encoding:i,...d}=u||{},l=this._buildArgs([t.toBase58()],r,i||"base64",d),x=await this._rpcRequest("getProgramAccounts",l),A=Q(x,Wt(rt(ff)));if("error"in A)throw new at(A.error,`failed to get accounts owned by program ${t.toBase58()}`);return A.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:u}=ce(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",u),d=await this._rpcRequest("getProgramAccounts",i),l=Q(d,Wt(rt(df)));if("error"in l)throw new at(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{var u;const d=t;if((u=d.abortSignal)!==null&&u!==void 0&&u.aborted)return Promise.reject(d.abortSignal.reason);r=d.signature}let i;try{i=re.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return pe(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,u,i=!1;const d=new Promise((x,A)=>{try{r=this.onSignature(e,(I,U)=>{r=void 0;const R={context:U,value:I};x({__type:He.PROCESSED,response:R})},t);const k=new Promise(I=>{r==null?I():u=this._onSubscriptionStateChange(r,U=>{U==="subscribed"&&I()})});(async()=>{if(await k,i)return;const I=await this.getSignatureStatus(e);if(i||I==null)return;const{context:U,value:R}=I;if(R!=null)if(R!=null&&R.err)A(R.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(R.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(R.confirmationStatus==="processed"||R.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,x({__type:He.PROCESSED,response:{context:U,value:R}})}})()}catch(k){A(k)}});return{abortConfirmation:()=>{u&&(u(),u=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:d}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:u}}){let i=!1;const d=new Promise(I=>{const U=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let R=await U();if(!i){for(;R<=r;)if(await Wr(1e3),i||(R=await U(),i))return;I({__type:He.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:x}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),A=this.getCancellationPromise(e);let k;try{const I=await Promise.race([A,x,d]);if(I.__type===He.PROCESSED)k=I.response;else throw new ga(u)}finally{i=!0,l()}return k}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:u,nonceValue:i,signature:d}}){let l=!1;const x=new Promise(T=>{let C=i,D=null;const q=async()=>{try{const{context:P,value:tt}=await this.getNonceAndContext(u,{commitment:t,minContextSlot:r});return D=P.slot,tt==null?void 0:tt.nonce}catch{return C}};(async()=>{if(C=await q(),!l)for(;;){if(i!==C){T({__type:He.NONCE_INVALID,slotInWhichNonceDidAdvance:D});return}if(await Wr(2e3),l||(C=await q(),l))return}})()}),{abortConfirmation:A,confirmationPromise:k}=this.getTransactionConfirmationPromise({commitment:t,signature:d}),I=this.getCancellationPromise(e);let U;try{const T=await Promise.race([I,k,x]);if(T.__type===He.PROCESSED)U=T.response;else{var R;let C;for(;;){var L;const D=await this.getSignatureStatus(d);if(D==null)break;if(D.context.slot<((L=T.slotInWhichNonceDidAdvance)!==null&&L!==void 0?L:r)){await Wr(400);continue}C=D;break}if((R=C)!==null&&R!==void 0&&R.value){const D=t||"finalized",{confirmationStatus:q}=C.value;switch(D){case"processed":case"recent":if(q!=="processed"&&q!=="confirmed"&&q!=="finalized")throw new vn(d);break;case"confirmed":case"single":case"singleGossip":if(q!=="confirmed"&&q!=="finalized")throw new vn(d);break;case"finalized":case"max":case"root":if(q!=="finalized")throw new vn(d);break;default:(P=>{})(D)}U={context:C.context,value:{err:C.value.err}}}else throw new vn(d)}}finally{l=!0,A()}return U}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const u=new Promise(x=>{let A=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{A=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>x({__type:He.TIMED_OUT,timeoutMs:A}),A)}),{abortConfirmation:i,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let l;try{const x=await Promise.race([d,u]);if(x.__type===He.PROCESSED)l=x.response;else throw new ma(e,x.timeoutMs/1e3)}finally{clearTimeout(r),i()}return l}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Q(t,Wt(rt(Sf)));if("error"in e)throw new at(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),u=Q(r,Af);if("error"in u)throw new at(u.error,"failed to get vote accounts");return u.result}async getSlot(t){const{commitment:e,config:r}=ce(t),u=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",u),d=Q(i,Wt(F()));if("error"in d)throw new at(d.error,"failed to get slot");return d.result}async getSlotLeader(t){const{commitment:e,config:r}=ce(t),u=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",u),d=Q(i,Wt(Y()));if("error"in d)throw new at(d.error,"failed to get slot leader");return d.result}async getSlotLeaders(t,e){const r=[t,e],u=await this._rpcRequest("getSlotLeaders",r),i=Q(u,Wt(rt(me)));if("error"in i)throw new at(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:u}=await this.getSignatureStatuses([t],e);pe(u.length===1);const i=u[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const u=await this._rpcRequest("getSignatureStatuses",r),i=Q(u,Rf);if("error"in i)throw new at(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=ce(t),u=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",u),d=Q(i,Wt(F()));if("error"in d)throw new at(d.error,"failed to get transaction count");return d.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),u=Q(r,Qh);if("error"in u)throw new at(u.error,"failed to get inflation");return u.result}async getInflationReward(t,e,r){const{commitment:u,config:i}=ce(r),d=this._buildArgs([t.map(A=>A.toBase58())],u,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),l=await this._rpcRequest("getInflationReward",d),x=Q(l,Hh);if("error"in x)throw new at(x.error,"failed to get inflation reward");return x.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Q(t,tf);if("error"in e)throw new at(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=ce(t),u=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",u),d=Q(i,ef);if("error"in d)throw new at(d.error,"failed to get epoch info");return d.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Q(t,rf);if("error"in e)throw new at(e.error,"failed to get epoch schedule");const r=e.result;return new Ah(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Q(t,nf);if("error"in e)throw new at(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),u=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Q(u,Tf);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),u=Q(r,Hf);if("error"in u)throw new at(u.error,"failed to get recent blockhash");return u.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=Q(e,Kf);if("error"in r)throw new at(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),u=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Q(u,Wf);if("error"in i)throw new at(i.error,"failed to get fee calculator");const{context:d,value:l}=i.result;return{context:d,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(t,e){const r=tn(t.serialize()).toString("base64"),u=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",u),d=Q(i,ge(et(F())));if("error"in d)throw new at(d.error,"failed to get fee for message");if(d.result===null)throw new Error("invalid blockhash");return d.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=ce(t),u=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",u),d=Q(i,$f);if("error"in d)throw new at(d.error,"failed to get latest blockhash");return d.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Q(t,Wt(jh));if("error"in e)throw new at(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Q(t,Wt(Y()));if("error"in e)throw new at(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:u}=ce(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,u),d=await this._rpcRequest("getBlock",i);try{switch(u==null?void 0:u.transactionDetails){case"accounts":{const l=Q(d,Pf);if("error"in l)throw l.error;return l.result}case"none":{const l=Q(d,Ff);if("error"in l)throw l.error;return l.result}default:{const l=Q(d,Cf);if("error"in l)throw l.error;const{result:x}=l;return x?{...x,transactions:x.transactions.map(({transaction:A,meta:k,version:I})=>({meta:k,transaction:{...A,message:Li(I,A.message)},version:I}))}:null}}}catch(l){throw new at(l,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:u}=ce(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",u),d=await this._rpcRequest("getBlock",i);try{switch(u==null?void 0:u.transactionDetails){case"accounts":{const l=Q(d,Nf);if("error"in l)throw l.error;return l.result}case"none":{const l=Q(d,Df);if("error"in l)throw l.error;return l.result}default:{const l=Q(d,Of);if("error"in l)throw l.error;return l.result}}}catch(l){throw new at(l,"failed to get block")}}async getBlockHeight(t){const{commitment:e,config:r}=ce(t),u=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getBlockHeight",u),d=Q(i,Wt(F()));if("error"in d)throw new at(d.error,"failed to get block height information");return d.result}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:l,...x}=t;r=l,e=x}const u=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",u),d=Q(i,Vh);if("error"in d)throw new at(d.error,"failed to get block production information");return d.result}async getTransaction(t,e){const{commitment:r,config:u}=ce(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,u),d=await this._rpcRequest("getTransaction",i),l=Q(d,Ci);if("error"in l)throw new at(l.error,"failed to get transaction");const x=l.result;return x&&{...x,transaction:{...x.transaction,message:Li(x.version,x.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:u}=ce(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",u),d=await this._rpcRequest("getTransaction",i),l=Q(d,zn);if("error"in l)throw new at(l.error,"failed to get transaction");return l.result}async getParsedTransactions(t,e){const{commitment:r,config:u}=ce(e),i=t.map(x=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([x],r,"jsonParsed",u)}));return(await this._rpcBatchRequest(i)).map(x=>{const A=Q(x,zn);if("error"in A)throw new at(A.error,"failed to get transactions");return A.result})}async getTransactions(t,e){const{commitment:r,config:u}=ce(e),i=t.map(x=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([x],r,void 0,u)}));return(await this._rpcBatchRequest(i)).map(x=>{const A=Q(x,Ci);if("error"in A)throw new at(A.error,"failed to get transactions");const k=A.result;return k&&{...k,transaction:{...k.transaction,message:Li(k.version,k.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),u=await this._rpcRequest("getConfirmedBlock",r),i=Q(u,qf);if("error"in i)throw new at(i.error,"failed to get confirmed block");const d=i.result;if(!d)throw new Error("Confirmed block "+t+" not found");const l={...d,transactions:d.transactions.map(({transaction:x,meta:A})=>{const k=new cr(x.message);return{meta:A,transaction:{...x,message:k}}})};return{...l,transactions:l.transactions.map(({transaction:x,meta:A})=>({meta:A,transaction:nr.populate(x.message,x.signatures)}))}}async getBlocks(t,e,r){const u=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",u),d=Q(i,Wt(rt(F())));if("error"in d)throw new at(d.error,"failed to get blocks");return d.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),u=await this._rpcRequest("getBlock",r),i=Q(u,co);if("error"in i)throw new at(i.error,"failed to get block");const d=i.result;if(!d)throw new Error("Block "+t+" not found");return d}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),u=await this._rpcRequest("getConfirmedBlock",r),i=Q(u,co);if("error"in i)throw new at(i.error,"failed to get confirmed block");const d=i.result;if(!d)throw new Error("Confirmed block "+t+" not found");return d}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),u=await this._rpcRequest("getConfirmedTransaction",r),i=Q(u,Ci);if("error"in i)throw new at(i.error,"failed to get transaction");const d=i.result;if(!d)return d;const l=new cr(d.transaction.message),x=d.transaction.signatures;return{...d,transaction:nr.populate(l,x)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),u=await this._rpcRequest("getConfirmedTransaction",r),i=Q(u,zn);if("error"in i)throw new at(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(d=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([d],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(d=>{const l=Q(d,zn);if("error"in l)throw new at(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(t,e,r){let u={},i=await this.getFirstAvailableBlock();for(;!("until"in u)&&(e--,!(e<=0||e<i));)try{const x=await this.getConfirmedBlockSignatures(e,"finalized");x.signatures.length>0&&(u.until=x.signatures[x.signatures.length-1].toString())}catch(x){if(x instanceof Error&&x.message.includes("skipped"))continue;throw x}let d=await this.getSlot("finalized");for(;!("before"in u)&&(r++,!(r>d));)try{const x=await this.getConfirmedBlockSignatures(r);x.signatures.length>0&&(u.before=x.signatures[x.signatures.length-1].toString())}catch(x){if(x instanceof Error&&x.message.includes("skipped"))continue;throw x}return(await this.getConfirmedSignaturesForAddress2(t,u)).map(x=>x.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const u=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",u),d=Q(i,gf);if("error"in d)throw new at(d.error,"failed to get confirmed signatures for address");return d.result}async getSignaturesForAddress(t,e,r){const u=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",u),d=Q(i,mf);if("error"in d)throw new at(d.error,"failed to get signatures for address");return d.result}async getAddressLookupTable(t,e){const{context:r,value:u}=await this.getAccountInfoAndContext(t,e);let i=null;return u!==null&&(i=new so({key:t,state:so.deserialize(u.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:u}=await this.getAccountInfoAndContext(t,e);let i=null;return u!==null&&(i=Ms.fromAccountData(u.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),u=Q(r,Gf);if("error"in u)throw new at(u.error,`airdrop to ${t.toBase58()} failed`);return u.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Wr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Oh;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let u=0;u<50;u++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Wr(Uh/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=ce(t),u=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",u),d=Q(i,ge(F()));if("error"in d)throw new at(d.error,"failed to get stake minimum delegation");return d.result}async simulateTransaction(t,e,r){if("message"in t){const T=t.serialize(),C=zt.Buffer.from(T).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const D=e||{};D.encoding="base64","commitment"in D||(D.commitment=this.commitment);const q=[C,D],P=await this._rpcRequest("simulateTransaction",q),tt=Q(P,oo);if("error"in tt)throw new Error("failed to simulate transaction: "+tt.error.message);return tt.result}let u;if(t instanceof nr){let L=t;u=new nr,u.feePayer=L.feePayer,u.instructions=t.instructions,u.nonceInfo=L.nonceInfo,u.signatures=L.signatures}else u=nr.populate(t),u._message=u._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(u.nonceInfo&&i)u.sign(...i);else{let L=this._disableBlockhashCaching;for(;;){const T=await this._blockhashWithExpiryBlockHeight(L);if(u.lastValidBlockHeight=T.lastValidBlockHeight,u.recentBlockhash=T.blockhash,!i)break;if(u.sign(...i),!u.signature)throw new Error("!signature");const C=u.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else L=!0}}const d=u._compile(),l=d.serialize(),A=u._serialize(l).toString("base64"),k={encoding:"base64",commitment:this.commitment};if(r){const L=(Array.isArray(r)?r:d.nonProgramIds()).map(T=>T.toBase58());k.accounts={encoding:"base64",addresses:L}}i&&(k.sigVerify=!0);const I=[A,k],U=await this._rpcRequest("simulateTransaction",I),R=Q(U,oo);if("error"in R){let L;if("data"in R.error&&(L=R.error.data.logs,L&&Array.isArray(L))){const T=`
    `,C=T+L.join(T);console.error(R.error.message,C)}throw new no("failed to simulate transaction: "+R.error.message,L)}return R.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const d=t.serialize();return await this.sendRawTransaction(d,r)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const u=e;if(t.nonceInfo)t.sign(...u);else{let d=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(d);if(t.lastValidBlockHeight=l.lastValidBlockHeight,t.recentBlockhash=l.blockhash,t.sign(...u),!t.signature)throw new Error("!signature");const x=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(x))d=!0;else{this._blockhashInfo.transactionSignatures.push(x);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=tn(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},u=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),u&&(r.skipPreflight=u),i&&(r.preflightCommitment=i);const d=[t,r],l=await this._rpcRequest("sendTransaction",d),x=Q(l,Zf);if("error"in x){let A;throw"data"in x.error&&(A=x.error.data.logs),new no("failed to send transaction: "+x.error.message,A)}return x.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var r;const u=(r=this._subscriptionsByHash[t])===null||r===void 0?void 0:r.state;if(this._subscriptionsByHash[t]=e,u!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(d=>{try{d(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var r;const u=this._subscriptionHashByClientSubscriptionId[t];if(u==null)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[u]||(r[u]=new Set);return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[u]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const u=this._subscriptionsByHash[r];if(u!==void 0)switch(u.state){case"pending":case"unsubscribed":if(u.callbacks.size===0){delete this._subscriptionsByHash[r],u.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[u.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:d}=u;try{this._setSubscription(r,{...u,state:"subscribing"});const l=await this._rpcWebSocket.call(d,i);this._setSubscription(r,{...u,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=u.callbacks,await this._updateSubscriptions()}catch(l){if(l instanceof Error&&console.error(`${d} error for argument`,i,l.message),!e())return;this._setSubscription(r,{...u,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":u.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:d}=u;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...u,state:"unsubscribing"}),this._setSubscription(r,{...u,state:"unsubscribing"});try{await this._rpcWebSocket.call(d,[i])}catch(l){if(l instanceof Error&&console.error(`${d} error:`,l.message),!e())return;this._setSubscription(r,{...u,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...u,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(u=>{try{u(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Q(t,yf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,u=_h([t.method,e]),i=this._subscriptionsByHash[u];return i===void 0?this._subscriptionsByHash[u]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=u,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const d=this._subscriptionsByHash[u];pe(d!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),d.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const u=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},u)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Q(t,vf);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,u){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",u?{filters:u}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const u=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},u)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Q(t,Vf);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Q(t,xf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Q(t,Bf);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,u){const i=e||this._commitment;if(i||r||u){let d={};r&&(d.encoding=r),i&&(d.commitment=i),u&&(d=Object.assign(d,u)),t.push(d)}return t}_buildArgsAtLeastConfirmed(t,e,r,u){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,u)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Q(t,Mf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const u=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(d,l)=>{if(d.type==="status"){e(d.result,l);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return i}onSignatureWithOptions(t,e,r){const{commitment:u,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},d=this._buildArgs([t],u,void 0,i),l=this._makeSubscription({callback:(x,A)=>{e(x,A);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},d);return l}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Q(t,_f);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Mn{constructor(t){this._keypair=void 0,this._keypair=t??Qs()}static generate(){return new Mn(Qs())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const u=t.slice(0,32),i=Ki(u);for(let d=0;d<32;d++)if(r[d]!==i[d])throw new Error("provided secretKey is invalid")}return new Mn({publicKey:r,secretKey:t})}static fromSeed(t){const e=Ki(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Mn({publicKey:e,secretKey:r})}get publicKey(){return new lt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ot([ft("instruction"),en("recentSlot"),Qt("bumpSeed")])},FreezeLookupTable:{index:1,layout:ot([ft("instruction")])},ExtendLookupTable:{index:2,layout:ot([ft("instruction"),en(),Be(Gt(),Lr(ft(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ot([ft("instruction")])},CloseLookupTable:{index:4,layout:ot([ft("instruction")])}});new lt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ot([Qt("instruction"),ft("units"),ft("additionalFee")])},RequestHeapFrame:{index:1,layout:ot([Qt("instruction"),ft("bytes")])},SetComputeUnitLimit:{index:2,layout:ot([Qt("instruction"),ft("units")])},SetComputeUnitPrice:{index:3,layout:ot([Qt("instruction"),en("microLamports")])}});new lt("ComputeBudget111111111111111111111111111111");ot([Qt("numSignatures"),Qt("padding"),Te("signatureOffset"),Te("signatureInstructionIndex"),Te("publicKeyOffset"),Te("publicKeyInstructionIndex"),Te("messageDataOffset"),Te("messageDataSize"),Te("messageInstructionIndex")]);new lt("Ed25519SigVerify111111111111111111111111111");Ur.hmacSha256Sync=(o,...t)=>{const e=la.create(Ni,o);return t.forEach(r=>e.update(r)),e.digest()};Ur.isValidPrivateKey;ot([Qt("numSignatures"),Te("signatureOffset"),Qt("signatureInstructionIndex"),Te("ethAddressOffset"),Qt("ethAddressInstructionIndex"),Te("messageDataOffset"),Te("messageDataSize"),Qt("messageInstructionIndex"),fe(20,"ethAddress"),fe(64,"signature"),Qt("recoveryId")]);new lt("KeccakSecp256k11111111111111111111111111111");new lt("StakeConfig11111111111111111111111111111111");class uo{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}uo.default=new uo(0,0,lt.default);Object.freeze({Initialize:{index:0,layout:ot([ft("instruction"),ph(),gh()])},Authorize:{index:1,layout:ot([ft("instruction"),Gt("newAuthorized"),ft("stakeAuthorizationType")])},Delegate:{index:2,layout:ot([ft("instruction")])},Split:{index:3,layout:ot([ft("instruction"),Ae("lamports")])},Withdraw:{index:4,layout:ot([ft("instruction"),Ae("lamports")])},Deactivate:{index:5,layout:ot([ft("instruction")])},Merge:{index:7,layout:ot([ft("instruction")])},AuthorizeWithSeed:{index:8,layout:ot([ft("instruction"),Gt("newAuthorized"),ft("stakeAuthorizationType"),Zr("authoritySeed"),Gt("authorityOwner")])}});new lt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ot([ft("instruction"),mh()])},Authorize:{index:1,layout:ot([ft("instruction"),Gt("newAuthorized"),ft("voteAuthorizationType")])},Withdraw:{index:3,layout:ot([ft("instruction"),Ae("lamports")])},AuthorizeWithSeed:{index:10,layout:ot([ft("instruction"),yh()])}});new lt("Vote111111111111111111111111111111111111111");new lt("Va1idator1nfo111111111111111111111111111111");z({name:Y(),website:yt(Y()),details:yt(Y()),keybaseUsername:yt(Y())});new lt("Vote111111111111111111111111111111111111111");ot([Gt("nodePubkey"),Gt("authorizedWithdrawer"),Qt("commission"),ve(),Be(ot([ve("slot"),ft("confirmationCount")]),Lr(ft(),-8),"votes"),Qt("rootSlotValid"),ve("rootSlot"),ve(),Be(ot([ve("epoch"),Gt("authorizedVoter")]),Lr(ft(),-8),"authorizedVoters"),ot([Be(ot([Gt("authorizedPubkey"),ve("epochOfLastAuthorizedSwitch"),ve("targetEpoch")]),32,"buf"),ve("idx"),Qt("isEmpty")],"priorVoters"),ve(),Be(ot([ve("epoch"),ve("credits"),ve("prevCredits")]),Lr(ft(),-8),"epochCredits"),ot([ve("slot"),ve("timestamp")],"lastTimestamp")]);function Yf(o){return(t,e,r,u)=>t.method==="solana_chainId"?(e.result=o,u()):r()}function Jf(o){return(t,e,r,u)=>t.method==="solana_provider_config"?(e.result=o,u()):r()}function Ia(o){const{chainId:t}=o;return kn([Yf(t),Jf(o)])}function Qf(o){const{rpcTarget:t}=o,e=Da({rpcTarget:t});return{networkMiddleware:kn([Ia(o),e]),fetchMiddleware:e}}function tl(o){let{getAccounts:t}=o;return ui(async(e,r,u)=>{const{method:i}=e;if(i!=="getAccounts")return u();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const d=await t(e);r.result=d})}function el(o){let{requestAccounts:t}=o;return ui(async(e,r,u)=>{const{method:i}=e;if(i!=="requestAccounts")return u();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const d=await t(e);r.result=d})}function je(o,t){return ui(async(e,r,u)=>{const{method:i}=e;if(i!==o)return u();if(!t)throw new Error("WalletMiddleware - ".concat(o," not provided"));const d=await t(e);r.result=d})}function ks(o){const{getAccounts:t,requestAccounts:e,signTransaction:r,signAndSendTransaction:u,signAllTransactions:i,signMessage:d,getPrivateKey:l,getSecretKey:x}=o;return kn([el({requestAccounts:e}),tl({getAccounts:t}),je("signTransaction",r),je("signAndSendTransaction",u),je("signAllTransactions",i),je("signMessage",d),je("solanaPrivateKey",l),je("solanaSecretKey",x)])}function rl(o){let{addNewChainConfig:t,switchSolanaChain:e}=o;return kn([je("addSolanaChain",t),je("switchSolanaChain",e)])}function nl(o){let{updatePrivatekey:t}=o;return kn([je("updateAccount",t)])}function ho(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable})),e.push.apply(e,r)}return e}function fo(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ho(Object(e),!0).forEach(function(r){rn(o,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):ho(Object(e)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(e,r))})}return o}class bi extends Ji{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:fo(fo({},e.chainConfig),{},{chainNamespace:Gn.SOLANA})},state:r})}async switchChain(t){return Promise.resolve()}async setupProvider(t){const e=new Yi,r=this.getProviderHandlers(t),u=ks(r);e.push(u);const i=Ia(this.config.chainConfig);e.push(i);const d=this.getInjectedProviderProxy(t);d&&e.push(d);const l=Qi(e);this.updateProviderEngineProxy(l),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig:t}=this.config;return this.update({chainId:t.chainId}),t.chainId||""}getInjectedProviderProxy(t){}}const Rs=o=>({requestAccounts:async()=>o.publicKey?[re.encode(o.publicKey.toBytes())]:[],getAccounts:async()=>o.publicKey?[re.encode(o.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw Zt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Zt.ethErrors.rpc.methodNotSupported()},signTransaction:async e=>await o.signTransaction(e.params.message),signMessage:async e=>(await o.signMessage(e.params.message,e.params.display)).signature,signAllTransactions:async e=>{var r,u;if(!((r=e.params)!==null&&r!==void 0&&r.message)||!((u=e.params)!==null&&u!==void 0&&u.message.length))throw Zt.ethErrors.rpc.invalidParams("message");return await o.signAllTransactions(e.params.message)},signAndSendTransaction:async e=>({signature:(await o.signAndSendTransaction(e.params.message)).signature})});function lo(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable})),e.push.apply(e,r)}return e}function il(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?lo(Object(e),!0).forEach(function(r){rn(o,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):lo(Object(e)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(e,r))})}return o}function ka(o){return ui(async(t,e,r)=>{const u=await o.request(il({},t));e.result=u})}class sl extends bi{getProviderHandlers(t){return Rs(t)}getInjectedProviderProxy(t){return ka(t)}}const ol=(o,t)=>({requestAccounts:async()=>{const{data:r}=await o.connect();return[r.publicKey]},getAccounts:async()=>{const{data:r}=await o.connect();return[r.publicKey]},getPrivateKey:async()=>{throw Zt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Zt.ethErrors.rpc.methodNotSupported()},signTransaction:async r=>{const u=r.params.message;if(!u)throw Zt.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:i}=await o.signTransaction(re.encode(u.serializeMessage()));if(!i.publicKey||!i.signature)throw new Error("Invalid signature from slope wallet");const d=new lt(i.publicKey),l=re.decode(i.signature);return u.addSignature(d,l),u},signMessage:async r=>{const u=await o.signMessage(r.params.message);return re.decode(u.data.signature)},signAndSendTransaction:async r=>{const u=t();if(!u)throw Zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=r.params.message;if(!i)throw Zt.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});const{data:d}=await o.signTransaction(re.encode(i.serializeMessage()));if(!d.publicKey||!d.signature)throw new Error("Invalid signature from slope wallet");const l=new lt(d.publicKey),x=re.decode(d.signature);i.addSignature(l,x);const A=await u.request({method:"solana_provider_config",params:[]});return{signature:await new Is(A.rpcTarget).sendRawTransaction(i.serialize())}},signAllTransactions:async r=>{var u,i,d;if(!((u=r.params)!==null&&u!==void 0&&u.message)||!((i=r.params)!==null&&i!==void 0&&i.message.length))throw Zt.ethErrors.rpc.invalidParams("message");const l=r.params.message,{length:x}=l,A=[];for(let R=0;R<x;R++)A.push(re.encode(r.params.message[R].serializeMessage()));const{msg:k,data:I}=await o.signAllTransactions(A);if(!I.publicKey||((d=I.signatures)===null||d===void 0?void 0:d.length)!==x)throw new Error(k);const U=new lt(I.publicKey);for(let R=0;R<x;R++){const L=re.decode(I.signatures[R]);l[R].addSignature(U,L)}return l}});class al extends bi{getProviderHandlers(t){return ol(t,this.getProviderEngineProxy.bind(this))}}const cl=(o,t)=>{const e=Rs(o);return e.signAndSendTransaction=async r=>{const u=t();if(!u)throw Zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=await o.signTransaction(r.params.message),d=await u.request({method:"solana_provider_config",params:[]});return{signature:await new Is(d.rpcTarget).sendRawTransaction(i.serialize())}},e};class ul extends bi{getProviderHandlers(t){return cl(t,this.getProviderEngineProxy.bind(this))}}const hl=(o,t)=>{const e=Rs(o);return e.signMessage=async r=>{const{signature:u}=await o.sign(r.params.message,"utf8");return u},e.signAndSendTransaction=async r=>{const u=t();if(!u)throw Zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const i=await o.signTransaction(r.params.message),d=await u.request({method:"solana_provider_config",params:[]});return{signature:await new Is(d.rpcTarget).sendRawTransaction(i.serialize())}},e};class fl extends bi{getProviderHandlers(t){return hl(t,this.getProviderEngineProxy.bind(this))}}const ll=o=>({requestAccounts:async()=>await o.request({method:"solana_requestAccounts",params:{}}),getAccounts:async()=>await o.request({method:"solana_requestAccounts",params:{}}),getPrivateKey:async()=>{throw Zt.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw Zt.ethErrors.rpc.methodNotSupported()},signMessage:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw Zt.ethErrors.rpc.invalidParams("message");return await o.signMessage(e.params.message)},signTransaction:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw Zt.ethErrors.rpc.invalidParams("message");const u=e.params.message;return await o.signTransaction(u)},signAndSendTransaction:async e=>{var r;if(!((r=e.params)!==null&&r!==void 0&&r.message))throw Zt.ethErrors.rpc.invalidParams("message");const u=e.params.message;return{signature:await o.sendTransaction(u)}},signAllTransactions:async e=>{var r,u;if(!((r=e.params)!==null&&r!==void 0&&r.message)||!((u=e.params)!==null&&u!==void 0&&u.message.length))throw Zt.ethErrors.rpc.invalidParams("message");const i=e.params.message;return await o.signAllTransactions(i)}});function po(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable})),e.push.apply(e,r)}return e}function Kn(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?po(Object(e),!0).forEach(function(r){rn(o,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):po(Object(e)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(e,r))})}return o}class dl extends Ji{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:Kn(Kn({},e.chainConfig),{},{chainNamespace:Gn.SOLANA})},state:r})}async switchChain(t){return Promise.resolve()}async setupProvider(t){this.handleInjectedProviderUpdate(t),await this.setupEngine(t)}async lookupNetwork(){if(!this.provider)throw Zt.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});const{chainId:t}=this.config.chainConfig,e=await this.provider.request({method:"solana_chainId"}),r=Ts(e.toString())?e:"0x".concat(parseInt(e,10).toString(16));if(t!==r)throw Xi.rpcConnectionError("Invalid network, net_version is: ".concat(r,", expected: ").concat(t));return this.update({chainId:r}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),this.state.chainId}async setupEngine(t){const e=ll(t),r=ks(e),u=ka(t),i=new Yi;i.push(r),i.push(u);const d=Qi(i);this.updateProviderEngineProxy(d),await this.lookupNetwork()}async handleInjectedProviderUpdate(t){t.on("accountsChanged",async e=>{this.provider.emit("accountsChanged",e)}),t.on("chainChanged",async e=>{const r=Ts(e)?e:"0x".concat(parseInt(e,10).toString(16));this.configure({chainConfig:Kn(Kn({},this.config.chainConfig),{},{chainId:r})}),await this.setupProvider(t)})}}async function pl(o){let{privKey:t,getProviderEngineProxy:e}=o;const r=()=>Mn.fromSecretKey(Buffer.from(t,"hex"));if(typeof t!="string")throw Xi.invalidParams("privKey must be a string");const u=r();return{requestAccounts:async()=>[u.publicKey.toBase58()],getAccounts:async()=>[u.publicKey.toBase58()],getPrivateKey:async()=>t,getSecretKey:async()=>re.encode(u.secretKey),signTransaction:async d=>{var l;if(!((l=d.params)!==null&&l!==void 0&&l.message))throw Zt.ethErrors.rpc.invalidParams("message");const x=d.params.message;return x.partialSign(u),x},signMessage:async d=>{var l;if(!((l=d.params)!==null&&l!==void 0&&l.message))throw Zt.ethErrors.rpc.invalidParams("message");return qa.sign.detached(d.params.message,u.secretKey)},signAndSendTransaction:async d=>{var l;if(!((l=d.params)!==null&&l!==void 0&&l.message))throw Zt.ethErrors.rpc.invalidParams("message");const x=e();if(!x)throw Zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const A=d.params.message;return A.sign(u),{signature:await x.request({method:"sendTransaction",params:[re.encode(A.serialize())]})}},signAllTransactions:async d=>{var l,x,A;if(!((l=d.params)!==null&&l!==void 0&&l.message)||!((x=d.params)!==null&&x!==void 0&&x.message.length))throw Zt.ethErrors.rpc.invalidParams("message");const k=(A=d.params)===null||A===void 0?void 0:A.message;for(const I of k||[])I.partialSign(u);return k}}}function go(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable})),e.push.apply(e,r)}return e}function mo(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?go(Object(e),!0).forEach(function(r){rn(o,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):go(Object(e)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(e,r))})}return o}class Vi extends Ji{constructor(t){let{config:e,state:r}=t;super({config:{chainConfig:mo(mo({},e.chainConfig),{},{chainNamespace:Gn.SOLANA})},state:r})}async enable(){if(!this.state.privateKey)throw Zt.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(t){const e=await pl({privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=ks(e),u=new Yi,{networkMiddleware:i}=Qf(this.config.chainConfig);u.push(this.getChainSwitchMiddleware()),u.push(this.getAccountMiddleware()),u.push(r),u.push(i);const d=Qi(u);this.updateProviderEngineProxy(d),await this.lookupNetwork()}async updateAccount(t){if(!this._providerEngineProxy)throw Zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==t.privateKey&&(await this.setupProvider(t.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(t){if(!this._providerEngineProxy)throw Zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const e=this.getChainConfig(t.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:e});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw Zt.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const t=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:e}=this.config;if(t!=="ok")throw Xi.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(e.rpcTarget));return this.update({chainId:e.chainId}),this.state.chainId!==e.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return rl({addNewChainConfig:async r=>{if(!r.params)throw Zt.ethErrors.rpc.invalidParams("Missing request params");const{chainId:u,chainName:i,rpcUrls:d,blockExplorerUrls:l,nativeCurrency:x}=r.params;if(!u)throw Zt.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!d||d.length===0)throw Zt.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!x)throw Zt.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:Gn.SOLANA,chainId:u,ticker:(x==null?void 0:x.symbol)||"SOL",tickerName:(x==null?void 0:x.name)||"Solana",displayName:i,rpcTarget:d[0],blockExplorer:(l==null?void 0:l[0])||""})},switchSolanaChain:async r=>{if(!r.params)throw Zt.ethErrors.rpc.invalidParams("Missing request params");if(!r.params.chainId)throw Zt.ethErrors.rpc.invalidParams("Missing chainId");await this.switchChain(r.params)}})}getAccountMiddleware(){return nl({updatePrivatekey:async e=>{if(!e.params)throw Zt.ethErrors.rpc.invalidParams("Missing request params");if(!e.params.privateKey)throw Zt.ethErrors.rpc.invalidParams("Missing privateKey");const{privateKey:r}=e.params;await this.updateAccount({privateKey:r})}})}}rn(Vi,"getProviderInstance",async o=>{const t=new Vi({config:{chainConfig:o.chainConfig}});return await t.setupProvider(o.privKey),t});class gl{constructor(t){rn(this,"provider",void 0),this.provider=t}async requestAccounts(){return await this.provider.request({method:"requestAccounts",params:{}})}async signAndSendTransaction(t){const{signature:e}=await this.provider.request({method:"signAndSendTransaction",params:{message:t}});return{signature:e}}async signTransaction(t){return await this.provider.request({method:"signTransaction",params:{message:t}})}async signAllTransactions(t){return await this.provider.request({method:"signAllTransactions",params:{message:t}})}async signMessage(t){return await this.provider.request({method:"signMessage",params:{message:t}})}async request(t){return await this.provider.request(t)}}const Al=Object.freeze(Object.defineProperty({__proto__:null,PhantomInjectedProvider:sl,SlopeInjectedProxyProvider:al,SolanaPrivateKeyProvider:Vi,SolanaWallet:gl,SolflareInjectedProvider:ul,SolletInjectedProvider:fl,TorusInjectedProvider:dl},Symbol.toStringTag,{value:"Module"}));export{lt as P,dl as T,sl as a,Al as s};

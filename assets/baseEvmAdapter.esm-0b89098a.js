import{a1 as l,j as n,A as r,a2 as g,a3 as w,a4 as f,a5 as p,a6 as m,a7 as u}from"./base.esm-fa69d14c.js";class v extends l{async authenticateUser(){var e;if(!this.provider||!((e=this.chainConfig)!==null&&e!==void 0&&e.chainId))throw n.notConnectedError();const{chainNamespace:a,chainId:c}=this.chainConfig;if(this.status!==r.CONNECTED)throw n.notConnectedError("Not connected with wallet, Please login/connect first");const t=await this.provider.request({method:"eth_accounts"});if(t&&t.length>0){const i=g(t[0],this.name);if(i&&!w(i))return{idToken:i};const h={domain:window.location.origin,uri:window.location.href,address:t[0],chainId:parseInt(c,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},s=await f(h,a),d=await this.provider.request({method:"personal_sign",params:[s,t[0]]}),o=await p(a,d,s,this.name,this.sessionTime);return m(t[0],this.name,o),{idToken:o}}throw n.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==r.CONNECTED)throw n.disconnectionError("Not connected with wallet");const e=await this.provider.request({method:"eth_accounts"});e&&e.length>0&&u(e[0],this.name)}}export{v as B};

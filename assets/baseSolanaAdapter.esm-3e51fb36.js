import{g as z,a1 as D,j as C,A as N,a2 as I,a3 as R,a4 as B,a5 as O,a6 as F,a7 as _}from"./base.esm-93c22595.js";var y,M;function j(){if(M)return y;M=1;function T(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var l=new Uint8Array(256),p=0;p<l.length;p++)l[p]=255;for(var o=0;o<n.length;o++){var v=n.charAt(o),A=v.charCodeAt(0);if(l[A]!==255)throw new TypeError(v+" is ambiguous");l[A]=o}var d=n.length,E=n.charAt(0),b=Math.log(d)/Math.log(256),u=Math.log(256)/Math.log(d);function S(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length===0)return"";for(var r=0,g=0,a=0,s=e.length;a!==s&&e[a]===0;)a++,r++;for(var h=(s-a)*u+1>>>0,t=new Uint8Array(h);a!==s;){for(var c=e[a],w=0,i=h-1;(c!==0||w<g)&&i!==-1;i--,w++)c+=256*t[i]>>>0,t[i]=c%d>>>0,c=c/d>>>0;if(c!==0)throw new Error("Non-zero carry");g=w,a++}for(var f=h-g;f!==h&&t[f]===0;)f++;for(var m=E.repeat(r);f<h;++f)m+=n.charAt(t[f]);return m}function x(e){if(typeof e!="string")throw new TypeError("Expected String");if(e.length===0)return new Uint8Array;for(var r=0,g=0,a=0;e[r]===E;)g++,r++;for(var s=(e.length-r)*b+1>>>0,h=new Uint8Array(s);e[r];){var t=l[e.charCodeAt(r)];if(t===255)return;for(var c=0,w=s-1;(t!==0||c<a)&&w!==-1;w--,c++)t+=d*h[w]>>>0,h[w]=t%256>>>0,t=t/256>>>0;if(t!==0)throw new Error("Non-zero carry");a=c,r++}for(var i=s-a;i!==s&&h[i]===0;)i++;for(var f=new Uint8Array(g+(s-i)),m=g;i!==s;)f[m++]=h[i++];return f}function q(e){var r=x(e);if(r)return r;throw new Error("Non-base"+d+" character")}return{encode:S,decodeUnsafe:x,decode:q}}return y=T,y}var U,k;function P(){return k||(k=1,U=j()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),U}var V=P();const W=z(V);class G extends D{async authenticateUser(){var n;if(!this.provider||!((n=this.chainConfig)!==null&&n!==void 0&&n.chainId))throw C.notConnectedError();const{chainNamespace:l,chainId:p}=this.chainConfig;if(this.status!==N.CONNECTED)throw C.notConnectedError("Not connected with wallet, Please login/connect first");const o=await this.provider.request({method:"getAccounts"});if(o&&o.length>0){const v=I(o[0],this.name);if(v&&!R(v))return{idToken:v};const A={domain:window.location.origin,uri:window.location.href,address:o[0],chainId:parseInt(p,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},d=await B(A,l),E=new TextEncoder().encode(d),b=await this.provider.request({method:"signMessage",params:{message:E,display:"utf8"}}),u=await O(l,W.encode(b),d,this.name,this.sessionTime);return F(o[0],this.name,u),{idToken:u}}throw C.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==N.CONNECTED)throw C.disconnectionError("Not connected with wallet");const n=await this.provider.request({method:"getAccounts"});n&&n.length>0&&_(n[0],this.name)}}export{G as B};

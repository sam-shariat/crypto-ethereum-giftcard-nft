import{c as At,g as He,r as jr}from"./base.esm-93c22595.js";var pe={},Wr={get exports(){return pe},set exports(o){pe=o}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */var Ve;function Dr(){return Ve||(Ve=1,function(o){(function(){var n="input is invalid type",u="finalize already called",p=typeof window=="object",m=p?window:{};m.JS_SHA3_NO_WINDOW&&(p=!1);var d=!p&&typeof self=="object",I=!m.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;I?m=At:d&&(m=self);var L=!m.JS_SHA3_NO_COMMON_JS&&!0&&o.exports,q=!m.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",P="0123456789abcdef".split(""),Ot=[31,7936,2031616,520093696],K=[4,1024,262144,67108864],H=[1,256,65536,16777216],D=[6,1536,393216,100663296],$=[0,8,16,24],It=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],w=[224,256,384,512],M=[128,256],R=["hex","buffer","arrayBuffer","array","digest"],O={128:168,256:136};(m.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"}),q&&(m.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(s){return typeof s=="object"&&s.buffer&&s.buffer.constructor===ArrayBuffer});for(var U=function(s,y,b){return function(_){return new S(s,y,s).update(_)[b]()}},J=function(s,y,b){return function(_,x){return new S(s,y,x).update(_)[b]()}},j=function(s,y,b){return function(_,x,B,E){return a["cshake"+s].update(_,x,B,E)[b]()}},kt=function(s,y,b){return function(_,x,B,E){return a["kmac"+s].update(_,x,B,E)[b]()}},N=function(s,y,b,_){for(var x=0;x<R.length;++x){var B=R[x];s[B]=y(b,_,B)}return s},Tt=function(s,y){var b=U(s,y,"hex");return b.create=function(){return new S(s,y,s)},b.update=function(_){return b.create().update(_)},N(b,U,s,y)},f=function(s,y){var b=J(s,y,"hex");return b.create=function(_){return new S(s,y,_)},b.update=function(_,x){return b.create(x).update(_)},N(b,J,s,y)},t=function(s,y){var b=O[s],_=j(s,y,"hex");return _.create=function(x,B,E){return!B&&!E?a["shake"+s].create(x):new S(s,y,x).bytepad([B,E],b)},_.update=function(x,B,E,k){return _.create(B,E,k).update(x)},N(_,j,s,y)},r=function(s,y){var b=O[s],_=kt(s,y,"hex");return _.create=function(x,B,E){return new A(s,y,B).bytepad(["KMAC",E],b).bytepad([x],b)},_.update=function(x,B,E,k){return _.create(x,E,k).update(B)},N(_,kt,s,y)},i=[{name:"keccak",padding:H,bits:w,createMethod:Tt},{name:"sha3",padding:D,bits:w,createMethod:Tt},{name:"shake",padding:Ot,bits:M,createMethod:f},{name:"cshake",padding:K,bits:M,createMethod:t},{name:"kmac",padding:K,bits:M,createMethod:r}],a={},h=[],g=0;g<i.length;++g)for(var v=i[g],c=v.bits,e=0;e<c.length;++e){var l=v.name+"_"+c[e];if(h.push(l),a[l]=v.createMethod(c[e],v.padding),v.name!=="sha3"){var T=v.name+c[e];h.push(T),a[T]=a[l]}}function S(s,y,b){this.blocks=[],this.s=[],this.padding=y,this.outputBits=b,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(s<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=b>>5,this.extraBytes=(b&31)>>3;for(var _=0;_<50;++_)this.s[_]=0}S.prototype.update=function(s){if(this.finalized)throw new Error(u);var y,b=typeof s;if(b!=="string"){if(b==="object"){if(s===null)throw new Error(n);if(q&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!q||!ArrayBuffer.isView(s)))throw new Error(n)}else throw new Error(n);y=!0}for(var _=this.blocks,x=this.byteCount,B=s.length,E=this.blockCount,k=0,Rt=this.s,C,W;k<B;){if(this.reset)for(this.reset=!1,_[0]=this.block,C=1;C<E+1;++C)_[C]=0;if(y)for(C=this.start;k<B&&C<x;++k)_[C>>2]|=s[k]<<$[C++&3];else for(C=this.start;k<B&&C<x;++k)W=s.charCodeAt(k),W<128?_[C>>2]|=W<<$[C++&3]:W<2048?(_[C>>2]|=(192|W>>6)<<$[C++&3],_[C>>2]|=(128|W&63)<<$[C++&3]):W<55296||W>=57344?(_[C>>2]|=(224|W>>12)<<$[C++&3],_[C>>2]|=(128|W>>6&63)<<$[C++&3],_[C>>2]|=(128|W&63)<<$[C++&3]):(W=65536+((W&1023)<<10|s.charCodeAt(++k)&1023),_[C>>2]|=(240|W>>18)<<$[C++&3],_[C>>2]|=(128|W>>12&63)<<$[C++&3],_[C>>2]|=(128|W>>6&63)<<$[C++&3],_[C>>2]|=(128|W&63)<<$[C++&3]);if(this.lastByteIndex=C,C>=x){for(this.start=C-x,this.block=_[E],C=0;C<E;++C)Rt[C]^=_[C];F(Rt),this.reset=!0}else this.start=C}return this},S.prototype.encode=function(s,y){var b=s&255,_=1,x=[b];for(s=s>>8,b=s&255;b>0;)x.unshift(b),s=s>>8,b=s&255,++_;return y?x.push(_):x.unshift(_),this.update(x),x.length},S.prototype.encodeString=function(s){var y,b=typeof s;if(b!=="string"){if(b==="object"){if(s===null)throw new Error(n);if(q&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!q||!ArrayBuffer.isView(s)))throw new Error(n)}else throw new Error(n);y=!0}var _=0,x=s.length;if(y)_=x;else for(var B=0;B<s.length;++B){var E=s.charCodeAt(B);E<128?_+=1:E<2048?_+=2:E<55296||E>=57344?_+=3:(E=65536+((E&1023)<<10|s.charCodeAt(++B)&1023),_+=4)}return _+=this.encode(_*8),this.update(s),_},S.prototype.bytepad=function(s,y){for(var b=this.encode(y),_=0;_<s.length;++_)b+=this.encodeString(s[_]);var x=y-b%y,B=[];return B.length=x,this.update(B),this},S.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,y=this.lastByteIndex,b=this.blockCount,_=this.s;if(s[y>>2]|=this.padding[y&3],this.lastByteIndex===this.byteCount)for(s[0]=s[b],y=1;y<b+1;++y)s[y]=0;for(s[b-1]|=2147483648,y=0;y<b;++y)_[y]^=s[y];F(_)}},S.prototype.toString=S.prototype.hex=function(){this.finalize();for(var s=this.blockCount,y=this.s,b=this.outputBlocks,_=this.extraBytes,x=0,B=0,E="",k;B<b;){for(x=0;x<s&&B<b;++x,++B)k=y[x],E+=P[k>>4&15]+P[k&15]+P[k>>12&15]+P[k>>8&15]+P[k>>20&15]+P[k>>16&15]+P[k>>28&15]+P[k>>24&15];B%s===0&&(F(y),x=0)}return _&&(k=y[x],E+=P[k>>4&15]+P[k&15],_>1&&(E+=P[k>>12&15]+P[k>>8&15]),_>2&&(E+=P[k>>20&15]+P[k>>16&15])),E},S.prototype.arrayBuffer=function(){this.finalize();var s=this.blockCount,y=this.s,b=this.outputBlocks,_=this.extraBytes,x=0,B=0,E=this.outputBits>>3,k;_?k=new ArrayBuffer(b+1<<2):k=new ArrayBuffer(E);for(var Rt=new Uint32Array(k);B<b;){for(x=0;x<s&&B<b;++x,++B)Rt[B]=y[x];B%s===0&&F(y)}return _&&(Rt[x]=y[x],k=k.slice(0,E)),k},S.prototype.buffer=S.prototype.arrayBuffer,S.prototype.digest=S.prototype.array=function(){this.finalize();for(var s=this.blockCount,y=this.s,b=this.outputBlocks,_=this.extraBytes,x=0,B=0,E=[],k,Rt;B<b;){for(x=0;x<s&&B<b;++x,++B)k=B<<2,Rt=y[x],E[k]=Rt&255,E[k+1]=Rt>>8&255,E[k+2]=Rt>>16&255,E[k+3]=Rt>>24&255;B%s===0&&F(y)}return _&&(k=B<<2,Rt=y[x],E[k]=Rt&255,_>1&&(E[k+1]=Rt>>8&255),_>2&&(E[k+2]=Rt>>16&255)),E};function A(s,y,b){S.call(this,s,y,b)}A.prototype=new S,A.prototype.finalize=function(){return this.encode(this.outputBits,!0),S.prototype.finalize.call(this)};var F=function(s){var y,b,_,x,B,E,k,Rt,C,W,Ht,G,V,Jt,Q,X,Kt,Y,tt,zt,et,rt,Zt,nt,it,Gt,ot,st,Vt,at,ht,Qt,ft,ut,Xt,ct,lt,Yt,dt,pt,te,gt,vt,ee,mt,yt,re,wt,_t,ne,Mt,bt,ie,St,xt,Bt,Nt,Ft,Lt,Ut,Pt,jt,Wt;for(_=0;_<48;_+=2)x=s[0]^s[10]^s[20]^s[30]^s[40],B=s[1]^s[11]^s[21]^s[31]^s[41],E=s[2]^s[12]^s[22]^s[32]^s[42],k=s[3]^s[13]^s[23]^s[33]^s[43],Rt=s[4]^s[14]^s[24]^s[34]^s[44],C=s[5]^s[15]^s[25]^s[35]^s[45],W=s[6]^s[16]^s[26]^s[36]^s[46],Ht=s[7]^s[17]^s[27]^s[37]^s[47],G=s[8]^s[18]^s[28]^s[38]^s[48],V=s[9]^s[19]^s[29]^s[39]^s[49],y=G^(E<<1|k>>>31),b=V^(k<<1|E>>>31),s[0]^=y,s[1]^=b,s[10]^=y,s[11]^=b,s[20]^=y,s[21]^=b,s[30]^=y,s[31]^=b,s[40]^=y,s[41]^=b,y=x^(Rt<<1|C>>>31),b=B^(C<<1|Rt>>>31),s[2]^=y,s[3]^=b,s[12]^=y,s[13]^=b,s[22]^=y,s[23]^=b,s[32]^=y,s[33]^=b,s[42]^=y,s[43]^=b,y=E^(W<<1|Ht>>>31),b=k^(Ht<<1|W>>>31),s[4]^=y,s[5]^=b,s[14]^=y,s[15]^=b,s[24]^=y,s[25]^=b,s[34]^=y,s[35]^=b,s[44]^=y,s[45]^=b,y=Rt^(G<<1|V>>>31),b=C^(V<<1|G>>>31),s[6]^=y,s[7]^=b,s[16]^=y,s[17]^=b,s[26]^=y,s[27]^=b,s[36]^=y,s[37]^=b,s[46]^=y,s[47]^=b,y=W^(x<<1|B>>>31),b=Ht^(B<<1|x>>>31),s[8]^=y,s[9]^=b,s[18]^=y,s[19]^=b,s[28]^=y,s[29]^=b,s[38]^=y,s[39]^=b,s[48]^=y,s[49]^=b,Jt=s[0],Q=s[1],yt=s[11]<<4|s[10]>>>28,re=s[10]<<4|s[11]>>>28,st=s[20]<<3|s[21]>>>29,Vt=s[21]<<3|s[20]>>>29,Ut=s[31]<<9|s[30]>>>23,Pt=s[30]<<9|s[31]>>>23,gt=s[40]<<18|s[41]>>>14,vt=s[41]<<18|s[40]>>>14,ut=s[2]<<1|s[3]>>>31,Xt=s[3]<<1|s[2]>>>31,X=s[13]<<12|s[12]>>>20,Kt=s[12]<<12|s[13]>>>20,wt=s[22]<<10|s[23]>>>22,_t=s[23]<<10|s[22]>>>22,at=s[33]<<13|s[32]>>>19,ht=s[32]<<13|s[33]>>>19,jt=s[42]<<2|s[43]>>>30,Wt=s[43]<<2|s[42]>>>30,St=s[5]<<30|s[4]>>>2,xt=s[4]<<30|s[5]>>>2,ct=s[14]<<6|s[15]>>>26,lt=s[15]<<6|s[14]>>>26,Y=s[25]<<11|s[24]>>>21,tt=s[24]<<11|s[25]>>>21,ne=s[34]<<15|s[35]>>>17,Mt=s[35]<<15|s[34]>>>17,Qt=s[45]<<29|s[44]>>>3,ft=s[44]<<29|s[45]>>>3,nt=s[6]<<28|s[7]>>>4,it=s[7]<<28|s[6]>>>4,Bt=s[17]<<23|s[16]>>>9,Nt=s[16]<<23|s[17]>>>9,Yt=s[26]<<25|s[27]>>>7,dt=s[27]<<25|s[26]>>>7,zt=s[36]<<21|s[37]>>>11,et=s[37]<<21|s[36]>>>11,bt=s[47]<<24|s[46]>>>8,ie=s[46]<<24|s[47]>>>8,ee=s[8]<<27|s[9]>>>5,mt=s[9]<<27|s[8]>>>5,Gt=s[18]<<20|s[19]>>>12,ot=s[19]<<20|s[18]>>>12,Ft=s[29]<<7|s[28]>>>25,Lt=s[28]<<7|s[29]>>>25,pt=s[38]<<8|s[39]>>>24,te=s[39]<<8|s[38]>>>24,rt=s[48]<<14|s[49]>>>18,Zt=s[49]<<14|s[48]>>>18,s[0]=Jt^~X&Y,s[1]=Q^~Kt&tt,s[10]=nt^~Gt&st,s[11]=it^~ot&Vt,s[20]=ut^~ct&Yt,s[21]=Xt^~lt&dt,s[30]=ee^~yt&wt,s[31]=mt^~re&_t,s[40]=St^~Bt&Ft,s[41]=xt^~Nt&Lt,s[2]=X^~Y&zt,s[3]=Kt^~tt&et,s[12]=Gt^~st&at,s[13]=ot^~Vt&ht,s[22]=ct^~Yt&pt,s[23]=lt^~dt&te,s[32]=yt^~wt&ne,s[33]=re^~_t&Mt,s[42]=Bt^~Ft&Ut,s[43]=Nt^~Lt&Pt,s[4]=Y^~zt&rt,s[5]=tt^~et&Zt,s[14]=st^~at&Qt,s[15]=Vt^~ht&ft,s[24]=Yt^~pt&gt,s[25]=dt^~te&vt,s[34]=wt^~ne&bt,s[35]=_t^~Mt&ie,s[44]=Ft^~Ut&jt,s[45]=Lt^~Pt&Wt,s[6]=zt^~rt&Jt,s[7]=et^~Zt&Q,s[16]=at^~Qt&nt,s[17]=ht^~ft&it,s[26]=pt^~gt&ut,s[27]=te^~vt&Xt,s[36]=ne^~bt&ee,s[37]=Mt^~ie&mt,s[46]=Ut^~jt&St,s[47]=Pt^~Wt&xt,s[8]=rt^~Jt&X,s[9]=Zt^~Q&Kt,s[18]=Qt^~nt&Gt,s[19]=ft^~it&ot,s[28]=gt^~ut&ct,s[29]=vt^~Xt&lt,s[38]=bt^~ee&yt,s[39]=ie^~mt&re,s[48]=jt^~St&Bt,s[49]=Wt^~xt&Nt,s[0]^=It[_],s[1]^=It[_+1]};if(L)o.exports=a;else for(g=0;g<h.length;++g)m[h[g]]=a[h[g]]})()}(Wr)),pe}var wr=Dr();const no=He(wr);var ue={},z={},Qe;function $r(){if(Qe)return z;Qe=1,Object.defineProperty(z,"__esModule",{value:!0}),z.getLocalStorage=z.getLocalStorageOrThrow=z.getCrypto=z.getCryptoOrThrow=z.getLocation=z.getLocationOrThrow=z.getNavigator=z.getNavigatorOrThrow=z.getDocument=z.getDocumentOrThrow=z.getFromWindowOrThrow=z.getFromWindow=void 0;function o(H){let D;return typeof window<"u"&&typeof window[H]<"u"&&(D=window[H]),D}z.getFromWindow=o;function n(H){const D=o(H);if(!D)throw new Error(`${H} is not defined in Window`);return D}z.getFromWindowOrThrow=n;function u(){return n("document")}z.getDocumentOrThrow=u;function p(){return o("document")}z.getDocument=p;function m(){return n("navigator")}z.getNavigatorOrThrow=m;function d(){return o("navigator")}z.getNavigator=d;function I(){return n("location")}z.getLocationOrThrow=I;function L(){return o("location")}z.getLocation=L;function q(){return n("crypto")}z.getCryptoOrThrow=q;function P(){return o("crypto")}z.getCrypto=P;function Ot(){return n("localStorage")}z.getLocalStorageOrThrow=Ot;function K(){return o("localStorage")}return z.getLocalStorage=K,z}var Xe;function Hr(){if(Xe)return ue;Xe=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.getWindowMetadata=void 0;const o=$r();function n(){let u,p;try{u=o.getDocumentOrThrow(),p=o.getLocationOrThrow()}catch{return null}function m(){const D=u.getElementsByTagName("link"),$=[];for(let It=0;It<D.length;It++){const w=D[It],M=w.getAttribute("rel");if(M&&M.toLowerCase().indexOf("icon")>-1){const R=w.getAttribute("href");if(R)if(R.toLowerCase().indexOf("https:")===-1&&R.toLowerCase().indexOf("http:")===-1&&R.indexOf("//")!==0){let O=p.protocol+"//"+p.host;if(R.indexOf("/")===0)O+=R;else{const U=p.pathname.split("/");U.pop();const J=U.join("/");O+=J+"/"+R}$.push(O)}else if(R.indexOf("//")===0){const O=p.protocol+R;$.push(O)}else $.push(R)}}return $}function d(...D){const $=u.getElementsByTagName("meta");for(let It=0;It<$.length;It++){const w=$[It],M=["itemprop","property","name"].map(R=>w.getAttribute(R)).filter(R=>R?D.includes(R):!1);if(M.length&&M){const R=w.getAttribute("content");if(R)return R}}return""}function I(){let D=d("name","og:site_name","og:title","twitter:title");return D||(D=u.title),D}function L(){return d("description","og:description","twitter:description","keywords")}const q=I(),P=L(),Ot=p.origin,K=m();return{description:P,url:Ot,icons:K,name:q}}return ue.getWindowMetadata=n,ue}var Jr=Hr(),Z={},Ye;function Kr(){if(Ye)return Z;Ye=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.getLocalStorage=Z.getLocalStorageOrThrow=Z.getCrypto=Z.getCryptoOrThrow=Z.getLocation=Z.getLocationOrThrow=Z.getNavigator=Z.getNavigatorOrThrow=Z.getDocument=Z.getDocumentOrThrow=Z.getFromWindowOrThrow=Z.getFromWindow=void 0;function o(H){let D;return typeof window<"u"&&typeof window[H]<"u"&&(D=window[H]),D}Z.getFromWindow=o;function n(H){const D=o(H);if(!D)throw new Error(`${H} is not defined in Window`);return D}Z.getFromWindowOrThrow=n;function u(){return n("document")}Z.getDocumentOrThrow=u;function p(){return o("document")}Z.getDocument=p;function m(){return n("navigator")}Z.getNavigatorOrThrow=m;function d(){return o("navigator")}Z.getNavigator=d;function I(){return n("location")}Z.getLocationOrThrow=I;function L(){return o("location")}Z.getLocation=L;function q(){return n("crypto")}Z.getCryptoOrThrow=q;function P(){return o("crypto")}Z.getCrypto=P;function Ot(){return n("localStorage")}Z.getLocalStorageOrThrow=Ot;function K(){return o("localStorage")}return Z.getLocalStorage=K,Z}var Et=Kr(),zr=globalThis&&globalThis.__spreadArrays||function(){for(var o=0,n=0,u=arguments.length;n<u;n++)o+=arguments[n].length;for(var p=Array(o),m=0,n=0;n<u;n++)for(var d=arguments[n],I=0,L=d.length;I<L;I++,m++)p[m]=d[I];return p},Zr=function(){function o(n,u,p){this.name=n,this.version=u,this.os=p,this.type="browser"}return o}(),Gr=function(){function o(n){this.version=n,this.type="node",this.name="node",this.os=process.platform}return o}(),Vr=function(){function o(n,u,p,m){this.name=n,this.version=u,this.os=p,this.bot=m,this.type="bot-device"}return o}(),Qr=function(){function o(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return o}(),Xr=function(){function o(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return o}(),Yr=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,tn=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,tr=3,en=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",Yr]],er=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rn(o){return o?rr(o):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Xr:typeof navigator<"u"?rr(navigator.userAgent):sn()}function nn(o){return o!==""&&en.reduce(function(n,u){var p=u[0],m=u[1];if(n)return n;var d=m.exec(o);return!!d&&[p,d]},!1)}function rr(o){var n=nn(o);if(!n)return null;var u=n[0],p=n[1];if(u==="searchbot")return new Qr;var m=p[1]&&p[1].split(/[._]/).slice(0,3);m?m.length<tr&&(m=zr(m,an(tr-m.length))):m=[];var d=m.join("."),I=on(o),L=tn.exec(o);return L&&L[1]?new Vr(u,d,I,L[1]):new Zr(u,d,I)}function on(o){for(var n=0,u=er.length;n<u;n++){var p=er[n],m=p[0],d=p[1],I=d.exec(o);if(I)return m}return null}function sn(){var o=typeof process<"u"&&process.version;return o?new Gr(process.version.slice(1)):null}function an(o){for(var n=[],u=0;u<o;u++)n.push("0");return n}function Je(o){return rn(o)}function Ke(){const o=Je();return o&&o.os?o.os:void 0}function hn(){const o=Ke();return o?o.toLowerCase().includes("android"):!1}function fn(){const o=Ke();return o?o.toLowerCase().includes("ios")||o.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function un(){return Ke()?hn()||fn():!1}function cn(){const o=Je();return o&&o.name?o.name.toLowerCase()==="node":!1}function ln(){return!cn()&&!!dn()}const io=Et.getFromWindow,oo=Et.getFromWindowOrThrow,so=Et.getDocumentOrThrow,ao=Et.getDocument,ho=Et.getNavigatorOrThrow,dn=Et.getNavigator,fo=Et.getLocationOrThrow,pn=Et.getLocation,uo=Et.getCryptoOrThrow,co=Et.getCrypto,lo=Et.getLocalStorageOrThrow,ze=Et.getLocalStorage;function nr(){return Jr.getWindowMetadata()}function gn(o){if(typeof o!="string")throw new Error(`Cannot safe json parse value of type ${typeof o}`);try{return JSON.parse(o)}catch{return o}}function vn(o){return typeof o=="string"?o:JSON.stringify(o)}const mn=gn,yn=vn;function _r(o,n){const u=yn(n),p=ze();p&&p.setItem(o,u)}function Mr(o){let n=null,u=null;const p=ze();return p&&(u=p.getItem(o)),n=u&&mn(u),n}function br(o){const n=ze();n&&n.removeItem(o)}const We="WALLETCONNECT_DEEPLINK_CHOICE";function po(o,n){const u=encodeURIComponent(o);return n.universalLink?`${n.universalLink}/wc?uri=${u}`:n.deepLink?`${n.deepLink}${n.deepLink.endsWith(":")?"//":"/"}wc?uri=${u}`:""}function go(o){const n=o.href.split("?")[0];_r(We,Object.assign(Object.assign({},o),{href:n}))}function wn(o,n){return o.filter(u=>u.name.toLowerCase().includes(n.toLowerCase()))[0]}function vo(o,n){let u=o;return n&&(u=n.map(p=>wn(o,p)).filter(Boolean)),u}const _n=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],Sr=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Mn={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"};var ge={},bn={get exports(){return ge},set exports(o){ge=o}},ir;function Sn(){return ir||(ir=1,function(o){(function(n,u){function p(f,t){if(!f)throw new Error(t||"Assertion failed")}function m(f,t){f.super_=t;var r=function(){};r.prototype=t.prototype,f.prototype=new r,f.prototype.constructor=f}function d(f,t,r){if(d.isBN(f))return f;this.negative=0,this.words=null,this.length=0,this.red=null,f!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(f||0,t||10,r||"be"))}typeof n=="object"?n.exports=d:u.BN=d,d.BN=d,d.wordSize=26;var I;try{I=jr.Buffer}catch{}d.isBN=function(t){return t instanceof d?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===d.wordSize&&Array.isArray(t.words)},d.max=function(t,r){return t.cmp(r)>0?t:r},d.min=function(t,r){return t.cmp(r)<0?t:r},d.prototype._init=function(t,r,i){if(typeof t=="number")return this._initNumber(t,r,i);if(typeof t=="object")return this._initArray(t,r,i);r==="hex"&&(r=16),p(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var a=0;t[0]==="-"&&a++,r===16?this._parseHex(t,a):this._parseBase(t,r,a),t[0]==="-"&&(this.negative=1),this.strip(),i==="le"&&this._initArray(this.toArray(),r,i)},d.prototype._initNumber=function(t,r,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(p(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),i==="le"&&this._initArray(this.toArray(),r,i)},d.prototype._initArray=function(t,r,i){if(p(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var h,g,v=0;if(i==="be")for(a=t.length-1,h=0;a>=0;a-=3)g=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[h]|=g<<v&67108863,this.words[h+1]=g>>>26-v&67108863,v+=24,v>=26&&(v-=26,h++);else if(i==="le")for(a=0,h=0;a<t.length;a+=3)g=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[h]|=g<<v&67108863,this.words[h+1]=g>>>26-v&67108863,v+=24,v>=26&&(v-=26,h++);return this.strip()};function L(f,t,r){for(var i=0,a=Math.min(f.length,r),h=t;h<a;h++){var g=f.charCodeAt(h)-48;i<<=4,g>=49&&g<=54?i|=g-49+10:g>=17&&g<=22?i|=g-17+10:i|=g&15}return i}d.prototype._parseHex=function(t,r){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,h,g=0;for(i=t.length-6,a=0;i>=r;i-=6)h=L(t,i,i+6),this.words[a]|=h<<g&67108863,this.words[a+1]|=h>>>26-g&4194303,g+=24,g>=26&&(g-=26,a++);i+6!==r&&(h=L(t,r,i+6),this.words[a]|=h<<g&67108863,this.words[a+1]|=h>>>26-g&4194303),this.strip()};function q(f,t,r,i){for(var a=0,h=Math.min(f.length,r),g=t;g<h;g++){var v=f.charCodeAt(g)-48;a*=i,v>=49?a+=v-49+10:v>=17?a+=v-17+10:a+=v}return a}d.prototype._parseBase=function(t,r,i){this.words=[0],this.length=1;for(var a=0,h=1;h<=67108863;h*=r)a++;a--,h=h/r|0;for(var g=t.length-i,v=g%a,c=Math.min(g,g-v)+i,e=0,l=i;l<c;l+=a)e=q(t,l,l+a,r),this.imuln(h),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(v!==0){var T=1;for(e=q(t,l,t.length,r),l=0;l<v;l++)T*=r;this.imuln(T),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}},d.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},d.prototype.clone=function(){var t=new d(null);return this.copy(t),t},d.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},d.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ot=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],K=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function(t,r){t=t||10,r=r|0||1;var i;if(t===16||t==="hex"){i="";for(var a=0,h=0,g=0;g<this.length;g++){var v=this.words[g],c=((v<<a|h)&16777215).toString(16);h=v>>>24-a&16777215,h!==0||g!==this.length-1?i=P[6-c.length]+c+i:i=c+i,a+=2,a>=26&&(a-=26,g--)}for(h!==0&&(i=h.toString(16)+i);i.length%r!==0;)i="0"+i;return this.negative!==0&&(i="-"+i),i}if(t===(t|0)&&t>=2&&t<=36){var e=Ot[t],l=K[t];i="";var T=this.clone();for(T.negative=0;!T.isZero();){var S=T.modn(l).toString(t);T=T.idivn(l),T.isZero()?i=S+i:i=P[e-S.length]+S+i}for(this.isZero()&&(i="0"+i);i.length%r!==0;)i="0"+i;return this.negative!==0&&(i="-"+i),i}p(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&p(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(t,r){return p(typeof I<"u"),this.toArrayLike(I,t,r)},d.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},d.prototype.toArrayLike=function(t,r,i){var a=this.byteLength(),h=i||Math.max(1,a);p(a<=h,"byte array longer than desired length"),p(h>0,"Requested array length <= 0"),this.strip();var g=r==="le",v=new t(h),c,e,l=this.clone();if(g){for(e=0;!l.isZero();e++)c=l.andln(255),l.iushrn(8),v[e]=c;for(;e<h;e++)v[e]=0}else{for(e=0;e<h-a;e++)v[e]=0;for(e=0;!l.isZero();e++)c=l.andln(255),l.iushrn(8),v[h-e-1]=c}return v},Math.clz32?d.prototype._countBits=function(t){return 32-Math.clz32(t)}:d.prototype._countBits=function(t){var r=t,i=0;return r>=4096&&(i+=13,r>>>=13),r>=64&&(i+=7,r>>>=7),r>=8&&(i+=4,r>>>=4),r>=2&&(i+=2,r>>>=2),i+r},d.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,i=0;return r&8191||(i+=13,r>>>=13),r&127||(i+=7,r>>>=7),r&15||(i+=4,r>>>=4),r&3||(i+=2,r>>>=2),r&1||i++,i},d.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function H(f){for(var t=new Array(f.bitLength()),r=0;r<t.length;r++){var i=r/26|0,a=r%26;t[r]=(f.words[i]&1<<a)>>>a}return t}d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var i=this._zeroBits(this.words[r]);if(t+=i,i!==26)break}return t},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},d.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return this.negative!==0},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},d.prototype.ior=function(t){return p((this.negative|t.negative)===0),this.iuor(t)},d.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},d.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},d.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var i=0;i<r.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=r.length,this.strip()},d.prototype.iand=function(t){return p((this.negative|t.negative)===0),this.iuand(t)},d.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},d.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},d.prototype.iuxor=function(t){var r,i;this.length>t.length?(r=this,i=t):(r=t,i=this);for(var a=0;a<i.length;a++)this.words[a]=r.words[a]^i.words[a];if(this!==r)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=r.length,this.strip()},d.prototype.ixor=function(t){return p((this.negative|t.negative)===0),this.iuxor(t)},d.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},d.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},d.prototype.inotn=function(t){p(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,i=t%26;this._expand(r),i>0&&r--;for(var a=0;a<r;a++)this.words[a]=~this.words[a]&67108863;return i>0&&(this.words[a]=~this.words[a]&67108863>>26-i),this.strip()},d.prototype.notn=function(t){return this.clone().inotn(t)},d.prototype.setn=function(t,r){p(typeof t=="number"&&t>=0);var i=t/26|0,a=t%26;return this._expand(i+1),r?this.words[i]=this.words[i]|1<<a:this.words[i]=this.words[i]&~(1<<a),this.strip()},d.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var i,a;this.length>t.length?(i=this,a=t):(i=t,a=this);for(var h=0,g=0;g<a.length;g++)r=(i.words[g]|0)+(a.words[g]|0)+h,this.words[g]=r&67108863,h=r>>>26;for(;h!==0&&g<i.length;g++)r=(i.words[g]|0)+h,this.words[g]=r&67108863,h=r>>>26;if(this.length=i.length,h!==0)this.words[this.length]=h,this.length++;else if(i!==this)for(;g<i.length;g++)this.words[g]=i.words[g];return this},d.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},d.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(i===0)return this.negative=0,this.length=1,this.words[0]=0,this;var a,h;i>0?(a=this,h=t):(a=t,h=this);for(var g=0,v=0;v<h.length;v++)r=(a.words[v]|0)-(h.words[v]|0)+g,g=r>>26,this.words[v]=r&67108863;for(;g!==0&&v<a.length;v++)r=(a.words[v]|0)+g,g=r>>26,this.words[v]=r&67108863;if(g===0&&v<a.length&&a!==this)for(;v<a.length;v++)this.words[v]=a.words[v];return this.length=Math.max(this.length,v),a!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(t){return this.clone().isub(t)};function D(f,t,r){r.negative=t.negative^f.negative;var i=f.length+t.length|0;r.length=i,i=i-1|0;var a=f.words[0]|0,h=t.words[0]|0,g=a*h,v=g&67108863,c=g/67108864|0;r.words[0]=v;for(var e=1;e<i;e++){for(var l=c>>>26,T=c&67108863,S=Math.min(e,t.length-1),A=Math.max(0,e-f.length+1);A<=S;A++){var F=e-A|0;a=f.words[F]|0,h=t.words[A]|0,g=a*h+T,l+=g/67108864|0,T=g&67108863}r.words[e]=T|0,c=l|0}return c!==0?r.words[e]=c|0:r.length--,r.strip()}var $=function(t,r,i){var a=t.words,h=r.words,g=i.words,v=0,c,e,l,T=a[0]|0,S=T&8191,A=T>>>13,F=a[1]|0,s=F&8191,y=F>>>13,b=a[2]|0,_=b&8191,x=b>>>13,B=a[3]|0,E=B&8191,k=B>>>13,Rt=a[4]|0,C=Rt&8191,W=Rt>>>13,Ht=a[5]|0,G=Ht&8191,V=Ht>>>13,Jt=a[6]|0,Q=Jt&8191,X=Jt>>>13,Kt=a[7]|0,Y=Kt&8191,tt=Kt>>>13,zt=a[8]|0,et=zt&8191,rt=zt>>>13,Zt=a[9]|0,nt=Zt&8191,it=Zt>>>13,Gt=h[0]|0,ot=Gt&8191,st=Gt>>>13,Vt=h[1]|0,at=Vt&8191,ht=Vt>>>13,Qt=h[2]|0,ft=Qt&8191,ut=Qt>>>13,Xt=h[3]|0,ct=Xt&8191,lt=Xt>>>13,Yt=h[4]|0,dt=Yt&8191,pt=Yt>>>13,te=h[5]|0,gt=te&8191,vt=te>>>13,ee=h[6]|0,mt=ee&8191,yt=ee>>>13,re=h[7]|0,wt=re&8191,_t=re>>>13,ne=h[8]|0,Mt=ne&8191,bt=ne>>>13,ie=h[9]|0,St=ie&8191,xt=ie>>>13;i.negative=t.negative^r.negative,i.length=19,c=Math.imul(S,ot),e=Math.imul(S,st),e=e+Math.imul(A,ot)|0,l=Math.imul(A,st);var Bt=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,c=Math.imul(s,ot),e=Math.imul(s,st),e=e+Math.imul(y,ot)|0,l=Math.imul(y,st),c=c+Math.imul(S,at)|0,e=e+Math.imul(S,ht)|0,e=e+Math.imul(A,at)|0,l=l+Math.imul(A,ht)|0;var Nt=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,c=Math.imul(_,ot),e=Math.imul(_,st),e=e+Math.imul(x,ot)|0,l=Math.imul(x,st),c=c+Math.imul(s,at)|0,e=e+Math.imul(s,ht)|0,e=e+Math.imul(y,at)|0,l=l+Math.imul(y,ht)|0,c=c+Math.imul(S,ft)|0,e=e+Math.imul(S,ut)|0,e=e+Math.imul(A,ft)|0,l=l+Math.imul(A,ut)|0;var Ft=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,c=Math.imul(E,ot),e=Math.imul(E,st),e=e+Math.imul(k,ot)|0,l=Math.imul(k,st),c=c+Math.imul(_,at)|0,e=e+Math.imul(_,ht)|0,e=e+Math.imul(x,at)|0,l=l+Math.imul(x,ht)|0,c=c+Math.imul(s,ft)|0,e=e+Math.imul(s,ut)|0,e=e+Math.imul(y,ft)|0,l=l+Math.imul(y,ut)|0,c=c+Math.imul(S,ct)|0,e=e+Math.imul(S,lt)|0,e=e+Math.imul(A,ct)|0,l=l+Math.imul(A,lt)|0;var Lt=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,c=Math.imul(C,ot),e=Math.imul(C,st),e=e+Math.imul(W,ot)|0,l=Math.imul(W,st),c=c+Math.imul(E,at)|0,e=e+Math.imul(E,ht)|0,e=e+Math.imul(k,at)|0,l=l+Math.imul(k,ht)|0,c=c+Math.imul(_,ft)|0,e=e+Math.imul(_,ut)|0,e=e+Math.imul(x,ft)|0,l=l+Math.imul(x,ut)|0,c=c+Math.imul(s,ct)|0,e=e+Math.imul(s,lt)|0,e=e+Math.imul(y,ct)|0,l=l+Math.imul(y,lt)|0,c=c+Math.imul(S,dt)|0,e=e+Math.imul(S,pt)|0,e=e+Math.imul(A,dt)|0,l=l+Math.imul(A,pt)|0;var Ut=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,c=Math.imul(G,ot),e=Math.imul(G,st),e=e+Math.imul(V,ot)|0,l=Math.imul(V,st),c=c+Math.imul(C,at)|0,e=e+Math.imul(C,ht)|0,e=e+Math.imul(W,at)|0,l=l+Math.imul(W,ht)|0,c=c+Math.imul(E,ft)|0,e=e+Math.imul(E,ut)|0,e=e+Math.imul(k,ft)|0,l=l+Math.imul(k,ut)|0,c=c+Math.imul(_,ct)|0,e=e+Math.imul(_,lt)|0,e=e+Math.imul(x,ct)|0,l=l+Math.imul(x,lt)|0,c=c+Math.imul(s,dt)|0,e=e+Math.imul(s,pt)|0,e=e+Math.imul(y,dt)|0,l=l+Math.imul(y,pt)|0,c=c+Math.imul(S,gt)|0,e=e+Math.imul(S,vt)|0,e=e+Math.imul(A,gt)|0,l=l+Math.imul(A,vt)|0;var Pt=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,c=Math.imul(Q,ot),e=Math.imul(Q,st),e=e+Math.imul(X,ot)|0,l=Math.imul(X,st),c=c+Math.imul(G,at)|0,e=e+Math.imul(G,ht)|0,e=e+Math.imul(V,at)|0,l=l+Math.imul(V,ht)|0,c=c+Math.imul(C,ft)|0,e=e+Math.imul(C,ut)|0,e=e+Math.imul(W,ft)|0,l=l+Math.imul(W,ut)|0,c=c+Math.imul(E,ct)|0,e=e+Math.imul(E,lt)|0,e=e+Math.imul(k,ct)|0,l=l+Math.imul(k,lt)|0,c=c+Math.imul(_,dt)|0,e=e+Math.imul(_,pt)|0,e=e+Math.imul(x,dt)|0,l=l+Math.imul(x,pt)|0,c=c+Math.imul(s,gt)|0,e=e+Math.imul(s,vt)|0,e=e+Math.imul(y,gt)|0,l=l+Math.imul(y,vt)|0,c=c+Math.imul(S,mt)|0,e=e+Math.imul(S,yt)|0,e=e+Math.imul(A,mt)|0,l=l+Math.imul(A,yt)|0;var jt=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(jt>>>26)|0,jt&=67108863,c=Math.imul(Y,ot),e=Math.imul(Y,st),e=e+Math.imul(tt,ot)|0,l=Math.imul(tt,st),c=c+Math.imul(Q,at)|0,e=e+Math.imul(Q,ht)|0,e=e+Math.imul(X,at)|0,l=l+Math.imul(X,ht)|0,c=c+Math.imul(G,ft)|0,e=e+Math.imul(G,ut)|0,e=e+Math.imul(V,ft)|0,l=l+Math.imul(V,ut)|0,c=c+Math.imul(C,ct)|0,e=e+Math.imul(C,lt)|0,e=e+Math.imul(W,ct)|0,l=l+Math.imul(W,lt)|0,c=c+Math.imul(E,dt)|0,e=e+Math.imul(E,pt)|0,e=e+Math.imul(k,dt)|0,l=l+Math.imul(k,pt)|0,c=c+Math.imul(_,gt)|0,e=e+Math.imul(_,vt)|0,e=e+Math.imul(x,gt)|0,l=l+Math.imul(x,vt)|0,c=c+Math.imul(s,mt)|0,e=e+Math.imul(s,yt)|0,e=e+Math.imul(y,mt)|0,l=l+Math.imul(y,yt)|0,c=c+Math.imul(S,wt)|0,e=e+Math.imul(S,_t)|0,e=e+Math.imul(A,wt)|0,l=l+Math.imul(A,_t)|0;var Wt=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,c=Math.imul(et,ot),e=Math.imul(et,st),e=e+Math.imul(rt,ot)|0,l=Math.imul(rt,st),c=c+Math.imul(Y,at)|0,e=e+Math.imul(Y,ht)|0,e=e+Math.imul(tt,at)|0,l=l+Math.imul(tt,ht)|0,c=c+Math.imul(Q,ft)|0,e=e+Math.imul(Q,ut)|0,e=e+Math.imul(X,ft)|0,l=l+Math.imul(X,ut)|0,c=c+Math.imul(G,ct)|0,e=e+Math.imul(G,lt)|0,e=e+Math.imul(V,ct)|0,l=l+Math.imul(V,lt)|0,c=c+Math.imul(C,dt)|0,e=e+Math.imul(C,pt)|0,e=e+Math.imul(W,dt)|0,l=l+Math.imul(W,pt)|0,c=c+Math.imul(E,gt)|0,e=e+Math.imul(E,vt)|0,e=e+Math.imul(k,gt)|0,l=l+Math.imul(k,vt)|0,c=c+Math.imul(_,mt)|0,e=e+Math.imul(_,yt)|0,e=e+Math.imul(x,mt)|0,l=l+Math.imul(x,yt)|0,c=c+Math.imul(s,wt)|0,e=e+Math.imul(s,_t)|0,e=e+Math.imul(y,wt)|0,l=l+Math.imul(y,_t)|0,c=c+Math.imul(S,Mt)|0,e=e+Math.imul(S,bt)|0,e=e+Math.imul(A,Mt)|0,l=l+Math.imul(A,bt)|0;var _e=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(_e>>>26)|0,_e&=67108863,c=Math.imul(nt,ot),e=Math.imul(nt,st),e=e+Math.imul(it,ot)|0,l=Math.imul(it,st),c=c+Math.imul(et,at)|0,e=e+Math.imul(et,ht)|0,e=e+Math.imul(rt,at)|0,l=l+Math.imul(rt,ht)|0,c=c+Math.imul(Y,ft)|0,e=e+Math.imul(Y,ut)|0,e=e+Math.imul(tt,ft)|0,l=l+Math.imul(tt,ut)|0,c=c+Math.imul(Q,ct)|0,e=e+Math.imul(Q,lt)|0,e=e+Math.imul(X,ct)|0,l=l+Math.imul(X,lt)|0,c=c+Math.imul(G,dt)|0,e=e+Math.imul(G,pt)|0,e=e+Math.imul(V,dt)|0,l=l+Math.imul(V,pt)|0,c=c+Math.imul(C,gt)|0,e=e+Math.imul(C,vt)|0,e=e+Math.imul(W,gt)|0,l=l+Math.imul(W,vt)|0,c=c+Math.imul(E,mt)|0,e=e+Math.imul(E,yt)|0,e=e+Math.imul(k,mt)|0,l=l+Math.imul(k,yt)|0,c=c+Math.imul(_,wt)|0,e=e+Math.imul(_,_t)|0,e=e+Math.imul(x,wt)|0,l=l+Math.imul(x,_t)|0,c=c+Math.imul(s,Mt)|0,e=e+Math.imul(s,bt)|0,e=e+Math.imul(y,Mt)|0,l=l+Math.imul(y,bt)|0,c=c+Math.imul(S,St)|0,e=e+Math.imul(S,xt)|0,e=e+Math.imul(A,St)|0,l=l+Math.imul(A,xt)|0;var Me=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Me>>>26)|0,Me&=67108863,c=Math.imul(nt,at),e=Math.imul(nt,ht),e=e+Math.imul(it,at)|0,l=Math.imul(it,ht),c=c+Math.imul(et,ft)|0,e=e+Math.imul(et,ut)|0,e=e+Math.imul(rt,ft)|0,l=l+Math.imul(rt,ut)|0,c=c+Math.imul(Y,ct)|0,e=e+Math.imul(Y,lt)|0,e=e+Math.imul(tt,ct)|0,l=l+Math.imul(tt,lt)|0,c=c+Math.imul(Q,dt)|0,e=e+Math.imul(Q,pt)|0,e=e+Math.imul(X,dt)|0,l=l+Math.imul(X,pt)|0,c=c+Math.imul(G,gt)|0,e=e+Math.imul(G,vt)|0,e=e+Math.imul(V,gt)|0,l=l+Math.imul(V,vt)|0,c=c+Math.imul(C,mt)|0,e=e+Math.imul(C,yt)|0,e=e+Math.imul(W,mt)|0,l=l+Math.imul(W,yt)|0,c=c+Math.imul(E,wt)|0,e=e+Math.imul(E,_t)|0,e=e+Math.imul(k,wt)|0,l=l+Math.imul(k,_t)|0,c=c+Math.imul(_,Mt)|0,e=e+Math.imul(_,bt)|0,e=e+Math.imul(x,Mt)|0,l=l+Math.imul(x,bt)|0,c=c+Math.imul(s,St)|0,e=e+Math.imul(s,xt)|0,e=e+Math.imul(y,St)|0,l=l+Math.imul(y,xt)|0;var be=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(be>>>26)|0,be&=67108863,c=Math.imul(nt,ft),e=Math.imul(nt,ut),e=e+Math.imul(it,ft)|0,l=Math.imul(it,ut),c=c+Math.imul(et,ct)|0,e=e+Math.imul(et,lt)|0,e=e+Math.imul(rt,ct)|0,l=l+Math.imul(rt,lt)|0,c=c+Math.imul(Y,dt)|0,e=e+Math.imul(Y,pt)|0,e=e+Math.imul(tt,dt)|0,l=l+Math.imul(tt,pt)|0,c=c+Math.imul(Q,gt)|0,e=e+Math.imul(Q,vt)|0,e=e+Math.imul(X,gt)|0,l=l+Math.imul(X,vt)|0,c=c+Math.imul(G,mt)|0,e=e+Math.imul(G,yt)|0,e=e+Math.imul(V,mt)|0,l=l+Math.imul(V,yt)|0,c=c+Math.imul(C,wt)|0,e=e+Math.imul(C,_t)|0,e=e+Math.imul(W,wt)|0,l=l+Math.imul(W,_t)|0,c=c+Math.imul(E,Mt)|0,e=e+Math.imul(E,bt)|0,e=e+Math.imul(k,Mt)|0,l=l+Math.imul(k,bt)|0,c=c+Math.imul(_,St)|0,e=e+Math.imul(_,xt)|0,e=e+Math.imul(x,St)|0,l=l+Math.imul(x,xt)|0;var Se=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,c=Math.imul(nt,ct),e=Math.imul(nt,lt),e=e+Math.imul(it,ct)|0,l=Math.imul(it,lt),c=c+Math.imul(et,dt)|0,e=e+Math.imul(et,pt)|0,e=e+Math.imul(rt,dt)|0,l=l+Math.imul(rt,pt)|0,c=c+Math.imul(Y,gt)|0,e=e+Math.imul(Y,vt)|0,e=e+Math.imul(tt,gt)|0,l=l+Math.imul(tt,vt)|0,c=c+Math.imul(Q,mt)|0,e=e+Math.imul(Q,yt)|0,e=e+Math.imul(X,mt)|0,l=l+Math.imul(X,yt)|0,c=c+Math.imul(G,wt)|0,e=e+Math.imul(G,_t)|0,e=e+Math.imul(V,wt)|0,l=l+Math.imul(V,_t)|0,c=c+Math.imul(C,Mt)|0,e=e+Math.imul(C,bt)|0,e=e+Math.imul(W,Mt)|0,l=l+Math.imul(W,bt)|0,c=c+Math.imul(E,St)|0,e=e+Math.imul(E,xt)|0,e=e+Math.imul(k,St)|0,l=l+Math.imul(k,xt)|0;var xe=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(xe>>>26)|0,xe&=67108863,c=Math.imul(nt,dt),e=Math.imul(nt,pt),e=e+Math.imul(it,dt)|0,l=Math.imul(it,pt),c=c+Math.imul(et,gt)|0,e=e+Math.imul(et,vt)|0,e=e+Math.imul(rt,gt)|0,l=l+Math.imul(rt,vt)|0,c=c+Math.imul(Y,mt)|0,e=e+Math.imul(Y,yt)|0,e=e+Math.imul(tt,mt)|0,l=l+Math.imul(tt,yt)|0,c=c+Math.imul(Q,wt)|0,e=e+Math.imul(Q,_t)|0,e=e+Math.imul(X,wt)|0,l=l+Math.imul(X,_t)|0,c=c+Math.imul(G,Mt)|0,e=e+Math.imul(G,bt)|0,e=e+Math.imul(V,Mt)|0,l=l+Math.imul(V,bt)|0,c=c+Math.imul(C,St)|0,e=e+Math.imul(C,xt)|0,e=e+Math.imul(W,St)|0,l=l+Math.imul(W,xt)|0;var Oe=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,c=Math.imul(nt,gt),e=Math.imul(nt,vt),e=e+Math.imul(it,gt)|0,l=Math.imul(it,vt),c=c+Math.imul(et,mt)|0,e=e+Math.imul(et,yt)|0,e=e+Math.imul(rt,mt)|0,l=l+Math.imul(rt,yt)|0,c=c+Math.imul(Y,wt)|0,e=e+Math.imul(Y,_t)|0,e=e+Math.imul(tt,wt)|0,l=l+Math.imul(tt,_t)|0,c=c+Math.imul(Q,Mt)|0,e=e+Math.imul(Q,bt)|0,e=e+Math.imul(X,Mt)|0,l=l+Math.imul(X,bt)|0,c=c+Math.imul(G,St)|0,e=e+Math.imul(G,xt)|0,e=e+Math.imul(V,St)|0,l=l+Math.imul(V,xt)|0;var Re=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Re>>>26)|0,Re&=67108863,c=Math.imul(nt,mt),e=Math.imul(nt,yt),e=e+Math.imul(it,mt)|0,l=Math.imul(it,yt),c=c+Math.imul(et,wt)|0,e=e+Math.imul(et,_t)|0,e=e+Math.imul(rt,wt)|0,l=l+Math.imul(rt,_t)|0,c=c+Math.imul(Y,Mt)|0,e=e+Math.imul(Y,bt)|0,e=e+Math.imul(tt,Mt)|0,l=l+Math.imul(tt,bt)|0,c=c+Math.imul(Q,St)|0,e=e+Math.imul(Q,xt)|0,e=e+Math.imul(X,St)|0,l=l+Math.imul(X,xt)|0;var ke=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(ke>>>26)|0,ke&=67108863,c=Math.imul(nt,wt),e=Math.imul(nt,_t),e=e+Math.imul(it,wt)|0,l=Math.imul(it,_t),c=c+Math.imul(et,Mt)|0,e=e+Math.imul(et,bt)|0,e=e+Math.imul(rt,Mt)|0,l=l+Math.imul(rt,bt)|0,c=c+Math.imul(Y,St)|0,e=e+Math.imul(Y,xt)|0,e=e+Math.imul(tt,St)|0,l=l+Math.imul(tt,xt)|0;var Ie=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,c=Math.imul(nt,Mt),e=Math.imul(nt,bt),e=e+Math.imul(it,Mt)|0,l=Math.imul(it,bt),c=c+Math.imul(et,St)|0,e=e+Math.imul(et,xt)|0,e=e+Math.imul(rt,St)|0,l=l+Math.imul(rt,xt)|0;var Te=(v+c|0)+((e&8191)<<13)|0;v=(l+(e>>>13)|0)+(Te>>>26)|0,Te&=67108863,c=Math.imul(nt,St),e=Math.imul(nt,xt),e=e+Math.imul(it,St)|0,l=Math.imul(it,xt);var Ee=(v+c|0)+((e&8191)<<13)|0;return v=(l+(e>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,g[0]=Bt,g[1]=Nt,g[2]=Ft,g[3]=Lt,g[4]=Ut,g[5]=Pt,g[6]=jt,g[7]=Wt,g[8]=_e,g[9]=Me,g[10]=be,g[11]=Se,g[12]=xe,g[13]=Oe,g[14]=Re,g[15]=ke,g[16]=Ie,g[17]=Te,g[18]=Ee,v!==0&&(g[19]=v,i.length++),i};Math.imul||($=D);function It(f,t,r){r.negative=t.negative^f.negative,r.length=f.length+t.length;for(var i=0,a=0,h=0;h<r.length-1;h++){var g=a;a=0;for(var v=i&67108863,c=Math.min(h,t.length-1),e=Math.max(0,h-f.length+1);e<=c;e++){var l=h-e,T=f.words[l]|0,S=t.words[e]|0,A=T*S,F=A&67108863;g=g+(A/67108864|0)|0,F=F+v|0,v=F&67108863,g=g+(F>>>26)|0,a+=g>>>26,g&=67108863}r.words[h]=v,i=g,g=a}return i!==0?r.words[h]=i:r.length--,r.strip()}function w(f,t,r){var i=new M;return i.mulp(f,t,r)}d.prototype.mulTo=function(t,r){var i,a=this.length+t.length;return this.length===10&&t.length===10?i=$(this,t,r):a<63?i=D(this,t,r):a<1024?i=It(this,t,r):i=w(this,t,r),i};function M(f,t){this.x=f,this.y=t}M.prototype.makeRBT=function(t){for(var r=new Array(t),i=d.prototype._countBits(t)-1,a=0;a<t;a++)r[a]=this.revBin(a,i,t);return r},M.prototype.revBin=function(t,r,i){if(t===0||t===i-1)return t;for(var a=0,h=0;h<r;h++)a|=(t&1)<<r-h-1,t>>=1;return a},M.prototype.permute=function(t,r,i,a,h,g){for(var v=0;v<g;v++)a[v]=r[t[v]],h[v]=i[t[v]]},M.prototype.transform=function(t,r,i,a,h,g){this.permute(g,t,r,i,a,h);for(var v=1;v<h;v<<=1)for(var c=v<<1,e=Math.cos(2*Math.PI/c),l=Math.sin(2*Math.PI/c),T=0;T<h;T+=c)for(var S=e,A=l,F=0;F<v;F++){var s=i[T+F],y=a[T+F],b=i[T+F+v],_=a[T+F+v],x=S*b-A*_;_=S*_+A*b,b=x,i[T+F]=s+b,a[T+F]=y+_,i[T+F+v]=s-b,a[T+F+v]=y-_,F!==c&&(x=e*S-l*A,A=e*A+l*S,S=x)}},M.prototype.guessLen13b=function(t,r){var i=Math.max(r,t)|1,a=i&1,h=0;for(i=i/2|0;i;i=i>>>1)h++;return 1<<h+1+a},M.prototype.conjugate=function(t,r,i){if(!(i<=1))for(var a=0;a<i/2;a++){var h=t[a];t[a]=t[i-a-1],t[i-a-1]=h,h=r[a],r[a]=-r[i-a-1],r[i-a-1]=-h}},M.prototype.normalize13b=function(t,r){for(var i=0,a=0;a<r/2;a++){var h=Math.round(t[2*a+1]/r)*8192+Math.round(t[2*a]/r)+i;t[a]=h&67108863,h<67108864?i=0:i=h/67108864|0}return t},M.prototype.convert13b=function(t,r,i,a){for(var h=0,g=0;g<r;g++)h=h+(t[g]|0),i[2*g]=h&8191,h=h>>>13,i[2*g+1]=h&8191,h=h>>>13;for(g=2*r;g<a;++g)i[g]=0;p(h===0),p((h&-8192)===0)},M.prototype.stub=function(t){for(var r=new Array(t),i=0;i<t;i++)r[i]=0;return r},M.prototype.mulp=function(t,r,i){var a=2*this.guessLen13b(t.length,r.length),h=this.makeRBT(a),g=this.stub(a),v=new Array(a),c=new Array(a),e=new Array(a),l=new Array(a),T=new Array(a),S=new Array(a),A=i.words;A.length=a,this.convert13b(t.words,t.length,v,a),this.convert13b(r.words,r.length,l,a),this.transform(v,g,c,e,a,h),this.transform(l,g,T,S,a,h);for(var F=0;F<a;F++){var s=c[F]*T[F]-e[F]*S[F];e[F]=c[F]*S[F]+e[F]*T[F],c[F]=s}return this.conjugate(c,e,a),this.transform(c,e,A,g,a,h),this.conjugate(A,g,a),this.normalize13b(A,a),i.negative=t.negative^r.negative,i.length=t.length+r.length,i.strip()},d.prototype.mul=function(t){var r=new d(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},d.prototype.mulf=function(t){var r=new d(null);return r.words=new Array(this.length+t.length),w(this,t,r)},d.prototype.imul=function(t){return this.clone().mulTo(t,this)},d.prototype.imuln=function(t){p(typeof t=="number"),p(t<67108864);for(var r=0,i=0;i<this.length;i++){var a=(this.words[i]|0)*t,h=(a&67108863)+(r&67108863);r>>=26,r+=a/67108864|0,r+=h>>>26,this.words[i]=h&67108863}return r!==0&&(this.words[i]=r,this.length++),this},d.prototype.muln=function(t){return this.clone().imuln(t)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(t){var r=H(t);if(r.length===0)return new d(1);for(var i=this,a=0;a<r.length&&r[a]===0;a++,i=i.sqr());if(++a<r.length)for(var h=i.sqr();a<r.length;a++,h=h.sqr())r[a]!==0&&(i=i.mul(h));return i},d.prototype.iushln=function(t){p(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26,a=67108863>>>26-r<<26-r,h;if(r!==0){var g=0;for(h=0;h<this.length;h++){var v=this.words[h]&a,c=(this.words[h]|0)-v<<r;this.words[h]=c|g,g=v>>>26-r}g&&(this.words[h]=g,this.length++)}if(i!==0){for(h=this.length-1;h>=0;h--)this.words[h+i]=this.words[h];for(h=0;h<i;h++)this.words[h]=0;this.length+=i}return this.strip()},d.prototype.ishln=function(t){return p(this.negative===0),this.iushln(t)},d.prototype.iushrn=function(t,r,i){p(typeof t=="number"&&t>=0);var a;r?a=(r-r%26)/26:a=0;var h=t%26,g=Math.min((t-h)/26,this.length),v=67108863^67108863>>>h<<h,c=i;if(a-=g,a=Math.max(0,a),c){for(var e=0;e<g;e++)c.words[e]=this.words[e];c.length=g}if(g!==0)if(this.length>g)for(this.length-=g,e=0;e<this.length;e++)this.words[e]=this.words[e+g];else this.words[0]=0,this.length=1;var l=0;for(e=this.length-1;e>=0&&(l!==0||e>=a);e--){var T=this.words[e]|0;this.words[e]=l<<26-h|T>>>h,l=T&v}return c&&l!==0&&(c.words[c.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(t,r,i){return p(this.negative===0),this.iushrn(t,r,i)},d.prototype.shln=function(t){return this.clone().ishln(t)},d.prototype.ushln=function(t){return this.clone().iushln(t)},d.prototype.shrn=function(t){return this.clone().ishrn(t)},d.prototype.ushrn=function(t){return this.clone().iushrn(t)},d.prototype.testn=function(t){p(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26,a=1<<r;if(this.length<=i)return!1;var h=this.words[i];return!!(h&a)},d.prototype.imaskn=function(t){p(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26;if(p(this.negative===0,"imaskn works only with positive numbers"),this.length<=i)return this;if(r!==0&&i++,this.length=Math.min(i,this.length),r!==0){var a=67108863^67108863>>>r<<r;this.words[this.length-1]&=a}return this.strip()},d.prototype.maskn=function(t){return this.clone().imaskn(t)},d.prototype.iaddn=function(t){return p(typeof t=="number"),p(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},d.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},d.prototype.isubn=function(t){if(p(typeof t=="number"),p(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},d.prototype.addn=function(t){return this.clone().iaddn(t)},d.prototype.subn=function(t){return this.clone().isubn(t)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(t,r,i){var a=t.length+i,h;this._expand(a);var g,v=0;for(h=0;h<t.length;h++){g=(this.words[h+i]|0)+v;var c=(t.words[h]|0)*r;g-=c&67108863,v=(g>>26)-(c/67108864|0),this.words[h+i]=g&67108863}for(;h<this.length-i;h++)g=(this.words[h+i]|0)+v,v=g>>26,this.words[h+i]=g&67108863;if(v===0)return this.strip();for(p(v===-1),v=0,h=0;h<this.length;h++)g=-(this.words[h]|0)+v,v=g>>26,this.words[h]=g&67108863;return this.negative=1,this.strip()},d.prototype._wordDiv=function(t,r){var i=this.length-t.length,a=this.clone(),h=t,g=h.words[h.length-1]|0,v=this._countBits(g);i=26-v,i!==0&&(h=h.ushln(i),a.iushln(i),g=h.words[h.length-1]|0);var c=a.length-h.length,e;if(r!=="mod"){e=new d(null),e.length=c+1,e.words=new Array(e.length);for(var l=0;l<e.length;l++)e.words[l]=0}var T=a.clone()._ishlnsubmul(h,1,c);T.negative===0&&(a=T,e&&(e.words[c]=1));for(var S=c-1;S>=0;S--){var A=(a.words[h.length+S]|0)*67108864+(a.words[h.length+S-1]|0);for(A=Math.min(A/g|0,67108863),a._ishlnsubmul(h,A,S);a.negative!==0;)A--,a.negative=0,a._ishlnsubmul(h,1,S),a.isZero()||(a.negative^=1);e&&(e.words[S]=A)}return e&&e.strip(),a.strip(),r!=="div"&&i!==0&&a.iushrn(i),{div:e||null,mod:a}},d.prototype.divmod=function(t,r,i){if(p(!t.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var a,h,g;return this.negative!==0&&t.negative===0?(g=this.neg().divmod(t,r),r!=="mod"&&(a=g.div.neg()),r!=="div"&&(h=g.mod.neg(),i&&h.negative!==0&&h.iadd(t)),{div:a,mod:h}):this.negative===0&&t.negative!==0?(g=this.divmod(t.neg(),r),r!=="mod"&&(a=g.div.neg()),{div:a,mod:g.mod}):this.negative&t.negative?(g=this.neg().divmod(t.neg(),r),r!=="div"&&(h=g.mod.neg(),i&&h.negative!==0&&h.isub(t)),{div:g.div,mod:h}):t.length>this.length||this.cmp(t)<0?{div:new d(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new d(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new d(this.modn(t.words[0]))}:this._wordDiv(t,r)},d.prototype.div=function(t){return this.divmod(t,"div",!1).div},d.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},d.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},d.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var i=r.div.negative!==0?r.mod.isub(t):r.mod,a=t.ushrn(1),h=t.andln(1),g=i.cmp(a);return g<0||h===1&&g===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},d.prototype.modn=function(t){p(t<=67108863);for(var r=(1<<26)%t,i=0,a=this.length-1;a>=0;a--)i=(r*i+(this.words[a]|0))%t;return i},d.prototype.idivn=function(t){p(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var a=(this.words[i]|0)+r*67108864;this.words[i]=a/t|0,r=a%t}return this.strip()},d.prototype.divn=function(t){return this.clone().idivn(t)},d.prototype.egcd=function(t){p(t.negative===0),p(!t.isZero());var r=this,i=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var a=new d(1),h=new d(0),g=new d(0),v=new d(1),c=0;r.isEven()&&i.isEven();)r.iushrn(1),i.iushrn(1),++c;for(var e=i.clone(),l=r.clone();!r.isZero();){for(var T=0,S=1;!(r.words[0]&S)&&T<26;++T,S<<=1);if(T>0)for(r.iushrn(T);T-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(e),h.isub(l)),a.iushrn(1),h.iushrn(1);for(var A=0,F=1;!(i.words[0]&F)&&A<26;++A,F<<=1);if(A>0)for(i.iushrn(A);A-- >0;)(g.isOdd()||v.isOdd())&&(g.iadd(e),v.isub(l)),g.iushrn(1),v.iushrn(1);r.cmp(i)>=0?(r.isub(i),a.isub(g),h.isub(v)):(i.isub(r),g.isub(a),v.isub(h))}return{a:g,b:v,gcd:i.iushln(c)}},d.prototype._invmp=function(t){p(t.negative===0),p(!t.isZero());var r=this,i=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var a=new d(1),h=new d(0),g=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var v=0,c=1;!(r.words[0]&c)&&v<26;++v,c<<=1);if(v>0)for(r.iushrn(v);v-- >0;)a.isOdd()&&a.iadd(g),a.iushrn(1);for(var e=0,l=1;!(i.words[0]&l)&&e<26;++e,l<<=1);if(e>0)for(i.iushrn(e);e-- >0;)h.isOdd()&&h.iadd(g),h.iushrn(1);r.cmp(i)>=0?(r.isub(i),a.isub(h)):(i.isub(r),h.isub(a))}var T;return r.cmpn(1)===0?T=a:T=h,T.cmpn(0)<0&&T.iadd(t),T},d.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),i=t.clone();r.negative=0,i.negative=0;for(var a=0;r.isEven()&&i.isEven();a++)r.iushrn(1),i.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;i.isEven();)i.iushrn(1);var h=r.cmp(i);if(h<0){var g=r;r=i,i=g}else if(h===0||i.cmpn(1)===0)break;r.isub(i)}while(!0);return i.iushln(a)},d.prototype.invm=function(t){return this.egcd(t).a.umod(t)},d.prototype.isEven=function(){return(this.words[0]&1)===0},d.prototype.isOdd=function(){return(this.words[0]&1)===1},d.prototype.andln=function(t){return this.words[0]&t},d.prototype.bincn=function(t){p(typeof t=="number");var r=t%26,i=(t-r)/26,a=1<<r;if(this.length<=i)return this._expand(i+1),this.words[i]|=a,this;for(var h=a,g=i;h!==0&&g<this.length;g++){var v=this.words[g]|0;v+=h,h=v>>>26,v&=67108863,this.words[g]=v}return h!==0&&(this.words[g]=h,this.length++),this},d.prototype.isZero=function(){return this.length===1&&this.words[0]===0},d.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var i;if(this.length>1)i=1;else{r&&(t=-t),p(t<=67108863,"Number is too big");var a=this.words[0]|0;i=a===t?0:a<t?-1:1}return this.negative!==0?-i|0:i},d.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},d.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,i=this.length-1;i>=0;i--){var a=this.words[i]|0,h=t.words[i]|0;if(a!==h){a<h?r=-1:a>h&&(r=1);break}}return r},d.prototype.gtn=function(t){return this.cmpn(t)===1},d.prototype.gt=function(t){return this.cmp(t)===1},d.prototype.gten=function(t){return this.cmpn(t)>=0},d.prototype.gte=function(t){return this.cmp(t)>=0},d.prototype.ltn=function(t){return this.cmpn(t)===-1},d.prototype.lt=function(t){return this.cmp(t)===-1},d.prototype.lten=function(t){return this.cmpn(t)<=0},d.prototype.lte=function(t){return this.cmp(t)<=0},d.prototype.eqn=function(t){return this.cmpn(t)===0},d.prototype.eq=function(t){return this.cmp(t)===0},d.red=function(t){return new N(t)},d.prototype.toRed=function(t){return p(!this.red,"Already a number in reduction context"),p(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},d.prototype.fromRed=function(){return p(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(t){return this.red=t,this},d.prototype.forceRed=function(t){return p(!this.red,"Already a number in reduction context"),this._forceRed(t)},d.prototype.redAdd=function(t){return p(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},d.prototype.redIAdd=function(t){return p(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},d.prototype.redSub=function(t){return p(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},d.prototype.redISub=function(t){return p(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},d.prototype.redShl=function(t){return p(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},d.prototype.redMul=function(t){return p(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},d.prototype.redIMul=function(t){return p(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},d.prototype.redSqr=function(){return p(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return p(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return p(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return p(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return p(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(t){return p(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var R={k256:null,p224:null,p192:null,p25519:null};function O(f,t){this.name=f,this.p=new d(t,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}O.prototype._tmp=function(){var t=new d(null);return t.words=new Array(Math.ceil(this.n/13)),t},O.prototype.ireduce=function(t){var r=t,i;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),i=r.bitLength();while(i>this.n);var a=i<this.n?-1:r.ucmp(this.p);return a===0?(r.words[0]=0,r.length=1):a>0?r.isub(this.p):r.strip(),r},O.prototype.split=function(t,r){t.iushrn(this.n,0,r)},O.prototype.imulK=function(t){return t.imul(this.k)};function U(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}m(U,O),U.prototype.split=function(t,r){for(var i=4194303,a=Math.min(t.length,9),h=0;h<a;h++)r.words[h]=t.words[h];if(r.length=a,t.length<=9){t.words[0]=0,t.length=1;return}var g=t.words[9];for(r.words[r.length++]=g&i,h=10;h<t.length;h++){var v=t.words[h]|0;t.words[h-10]=(v&i)<<4|g>>>22,g=v}g>>>=22,t.words[h-10]=g,g===0&&t.length>10?t.length-=10:t.length-=9},U.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,i=0;i<t.length;i++){var a=t.words[i]|0;r+=a*977,t.words[i]=r&67108863,r=a*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function J(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}m(J,O);function j(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}m(j,O);function kt(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}m(kt,O),kt.prototype.imulK=function(t){for(var r=0,i=0;i<t.length;i++){var a=(t.words[i]|0)*19+r,h=a&67108863;a>>>=26,t.words[i]=h,r=a}return r!==0&&(t.words[t.length++]=r),t},d._prime=function(t){if(R[t])return R[t];var r;if(t==="k256")r=new U;else if(t==="p224")r=new J;else if(t==="p192")r=new j;else if(t==="p25519")r=new kt;else throw new Error("Unknown prime "+t);return R[t]=r,r};function N(f){if(typeof f=="string"){var t=d._prime(f);this.m=t.p,this.prime=t}else p(f.gtn(1),"modulus must be greater than 1"),this.m=f,this.prime=null}N.prototype._verify1=function(t){p(t.negative===0,"red works only with positives"),p(t.red,"red works only with red numbers")},N.prototype._verify2=function(t,r){p((t.negative|r.negative)===0,"red works only with positives"),p(t.red&&t.red===r.red,"red works only with red numbers")},N.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},N.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},N.prototype.add=function(t,r){this._verify2(t,r);var i=t.add(r);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},N.prototype.iadd=function(t,r){this._verify2(t,r);var i=t.iadd(r);return i.cmp(this.m)>=0&&i.isub(this.m),i},N.prototype.sub=function(t,r){this._verify2(t,r);var i=t.sub(r);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},N.prototype.isub=function(t,r){this._verify2(t,r);var i=t.isub(r);return i.cmpn(0)<0&&i.iadd(this.m),i},N.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},N.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},N.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},N.prototype.isqr=function(t){return this.imul(t,t.clone())},N.prototype.sqr=function(t){return this.mul(t,t)},N.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(p(r%2===1),r===3){var i=this.m.add(new d(1)).iushrn(2);return this.pow(t,i)}for(var a=this.m.subn(1),h=0;!a.isZero()&&a.andln(1)===0;)h++,a.iushrn(1);p(!a.isZero());var g=new d(1).toRed(this),v=g.redNeg(),c=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new d(2*e*e).toRed(this);this.pow(e,c).cmp(v)!==0;)e.redIAdd(v);for(var l=this.pow(e,a),T=this.pow(t,a.addn(1).iushrn(1)),S=this.pow(t,a),A=h;S.cmp(g)!==0;){for(var F=S,s=0;F.cmp(g)!==0;s++)F=F.redSqr();p(s<A);var y=this.pow(l,new d(1).iushln(A-s-1));T=T.redMul(y),l=y.redSqr(),S=S.redMul(l),A=s}return T},N.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},N.prototype.pow=function(t,r){if(r.isZero())return new d(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var i=4,a=new Array(1<<i);a[0]=new d(1).toRed(this),a[1]=t;for(var h=2;h<a.length;h++)a[h]=this.mul(a[h-1],t);var g=a[0],v=0,c=0,e=r.bitLength()%26;for(e===0&&(e=26),h=r.length-1;h>=0;h--){for(var l=r.words[h],T=e-1;T>=0;T--){var S=l>>T&1;if(g!==a[0]&&(g=this.sqr(g)),S===0&&v===0){c=0;continue}v<<=1,v|=S,c++,!(c!==i&&(h!==0||T!==0))&&(g=this.mul(g,a[v]),c=0,v=0)}e=26}return g},N.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},N.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},d.mont=function(t){return new Tt(t)};function Tt(f){N.call(this,f),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m(Tt,N),Tt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},Tt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},Tt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(r),a=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=i.isub(a).iushrn(this.shift),g=h;return h.cmp(this.m)>=0?g=h.isub(this.m):h.cmpn(0)<0&&(g=h.iadd(this.m)),g._forceRed(this)},Tt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new d(0)._forceRed(this);var i=t.mul(r),a=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=i.isub(a).iushrn(this.shift),g=h;return h.cmp(this.m)>=0?g=h.isub(this.m):h.cmpn(0)<0&&(g=h.iadd(this.m)),g._forceRed(this)},Tt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(o,At)}(bn)),ge}var xn=Sn();const On=He(xn);var Ae,or;function xr(){if(or)return Ae;or=1,Ae=u,u.strict=p,u.loose=m;var o=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function u(d){return p(d)||m(d)}function p(d){return d instanceof Int8Array||d instanceof Int16Array||d instanceof Int32Array||d instanceof Uint8Array||d instanceof Uint8ClampedArray||d instanceof Uint16Array||d instanceof Uint32Array||d instanceof Float32Array||d instanceof Float64Array}function m(d){return n[o.call(d)]}return Ae}xr();var Ce,sr;function Rn(){if(sr)return Ce;sr=1;var o=xr().strict;return Ce=function(u){if(o(u)){var p=Buffer.from(u.buffer);return u.byteLength!==u.buffer.byteLength&&(p=p.slice(u.byteOffset,u.byteOffset+u.byteLength)),p}else return Buffer.from(u)},Ce}var kn=Rn();const In=He(kn),Or="hex",Rr="utf8",ye="0";function he(o){return new Uint8Array(o)}function kr(o,n=!1){const u=o.toString(Or);return n?fe(u):u}function Tn(o){return o.toString(Rr)}function we(o){return In(o)}function se(o,n=!1){return kr(we(o),n)}function En(o){return Tn(we(o))}function An(o){return Buffer.from(Dt(o),Or)}function ae(o){return he(An(o))}function Ze(o){return Buffer.from(o,Rr)}function Cn(o){return he(Ze(o))}function qn(o,n=!1){return kr(Ze(o),n)}function Bn(o,n){return!(typeof o!="string"||!o.match(/^0x[0-9A-Fa-f]*$/)||n&&o.length!==2+2*n)}function Ir(...o){let n=[];return o.forEach(u=>n=n.concat(Array.from(u))),new Uint8Array([...n])}function Nn(o,n=8){const u=o%n;return u?(o-u)/n*n+n:o}function Fn(o,n=8,u=ye){return Ln(o,Nn(o.length,n),u)}function Ln(o,n,u=ye){return Pn(o,n,!0,u)}function Dt(o){return o.replace(/^0x/,"")}function fe(o){return o.startsWith("0x")?o:`0x${o}`}function Tr(o){return o=Dt(o),o=Fn(o,2),o&&(o=fe(o)),o}function Un(o){const n=o.startsWith("0x");return o=Dt(o),o=o.startsWith(ye)?o.substring(1):o,n?fe(o):o}function Pn(o,n,u,p=ye){const m=n-o.length;let d=o;if(m>0){const I=p.repeat(m);d=u?I+o:o+I}return d}function De(o){return we(new Uint8Array(o))}function jn(o,n){return se(new Uint8Array(o),!n)}function Wn(o){return he(o).buffer}function Dn(o){return Ze(o)}function $n(o,n){return qn(o,!n)}function Hn(o){return ae(o).buffer}function Er(o,n){const u=Dt(Tr(new On(o).toString(16)));return n?u:fe(u)}var qe={},ve={},Jn={get exports(){return ve},set exports(o){ve=o}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ar;function Kn(){return ar||(ar=1,function(o){var n,u,p,m,d,I,L,q,P,Ot,K,H,D,$,It,w,M,R,O,U,J,j,kt;(function(N){var Tt=typeof At=="object"?At:typeof self=="object"?self:typeof this=="object"?this:{};N(f(Tt,f(o.exports)));function f(t,r){return t!==Tt&&(typeof Object.create=="function"?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(i,a){return t[i]=r?r(i,a):a}}})(function(N){var Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var r in t)t.hasOwnProperty(r)&&(f[r]=t[r])};n=function(f,t){Tt(f,t);function r(){this.constructor=f}f.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},u=Object.assign||function(f){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(f[a]=t[a])}return f},p=function(f,t){var r={};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&t.indexOf(i)<0&&(r[i]=f[i]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(f);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(f,i[a])&&(r[i[a]]=f[i[a]]);return r},m=function(f,t,r,i){var a=arguments.length,h=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(f,t,r,i);else for(var v=f.length-1;v>=0;v--)(g=f[v])&&(h=(a<3?g(h):a>3?g(t,r,h):g(t,r))||h);return a>3&&h&&Object.defineProperty(t,r,h),h},d=function(f,t){return function(r,i){t(r,i,f)}},I=function(f,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,t)},L=function(f,t,r,i){function a(h){return h instanceof r?h:new r(function(g){g(h)})}return new(r||(r=Promise))(function(h,g){function v(l){try{e(i.next(l))}catch(T){g(T)}}function c(l){try{e(i.throw(l))}catch(T){g(T)}}function e(l){l.done?h(l.value):a(l.value).then(v,c)}e((i=i.apply(f,t||[])).next())})},q=function(f,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},i,a,h,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(e){return function(l){return c([e,l])}}function c(e){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(h=e[0]&2?a.return:e[0]?a.throw||((h=a.return)&&h.call(a),0):a.next)&&!(h=h.call(a,e[1])).done)return h;switch(a=0,h&&(e=[e[0]&2,h.value]),e[0]){case 0:case 1:h=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,a=e[1],e=[0];continue;case 7:e=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!h||e[1]>h[0]&&e[1]<h[3])){r.label=e[1];break}if(e[0]===6&&r.label<h[1]){r.label=h[1],h=e;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(e);break}h[2]&&r.ops.pop(),r.trys.pop();continue}e=t.call(f,r)}catch(l){e=[6,l],a=0}finally{i=h=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},kt=function(f,t,r,i){i===void 0&&(i=r),f[i]=t[r]},P=function(f,t){for(var r in f)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=f[r])},Ot=function(f){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&f[t],i=0;if(r)return r.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&i>=f.length&&(f=void 0),{value:f&&f[i++],done:!f}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},K=function(f,t){var r=typeof Symbol=="function"&&f[Symbol.iterator];if(!r)return f;var i=r.call(f),a,h=[],g;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)h.push(a.value)}catch(v){g={error:v}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(g)throw g.error}}return h},H=function(){for(var f=[],t=0;t<arguments.length;t++)f=f.concat(K(arguments[t]));return f},D=function(){for(var f=0,t=0,r=arguments.length;t<r;t++)f+=arguments[t].length;for(var i=Array(f),a=0,t=0;t<r;t++)for(var h=arguments[t],g=0,v=h.length;g<v;g++,a++)i[a]=h[g];return i},$=function(f){return this instanceof $?(this.v=f,this):new $(f)},It=function(f,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(f,t||[]),a,h=[];return a={},g("next"),g("throw"),g("return"),a[Symbol.asyncIterator]=function(){return this},a;function g(S){i[S]&&(a[S]=function(A){return new Promise(function(F,s){h.push([S,A,F,s])>1||v(S,A)})})}function v(S,A){try{c(i[S](A))}catch(F){T(h[0][3],F)}}function c(S){S.value instanceof $?Promise.resolve(S.value.v).then(e,l):T(h[0][2],S)}function e(S){v("next",S)}function l(S){v("throw",S)}function T(S,A){S(A),h.shift(),h.length&&v(h[0][0],h[0][1])}},w=function(f){var t,r;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,h){t[a]=f[a]?function(g){return(r=!r)?{value:$(f[a](g)),done:a==="return"}:h?h(g):g}:h}},M=function(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=f[Symbol.asyncIterator],r;return t?t.call(f):(f=typeof Ot=="function"?Ot(f):f[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(h){r[h]=f[h]&&function(g){return new Promise(function(v,c){g=f[h](g),a(v,c,g.done,g.value)})}}function a(h,g,v,c){Promise.resolve(c).then(function(e){h({value:e,done:v})},g)}},R=function(f,t){return Object.defineProperty?Object.defineProperty(f,"raw",{value:t}):f.raw=t,f},O=function(f){if(f&&f.__esModule)return f;var t={};if(f!=null)for(var r in f)Object.hasOwnProperty.call(f,r)&&(t[r]=f[r]);return t.default=f,t},U=function(f){return f&&f.__esModule?f:{default:f}},J=function(f,t){if(!t.has(f))throw new TypeError("attempted to get private field on non-instance");return t.get(f)},j=function(f,t,r){if(!t.has(f))throw new TypeError("attempted to set private field on non-instance");return t.set(f,r),r},N("__extends",n),N("__assign",u),N("__rest",p),N("__decorate",m),N("__param",d),N("__metadata",I),N("__awaiter",L),N("__generator",q),N("__exportStar",P),N("__createBinding",kt),N("__values",Ot),N("__read",K),N("__spread",H),N("__spreadArrays",D),N("__await",$),N("__asyncGenerator",It),N("__asyncDelegator",w),N("__asyncValues",M),N("__makeTemplateObject",R),N("__importStar",O),N("__importDefault",U),N("__classPrivateFieldGet",J),N("__classPrivateFieldSet",j)})}(Jn)),ve}var Ct={},hr;function zn(){if(hr)return Ct;hr=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.isBrowserCryptoAvailable=Ct.getSubtleCrypto=Ct.getBrowerCrypto=void 0;function o(){return(At===null||At===void 0?void 0:At.crypto)||(At===null||At===void 0?void 0:At.msCrypto)||{}}Ct.getBrowerCrypto=o;function n(){const p=o();return p.subtle||p.webkitSubtle}Ct.getSubtleCrypto=n;function u(){return!!o()&&!!n()}return Ct.isBrowserCryptoAvailable=u,Ct}var qt={},fr;function Zn(){if(fr)return qt;fr=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.isBrowser=qt.isNode=qt.isReactNative=void 0;function o(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}qt.isReactNative=o;function n(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}qt.isNode=n;function u(){return!o()&&!n()}return qt.isBrowser=u,qt}var ur;function Gn(){return ur||(ur=1,function(o){Object.defineProperty(o,"__esModule",{value:!0});const n=Kn();n.__exportStar(zn(),o),n.__exportStar(Zn(),o)}(qe)),qe}var le=Gn();function Vn(){const o=Date.now()*Math.pow(10,3),n=Math.floor(Math.random()*Math.pow(10,3));return o+n}function de(o){return Tr(o)}function Qn(o){return Un(fe(o))}const Xn=Vn;function Be(){return((n,u)=>{for(u=n="";n++<36;u+=n*51&52?(n^15?8^Math.random()*(n^20?16:4):4).toString(16):"-");return u})()}function Yn(o,n){let u;const p=Mn[o];return p&&(u=`https://${p}.infura.io/v3/${n}`),u}function mo(o,n){let u;const p=Yn(o,n.infuraId);return n.custom&&n.custom[o]?u=n.custom[o]:p&&(u=p),u}function ti(o){return o===""||typeof o=="string"&&o.trim()===""}function ei(o){return!(o&&o.length)}function Ar(o,n){return Bn(o,n)}function ri(o){return typeof o.method<"u"}function ce(o){return typeof o.result<"u"}function me(o){return typeof o.error<"u"}function cr(o){return typeof o.event<"u"}function ni(o){return _n.includes(o)||o.startsWith("wc_")}function ii(o){return o.method.startsWith("wc_")?!0:!Sr.includes(o.method)}function oi(o){o=Dt(o.toLowerCase());const n=Dt(wr.keccak_256(Dn(o)));let u="";for(let p=0;p<o.length;p++)parseInt(n[p],16)>7?u+=o[p].toUpperCase():u+=o[p];return fe(u)}const si=o=>o?o.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(o)?/^(0x)?[0-9a-f]{40}$/.test(o)||/^(0x)?[0-9A-F]{40}$/.test(o)?!0:o===oi(o):!1:!1;function lr(o){return!ei(o)&&!Ar(o[0])&&(o[0]=$n(o[0])),o}function Ne(o){if(typeof o.type<"u"&&o.type!=="0")return o;if(typeof o.from>"u"||!si(o.from))throw new Error("Transaction object must include a valid 'from' value.");function n(m){let d=m;return(typeof m=="number"||typeof m=="string"&&!ti(m))&&(Ar(m)?typeof m=="string"&&(d=de(m)):d=Er(m)),typeof d=="string"&&(d=Qn(d)),d}const u={from:de(o.from),to:typeof o.to>"u"?void 0:de(o.to),gasPrice:typeof o.gasPrice>"u"?"":n(o.gasPrice),gas:typeof o.gas>"u"?typeof o.gasLimit>"u"?"":n(o.gasLimit):n(o.gas),value:typeof o.value>"u"?"":n(o.value),nonce:typeof o.nonce>"u"?"":n(o.nonce),data:typeof o.data>"u"?"":de(o.data)||"0x"},p=["gasPrice","gas","value","nonce"];return Object.keys(u).forEach(m=>{(typeof u[m]>"u"||typeof u[m]=="string"&&!u[m].trim().length)&&p.includes(m)&&delete u[m]}),u}function ai(o){const n=o.message||"Failed or Rejected Request";let u=-32e3;if(o&&!o.code)switch(n){case"Parse error":u=-32700;break;case"Invalid request":u=-32600;break;case"Method not found":u=-32601;break;case"Invalid params":u=-32602;break;case"Internal error":u=-32603;break;default:u=-32e3;break}const p={code:u,message:n};return o.data&&(p.data=o.data),p}var Fe={},Le,dr;function hi(){return dr||(dr=1,Le=o=>encodeURIComponent(o).replace(/[!'()*]/g,n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`)),Le}var Ue,pr;function fi(){if(pr)return Ue;pr=1;var o="%[a-f0-9]{2}",n=new RegExp("("+o+")|([^%]+?)","gi"),u=new RegExp("("+o+")+","gi");function p(I,L){try{return[decodeURIComponent(I.join(""))]}catch{}if(I.length===1)return I;L=L||1;var q=I.slice(0,L),P=I.slice(L);return Array.prototype.concat.call([],p(q),p(P))}function m(I){try{return decodeURIComponent(I)}catch{for(var L=I.match(n)||[],q=1;q<L.length;q++)I=p(L,q).join(""),L=I.match(n)||[];return I}}function d(I){for(var L={"%FE%FF":"","%FF%FE":""},q=u.exec(I);q;){try{L[q[0]]=decodeURIComponent(q[0])}catch{var P=m(q[0]);P!==q[0]&&(L[q[0]]=P)}q=u.exec(I)}L["%C2"]="";for(var Ot=Object.keys(L),K=0;K<Ot.length;K++){var H=Ot[K];I=I.replace(new RegExp(H,"g"),L[H])}return I}return Ue=function(I){if(typeof I!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof I+"`");try{return I=I.replace(/\+/g," "),decodeURIComponent(I)}catch{return d(I)}},Ue}var Pe,gr;function ui(){return gr||(gr=1,Pe=(o,n)=>{if(!(typeof o=="string"&&typeof n=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(n==="")return[o];const u=o.indexOf(n);return u===-1?[o]:[o.slice(0,u),o.slice(u+n.length)]}),Pe}var vr;function ci(){return vr||(vr=1,function(o){const n=hi(),u=fi(),p=ui(),m=w=>w==null;function d(w){switch(w.arrayFormat){case"index":return M=>(R,O)=>{const U=R.length;return O===void 0||w.skipNull&&O===null||w.skipEmptyString&&O===""?R:O===null?[...R,[q(M,w),"[",U,"]"].join("")]:[...R,[q(M,w),"[",q(U,w),"]=",q(O,w)].join("")]};case"bracket":return M=>(R,O)=>O===void 0||w.skipNull&&O===null||w.skipEmptyString&&O===""?R:O===null?[...R,[q(M,w),"[]"].join("")]:[...R,[q(M,w),"[]=",q(O,w)].join("")];case"comma":case"separator":return M=>(R,O)=>O==null||O.length===0?R:R.length===0?[[q(M,w),"=",q(O,w)].join("")]:[[R,q(O,w)].join(w.arrayFormatSeparator)];default:return M=>(R,O)=>O===void 0||w.skipNull&&O===null||w.skipEmptyString&&O===""?R:O===null?[...R,q(M,w)]:[...R,[q(M,w),"=",q(O,w)].join("")]}}function I(w){let M;switch(w.arrayFormat){case"index":return(R,O,U)=>{if(M=/\[(\d*)\]$/.exec(R),R=R.replace(/\[\d*\]$/,""),!M){U[R]=O;return}U[R]===void 0&&(U[R]={}),U[R][M[1]]=O};case"bracket":return(R,O,U)=>{if(M=/(\[\])$/.exec(R),R=R.replace(/\[\]$/,""),!M){U[R]=O;return}if(U[R]===void 0){U[R]=[O];return}U[R]=[].concat(U[R],O)};case"comma":case"separator":return(R,O,U)=>{const j=typeof O=="string"&&O.split("").indexOf(w.arrayFormatSeparator)>-1?O.split(w.arrayFormatSeparator).map(kt=>P(kt,w)):O===null?O:P(O,w);U[R]=j};default:return(R,O,U)=>{if(U[R]===void 0){U[R]=O;return}U[R]=[].concat(U[R],O)}}}function L(w){if(typeof w!="string"||w.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function q(w,M){return M.encode?M.strict?n(w):encodeURIComponent(w):w}function P(w,M){return M.decode?u(w):w}function Ot(w){return Array.isArray(w)?w.sort():typeof w=="object"?Ot(Object.keys(w)).sort((M,R)=>Number(M)-Number(R)).map(M=>w[M]):w}function K(w){const M=w.indexOf("#");return M!==-1&&(w=w.slice(0,M)),w}function H(w){let M="";const R=w.indexOf("#");return R!==-1&&(M=w.slice(R)),M}function D(w){w=K(w);const M=w.indexOf("?");return M===-1?"":w.slice(M+1)}function $(w,M){return M.parseNumbers&&!Number.isNaN(Number(w))&&typeof w=="string"&&w.trim()!==""?w=Number(w):M.parseBooleans&&w!==null&&(w.toLowerCase()==="true"||w.toLowerCase()==="false")&&(w=w.toLowerCase()==="true"),w}function It(w,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),L(M.arrayFormatSeparator);const R=I(M),O=Object.create(null);if(typeof w!="string"||(w=w.trim().replace(/^[?#&]/,""),!w))return O;for(const U of w.split("&")){let[J,j]=p(M.decode?U.replace(/\+/g," "):U,"=");j=j===void 0?null:["comma","separator"].includes(M.arrayFormat)?j:P(j,M),R(P(J,M),j,O)}for(const U of Object.keys(O)){const J=O[U];if(typeof J=="object"&&J!==null)for(const j of Object.keys(J))J[j]=$(J[j],M);else O[U]=$(J,M)}return M.sort===!1?O:(M.sort===!0?Object.keys(O).sort():Object.keys(O).sort(M.sort)).reduce((U,J)=>{const j=O[J];return Boolean(j)&&typeof j=="object"&&!Array.isArray(j)?U[J]=Ot(j):U[J]=j,U},Object.create(null))}o.extract=D,o.parse=It,o.stringify=(w,M)=>{if(!w)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),L(M.arrayFormatSeparator);const R=j=>M.skipNull&&m(w[j])||M.skipEmptyString&&w[j]==="",O=d(M),U={};for(const j of Object.keys(w))R(j)||(U[j]=w[j]);const J=Object.keys(U);return M.sort!==!1&&J.sort(M.sort),J.map(j=>{const kt=w[j];return kt===void 0?"":kt===null?q(j,M):Array.isArray(kt)?kt.reduce(O(j),[]).join("&"):q(j,M)+"="+q(kt,M)}).filter(j=>j.length>0).join("&")},o.parseUrl=(w,M)=>{M=Object.assign({decode:!0},M);const[R,O]=p(w,"#");return Object.assign({url:R.split("?")[0]||"",query:It(D(w),M)},M&&M.parseFragmentIdentifier&&O?{fragmentIdentifier:P(O,M)}:{})},o.stringifyUrl=(w,M)=>{M=Object.assign({encode:!0,strict:!0},M);const R=K(w.url).split("?")[0]||"",O=o.extract(w.url),U=o.parse(O,{sort:!1}),J=Object.assign(U,w.query);let j=o.stringify(J,M);j&&(j=`?${j}`);let kt=H(w.url);return w.fragmentIdentifier&&(kt=`#${q(w.fragmentIdentifier,M)}`),`${R}${j}${kt}`}}(Fe)),Fe}var Cr=ci();function li(o){const n=o.indexOf("?")!==-1?o.indexOf("?"):void 0;return typeof n<"u"?o.substr(n):""}function di(o,n){let u=qr(o);return u=Object.assign(Object.assign({},u),n),o=pi(u),o}function qr(o){return Cr.parse(o)}function pi(o){return Cr.stringify(o)}function gi(o){return typeof o.bridge<"u"}function vi(o){const n=o.indexOf(":"),u=o.indexOf("?")!==-1?o.indexOf("?"):void 0,p=o.substring(0,n),m=o.substring(n+1,u);function d(K){const H="@",D=K.split(H);return{handshakeTopic:D[0],version:parseInt(D[1],10)}}const I=d(m),L=typeof u<"u"?o.substr(u):"";function q(K){const H=qr(K);return{key:H.key||"",bridge:H.bridge||""}}const P=q(L);return Object.assign(Object.assign({protocol:p},I),P)}class mi{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(n,u){this._eventEmitters.push({event:n,callback:u})}trigger(n){let u=[];n&&(u=this._eventEmitters.filter(p=>p.event===n)),u.forEach(p=>{p.callback()})}}const yi=typeof global.WebSocket<"u"?global.WebSocket:require("ws");class wi{constructor(n){if(this.opts=n,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=n.protocol,this._version=n.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=n.subscriptions||[],this._netMonitor=n.netMonitor||new mi,!n.url||typeof n.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=n.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(n){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(n){}get connecting(){return this.readyState===0}set connected(n){}get connected(){return this.readyState===1}set closing(n){}get closing(){return this.readyState===2}set closed(n){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(n,u,p){if(!u||typeof u!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:u,type:"pub",payload:n,silent:!!p})}subscribe(n){this._socketSend({topic:n,type:"sub",payload:"",silent:!0})}on(n,u){this._events.push({event:n,callback:u})}_socketCreate(){if(this._nextSocket)return;const n=_i(this._url,this._protocol,this._version);if(this._nextSocket=new yi(n),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=u=>this._socketReceive(u),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=u=>this._socketError(u),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(n){const u=JSON.stringify(n);this._socket&&this._socket.readyState===1?this._socket.send(u):(this._setToQueue(n),this._socketCreate())}async _socketReceive(n){let u;try{u=JSON.parse(n.data)}catch{return}if(this._socketSend({topic:u.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const p=this._events.filter(m=>m.event==="message");p&&p.length&&p.forEach(m=>m.callback(u))}}_socketError(n){const u=this._events.filter(p=>p.event==="error");u&&u.length&&u.forEach(p=>p.callback(n))}_queueSubscriptions(){this._subscriptions.forEach(u=>this._queue.push({topic:u,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(n){this._queue.push(n)}_pushQueue(){this._queue.forEach(u=>this._socketSend(u)),this._queue=[]}}function _i(o,n,u){var p,m;const I=(o.startsWith("https")?o.replace("https","wss"):o.startsWith("http")?o.replace("http","ws"):o).split("?"),L=ln()?{protocol:n,version:u,env:"browser",host:((p=pn())===null||p===void 0?void 0:p.host)||""}:{protocol:n,version:u,env:((m=Je())===null||m===void 0?void 0:m.name)||""},q=di(li(I[1]||""),L);return I[0]+"?"+q}const je="Session currently connected",oe="Session currently disconnected",Mi="Session Rejected",bi="Missing JSON RPC response",Si='JSON-RPC success response must include "result" field',xi='JSON-RPC error response must include "error" field',Oi='JSON RPC request must have valid "method" value',Ri='JSON RPC request must have valid "id" value',ki="Missing one of the required parameters: bridge / uri / session",mr="JSON RPC response format is invalid",Ii="URI format is invalid",Ti="QRCode Modal not provided",yr="User close QRCode Modal";class Ei{constructor(){this._eventEmitters=[]}subscribe(n){this._eventEmitters.push(n)}unsubscribe(n){this._eventEmitters=this._eventEmitters.filter(u=>u.event!==n)}trigger(n){let u=[],p;ri(n)?p=n.method:ce(n)||me(n)?p=`response:${n.id}`:cr(n)?p=n.event:p="",p&&(u=this._eventEmitters.filter(m=>m.event===p)),(!u||!u.length)&&!ni(p)&&!cr(p)&&(u=this._eventEmitters.filter(m=>m.event==="call_request")),u.forEach(m=>{if(me(n)){const d=new Error(n.error.message);m.callback(d,null)}else m.callback(null,n)})}}class Ai{constructor(n="walletconnect"){this.storageId=n}getSession(){let n=null;const u=Mr(this.storageId);return u&&gi(u)&&(n=u),n}setSession(n){return _r(this.storageId,n),n}removeSession(){br(this.storageId)}}const Ci="walletconnect.org",qi="abcdefghijklmnopqrstuvwxyz0123456789",Br=qi.split("").map(o=>`https://${o}.bridge.walletconnect.org`);function Bi(o){let n=o.indexOf("//")>-1?o.split("/")[2]:o.split("/")[0];return n=n.split(":")[0],n=n.split("?")[0],n}function Ni(o){return Bi(o).split(".").slice(-2).join(".")}function Fi(){return Math.floor(Math.random()*Br.length)}function Li(){return Br[Fi()]}function Ui(o){return Ni(o)===Ci}function Pi(o){return Ui(o)?Li():o}class yo{constructor(n){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new Ei,this._clientMeta=nr()||n.connectorOpts.clientMeta||null,this._cryptoLib=n.cryptoLib,this._sessionStorage=n.sessionStorage||new Ai(n.connectorOpts.storageId),this._qrcodeModal=n.connectorOpts.qrcodeModal,this._qrcodeModalOptions=n.connectorOpts.qrcodeModalOptions,this._signingMethods=[...Sr,...n.connectorOpts.signingMethods||[]],!n.connectorOpts.bridge&&!n.connectorOpts.uri&&!n.connectorOpts.session)throw new Error(ki);n.connectorOpts.bridge&&(this.bridge=Pi(n.connectorOpts.bridge)),n.connectorOpts.uri&&(this.uri=n.connectorOpts.uri);const u=n.connectorOpts.session||this._getStorageSession();u&&(this.session=u),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=n.transport||new wi({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),n.connectorOpts.uri&&this._subscribeToSessionRequest(),n.pushServerOpts&&this._registerPushServer(n.pushServerOpts)}set bridge(n){n&&(this._bridge=n)}get bridge(){return this._bridge}set key(n){if(!n)return;const u=Hn(n);this._key=u}get key(){return this._key?jn(this._key,!0):""}set clientId(n){n&&(this._clientId=n)}get clientId(){let n=this._clientId;return n||(n=this._clientId=Be()),this._clientId}set peerId(n){n&&(this._peerId=n)}get peerId(){return this._peerId}set clientMeta(n){}get clientMeta(){let n=this._clientMeta;return n||(n=this._clientMeta=nr()),n}set peerMeta(n){this._peerMeta=n}get peerMeta(){return this._peerMeta}set handshakeTopic(n){n&&(this._handshakeTopic=n)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(n){n&&(this._handshakeId=n)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(n){if(!n)return;const{handshakeTopic:u,bridge:p,key:m}=this._parseUri(n);this.handshakeTopic=u,this.bridge=p,this.key=m}set chainId(n){this._chainId=n}get chainId(){return this._chainId}set networkId(n){this._networkId=n}get networkId(){return this._networkId}set accounts(n){this._accounts=n}get accounts(){return this._accounts}set rpcUrl(n){this._rpcUrl=n}get rpcUrl(){return this._rpcUrl}set connected(n){}get connected(){return this._connected}set pending(n){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(n){n&&(this._connected=n.connected,this.accounts=n.accounts,this.chainId=n.chainId,this.bridge=n.bridge,this.key=n.key,this.clientId=n.clientId,this.clientMeta=n.clientMeta,this.peerId=n.peerId,this.peerMeta=n.peerMeta,this.handshakeId=n.handshakeId,this.handshakeTopic=n.handshakeTopic)}on(n,u){const p={event:n,callback:u};this._eventManager.subscribe(p)}off(n){this._eventManager.unsubscribe(n)}async createInstantRequest(n){this._key=await this._generateKey();const u=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(n)}]});this.handshakeId=u.id,this.handshakeTopic=Be(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(yr)});const p=()=>{this.killSession()};try{const m=await this._sendCallRequest(u);return m&&p(),m}catch(m){throw p(),m}}async connect(n){if(!this._qrcodeModal)throw new Error(Ti);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(n),new Promise(async(u,p)=>{this.on("modal_closed",()=>p(new Error(yr))),this.on("connect",(m,d)=>{if(m)return p(m);u(d.params[0])})}))}async createSession(n){if(this._connected)throw new Error(je);if(this.pending)return;this._key=await this._generateKey();const u=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:n&&n.chainId?n.chainId:null}]});this.handshakeId=u.id,this.handshakeTopic=Be(),this._sendSessionRequest(u,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(n){if(this._connected)throw new Error(je);this.chainId=n.chainId,this.accounts=n.accounts,this.networkId=n.networkId||0,this.rpcUrl=n.rpcUrl||"";const u={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},p={id:this.handshakeId,jsonrpc:"2.0",result:u};this._sendResponse(p),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(n){if(this._connected)throw new Error(je);const u=n&&n.message?n.message:Mi,p=this._formatResponse({id:this.handshakeId,error:{message:u}});this._sendResponse(p),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:u}]}),this._removeStorageSession()}updateSession(n){if(!this._connected)throw new Error(oe);this.chainId=n.chainId,this.accounts=n.accounts,this.networkId=n.networkId||0,this.rpcUrl=n.rpcUrl||"";const u={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},p=this._formatRequest({method:"wc_sessionUpdate",params:[u]});this._sendSessionRequest(p,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(n){const u=n?n.message:"Session Disconnected",p={approved:!1,chainId:null,networkId:null,accounts:null},m=this._formatRequest({method:"wc_sessionUpdate",params:[p]});await this._sendRequest(m),this._handleSessionDisconnect(u)}async sendTransaction(n){if(!this._connected)throw new Error(oe);const u=Ne(n),p=this._formatRequest({method:"eth_sendTransaction",params:[u]});return await this._sendCallRequest(p)}async signTransaction(n){if(!this._connected)throw new Error(oe);const u=Ne(n),p=this._formatRequest({method:"eth_signTransaction",params:[u]});return await this._sendCallRequest(p)}async signMessage(n){if(!this._connected)throw new Error(oe);const u=this._formatRequest({method:"eth_sign",params:n});return await this._sendCallRequest(u)}async signPersonalMessage(n){if(!this._connected)throw new Error(oe);n=lr(n);const u=this._formatRequest({method:"personal_sign",params:n});return await this._sendCallRequest(u)}async signTypedData(n){if(!this._connected)throw new Error(oe);const u=this._formatRequest({method:"eth_signTypedData",params:n});return await this._sendCallRequest(u)}async updateChain(n){if(!this._connected)throw new Error("Session currently disconnected");const u=this._formatRequest({method:"wallet_updateChain",params:[n]});return await this._sendCallRequest(u)}unsafeSend(n,u){return this._sendRequest(n,u),this._eventManager.trigger({event:"call_request_sent",params:[{request:n,options:u}]}),new Promise((p,m)=>{this._subscribeToResponse(n.id,(d,I)=>{if(d){m(d);return}if(!I)throw new Error(bi);p(I)})})}async sendCustomRequest(n,u){if(!this._connected)throw new Error(oe);switch(n.method){case"eth_accounts":return this.accounts;case"eth_chainId":return Er(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":n.params&&(n.params[0]=Ne(n.params[0]));break;case"personal_sign":n.params&&(n.params=lr(n.params));break}const p=this._formatRequest(n);return await this._sendCallRequest(p,u)}approveRequest(n){if(ce(n)){const u=this._formatResponse(n);this._sendResponse(u)}else throw new Error(Si)}rejectRequest(n){if(me(n)){const u=this._formatResponse(n);this._sendResponse(u)}else throw new Error(xi)}transportClose(){this._transport.close()}async _sendRequest(n,u){const p=this._formatRequest(n),m=await this._encrypt(p),d=typeof(u==null?void 0:u.topic)<"u"?u.topic:this.peerId,I=JSON.stringify(m),L=typeof(u==null?void 0:u.forcePushNotification)<"u"?!u.forcePushNotification:ii(p);this._transport.send(I,d,L)}async _sendResponse(n){const u=await this._encrypt(n),p=this.peerId,m=JSON.stringify(u),d=!0;this._transport.send(m,p,d)}async _sendSessionRequest(n,u,p){this._sendRequest(n,p),this._subscribeToSessionResponse(n.id,u)}_sendCallRequest(n,u){return this._sendRequest(n,u),this._eventManager.trigger({event:"call_request_sent",params:[{request:n,options:u}]}),this._subscribeToCallResponse(n.id)}_formatRequest(n){if(typeof n.method>"u")throw new Error(Oi);return{id:typeof n.id>"u"?Xn():n.id,jsonrpc:"2.0",method:n.method,params:typeof n.params>"u"?[]:n.params}}_formatResponse(n){if(typeof n.id>"u")throw new Error(Ri);const u={id:n.id,jsonrpc:"2.0"};if(me(n)){const p=ai(n.error);return Object.assign(Object.assign(Object.assign({},u),n),{error:p})}else if(ce(n))return Object.assign(Object.assign({},u),n);throw new Error(mr)}_handleSessionDisconnect(n){const u=n||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),br(We)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:u}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(n,u){u?u.approved?(this._connected?(u.chainId&&(this.chainId=u.chainId),u.accounts&&(this.accounts=u.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,u.chainId&&(this.chainId=u.chainId),u.accounts&&(this.accounts=u.accounts),u.peerId&&!this.peerId&&(this.peerId=u.peerId),u.peerMeta&&!this.peerMeta&&(this.peerMeta=u.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(n):this._handleSessionDisconnect(n)}async _handleIncomingMessages(n){if(![this.clientId,this.handshakeTopic].includes(n.topic))return;let p;try{p=JSON.parse(n.payload)}catch{return}const m=await this._decrypt(p);m&&this._eventManager.trigger(m)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(n,u){this.on(`response:${n}`,u)}_subscribeToSessionResponse(n,u){this._subscribeToResponse(n,(p,m)=>{if(p){this._handleSessionResponse(p.message);return}ce(m)?this._handleSessionResponse(u,m.result):m.error&&m.error.message?this._handleSessionResponse(m.error.message):this._handleSessionResponse(u)})}_subscribeToCallResponse(n){return new Promise((u,p)=>{this._subscribeToResponse(n,(m,d)=>{if(m){p(m);return}ce(d)?u(d.result):d.error&&d.error.message?p(d.error):p(new Error(mr))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(n,u)=>{const{request:p}=u.params[0];if(un()&&this._signingMethods.includes(p.method)){const m=Mr(We);m&&(window.location.href=m.href)}}),this.on("wc_sessionRequest",(n,u)=>{n&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:n.toString()}]}),this.handshakeId=u.id,this.peerId=u.params[0].peerId,this.peerMeta=u.params[0].peerMeta;const p=Object.assign(Object.assign({},u),{method:"session_request"});this._eventManager.trigger(p)}),this.on("wc_sessionUpdate",(n,u)=>{n&&this._handleSessionResponse(n.message),this._handleSessionResponse("Session disconnected",u.params[0])})}_initTransport(){this._transport.on("message",n=>this._handleIncomingMessages(n)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const n=this.protocol,u=this.handshakeTopic,p=this.version,m=encodeURIComponent(this.bridge),d=this.key;return`${n}:${u}@${p}?bridge=${m}&key=${d}`}_parseUri(n){const u=vi(n);if(u.protocol===this.protocol){if(!u.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const p=u.handshakeTopic;if(!u.bridge)throw Error("Invalid or missing bridge url parameter value");const m=decodeURIComponent(u.bridge);if(!u.key)throw Error("Invalid or missing key parameter value");const d=u.key;return{handshakeTopic:p,bridge:m,key:d}}else throw new Error(Ii)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(n){const u=this._key;return this._cryptoLib&&u?await this._cryptoLib.encrypt(n,u):null}async _decrypt(n){const u=this._key;return this._cryptoLib&&u?await this._cryptoLib.decrypt(n,u):null}_getStorageSession(){let n=null;return this._sessionStorage&&(n=this._sessionStorage.getSession()),n}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(n){if(!n.url||typeof n.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!n.type||typeof n.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!n.token||typeof n.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const u={bridge:this.bridge,topic:this.clientId,type:n.type,token:n.token,peerName:"",language:n.language||""};this.on("connect",async(p,m)=>{if(p)throw p;if(n.peerMeta){const d=m.params[0].peerMeta.name;u.peerName=d}try{if(!(await(await fetch(`${n.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(u)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function ji(o){return le.getBrowerCrypto().getRandomValues(new Uint8Array(o))}const Nr=256,Fr=Nr,Wi=Nr,$t="AES-CBC",Di=`SHA-${Fr}`,$e="HMAC",$i="encrypt",Hi="decrypt",Ji="sign",Ki="verify";function zi(o){return o===$t?{length:Fr,name:$t}:{hash:{name:Di},name:$e}}function Zi(o){return o===$t?[$i,Hi]:[Ji,Ki]}async function Ge(o,n=$t){return le.getSubtleCrypto().importKey("raw",o,zi(n),!0,Zi(n))}async function Gi(o,n,u){const p=le.getSubtleCrypto(),m=await Ge(n,$t),d=await p.encrypt({iv:o,name:$t},m,u);return new Uint8Array(d)}async function Vi(o,n,u){const p=le.getSubtleCrypto(),m=await Ge(n,$t),d=await p.decrypt({iv:o,name:$t},m,u);return new Uint8Array(d)}async function Qi(o,n){const u=le.getSubtleCrypto(),p=await Ge(o,$e),m=await u.sign({length:Wi,name:$e},p,n);return new Uint8Array(m)}function Xi(o,n,u){return Gi(o,n,u)}function Yi(o,n,u){return Vi(o,n,u)}async function Lr(o,n){return await Qi(o,n)}async function Ur(o){const n=(o||256)/8,u=ji(n);return Wn(we(u))}async function Pr(o,n){const u=ae(o.data),p=ae(o.iv),m=ae(o.hmac),d=se(m,!1),I=Ir(u,p),L=await Lr(n,I),q=se(L,!1);return Dt(d)===Dt(q)}async function to(o,n,u){const p=he(De(n)),m=u||await Ur(128),d=he(De(m)),I=se(d,!1),L=JSON.stringify(o),q=Cn(L),P=await Xi(d,p,q),Ot=se(P,!1),K=Ir(P,d),H=await Lr(p,K),D=se(H,!1);return{data:Ot,hmac:D,iv:I}}async function eo(o,n){const u=he(De(n));if(!u)throw new Error("Missing key: required for decryption");if(!await Pr(o,u))return null;const m=ae(o.data),d=ae(o.iv),I=await Yi(d,u,m),L=En(I);let q;try{q=JSON.parse(L)}catch{return null}return q}const wo=Object.freeze(Object.defineProperty({__proto__:null,decrypt:eo,encrypt:to,generateKey:Ur,verifyHmac:Pr},Symbol.toStringTag,{value:"Module"}));export{br as A,mn as B,yn as C,go as D,_r as E,yo as F,wo as G,lr as H,Xn as I,Sr as J,mo as K,Ke as a,co as b,uo as c,Je as d,ao as e,po as f,nr as g,so as h,io as i,oo as j,Mr as k,ze as l,lo as m,pn as n,fo as o,vo as p,wn as q,dn as r,no as s,ho as t,hn as u,ln as v,fn as w,un as x,cn as y,We as z};
